"use strict";
(self["webpackChunkthirdweb_learn_theme"] = self["webpackChunkthirdweb_learn_theme"] || []).push([["vendors-node_modules_walletconnect_ethereum-provider_dist_index_es_js"],{

/***/ "./node_modules/@walletconnect/ethereum-provider/dist/index.es.js":
/*!************************************************************************!*\
  !*** ./node_modules/@walletconnect/ethereum-provider/dist/index.es.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EthereumProvider: () => (/* binding */ Y),
/* harmony export */   OPTIONAL_EVENTS: () => (/* binding */ U),
/* harmony export */   OPTIONAL_METHODS: () => (/* binding */ D),
/* harmony export */   REQUIRED_EVENTS: () => (/* binding */ u),
/* harmony export */   REQUIRED_METHODS: () => (/* binding */ p),
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/utils */ "./node_modules/@walletconnect/ethereum-provider/node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var _walletconnect_universal_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/universal-provider */ "./node_modules/@walletconnect/universal-provider/dist/index.es.js");
const j="wc",$="ethereum_provider",q=`${j}@${2}:${$}:`,N="https://rpc.walletconnect.com/v1/",p=["eth_sendTransaction","personal_sign"],D=["eth_accounts","eth_requestAccounts","eth_call","eth_getBalance","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],u=["chainChanged","accountsChanged"],U=["message","disconnect","connect"];var Q=Object.defineProperty,L=Object.defineProperties,H=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,y=(a,t,s)=>t in a?Q(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,I=(a,t)=>{for(var s in t||(t={}))G.call(t,s)&&y(a,s,t[s]);if(_)for(var s of _(t))K.call(t,s)&&y(a,s,t[s]);return a},O=(a,t)=>L(a,H(t));function C(a){return Number(a[0].split(":")[1])}function w(a){return`0x${a.toString(16)}`}function V(a){const{chains:t,optionalChains:s,methods:i,optionalMethods:e,events:n,optionalEvents:c,rpcMap:h}=a;if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isValidArray)(t))throw new Error("Invalid chains");const o=t,r=i||p,f=n||u,M={[C(o)]:h[C(o)]},E={chains:o,methods:r,events:f,rpcMap:M},l=n?.filter(g=>!u.includes(g)),d=i?.filter(g=>!p.includes(g));if(!s&&!c&&!e&&!(l!=null&&l.length)&&!(d!=null&&d.length))return{required:E};const b=l?.length&&d?.length||!s,A={chains:[...new Set(b?o.concat(s||[]):s)],methods:[...new Set(r.concat(e||[]))],events:[...new Set(f.concat(c||[]))],rpcMap:h};return{required:E,optional:A}}class m{constructor(){this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=q,this.on=(t,s)=>(this.events.on(t,s),this),this.once=(t,s)=>(this.events.once(t,s),this),this.removeListener=(t,s)=>(this.events.removeListener(t,s),this),this.off=(t,s)=>(this.events.off(t,s),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const s=new m;return await s.initialize(t),s}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,s){this.signer.sendAsync(t,s,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:s,optional:i}=V(this.rpc);try{const e=await new Promise(async(c,h)=>{var o;this.rpc.showQrModal&&((o=this.modal)==null||o.subscribeModal(r=>{!r.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),h(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(O(I({namespaces:{[this.namespace]:s}},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t?.pairingTopic})).then(r=>{c(r)}).catch(r=>{h(new Error(r.message))})});if(!e)return;this.setChainIds(this.rpc.chains);const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.getAccountsFromNamespaces)(e.namespaces,[this.namespace]);this.setAccounts(n),this.events.emit("connect",{chainId:w(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:s}=t,{event:i}=s;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const s=parseInt(t);this.chainId=s,this.events.emit("chainChanged",w(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",O(I({},(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.getSdkError)("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var s,i;this.rpc.showQrModal&&((s=this.modal)==null||s.closeModal(),(i=this.modal)==null||i.openModal({uri:t})),this.events.emit("display_uri",t)})}setHttpProvider(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const s=t.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));s.length&&(this.chainId=s[0],this.events.emit("chainChanged",w(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const s=this.parseChainId(t);this.chainId=s,this.setHttpProvider(s)}}parseAccountId(t){const[s,i,e]=t.split(":");return{chainId:`${s}:${i}`,address:e}}setAccounts(t){this.accounts=t.filter(s=>this.parseChainId(this.parseAccountId(s).chainId)===this.chainId).map(s=>this.parseAccountId(s).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var s,i;return{chains:((s=t.chains)==null?void 0:s.map(e=>this.formatChainId(e)))||[`${this.namespace}:1`],optionalChains:t.optionalChains?t.optionalChains.map(e=>this.formatChainId(e)):void 0,methods:t?.methods||p,events:t?.events||u,optionalMethods:t?.optionalMethods||[],optionalEvents:t?.optionalEvents||[],rpcMap:t?.rpcMap||this.buildRpcMap(t.chains.concat(t.optionalChains||[]),t.projectId),showQrModal:Boolean(t?.showQrModal),qrModalOptions:(i=t?.qrModalOptions)!=null?i:void 0,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,s){const i={};return t.forEach(e=>{i[e]=this.getRpcUrl(e,s)}),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=C(this.rpc.chains),this.signer=await _walletconnect_universal_provider__WEBPACK_IMPORTED_MODULE_2__.UniversalProvider.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal)try{const{Web3Modal:s}=await __webpack_require__.e(/*! import() */ "vendors-node_modules_web3modal_standalone_dist_index_es_js").then(__webpack_require__.bind(__webpack_require__, /*! @web3modal/standalone */ "./node_modules/@web3modal/standalone/dist/index.es.js"));this.modal=new s(I({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch{throw new Error("To use QR modal, please install @web3modal/standalone package")}}loadConnectOpts(t){if(!t)return;const{chains:s,optionalChains:i,rpcMap:e}=t;s&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isValidArray)(s)&&(this.rpc.chains=s.map(n=>this.formatChainId(n)),s.forEach(n=>{this.rpc.rpcMap[n]=e?.[n]||this.getRpcUrl(n)})),i&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_1__.isValidArray)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(n=>this.formatChainId(n)),i.forEach(n=>{this.rpc.rpcMap[n]=e?.[n]||this.getRpcUrl(n)}))}getRpcUrl(t,s){var i;return((i=this.rpc.rpcMap)==null?void 0:i[t])||`${N}?chainId=eip155:${t}&projectId=${s||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`);this.setChainIds(t?[this.formatChainId(t)]:this.session.namespaces[this.namespace].accounts),this.setAccounts(this.session.namespaces[this.namespace].accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(s=>this.parseAccount(s))}}const Y=m;
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/ethereum-provider/node_modules/@walletconnect/utils/dist/index.es.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/ethereum-provider/node_modules/@walletconnect/utils/dist/index.es.js ***!
  \**********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BASE10: () => (/* binding */ G),
/* harmony export */   BASE16: () => (/* binding */ f),
/* harmony export */   BASE64: () => (/* binding */ K),
/* harmony export */   COLON: () => (/* binding */ kn),
/* harmony export */   DEFAULT_DEPTH: () => (/* binding */ Z),
/* harmony export */   EMPTY_SPACE: () => (/* binding */ L),
/* harmony export */   ENV_MAP: () => (/* binding */ _),
/* harmony export */   ONE_THOUSAND: () => (/* binding */ Ln),
/* harmony export */   REACT_NATIVE_PRODUCT: () => (/* binding */ Ue),
/* harmony export */   RELAYER_DEFAULT_PROTOCOL: () => (/* binding */ xe),
/* harmony export */   SDK_TYPE: () => (/* binding */ we),
/* harmony export */   SLASH: () => (/* binding */ _e),
/* harmony export */   TYPE_0: () => (/* binding */ Y),
/* harmony export */   TYPE_1: () => (/* binding */ U),
/* harmony export */   UTF8: () => (/* binding */ k),
/* harmony export */   appendToQueryString: () => (/* binding */ $e),
/* harmony export */   assertType: () => (/* binding */ zn),
/* harmony export */   buildApprovedNamespaces: () => (/* binding */ Ot),
/* harmony export */   calcExpiry: () => (/* binding */ rt),
/* harmony export */   capitalize: () => (/* binding */ Qn),
/* harmony export */   capitalizeWord: () => (/* binding */ Le),
/* harmony export */   createDelayedPromise: () => (/* binding */ Zn),
/* harmony export */   createExpiringPromise: () => (/* binding */ Xn),
/* harmony export */   decodeTypeByte: () => (/* binding */ j),
/* harmony export */   decrypt: () => (/* binding */ Cn),
/* harmony export */   deriveSymKey: () => (/* binding */ Un),
/* harmony export */   deserialize: () => (/* binding */ Q),
/* harmony export */   encodeTypeByte: () => (/* binding */ Se),
/* harmony export */   encrypt: () => (/* binding */ jn),
/* harmony export */   engineEvent: () => (/* binding */ st),
/* harmony export */   enumify: () => (/* binding */ Jn),
/* harmony export */   formatAccountId: () => (/* binding */ Ee),
/* harmony export */   formatAccountWithChain: () => (/* binding */ gn),
/* harmony export */   formatChainId: () => (/* binding */ ye),
/* harmony export */   formatExpirerTarget: () => (/* binding */ ne),
/* harmony export */   formatIdTarget: () => (/* binding */ nt),
/* harmony export */   formatMessage: () => (/* binding */ Pn),
/* harmony export */   formatMessageContext: () => (/* binding */ Bn),
/* harmony export */   formatRelayParams: () => (/* binding */ ze),
/* harmony export */   formatRelayRpcUrl: () => (/* binding */ Hn),
/* harmony export */   formatTopicTarget: () => (/* binding */ et),
/* harmony export */   formatUA: () => (/* binding */ Me),
/* harmony export */   formatUri: () => (/* binding */ pt),
/* harmony export */   generateKeyPair: () => (/* binding */ Rn),
/* harmony export */   generateRandomBytes32: () => (/* binding */ An),
/* harmony export */   getAccountsChains: () => (/* binding */ T),
/* harmony export */   getAccountsFromNamespaces: () => (/* binding */ bn),
/* harmony export */   getAddressFromAccount: () => (/* binding */ he),
/* harmony export */   getAddressesFromAccounts: () => (/* binding */ Nn),
/* harmony export */   getAppMetadata: () => (/* binding */ xn),
/* harmony export */   getChainFromAccount: () => (/* binding */ ve),
/* harmony export */   getChainsFromAccounts: () => (/* binding */ ge),
/* harmony export */   getChainsFromNamespace: () => (/* binding */ V),
/* harmony export */   getChainsFromNamespaces: () => (/* binding */ On),
/* harmony export */   getChainsFromRequiredNamespaces: () => (/* binding */ Sn),
/* harmony export */   getDidAddress: () => (/* binding */ be),
/* harmony export */   getDidAddressSegments: () => (/* binding */ M),
/* harmony export */   getDidChainId: () => (/* binding */ Ne),
/* harmony export */   getEnvironment: () => (/* binding */ ee),
/* harmony export */   getHttpUrl: () => (/* binding */ qn),
/* harmony export */   getInternalError: () => (/* binding */ N),
/* harmony export */   getJavascriptID: () => (/* binding */ Ve),
/* harmony export */   getJavascriptOS: () => (/* binding */ De),
/* harmony export */   getLastItems: () => (/* binding */ ke),
/* harmony export */   getNamespacedDidChainId: () => (/* binding */ In),
/* harmony export */   getNamespacesChains: () => (/* binding */ Ye),
/* harmony export */   getNamespacesEventsForChainId: () => (/* binding */ Je),
/* harmony export */   getNamespacesMethodsForChainId: () => (/* binding */ We),
/* harmony export */   getRelayClientMetadata: () => (/* binding */ Fn),
/* harmony export */   getRelayProtocolApi: () => (/* binding */ ct),
/* harmony export */   getRelayProtocolName: () => (/* binding */ it),
/* harmony export */   getRequiredNamespacesFromNamespaces: () => (/* binding */ bt),
/* harmony export */   getSdkError: () => (/* binding */ R),
/* harmony export */   getUniqueValues: () => (/* binding */ B),
/* harmony export */   hasOverlap: () => (/* binding */ b),
/* harmony export */   hashKey: () => (/* binding */ _n),
/* harmony export */   hashMessage: () => (/* binding */ wn),
/* harmony export */   isBrowser: () => (/* binding */ Ce),
/* harmony export */   isCaipNamespace: () => (/* binding */ te),
/* harmony export */   isConformingNamespaces: () => (/* binding */ cn),
/* harmony export */   isExpired: () => (/* binding */ ot),
/* harmony export */   isNode: () => (/* binding */ X),
/* harmony export */   isProposalStruct: () => (/* binding */ Rt),
/* harmony export */   isReactNative: () => (/* binding */ je),
/* harmony export */   isSessionCompatible: () => (/* binding */ Pt),
/* harmony export */   isSessionStruct: () => (/* binding */ At),
/* harmony export */   isTypeOneEnvelope: () => (/* binding */ Dn),
/* harmony export */   isUndefined: () => (/* binding */ S),
/* harmony export */   isValidAccountId: () => (/* binding */ Ze),
/* harmony export */   isValidAccounts: () => (/* binding */ nn),
/* harmony export */   isValidActions: () => (/* binding */ rn),
/* harmony export */   isValidArray: () => (/* binding */ C),
/* harmony export */   isValidChainId: () => (/* binding */ H),
/* harmony export */   isValidChains: () => (/* binding */ Xe),
/* harmony export */   isValidController: () => (/* binding */ Ut),
/* harmony export */   isValidErrorReason: () => (/* binding */ $t),
/* harmony export */   isValidEvent: () => (/* binding */ Mt),
/* harmony export */   isValidId: () => (/* binding */ jt),
/* harmony export */   isValidNamespaceAccounts: () => (/* binding */ tn),
/* harmony export */   isValidNamespaceActions: () => (/* binding */ se),
/* harmony export */   isValidNamespaceChains: () => (/* binding */ en),
/* harmony export */   isValidNamespaceMethodsOrEvents: () => (/* binding */ oe),
/* harmony export */   isValidNamespaces: () => (/* binding */ on),
/* harmony export */   isValidNamespacesChainId: () => (/* binding */ Kt),
/* harmony export */   isValidNamespacesEvent: () => (/* binding */ Lt),
/* harmony export */   isValidNamespacesRequest: () => (/* binding */ kt),
/* harmony export */   isValidNumber: () => (/* binding */ F),
/* harmony export */   isValidObject: () => (/* binding */ x),
/* harmony export */   isValidParams: () => (/* binding */ Ct),
/* harmony export */   isValidRelay: () => (/* binding */ sn),
/* harmony export */   isValidRelays: () => (/* binding */ wt),
/* harmony export */   isValidRequest: () => (/* binding */ Dt),
/* harmony export */   isValidRequestExpiry: () => (/* binding */ Ht),
/* harmony export */   isValidRequiredNamespaces: () => (/* binding */ _t),
/* harmony export */   isValidResponse: () => (/* binding */ Vt),
/* harmony export */   isValidString: () => (/* binding */ m),
/* harmony export */   isValidUrl: () => (/* binding */ Tt),
/* harmony export */   mapEntries: () => (/* binding */ Wn),
/* harmony export */   mapToObj: () => (/* binding */ Gn),
/* harmony export */   mergeArrays: () => (/* binding */ O),
/* harmony export */   normalizeNamespaces: () => (/* binding */ re),
/* harmony export */   objToMap: () => (/* binding */ Yn),
/* harmony export */   parseAccountId: () => (/* binding */ z),
/* harmony export */   parseChainId: () => (/* binding */ me),
/* harmony export */   parseContextNames: () => (/* binding */ Ke),
/* harmony export */   parseExpirerTarget: () => (/* binding */ tt),
/* harmony export */   parseNamespaceKey: () => (/* binding */ Qe),
/* harmony export */   parseRelayParams: () => (/* binding */ qe),
/* harmony export */   parseUri: () => (/* binding */ ft),
/* harmony export */   serialize: () => (/* binding */ Ie),
/* harmony export */   validateDecoding: () => (/* binding */ $n),
/* harmony export */   validateEncoding: () => (/* binding */ Pe)
/* harmony export */ });
/* harmony import */ var _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stablelib/chacha20poly1305 */ "./node_modules/@stablelib/chacha20poly1305/lib/chacha20poly1305.js");
/* harmony import */ var _stablelib_hkdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stablelib/hkdf */ "./node_modules/@stablelib/hkdf/lib/hkdf.js");
/* harmony import */ var _stablelib_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stablelib/random */ "./node_modules/@stablelib/random/lib/random.js");
/* harmony import */ var _stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stablelib/sha256 */ "./node_modules/@stablelib/sha256/lib/sha256.js");
/* harmony import */ var _stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stablelib/x25519 */ "./node_modules/@stablelib/x25519/lib/x25519.js");
/* harmony import */ var uint8arrays__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uint8arrays */ "./node_modules/uint8arrays/esm/src/index.js");
/* harmony import */ var detect_browser__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! detect-browser */ "./node_modules/detect-browser/es/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @walletconnect/window-getters */ "./node_modules/@walletconnect/window-getters/dist/cjs/index.js");
/* harmony import */ var _walletconnect_window_metadata__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @walletconnect/window-metadata */ "./node_modules/@walletconnect/window-metadata/dist/cjs/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! query-string */ "./node_modules/@walletconnect/ethereum-provider/node_modules/query-string/index.js");
/* harmony import */ var _walletconnect_relay_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @walletconnect/relay-api */ "./node_modules/@walletconnect/relay-api/dist/esm/index.js");
/* provided dependency */ var process = __webpack_require__(/*! ./node_modules/process/browser.js */ "./node_modules/process/browser.js");
const D=":";function me(e){const[n,t]=e.split(D);return{namespace:n,reference:t}}function ye(e){const{namespace:n,reference:t}=e;return[n,t].join(D)}function z(e){const[n,t,r]=e.split(D);return{namespace:n,reference:t,address:r}}function Ee(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join(D)}function B(e,n){const t=[];return e.forEach(r=>{const o=n(r);t.includes(o)||t.push(o)}),t}function he(e){const{address:n}=z(e);return n}function ve(e){const{namespace:n,reference:t}=z(e);return ye({namespace:n,reference:t})}function gn(e,n){const{namespace:t,reference:r}=me(n);return Ee({namespace:t,reference:r,address:e})}function Nn(e){return B(e,he)}function ge(e){return B(e,ve)}function bn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.accounts)}),t}function On(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...ge(o.accounts))}),t}function Sn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...V(r,o))}),t}function V(e,n){return e.includes(":")?[e]:n.chains||[]}const M=e=>e?.split(":"),Ne=e=>{const n=e&&M(e);if(n)return n[3]},In=e=>{const n=e&&M(e);if(n)return n[2]+":"+n[3]},be=e=>{const n=e&&M(e);if(n)return n.pop()},Pn=(e,n)=>{const t=`${e.domain} wants you to sign in with your Ethereum account:`,r=be(n),o=e.statement,s=`URI: ${e.aud}`,c=`Version: ${e.version}`,d=`Chain ID: ${Ne(n)}`,l=`Nonce: ${e.nonce}`,i=`Issued At: ${e.iat}`,u=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(a=>`- ${a}`).join(`
`)}`:void 0;return[t,r,"",o,"",s,c,d,l,i,u].filter(a=>a!=null).join(`
`)},G="base10",f="base16",K="base64pad",k="utf8",Y=0,U=1,Tn=0,Oe=1,W=12,J=32;function Rn(){const e=_stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__.generateKeyPair();return{privateKey:(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e.secretKey,f),publicKey:(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e.publicKey,f)}}function An(){const e=(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(J);return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e,f)}function Un(e,n){const t=_stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__.sharedKey((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,f),(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(n,f)),r=new _stablelib_hkdf__WEBPACK_IMPORTED_MODULE_1__.HKDF(_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.SHA256,t).expand(J);return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(r,f)}function _n(e){const n=(0,_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.hash)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,f));return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(n,f)}function wn(e){const n=(0,_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.hash)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,k));return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(n,f)}function Se(e){return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(`${e}`,G)}function j(e){return Number((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e,G))}function jn(e){const n=Se(typeof e.type<"u"?e.type:Y);if(j(n)===U&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.senderPublicKey,f):void 0,r=typeof e.iv<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.iv,f):(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(W),o=new _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__.ChaCha20Poly1305((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.symKey,f)).seal(r,(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.message,k));return Ie({type:n,sealed:o,iv:r,senderPublicKey:t})}function Cn(e){const n=new _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__.ChaCha20Poly1305((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.symKey,f)),{sealed:t,iv:r}=Q(e.encoded),o=n.open(r,t);if(o===null)throw new Error("Failed to decrypt");return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(o,k)}function Ie(e){if(j(e.type)===U){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.concat)([e.type,e.senderPublicKey,e.iv,e.sealed]),K)}return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.concat)([e.type,e.iv,e.sealed]),K)}function Q(e){const n=(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,K),t=n.slice(Tn,Oe),r=Oe;if(j(t)===U){const d=r+J,l=d+W,i=n.slice(r,d),u=n.slice(d,l),a=n.slice(l);return{type:t,sealed:a,iv:u,senderPublicKey:i}}const o=r+W,s=n.slice(r,o),c=n.slice(o);return{type:t,sealed:c,iv:s}}function $n(e,n){const t=Q(e);return Pe({type:j(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(t.senderPublicKey,f):void 0,receiverPublicKey:n?.receiverPublicKey})}function Pe(e){const n=e?.type||Y;if(n===U){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Dn(e){return e.type===U&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Vn=Object.defineProperty,Te=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Re=(e,n,t)=>n in e?Vn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ae=(e,n)=>{for(var t in n||(n={}))Mn.call(n,t)&&Re(e,t,n[t]);if(Te)for(var t of Te(n))Kn.call(n,t)&&Re(e,t,n[t]);return e};const Ue="ReactNative",_={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},L=" ",kn=":",_e="/",Z=2,Ln=1e3,we="js";function X(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function je(){return!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getDocument)()&&!!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getNavigator)()&&navigator.product===Ue}function Ce(){return!X()&&!!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getNavigator)()}function ee(){return je()?_.reactNative:X()?_.node:Ce()?_.browser:_.unknown}function $e(e,n){let t=query_string__WEBPACK_IMPORTED_MODULE_9__.parse(e);return t=Ae(Ae({},t),n),e=query_string__WEBPACK_IMPORTED_MODULE_9__.stringify(t),e}function xn(){return (0,_walletconnect_window_metadata__WEBPACK_IMPORTED_MODULE_8__.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function Fn(e,n){var t;const r=ee(),o={protocol:e,version:n,env:r};return r==="browser"&&(o.host=((t=(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getLocation)())==null?void 0:t.host)||"unknown"),o}function De(){const e=(0,detect_browser__WEBPACK_IMPORTED_MODULE_11__.detect)();if(e===null)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[n,e.name,e.version].join("-"):[n,e.version].join("-")}function Ve(){var e;const n=ee();return n===_.browser?[n,((e=(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getLocation)())==null?void 0:e.host)||"unknown"].join(":"):n}function Me(e,n,t){const r=De(),o=Ve();return[[e,n].join("-"),[we,t].join("-"),r,o].join("/")}function Hn({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:c}){const d=t.split("?"),l=Me(e,n,r),i={auth:o,ua:l,projectId:s,useOnCloseEvent:c||void 0},u=$e(d[1]||"",i);return d[0]+"?"+u}function qn(e){let n=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const t=typeof n<"u"?e.split("://")[1]:e;return n=n==="wss"?"https":"http",[n,t].join("://")}function zn(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid "${n}" param`)}function Ke(e,n=Z){return ke(e.split(_e),n)}function Bn(e){return Ke(e).join(L)}function b(e,n){return e.filter(t=>n.includes(t)).length===e.length}function ke(e,n=Z){return e.slice(Math.max(e.length-n,0))}function Gn(e){return Object.fromEntries(e.entries())}function Yn(e){return new Map(Object.entries(e))}function Wn(e,n){const t={};return Object.keys(e).forEach(r=>{t[r]=n(e[r])}),t}const Jn=e=>e;function Le(e){return e.trim().replace(/^\w/,n=>n.toUpperCase())}function Qn(e){return e.split(L).map(n=>Le(n)).join(L)}function Zn(e=_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,n){const t=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e||_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES);let r,o,s;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c))},reject:c=>{s&&o&&(clearTimeout(s),o(c))},done:()=>new Promise((c,d)=>{s=setTimeout(()=>{d(new Error(n))},t),r=c,o=d})}}function Xn(e,n,t){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(t)),n);try{const c=await e;r(c)}catch(c){o(c)}clearTimeout(s)})}function ne(e,n){if(typeof n=="string"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function et(e){return ne("topic",e)}function nt(e){return ne("id",e)}function tt(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if(n==="topic"&&typeof t=="string")r.topic=t;else if(n==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function rt(e,n){return (0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.fromMiliseconds)((n||Date.now())+(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e))}function ot(e){return Date.now()>=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e)}function st(e,n){return`${e}${n?`:${n}`:""}`}function O(e=[],n=[]){return[...new Set([...e,...n])]}const xe="irn";function it(e){return e?.relay||{protocol:xe}}function ct(e){const n=_walletconnect_relay_api__WEBPACK_IMPORTED_MODULE_10__.RELAY_JSONRPC[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var at=Object.defineProperty,Fe=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,He=(e,n,t)=>n in e?at(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,lt=(e,n)=>{for(var t in n||(n={}))ut.call(n,t)&&He(e,t,n[t]);if(Fe)for(var t of Fe(n))dt.call(n,t)&&He(e,t,n[t]);return e};function qe(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,""),c=e[o];t[s]=c}}),t}function ft(e){const n=e.indexOf(":"),t=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split("@"),s=typeof t<"u"?e.substring(t):"",c=query_string__WEBPACK_IMPORTED_MODULE_9__.parse(s);return{protocol:r,topic:o[0],version:parseInt(o[1],10),symKey:c.symKey,relay:qe(c)}}function ze(e,n="-"){const t="relay",r={};return Object.keys(e).forEach(o=>{const s=t+n+o;e[o]&&(r[s]=e[o])}),r}function pt(e){return`${e.protocol}:${e.topic}@${e.version}?`+query_string__WEBPACK_IMPORTED_MODULE_9__.stringify(lt({symKey:e.symKey},ze(e.relay)))}var mt=Object.defineProperty,yt=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Ge=(e,n,t)=>n in e?mt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,gt=(e,n)=>{for(var t in n||(n={}))ht.call(n,t)&&Ge(e,t,n[t]);if(Be)for(var t of Be(n))vt.call(n,t)&&Ge(e,t,n[t]);return e},Nt=(e,n)=>yt(e,Et(n));function T(e){const n=[];return e.forEach(t=>{const[r,o]=t.split(":");n.push(`${r}:${o}`)}),n}function Ye(e){const n=[];return Object.values(e).forEach(t=>{n.push(...T(t.accounts))}),n}function We(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.methods)}),t}function Je(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.events)}),t}function bt(e,n){const t=on(e,n);if(t)throw new Error(t.message);const r={};for(const[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return r}function Ot(e){const{requiredNamespaces:n,optionalNamespaces:t={},supportedNamespaces:r}=e,o=re(n),s=re(t),c={};Object.keys(r).forEach(i=>{const u=r[i].chains,a=r[i].methods,g=r[i].events,A=r[i].accounts;c[i]={chains:u,methods:a,events:g,accounts:A}});const d=cn(n,c,"approve()");if(d)throw new Error(d.message);const l={};return Object.keys(o).forEach(i=>{const u=r[i].chains.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.chains)==null?void 0:y.includes(v)}),a=r[i].methods.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.methods)==null?void 0:y.includes(v)}),g=r[i].events.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.events)==null?void 0:y.includes(v)}),A=u.map(v=>r[i].accounts.filter(p=>p.includes(v))).flat();l[i]={chains:u,methods:a,events:g,accounts:A}}),Object.keys(s).forEach(i=>{var u,a,g,A,v,p;if(!r[i])return;const y=(a=(u=s[i])==null?void 0:u.chains)==null?void 0:a.filter(I=>r[i].chains.includes(I)),un=r[i].methods.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.methods)==null?void 0:w.includes(I)}),dn=r[i].events.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.events)==null?void 0:w.includes(I)}),ln=y?.map(I=>r[i].accounts.filter(P=>P.includes(I))).flat();l[i]={chains:O((g=l[i])==null?void 0:g.chains,y),methods:O((A=l[i])==null?void 0:A.methods,un),events:O((v=l[i])==null?void 0:v.events,dn),accounts:O((p=l[i])==null?void 0:p.accounts,ln)}}),l}function te(e){return e.includes(":")}function Qe(e){return te(e)?e.split(":")[0]:e}function re(e){var n,t,r;const o={};if(!x(e))return o;for(const[s,c]of Object.entries(e)){const d=te(s)?[s]:c.chains,l=c.methods||[],i=c.events||[],u=Qe(s);o[u]=Nt(gt({},o[u]),{chains:O(d,(n=o[u])==null?void 0:n.chains),methods:O(l,(t=o[u])==null?void 0:t.methods),events:O(i,(r=o[u])==null?void 0:r.events)})}return o}const St={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},It={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N(e,n){const{message:t,code:r}=It[e];return{message:n?`${t} ${n}`:t,code:r}}function R(e,n){const{message:t,code:r}=St[e];return{message:n?`${t} ${n}`:t,code:r}}function C(e,n){return Array.isArray(e)?typeof n<"u"&&e.length?e.every(n):!0:!1}function x(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function S(e){return typeof e>"u"}function m(e,n){return n&&S(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function F(e,n){return n&&S(e)?!0:typeof e=="number"&&!isNaN(e)}function Pt(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t);let s=!0;return b(o,r)?(r.forEach(c=>{const{accounts:d,methods:l,events:i}=e.namespaces[c],u=T(d),a=t[c];(!b(V(c,a),u)||!b(a.methods,l)||!b(a.events,i))&&(s=!1)}),s):!1}function H(e){return m(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Ze(e){if(m(e,!1)&&e.includes(":")){const n=e.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&H(t)}}return!1}function Tt(e){if(m(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Rt(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function At(e){return e?.topic}function Ut(e,n){let t=null;return m(e?.publicKey,!1)||(t=N("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function oe(e){let n=!0;return C(e)?e.length&&(n=e.every(t=>m(t,!1))):n=!1,n}function Xe(e,n,t){let r=null;return C(n)?n.forEach(o=>{r||(!H(o)||!o.includes(e))&&(r=R("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):r=R("UNSUPPORTED_CHAINS",`${t}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),r}function en(e,n){let t=null;return Object.entries(e).forEach(([r,o])=>{if(t)return;const s=Xe(r,V(r,o),`${n} requiredNamespace`);s&&(t=s)}),t}function nn(e,n){let t=null;return C(e)?e.forEach(r=>{t||Ze(r)||(t=R("UNSUPPORTED_ACCOUNTS",`${n}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=R("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function tn(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=nn(r?.accounts,`${n} namespace`);o&&(t=o)}),t}function rn(e,n){let t=null;return oe(e?.methods)?oe(e?.events)||(t=R("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=R("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}function se(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=rn(r,`${n}, namespace`);o&&(t=o)}),t}function _t(e,n,t){let r=null;if(e&&x(e)){const o=se(e,n);o&&(r=o);const s=en(e,n);s&&(r=s)}else r=N("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function on(e,n){let t=null;if(e&&x(e)){const r=se(e,n);r&&(t=r);const o=tn(e,n);o&&(t=o)}else t=N("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function sn(e){return m(e.protocol,!0)}function wt(e,n){let t=!1;return n&&!e?t=!0:e&&C(e)&&e.length&&e.forEach(r=>{t=sn(r)}),t}function jt(e){return typeof e=="number"}function Ct(e){return typeof e<"u"&&typeof e!==null}function $t(e){return!(!e||typeof e!="object"||!e.code||!F(e.code,!1)||!e.message||!m(e.message,!1))}function Dt(e){return!(S(e)||!m(e.method,!1))}function Vt(e){return!(S(e)||S(e.result)&&S(e.error)||!F(e.id,!1)||!m(e.jsonrpc,!1))}function Mt(e){return!(S(e)||!m(e.name,!1))}function Kt(e,n){return!(!H(n)||!Ye(e).includes(n))}function kt(e,n,t){return m(t,!1)?We(e,n).includes(t):!1}function Lt(e,n,t){return m(t,!1)?Je(e,n).includes(t):!1}function cn(e,n,t){let r=null;const o=xt(e),s=Ft(n),c=Object.keys(o),d=Object.keys(s),l=an(Object.keys(e)),i=an(Object.keys(n)),u=l.filter(a=>!i.includes(a));return u.length&&(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(n).toString()}`)),b(c,d)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${d.toString()}`)),Object.keys(n).forEach(a=>{if(!a.includes(":")||r)return;const g=T(n[a].accounts);g.includes(a)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${a}
        Required: ${a}
        Approved: ${g.toString()}`))}),c.forEach(a=>{r||(b(o[a].methods,s[a].methods)?b(o[a].events,s[a].events)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`))}),r}function xt(e){const n={};return Object.keys(e).forEach(t=>{var r;t.includes(":")?n[t]=e[t]:(r=e[t].chains)==null||r.forEach(o=>{n[o]={methods:e[t].methods,events:e[t].events}})}),n}function an(e){return[...new Set(e.map(n=>n.includes(":")?n.split(":")[0]:n))]}function Ft(e){const n={};return Object.keys(e).forEach(t=>{if(t.includes(":"))n[t]=e[t];else{const r=T(e[t].accounts);r?.forEach(o=>{n[o]={accounts:e[t].accounts.filter(s=>s.includes(`${o}:`)),methods:e[t].methods,events:e[t].events}})}}),n}function Ht(e,n){return F(e,!1)&&e<=n.max&&e>=n.min}
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/ethereum-provider/node_modules/filter-obj/index.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@walletconnect/ethereum-provider/node_modules/filter-obj/index.js ***!
  \****************************************************************************************/
/***/ ((module) => {


module.exports = function (obj, predicate) {
	var ret = {};
	var keys = Object.keys(obj);
	var isArr = Array.isArray(predicate);

	for (var i = 0; i < keys.length; i++) {
		var key = keys[i];
		var val = obj[key];

		if (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {
			ret[key] = val;
		}
	}

	return ret;
};


/***/ }),

/***/ "./node_modules/@walletconnect/ethereum-provider/node_modules/query-string/index.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@walletconnect/ethereum-provider/node_modules/query-string/index.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


const strictUriEncode = __webpack_require__(/*! strict-uri-encode */ "./node_modules/strict-uri-encode/index.js");
const decodeComponent = __webpack_require__(/*! decode-uri-component */ "./node_modules/decode-uri-component/index.js");
const splitOnFirst = __webpack_require__(/*! split-on-first */ "./node_modules/split-on-first/index.js");
const filterObject = __webpack_require__(/*! filter-obj */ "./node_modules/@walletconnect/ethereum-provider/node_modules/filter-obj/index.js");

const isNullOrUndefined = value => value === null || value === undefined;

const encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');

function encoderForArrayFormat(options) {
	switch (options.arrayFormat) {
		case 'index':
			return key => (result, value) => {
				const index = result.length;

				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), '[', index, ']'].join('')];
				}

				return [
					...result,
					[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')
				];
			};

		case 'bracket':
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), '[]'].join('')];
				}

				return [...result, [encode(key, options), '[]=', encode(value, options)].join('')];
			};

		case 'colon-list-separator':
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), ':list='].join('')];
				}

				return [...result, [encode(key, options), ':list=', encode(value, options)].join('')];
			};

		case 'comma':
		case 'separator':
		case 'bracket-separator': {
			const keyValueSep = options.arrayFormat === 'bracket-separator' ?
				'[]=' :
				'=';

			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				// Translate null to an empty string so that it doesn't serialize as 'null'
				value = value === null ? '' : value;

				if (result.length === 0) {
					return [[encode(key, options), keyValueSep, encode(value, options)].join('')];
				}

				return [[result, encode(value, options)].join(options.arrayFormatSeparator)];
			};
		}

		default:
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, encode(key, options)];
				}

				return [...result, [encode(key, options), '=', encode(value, options)].join('')];
			};
	}
}

function parserForArrayFormat(options) {
	let result;

	switch (options.arrayFormat) {
		case 'index':
			return (key, value, accumulator) => {
				result = /\[(\d*)\]$/.exec(key);

				key = key.replace(/\[\d*\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = {};
				}

				accumulator[key][result[1]] = value;
			};

		case 'bracket':
			return (key, value, accumulator) => {
				result = /(\[\])$/.exec(key);
				key = key.replace(/\[\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		case 'colon-list-separator':
			return (key, value, accumulator) => {
				result = /(:list)$/.exec(key);
				key = key.replace(/:list$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		case 'comma':
		case 'separator':
			return (key, value, accumulator) => {
				const isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);
				const isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));
				value = isEncodedArray ? decode(value, options) : value;
				const newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);
				accumulator[key] = newValue;
			};

		case 'bracket-separator':
			return (key, value, accumulator) => {
				const isArray = /(\[\])$/.test(key);
				key = key.replace(/\[\]$/, '');

				if (!isArray) {
					accumulator[key] = value ? decode(value, options) : value;
					return;
				}

				const arrayValue = value === null ?
					[] :
					value.split(options.arrayFormatSeparator).map(item => decode(item, options));

				if (accumulator[key] === undefined) {
					accumulator[key] = arrayValue;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], arrayValue);
			};

		default:
			return (key, value, accumulator) => {
				if (accumulator[key] === undefined) {
					accumulator[key] = value;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};
	}
}

function validateArrayFormatSeparator(value) {
	if (typeof value !== 'string' || value.length !== 1) {
		throw new TypeError('arrayFormatSeparator must be single character string');
	}
}

function encode(value, options) {
	if (options.encode) {
		return options.strict ? strictUriEncode(value) : encodeURIComponent(value);
	}

	return value;
}

function decode(value, options) {
	if (options.decode) {
		return decodeComponent(value);
	}

	return value;
}

function keysSorter(input) {
	if (Array.isArray(input)) {
		return input.sort();
	}

	if (typeof input === 'object') {
		return keysSorter(Object.keys(input))
			.sort((a, b) => Number(a) - Number(b))
			.map(key => input[key]);
	}

	return input;
}

function removeHash(input) {
	const hashStart = input.indexOf('#');
	if (hashStart !== -1) {
		input = input.slice(0, hashStart);
	}

	return input;
}

function getHash(url) {
	let hash = '';
	const hashStart = url.indexOf('#');
	if (hashStart !== -1) {
		hash = url.slice(hashStart);
	}

	return hash;
}

function extract(input) {
	input = removeHash(input);
	const queryStart = input.indexOf('?');
	if (queryStart === -1) {
		return '';
	}

	return input.slice(queryStart + 1);
}

function parseValue(value, options) {
	if (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {
		value = Number(value);
	} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {
		value = value.toLowerCase() === 'true';
	}

	return value;
}

function parse(query, options) {
	options = Object.assign({
		decode: true,
		sort: true,
		arrayFormat: 'none',
		arrayFormatSeparator: ',',
		parseNumbers: false,
		parseBooleans: false
	}, options);

	validateArrayFormatSeparator(options.arrayFormatSeparator);

	const formatter = parserForArrayFormat(options);

	// Create an object with no prototype
	const ret = Object.create(null);

	if (typeof query !== 'string') {
		return ret;
	}

	query = query.trim().replace(/^[?#&]/, '');

	if (!query) {
		return ret;
	}

	for (const param of query.split('&')) {
		if (param === '') {
			continue;
		}

		let [key, value] = splitOnFirst(options.decode ? param.replace(/\+/g, ' ') : param, '=');

		// Missing `=` should be `null`:
		// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters
		value = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);
		formatter(decode(key, options), value, ret);
	}

	for (const key of Object.keys(ret)) {
		const value = ret[key];
		if (typeof value === 'object' && value !== null) {
			for (const k of Object.keys(value)) {
				value[k] = parseValue(value[k], options);
			}
		} else {
			ret[key] = parseValue(value, options);
		}
	}

	if (options.sort === false) {
		return ret;
	}

	return (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {
		const value = ret[key];
		if (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {
			// Sort object keys, not values
			result[key] = keysSorter(value);
		} else {
			result[key] = value;
		}

		return result;
	}, Object.create(null));
}

exports.extract = extract;
exports.parse = parse;

exports.stringify = (object, options) => {
	if (!object) {
		return '';
	}

	options = Object.assign({
		encode: true,
		strict: true,
		arrayFormat: 'none',
		arrayFormatSeparator: ','
	}, options);

	validateArrayFormatSeparator(options.arrayFormatSeparator);

	const shouldFilter = key => (
		(options.skipNull && isNullOrUndefined(object[key])) ||
		(options.skipEmptyString && object[key] === '')
	);

	const formatter = encoderForArrayFormat(options);

	const objectCopy = {};

	for (const key of Object.keys(object)) {
		if (!shouldFilter(key)) {
			objectCopy[key] = object[key];
		}
	}

	const keys = Object.keys(objectCopy);

	if (options.sort !== false) {
		keys.sort(options.sort);
	}

	return keys.map(key => {
		const value = object[key];

		if (value === undefined) {
			return '';
		}

		if (value === null) {
			return encode(key, options);
		}

		if (Array.isArray(value)) {
			if (value.length === 0 && options.arrayFormat === 'bracket-separator') {
				return encode(key, options) + '[]';
			}

			return value
				.reduce(formatter(key), [])
				.join('&');
		}

		return encode(key, options) + '=' + encode(value, options);
	}).filter(x => x.length > 0).join('&');
};

exports.parseUrl = (url, options) => {
	options = Object.assign({
		decode: true
	}, options);

	const [url_, hash] = splitOnFirst(url, '#');

	return Object.assign(
		{
			url: url_.split('?')[0] || '',
			query: parse(extract(url), options)
		},
		options && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}
	);
};

exports.stringifyUrl = (object, options) => {
	options = Object.assign({
		encode: true,
		strict: true,
		[encodeFragmentIdentifier]: true
	}, options);

	const url = removeHash(object.url).split('?')[0] || '';
	const queryFromUrl = exports.extract(object.url);
	const parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});

	const query = Object.assign(parsedQueryFromUrl, object.query);
	let queryString = exports.stringify(query, options);
	if (queryString) {
		queryString = `?${queryString}`;
	}

	let hash = getHash(object.url);
	if (object.fragmentIdentifier) {
		hash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;
	}

	return `${url}${queryString}${hash}`;
};

exports.pick = (input, filter, options) => {
	options = Object.assign({
		parseFragmentIdentifier: true,
		[encodeFragmentIdentifier]: false
	}, options);

	const {url, query, fragmentIdentifier} = exports.parseUrl(input, options);
	return exports.stringifyUrl({
		url,
		query: filterObject(query, filter),
		fragmentIdentifier
	}, options);
};

exports.exclude = (input, filter, options) => {
	const exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);

	return exports.pick(input, exclusionFilter, options);
};


/***/ }),

/***/ "./node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/http.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/http.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpConnection: () => (/* binding */ HttpConnection),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cross-fetch */ "./node_modules/cross-fetch/dist/browser-ponyfill.js");
/* harmony import */ var cross_fetch__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cross_fetch__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/safe-json */ "./node_modules/@walletconnect/safe-json/dist/esm/index.js");
/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ "./node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js");




const DEFAULT_HTTP_HEADERS = {
    Accept: "application/json",
    "Content-Type": "application/json",
};
const DEFAULT_HTTP_METHOD = "POST";
const DEFAULT_FETCH_OPTS = {
    headers: DEFAULT_HTTP_HEADERS,
    method: DEFAULT_HTTP_METHOD,
};
const EVENT_EMITTER_MAX_LISTENERS_DEFAULT = 10;
class HttpConnection {
    constructor(url, disableProviderPing = false) {
        this.url = url;
        this.disableProviderPing = disableProviderPing;
        this.events = new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
        this.isAvailable = false;
        this.registering = false;
        if (!(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isHttpUrl)(url)) {
            throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);
        }
        this.url = url;
        this.disableProviderPing = disableProviderPing;
    }
    get connected() {
        return this.isAvailable;
    }
    get connecting() {
        return this.registering;
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.once(event, listener);
    }
    off(event, listener) {
        this.events.off(event, listener);
    }
    removeListener(event, listener) {
        this.events.removeListener(event, listener);
    }
    async open(url = this.url) {
        await this.register(url);
    }
    async close() {
        if (!this.isAvailable) {
            throw new Error("Connection already closed");
        }
        this.onClose();
    }
    async send(payload, context) {
        if (!this.isAvailable) {
            await this.register();
        }
        try {
            const body = (0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_2__.safeJsonStringify)(payload);
            const res = await cross_fetch__WEBPACK_IMPORTED_MODULE_1___default()(this.url, Object.assign(Object.assign({}, DEFAULT_FETCH_OPTS), { body }));
            const data = await res.json();
            this.onPayload({ data });
        }
        catch (e) {
            this.onError(payload.id, e);
        }
    }
    async register(url = this.url) {
        if (!(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.isHttpUrl)(url)) {
            throw new Error(`Provided URL is not compatible with HTTP connection: ${url}`);
        }
        if (this.registering) {
            const currentMaxListeners = this.events.getMaxListeners();
            if (this.events.listenerCount("register_error") >= currentMaxListeners ||
                this.events.listenerCount("open") >= currentMaxListeners) {
                this.events.setMaxListeners(currentMaxListeners + 1);
            }
            return new Promise((resolve, reject) => {
                this.events.once("register_error", error => {
                    this.resetMaxListeners();
                    reject(error);
                });
                this.events.once("open", () => {
                    this.resetMaxListeners();
                    if (typeof this.isAvailable === "undefined") {
                        return reject(new Error("HTTP connection is missing or invalid"));
                    }
                    resolve();
                });
            });
        }
        this.url = url;
        this.registering = true;
        try {
            if (!this.disableProviderPing) {
                const body = (0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_2__.safeJsonStringify)({ id: 1, jsonrpc: "2.0", method: "test", params: [] });
                await cross_fetch__WEBPACK_IMPORTED_MODULE_1___default()(url, Object.assign(Object.assign({}, DEFAULT_FETCH_OPTS), { body }));
            }
            this.onOpen();
        }
        catch (e) {
            const error = this.parseError(e);
            this.events.emit("register_error", error);
            this.onClose();
            throw error;
        }
    }
    onOpen() {
        this.isAvailable = true;
        this.registering = false;
        this.events.emit("open");
    }
    onClose() {
        this.isAvailable = false;
        this.registering = false;
        this.events.emit("close");
    }
    onPayload(e) {
        if (typeof e.data === "undefined")
            return;
        const payload = typeof e.data === "string" ? (0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_2__.safeJsonParse)(e.data) : e.data;
        this.events.emit("payload", payload);
    }
    onError(id, e) {
        const error = this.parseError(e);
        const message = error.message || error.toString();
        const payload = (0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.formatJsonRpcError)(id, message);
        this.events.emit("payload", payload);
    }
    parseError(e, url = this.url) {
        return (0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_3__.parseConnectionError)(e, url, "HTTP");
    }
    resetMaxListeners() {
        if (this.events.getMaxListeners() > EVENT_EMITTER_MAX_LISTENERS_DEFAULT) {
            this.events.setMaxListeners(EVENT_EMITTER_MAX_LISTENERS_DEFAULT);
        }
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HttpConnection);
//# sourceMappingURL=http.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HttpConnection: () => (/* reexport safe */ _http__WEBPACK_IMPORTED_MODULE_0__.HttpConnection),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./http */ "./node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/http.js");


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_http__WEBPACK_IMPORTED_MODULE_0__["default"]);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/dist/index.es.js":
/*!******************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/dist/index.es.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ENGINE_CONTEXT: () => (/* binding */ ie),
/* harmony export */   ENGINE_RPC_OPTS: () => (/* binding */ V),
/* harmony export */   HISTORY_CONTEXT: () => (/* binding */ Ye),
/* harmony export */   HISTORY_EVENTS: () => (/* binding */ je),
/* harmony export */   HISTORY_STORAGE_VERSION: () => (/* binding */ ke),
/* harmony export */   PROPOSAL_CONTEXT: () => (/* binding */ ee),
/* harmony export */   PROPOSAL_EXPIRY: () => (/* binding */ Xe),
/* harmony export */   PROPOSAL_EXPIRY_MESSAGE: () => (/* binding */ se),
/* harmony export */   REQUEST_CONTEXT: () => (/* binding */ ne),
/* harmony export */   SESSION_CONTEXT: () => (/* binding */ te),
/* harmony export */   SESSION_EXPIRY: () => (/* binding */ b),
/* harmony export */   SESSION_REQUEST_EXPIRY_BOUNDARIES: () => (/* binding */ $),
/* harmony export */   SIGN_CLIENT_CONTEXT: () => (/* binding */ J),
/* harmony export */   SIGN_CLIENT_DEFAULT: () => (/* binding */ G),
/* harmony export */   SIGN_CLIENT_EVENTS: () => (/* binding */ Ke),
/* harmony export */   SIGN_CLIENT_PROTOCOL: () => (/* binding */ k),
/* harmony export */   SIGN_CLIENT_STORAGE_OPTIONS: () => (/* binding */ ze),
/* harmony export */   SIGN_CLIENT_STORAGE_PREFIX: () => (/* binding */ C),
/* harmony export */   SIGN_CLIENT_VERSION: () => (/* binding */ X),
/* harmony export */   SignClient: () => (/* binding */ ts),
/* harmony export */   "default": () => (/* binding */ M)
/* harmony export */ });
/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pino */ "./node_modules/pino/browser.js");
/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _walletconnect_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/core */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/core/dist/index.es.js");
/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/logger */ "./node_modules/@walletconnect/logger/dist/cjs/index.js");
/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _walletconnect_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/types */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/types/dist/index.es.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/utils */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ "./node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js");
const k="wc",X=2,J="client",C=`${k}@${X}:${J}:`,G={name:J,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Ke={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},ze={database:":memory:"},je={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Ye="history",ke="0.3",ee="proposal",Xe=_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.THIRTY_DAYS,se="Proposal expired",te="session",b=_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.SEVEN_DAYS,ie="engine",V={wc_sessionPropose:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.THIRTY_SECONDS,prompt:!1,tag:1115}}},$={min:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,max:_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.SEVEN_DAYS},ne="request";var Je=Object.defineProperty,He=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,re=(d,n,e)=>n in d?Je(d,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[n]=e,u=(d,n)=>{for(var e in n||(n={}))Qe.call(n,e)&&re(d,e,n[e]);if(oe)for(var e of oe(n))Be.call(n,e)&&re(d,e,n[e]);return d},H=(d,n)=>He(d,Fe(n));class We extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_3__.IEngine{constructor(n){super(n),this.name=ie,this.events=new (events__WEBPACK_IMPORTED_MODULE_5___default()),this.initialized=!1,this.ignoredPayloadTypes=[_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.TYPE_1],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(V)}),this.initialized=!0)},this.connect=async e=>{this.isInitialized();const s=H(u({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:t,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,relays:r}=s;let p=t,h,E=!1;if(p&&(E=this.client.core.pairing.pairings.get(p).active),!p||!E){const{topic:I,uri:g}=await this.client.core.pairing.create();p=I,h=g}const m=await this.client.core.crypto.generateKeyPair(),P=u({requiredNamespaces:i,optionalNamespaces:o,relays:r??[{protocol:_walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:m,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:y,resolve:T,done:U}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createDelayedPromise)(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,se);if(this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_connect"),async({error:I,session:g})=>{if(I)y(I);else if(g){g.self.publicKey=m;const x=H(u({},g),{requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces});await this.client.session.set(g.topic,x),await this.setExpiry(g.topic,g.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:g.peer.metadata}),T(x)}}),!p){const{message:I}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(I)}const L=await this.sendRequest(p,"wc_sessionPropose",P),K=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES);return await this.setProposal(L,u({id:L,expiry:K},P)),{uri:h,approval:U}},this.pair=async e=>(this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{this.isInitialized(),await this.isValidApprove(e);const{id:s,relayProtocol:t,namespaces:i,sessionProperties:o}=e,a=this.client.proposal.get(s);let{pairingTopic:r,proposer:p,requiredNamespaces:h,optionalNamespaces:E}=a;r=r||"",(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(h)||(h=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getRequiredNamespacesFromNamespaces)(i,"approve()"));const m=await this.client.core.crypto.generateKeyPair(),P=p.publicKey,y=await this.client.core.crypto.generateSharedKey(m,P);r&&s&&(await this.client.core.pairing.updateMetadata({topic:r,metadata:p.metadata}),await this.sendResult(s,r,{relay:{protocol:t??"irn"},responderPublicKey:m}),await this.client.proposal.delete(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:r}));const T=u({relay:{protocol:t??"irn"},namespaces:i,requiredNamespaces:h,optionalNamespaces:E,pairingTopic:r,controller:{publicKey:m,metadata:this.client.metadata},expiry:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(b)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(y);const U=await this.sendRequest(y,"wc_sessionSettle",T),{done:L,resolve:K,reject:I}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createDelayedPromise)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_approve",U),({error:x})=>{x?I(x):K(this.client.session.get(y))});const g=H(u({},T),{topic:y,pairingTopic:r,acknowledged:!1,self:T.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:m});return await this.client.session.set(y,g),await this.setExpiry(y,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(b)),{topic:y,acknowledged:L}},this.reject=async e=>{this.isInitialized(),await this.isValidReject(e);const{id:s,reason:t}=e,{pairingTopic:i}=this.client.proposal.get(s);i&&(await this.sendError(s,i,t),await this.client.proposal.delete(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.isValidUpdate(e);const{topic:s,namespaces:t}=e,i=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:t}),{done:o,resolve:a,reject:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createDelayedPromise)();return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_update",i),({error:p})=>{p?r(p):a()}),await this.client.session.update(s,{namespaces:t}),{acknowledged:o}},this.extend=async e=>{this.isInitialized(),await this.isValidExtend(e);const{topic:s}=e,t=await this.sendRequest(s,"wc_sessionExtend",{}),{done:i,resolve:o,reject:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createDelayedPromise)();return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_extend",t),({error:r})=>{r?a(r):o()}),await this.setExpiry(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(b)),{acknowledged:i}},this.request=async e=>{this.isInitialized(),await this.isValidRequest(e);const{chainId:s,request:t,topic:i,expiry:o}=e,a=await this.sendRequest(i,"wc_sessionRequest",{request:t,chainId:s},o),{done:r,resolve:p,reject:h}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createDelayedPromise)(o);return this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_request",a),({error:E,result:m})=>{E?h(E):p(m)}),this.client.events.emit("session_request_sent",{topic:i,request:t,chainId:s,id:a}),await r()},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:s,response:t}=e,{id:i}=t;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(t)?await this.sendResult(i,s,t.result):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(t)&&await this.sendError(i,s,t.error),this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:s}=e;if(this.client.session.keys.includes(s)){const t=await this.sendRequest(s,"wc_sessionPing",{}),{done:i,resolve:o,reject:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.createDelayedPromise)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_ping",t),({error:r})=>{r?a(r):o()}),await i()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async e=>{this.isInitialized(),await this.isValidEmit(e);const{topic:s,event:t,chainId:i}=e;await this.sendRequest(s,"wc_sessionEvent",{event:t,chainId:i})},this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:s}=e;this.client.session.keys.includes(s)?(await this.sendRequest(s,"wc_sessionDelete",(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(s=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isSessionCompatible)(s,e))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.deleteSession=async(e,s)=>{const{self:t}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),await Promise.all([this.client.session.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(t.publicKey),this.client.core.crypto.deleteSymKey(e),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deleteProposal=async(e,s)=>{await Promise.all([this.client.proposal.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,s,t=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,s),t?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,s)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:s}),this.client.core.expirer.set(e,s)},this.setProposal=async(e,s)=>{await this.client.proposal.set(e,s),this.client.core.expirer.set(e,s.expiry)},this.setPendingSessionRequest=async e=>{const s=V.wc_sessionRequest.req.ttl,{id:t,topic:i,params:o}=e;await this.client.pendingRequest.set(t,{id:t,topic:i,params:o}),s&&this.client.core.expirer.set(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(s))},this.sendRequest=async(e,s,t,i)=>{const o=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.formatJsonRpcRequest)(s,t),a=await this.client.core.crypto.encode(e,o),r=V[s].req;return i&&(r.ttl=i),this.client.core.history.set(e,o),this.client.core.relayer.publish(e,a,r),o.id},this.sendResult=async(e,s,t)=>{const i=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.formatJsonRpcResult)(e,t),o=await this.client.core.crypto.encode(s,i),a=await this.client.core.history.get(s,e),r=V[a.request.method].res;this.client.core.relayer.publish(s,o,r),await this.client.core.history.resolve(i)},this.sendError=async(e,s,t)=>{const i=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.formatJsonRpcError)(e,t),o=await this.client.core.crypto.encode(s,i),a=await this.client.core.history.get(s,e),r=V[a.request.method].res;this.client.core.relayer.publish(s,o,r),await this.client.core.history.resolve(i)},this.cleanup=async()=>{const e=[],s=[];this.client.session.getAll().forEach(t=>{(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(t.expiry)&&e.push(t.topic)}),this.client.proposal.getAll().forEach(t=>{(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(t.expiry)&&s.push(t.id)}),await Promise.all([...e.map(t=>this.deleteSession(t)),...s.map(t=>this.deleteProposal(t))])},this.onRelayEventRequest=e=>{const{topic:s,payload:t}=e,i=t.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeRequest(s,t);case"wc_sessionSettle":return this.onSessionSettleRequest(s,t);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,t);case"wc_sessionExtend":return this.onSessionExtendRequest(s,t);case"wc_sessionPing":return this.onSessionPingRequest(s,t);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,t);case"wc_sessionRequest":return this.onSessionRequest(s,t);case"wc_sessionEvent":return this.onSessionEventRequest(s,t);default:return this.client.logger.info(`Unsupported request method ${i}`)}},this.onRelayEventResponse=async e=>{const{topic:s,payload:t}=e,i=(await this.client.core.history.get(s,t.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(s,t);case"wc_sessionSettle":return this.onSessionSettleResponse(s,t);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,t);case"wc_sessionExtend":return this.onSessionExtendResponse(s,t);case"wc_sessionPing":return this.onSessionPingResponse(s,t);case"wc_sessionRequest":return this.onSessionRequestResponse(s,t);default:return this.client.logger.info(`Unsupported response method ${i}`)}},this.onSessionProposeRequest=async(e,s)=>{const{params:t,id:i}=s;try{this.isValidConnect(u({},s.params));const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES),a=u({id:i,pairingTopic:e,expiry:o},t);await this.setProposal(i,a),this.client.events.emit("session_proposal",{id:i,params:a})}catch(o){await this.sendError(i,e,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(e,s)=>{const{id:t}=s;if((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(s)){const{result:i}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const o=this.client.proposal.get(t);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const a=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const r=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:r});const p=await this.client.core.crypto.generateSharedKey(a,r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const h=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:e})}else (0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(s)&&(await this.client.proposal.delete(t,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:r,namespaces:p,requiredNamespaces:h,optionalNamespaces:E,sessionProperties:m,pairingTopic:P}=s.params,y=u({topic:e,relay:o,expiry:r,namespaces:p,acknowledged:!0,pairingTopic:P,requiredNamespaces:h,optionalNamespaces:E,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},m&&{sessionProperties:m});await this.sendResult(s.id,e,!0),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_connect"),{session:y})}catch(o){await this.sendError(t,e,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(e,s)=>{const{id:t}=s;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(s)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_approve",t),{})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(s)&&(await this.client.session.delete(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getSdkError)("USER_DISCONNECTED")),this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_approve",t),{error:s.error}))},this.onSessionUpdateRequest=async(e,s)=>{const{params:t,id:i}=s;try{this.isValidUpdate(u({topic:e},t)),await this.client.session.update(e,{namespaces:t.namespaces}),await this.sendResult(i,e,!0),this.client.events.emit("session_update",{id:i,topic:e,params:t})}catch(o){await this.sendError(i,e,o),this.client.logger.error(o)}},this.onSessionUpdateResponse=(e,s)=>{const{id:t}=s;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(s)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_update",t),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(s)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_update",t),{error:s.error})},this.onSessionExtendRequest=async(e,s)=>{const{id:t}=s;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.calcExpiry)(b)),await this.sendResult(t,e,!0),this.client.events.emit("session_extend",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionExtendResponse=(e,s)=>{const{id:t}=s;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(s)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_extend",t),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(s)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_extend",t),{error:s.error})},this.onSessionPingRequest=async(e,s)=>{const{id:t}=s;try{this.isValidPing({topic:e}),await this.sendResult(t,e,!0),this.client.events.emit("session_ping",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionPingResponse=(e,s)=>{const{id:t}=s;setTimeout(()=>{(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(s)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_ping",t),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(s)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_ping",t),{error:s.error})},500)},this.onSessionDeleteRequest=async(e,s)=>{const{id:t}=s;try{this.isValidDisconnect({topic:e,reason:s.params}),this.client.core.relayer.once(_walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.RELAYER_EVENTS.publish,async()=>{await this.deleteSession(e)}),await this.sendResult(t,e,!0),this.client.events.emit("session_delete",{id:t,topic:e})}catch(i){await this.sendError(t,e,i),this.client.logger.error(i)}},this.onSessionRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidRequest(u({topic:e},i)),await this.setPendingSessionRequest({id:t,topic:e,params:i}),this.client.events.emit("session_request",{id:t,topic:e,params:i})}catch(o){await this.sendError(t,e,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(e,s)=>{const{id:t}=s;(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResult)(s)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_request",t),{result:s.result}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcError)(s)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.engineEvent)("session_request",t),{error:s.error})},this.onSessionEventRequest=async(e,s)=>{const{id:t,params:i}=s;try{this.isValidEmit(u({topic:e},i)),this.client.events.emit("session_event",{id:t,topic:e,params:i})}catch(o){await this.sendError(t,e,o),this.client.logger.error(o)}},this.isValidConnect=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(r)}const{pairingTopic:s,requiredNamespaces:t,optionalNamespaces:i,sessionProperties:o,relays:a}=e;if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isUndefined)(s)||await this.isValidPairingTopic(s),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidRelays)(a,!0)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(r)}!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isUndefined)(t)&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(t)!==0&&this.validateNamespaces(t,"requiredNamespaces"),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isUndefined)(i)&&(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidObject)(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isUndefined)(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(e,s)=>{const t=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidRequiredNamespaces)(e,"connect()",s);if(t)throw new Error(t.message)},this.isValidApprove=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e))throw new Error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:s,namespaces:t,relayProtocol:i,sessionProperties:o}=e;await this.isValidProposalId(s);const a=this.client.proposal.get(s),r=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespaces)(t,"approve()");if(r)throw new Error(r.message);const p=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isConformingNamespaces)(a.requiredNamespaces,t,"approve()");if(p)throw new Error(p.message);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidString)(i,!0)){const{message:h}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isUndefined)(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(i)}const{id:s,reason:t}=e;if(await this.isValidProposalId(s),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidErrorReason)(t)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(t)}`);throw new Error(i)}},this.isValidSessionSettleRequest=e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:p}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(p)}const{relay:s,controller:t,namespaces:i,expiry:o}=e;if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidRelay)(s)){const{message:p}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidController)(t,"onSessionSettleRequest()");if(a)throw new Error(a.message);const r=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespaces)(i,"onSessionSettleRequest()");if(r)throw new Error(r.message);if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(o)){const{message:p}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(r)}const{topic:s,namespaces:t}=e;await this.isValidSessionTopic(s);const i=this.client.session.get(s),o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespaces)(t,"update()");if(o)throw new Error(o.message);const a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isConformingNamespaces)(i.requiredNamespaces,t,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionTopic(s)},this.isValidRequest=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(r)}const{topic:s,request:t,chainId:i,expiry:o}=e;await this.isValidSessionTopic(s);const{namespaces:a}=this.client.session.get(s);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespacesChainId)(a,i)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(r)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidRequest)(t)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`request() ${JSON.stringify(t)}`);throw new Error(r)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespacesRequest)(a,i,t.method)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`request() method: ${t.method}`);throw new Error(r)}if(o&&!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidRequestExpiry)(o,$)){const{message:r}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${$.min} and ${$.max}`);throw new Error(r)}},this.isValidRespond=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(i)}const{topic:s,response:t}=e;if(await this.isValidSessionTopic(s),!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidResponse)(t)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(t)}`);throw new Error(i)}},this.isValidPing=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(a)}const{topic:s,event:t,chainId:i}=e;await this.isValidSessionTopic(s);const{namespaces:o}=this.client.session.get(s);if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespacesChainId)(o,i)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidEvent)(t)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(a)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidNamespacesEvent)(o,i,t.name)){const{message:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(t)}`);throw new Error(a)}},this.isValidDisconnect=async e=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidParams)(e)){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:s}=e;await this.isValidSessionOrPairingTopic(s)},this.validateSessionProps=(e,s)=>{Object.values(e).forEach(t=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidString)(t,!1)){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(t)}`);throw new Error(i)}})}}isInitialized(){if(!this.initialized){const{message:n}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){this.client.core.relayer.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.RELAYER_EVENTS.message,async n=>{const{topic:e,message:s}=n;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const t=await this.client.core.crypto.decode(e,s);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcRequest)(t)?(this.client.core.history.set(e,t),this.onRelayEventRequest({topic:e,payload:t})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_7__.isJsonRpcResponse)(t)&&(await this.client.core.history.resolve(t),this.onRelayEventResponse({topic:e,payload:t}))})}registerExpirerEvents(){this.client.core.expirer.on(_walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.EXPIRER_EVENTS.expired,async n=>{const{topic:e,id:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.parseExpirerTarget)(n.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession(e,!0),this.client.events.emit("session_expire",{topic:e})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidString)(n,!1)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(e)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(this.client.core.pairing.pairings.get(n).expiry)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("EXPIRED",`pairing topic: ${n}`);throw new Error(e)}}async isValidSessionTopic(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidString)(n,!1)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(e)}if(!this.client.session.keys.includes(n)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(e)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(this.client.session.get(n).expiry)){await this.deleteSession(n);const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("EXPIRED",`session topic: ${n}`);throw new Error(e)}}async isValidSessionOrPairingTopic(n){if(this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidString)(n,!1)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(e)}else{const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(e)}}async isValidProposalId(n){if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isValidId)(n)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(e)}if(!this.client.proposal.keys.includes(n)){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(e)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.isExpired)(this.client.proposal.get(n).expiry)){await this.deleteProposal(n);const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getInternalError)("EXPIRED",`proposal id: ${n}`);throw new Error(e)}}}class Ze extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.Store{constructor(n,e){super(n,e,ee,C),this.core=n,this.logger=e}}class es extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.Store{constructor(n,e){super(n,e,te,C),this.core=n,this.logger=e}}class ss extends _walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.Store{constructor(n,e){super(n,e,ne,C,s=>s.id),this.core=n,this.logger=e}}class M extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_3__.ISignClient{constructor(n){super(n),this.protocol=k,this.version=X,this.name=G.name,this.events=new events__WEBPACK_IMPORTED_MODULE_5__.EventEmitter,this.on=(s,t)=>this.events.on(s,t),this.once=(s,t)=>this.events.once(s,t),this.off=(s,t)=>this.events.off(s,t),this.removeListener=(s,t)=>this.events.removeListener(s,t),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(t){throw this.logger.error(t.message),t}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(t){throw this.logger.error(t.message),t}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(t){throw this.logger.error(t.message),t}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(t){throw this.logger.error(t.message),t}},this.update=async s=>{try{return await this.engine.update(s)}catch(t){throw this.logger.error(t.message),t}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(t){throw this.logger.error(t.message),t}},this.request=async s=>{try{return await this.engine.request(s)}catch(t){throw this.logger.error(t.message),t}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(t){throw this.logger.error(t.message),t}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(t){throw this.logger.error(t.message),t}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(t){throw this.logger.error(t.message),t}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(t){throw this.logger.error(t.message),t}},this.find=s=>{try{return this.engine.find(s)}catch(t){throw this.logger.error(t.message),t}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=n?.name||G.name,this.metadata=n?.metadata||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_4__.getAppMetadata)();const e=typeof n?.logger<"u"&&typeof n?.logger!="string"?n.logger:pino__WEBPACK_IMPORTED_MODULE_0___default()((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__.getDefaultLoggerOptions)({level:n?.logger||G.logger}));this.core=n?.core||new _walletconnect_core__WEBPACK_IMPORTED_MODULE_1__.Core(n),this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__.generateChildLogger)(e,this.name),this.session=new es(this.core,this.logger),this.proposal=new Ze(this.core,this.logger),this.pendingRequest=new ss(this.core,this.logger),this.engine=new We(this)}static async init(n){const e=new M(n);return await e.initialize(),e}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_2__.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(n){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(n.message),n}}}const ts=M;
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/core/dist/index.es.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/core/dist/index.es.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CORE_CONTEXT: () => (/* binding */ G),
/* harmony export */   CORE_DEFAULT: () => (/* binding */ ke),
/* harmony export */   CORE_PROTOCOL: () => (/* binding */ ae),
/* harmony export */   CORE_STORAGE_OPTIONS: () => (/* binding */ Be),
/* harmony export */   CORE_STORAGE_PREFIX: () => (/* binding */ T),
/* harmony export */   CORE_VERSION: () => (/* binding */ Ke),
/* harmony export */   CRYPTO_CLIENT_SEED: () => (/* binding */ oe),
/* harmony export */   CRYPTO_CONTEXT: () => (/* binding */ je),
/* harmony export */   CRYPTO_JWT_TTL: () => (/* binding */ Ve),
/* harmony export */   Core: () => (/* binding */ Dr),
/* harmony export */   Crypto: () => (/* binding */ pt),
/* harmony export */   EXPIRER_CONTEXT: () => (/* binding */ lt),
/* harmony export */   EXPIRER_DEFAULT_TTL: () => (/* binding */ Ws),
/* harmony export */   EXPIRER_EVENTS: () => (/* binding */ m),
/* harmony export */   EXPIRER_STORAGE_VERSION: () => (/* binding */ dt),
/* harmony export */   Expirer: () => (/* binding */ Pt),
/* harmony export */   HISTORY_CONTEXT: () => (/* binding */ ct),
/* harmony export */   HISTORY_EVENTS: () => (/* binding */ C),
/* harmony export */   HISTORY_STORAGE_VERSION: () => (/* binding */ ut),
/* harmony export */   JsonRpcHistory: () => (/* binding */ St),
/* harmony export */   KEYCHAIN_CONTEXT: () => (/* binding */ qe),
/* harmony export */   KEYCHAIN_STORAGE_VERSION: () => (/* binding */ Ge),
/* harmony export */   KeyChain: () => (/* binding */ gt),
/* harmony export */   MESSAGES_CONTEXT: () => (/* binding */ Ye),
/* harmony export */   MESSAGES_STORAGE_VERSION: () => (/* binding */ Je),
/* harmony export */   MessageTracker: () => (/* binding */ Dt),
/* harmony export */   PAIRING_CONTEXT: () => (/* binding */ ot),
/* harmony export */   PAIRING_DEFAULT_TTL: () => (/* binding */ Xs),
/* harmony export */   PAIRING_RPC_OPTS: () => (/* binding */ N),
/* harmony export */   PAIRING_STORAGE_VERSION: () => (/* binding */ ht),
/* harmony export */   PENDING_SUB_RESOLUTION_TIMEOUT: () => (/* binding */ at),
/* harmony export */   PUBLISHER_CONTEXT: () => (/* binding */ Xe),
/* harmony export */   PUBLISHER_DEFAULT_TTL: () => (/* binding */ He),
/* harmony export */   Pairing: () => (/* binding */ Rt),
/* harmony export */   RELAYER_CONTEXT: () => (/* binding */ Qe),
/* harmony export */   RELAYER_DEFAULT_LOGGER: () => (/* binding */ Ze),
/* harmony export */   RELAYER_DEFAULT_PROTOCOL: () => (/* binding */ We),
/* harmony export */   RELAYER_DEFAULT_RELAY_URL: () => (/* binding */ he),
/* harmony export */   RELAYER_EVENTS: () => (/* binding */ D),
/* harmony export */   RELAYER_PROVIDER_EVENTS: () => (/* binding */ M),
/* harmony export */   RELAYER_RECONNECT_TIMEOUT: () => (/* binding */ tt),
/* harmony export */   RELAYER_SDK_VERSION: () => (/* binding */ it),
/* harmony export */   RELAYER_STORAGE_OPTIONS: () => (/* binding */ Js),
/* harmony export */   RELAYER_SUBSCRIBER_SUFFIX: () => (/* binding */ et),
/* harmony export */   Relayer: () => (/* binding */ wt),
/* harmony export */   STORE_STORAGE_VERSION: () => (/* binding */ st),
/* harmony export */   SUBSCRIBER_CONTEXT: () => (/* binding */ rt),
/* harmony export */   SUBSCRIBER_DEFAULT_TTL: () => (/* binding */ Hs),
/* harmony export */   SUBSCRIBER_EVENTS: () => (/* binding */ I),
/* harmony export */   SUBSCRIBER_STORAGE_VERSION: () => (/* binding */ nt),
/* harmony export */   Store: () => (/* binding */ _t),
/* harmony export */   Subscriber: () => (/* binding */ mt),
/* harmony export */   "default": () => (/* binding */ Y)
/* harmony export */ });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pino */ "./node_modules/pino/browser.js");
/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _walletconnect_keyvaluestorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/keyvaluestorage */ "./node_modules/@walletconnect/keyvaluestorage/dist/cjs/browser/index.js");
/* harmony import */ var _walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/heartbeat */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/index.js");
/* harmony import */ var _walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/logger */ "./node_modules/@walletconnect/logger/dist/cjs/index.js");
/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @walletconnect/types */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/types/dist/index.es.js");
/* harmony import */ var _walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/safe-json */ "./node_modules/@walletconnect/safe-json/dist/esm/index.js");
/* harmony import */ var _walletconnect_relay_auth__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @walletconnect/relay-auth */ "./node_modules/@walletconnect/relay-auth/dist/esm/index.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @walletconnect/utils */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var uint8arrays__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! uint8arrays */ "./node_modules/uint8arrays/esm/src/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @walletconnect/jsonrpc-provider */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-provider/dist/esm/index.js");
/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ "./node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js");
/* harmony import */ var _walletconnect_jsonrpc_ws_connection__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @walletconnect/jsonrpc-ws-connection */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-ws-connection/dist/esm/index.js");
/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lodash.isequal */ "./node_modules/lodash.isequal/index.js");
/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(lodash_isequal__WEBPACK_IMPORTED_MODULE_14__);
function Ci(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),a=n.charCodeAt(0);if(t[a]!==255)throw new TypeError(n+" is ambiguous");t[a]=s}var o=r.length,h=r.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function g(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";for(var y=0,O=0,E=0,_=u.length;E!==_&&u[E]===0;)E++,y++;for(var R=(_-E)*l+1>>>0,b=new Uint8Array(R);E!==_;){for(var S=u[E],x=0,f=R-1;(S!==0||x<O)&&f!==-1;f--,x++)S+=256*b[f]>>>0,b[f]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");O=x,E++}for(var P=R-O;P!==R&&b[P]===0;)P++;for(var K=h.repeat(y);P<R;++P)K+=r.charAt(b[P]);return K}function U(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;var y=0;if(u[y]!==" "){for(var O=0,E=0;u[y]===h;)O++,y++;for(var _=(u.length-y)*d+1>>>0,R=new Uint8Array(_);u[y];){var b=t[u.charCodeAt(y)];if(b===255)return;for(var S=0,x=_-1;(b!==0||S<E)&&x!==-1;x--,S++)b+=o*R[x]>>>0,R[x]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");E=S,y++}if(u[y]!==" "){for(var f=_-E;f!==_&&R[f]===0;)f++;for(var P=new Uint8Array(O+(_-f)),K=O;f!==_;)P[K++]=R[f++];return P}}}function J(u){var y=U(u);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:U,decode:J}}var _i=Ci,Ri=_i;const Ce=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Si=r=>new TextEncoder().encode(r),Pi=r=>new TextDecoder().decode(r);class Ti{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class xi{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _e(this,e)}}class Oi{constructor(e){this.decoders=e}or(e){return _e(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _e=(r,e)=>new Oi({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Ai{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Ti(e,t,i),this.decoder=new xi(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const q=({name:r,prefix:e,encode:t,decode:i})=>new Ai(r,e,t,i),F=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Ri(t,e);return q({prefix:r,name:e,encode:i,decode:n=>Ce(s(n))})},zi=(r,e,t,i)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let n=r.length;for(;r[n-1]==="=";)--n;const a=new Uint8Array(n*t/8|0);let o=0,h=0,d=0;for(let l=0;l<n;++l){const g=s[r[l]];if(g===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<t|g,o+=t,o>=8&&(o-=8,a[d++]=255&h>>o)}if(o>=t||255&h<<8-o)throw new SyntaxError("Unexpected end of data");return a},Ni=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let n="",a=0,o=0;for(let h=0;h<r.length;++h)for(o=o<<8|r[h],a+=8;a>t;)a-=t,n+=e[s&o>>a];if(a&&(n+=e[s&o<<t-a]),i)for(;n.length*t&7;)n+="=";return n},p=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>q({prefix:e,name:r,encode(s){return Ni(s,i,t)},decode(s){return zi(s,i,t,r)}}),Ui=q({prefix:"\0",name:"identity",encode:r=>Pi(r),decode:r=>Si(r)});var Li=Object.freeze({__proto__:null,identity:Ui});const Fi=p({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Mi=Object.freeze({__proto__:null,base2:Fi});const $i=p({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ki=Object.freeze({__proto__:null,base8:$i});const ki=F({prefix:"9",name:"base10",alphabet:"0123456789"});var Bi=Object.freeze({__proto__:null,base10:ki});const ji=p({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vi=p({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var qi=Object.freeze({__proto__:null,base16:ji,base16upper:Vi});const Gi=p({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Yi=p({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ji=p({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Hi=p({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Xi=p({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wi=p({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Zi=p({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qi=p({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),es=p({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ts=Object.freeze({__proto__:null,base32:Gi,base32upper:Yi,base32pad:Ji,base32padupper:Hi,base32hex:Xi,base32hexupper:Wi,base32hexpad:Zi,base32hexpadupper:Qi,base32z:es});const is=F({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ss=F({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rs=Object.freeze({__proto__:null,base36:is,base36upper:ss});const ns=F({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),as=F({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var os=Object.freeze({__proto__:null,base58btc:ns,base58flickr:as});const hs=p({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cs=p({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),us=p({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ls=p({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ds=Object.freeze({__proto__:null,base64:hs,base64pad:cs,base64url:us,base64urlpad:ls});const Re=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),gs=Re.reduce((r,e,t)=>(r[t]=e,r),[]),ps=Re.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Ds(r){return r.reduce((e,t)=>(e+=gs[t],e),"")}function ys(r){const e=[];for(const t of r){const i=ps[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const bs=q({prefix:"\u{1F680}",name:"base256emoji",encode:Ds,decode:ys});var ms=Object.freeze({__proto__:null,base256emoji:bs}),Es=Pe,Se=128,fs=127,ws=~fs,vs=Math.pow(2,31);function Pe(r,e,t){e=e||[],t=t||0;for(var i=t;r>=vs;)e[t++]=r&255|Se,r/=128;for(;r&ws;)e[t++]=r&255|Se,r>>>=7;return e[t]=r|0,Pe.bytes=t-i+1,e}var Is=se,Cs=128,Te=127;function se(r,i){var t=0,i=i||0,s=0,n=i,a,o=r.length;do{if(n>=o)throw se.bytes=0,new RangeError("Could not decode varint");a=r[n++],t+=s<28?(a&Te)<<s:(a&Te)*Math.pow(2,s),s+=7}while(a>=Cs);return se.bytes=n-i,t}var _s=Math.pow(2,7),Rs=Math.pow(2,14),Ss=Math.pow(2,21),Ps=Math.pow(2,28),Ts=Math.pow(2,35),xs=Math.pow(2,42),Os=Math.pow(2,49),As=Math.pow(2,56),zs=Math.pow(2,63),Ns=function(r){return r<_s?1:r<Rs?2:r<Ss?3:r<Ps?4:r<Ts?5:r<xs?6:r<Os?7:r<As?8:r<zs?9:10},Us={encode:Es,decode:Is,encodingLength:Ns},xe=Us;const Oe=(r,e,t=0)=>(xe.encode(r,e,t),e),Ae=r=>xe.encodingLength(r),re=(r,e)=>{const t=e.byteLength,i=Ae(r),s=i+Ae(t),n=new Uint8Array(s+t);return Oe(r,n,0),Oe(t,n,i),n.set(e,s),new Ls(r,t,e,n)};class Ls{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const ze=({name:r,code:e,encode:t})=>new Fs(r,e,t);class Fs{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?re(this.code,t):t.then(i=>re(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Ne=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Ms=ze({name:"sha2-256",code:18,encode:Ne("SHA-256")}),$s=ze({name:"sha2-512",code:19,encode:Ne("SHA-512")});var Ks=Object.freeze({__proto__:null,sha256:Ms,sha512:$s});const Ue=0,ks="identity",Le=Ce,Bs=r=>re(Ue,Le(r)),js={code:Ue,name:ks,encode:Le,digest:Bs};var Vs=Object.freeze({__proto__:null,identity:js});new TextEncoder,new TextDecoder;const Fe={...Li,...Mi,...Ki,...Bi,...qi,...ts,...rs,...os,...ds,...ms};({...Ks,...Vs});function qs(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Me(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const $e=Me("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ne=Me("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=qs(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Gs={utf8:$e,"utf-8":$e,hex:Fe.base16,latin1:ne,ascii:ne,binary:ne,...Fe};function Ys(r,e="utf8"){const t=Gs[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}const ae="wc",Ke=2,G="core",T=`${ae}@${2}:${G}:`,ke={name:G,logger:"error"},Be={database:":memory:"},je="crypto",oe="client_ed25519_seed",Ve=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_DAY,qe="keychain",Ge="0.3",Ye="messages",Je="0.3",He=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.SIX_HOURS,Xe="publisher",We="irn",Ze="error",he="wss://relay.walletconnect.com",Qe="relayer",D={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},et="_subscription",M={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tt=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_SECOND,Js={database:":memory:"},it="2.6.0",st="0.3",I={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Hs=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.THIRTY_DAYS,rt="subscription",nt="0.3",at=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.FIVE_SECONDS*1e3,ot="pairing",ht="0.3",Xs=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.THIRTY_DAYS,N={wc_pairingDelete:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_DAY,prompt:!1,tag:0},res:{ttl:_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_DAY,prompt:!1,tag:0}}},C={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ct="history",ut="0.3",lt="expirer",m={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},dt="0.3",Ws=_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.ONE_DAY;class gt{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=qe,this.version=Ge,this.initialized=!1,this.storagePrefix=T,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name)}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.mapToObj)(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.objToMap)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class pt{constructor(e,t,i){this.core=e,this.logger=t,this.name=je,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),n=_walletconnect_relay_auth__WEBPACK_IMPORTED_MODULE_7__.generateKeyPair(s);return _walletconnect_relay_auth__WEBPACK_IMPORTED_MODULE_7__.encodeIss(n.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.generateKeyPair)();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const n=await this.getClientSeed(),a=_walletconnect_relay_auth__WEBPACK_IMPORTED_MODULE_7__.generateKeyPair(n),o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.generateRandomBytes32)(),h=Ve;return await _walletconnect_relay_auth__WEBPACK_IMPORTED_MODULE_7__.signJWT(o,s,h,a)},this.generateSharedKey=(s,n,a)=>{this.isInitialized();const o=this.getPrivateKey(s),h=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.deriveSymKey)(o,n);return this.setSymKey(h,a)},this.setSymKey=async(s,n)=>{this.isInitialized();const a=n||(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.hashKey)(s);return await this.keychain.set(a,s),a},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,n,a)=>{this.isInitialized();const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.validateEncoding)(a),h=(0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_6__.safeJsonStringify)(n);if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isTypeOneEnvelope)(o)){const U=o.senderPublicKey,J=o.receiverPublicKey;s=await this.generateSharedKey(U,J)}const d=this.getSymKey(s),{type:l,senderPublicKey:g}=o;return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.encrypt)({type:l,symKey:d,message:h,senderPublicKey:g})},this.decode=async(s,n,a)=>{this.isInitialized();const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.validateDecoding)(n,a);if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isTypeOneEnvelope)(o)){const l=o.receiverPublicKey,g=o.senderPublicKey;s=await this.generateSharedKey(l,g)}const h=this.getSymKey(s),d=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.decrypt)({symKey:h,encoded:n});return (0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_6__.safeJsonParse)(d)},this.getPayloadType=s=>{const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.deserialize)(s);return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.decodeTypeByte)(n.type)},this.getPayloadSenderPublicKey=s=>{const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.deserialize)(s);return n.senderPublicKey?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_9__.toString)(n.senderPublicKey,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.BASE16):void 0},this.core=e,this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name),this.keychain=i||new gt(this.core,this.logger)}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(oe)}catch{e=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.generateRandomBytes32)(),await this.keychain.set(oe,e)}return Ys(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Dt extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.IMessageTracker{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=Ye,this.version=Je,this.initialized=!1,this.storagePrefix=T,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.hashMessage)(s);let a=this.messages.get(i);return typeof a>"u"&&(a={}),typeof a[n]<"u"||(a[n]=s,this.messages.set(i,a),await this.persist()),n},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const n=this.get(i),a=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.hashMessage)(s);return typeof n[a]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(e,this.name),this.core=t}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.mapToObj)(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.objToMap)(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Zs extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.IPublisher{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.name=Xe,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(i,s,n)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});try{const a=n?.ttl||He,o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolName)(n),h=n?.prompt||!1,d=n?.tag||0,l={topic:i,message:s,opts:{ttl:a,relay:o,prompt:h,tag:d}},g=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.hashMessage)(s);this.queue.set(g,l);try{await await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.createExpiringPromise)(this.rpcPublish(i,s,a,o,h,d),this.publishTimeout),this.relayer.events.emit(D.publish,l)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(D.connection_stalled);return}this.onPublish(g,l),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}rpcPublish(e,t,i,s,n,a){var o,h,d,l;const g={method:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolApi)(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:n,tag:a}};return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isUndefined)((o=g.params)==null?void 0:o.prompt)&&((h=g.params)==null||delete h.prompt),(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isUndefined)((d=g.params)==null?void 0:d.tag)&&((l=g.params)==null||delete l.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:g}),this.relayer.request(g)}onPublish(e,t){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(_walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3__.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class Qs{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(n=>n!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var er=Object.defineProperty,tr=Object.defineProperties,ir=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,bt=(r,e,t)=>e in r?er(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$=(r,e)=>{for(var t in e||(e={}))sr.call(e,t)&&bt(r,t,e[t]);if(yt)for(var t of yt(e))rr.call(e,t)&&bt(r,t,e[t]);return r},ce=(r,e)=>tr(r,ir(e));class mt extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.ISubscriber{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Qs,this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.name=rt,this.version=nt,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=T,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolName)(s),a={topic:i,relay:n};this.pending.set(i,a);const o=await this.rpcSubscribe(i,n);return this.onSubscribe(o,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),o}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((s,n)=>{const a=new _walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.Watch;a.start(this.pendingSubscriptionWatchLabel);const o=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),s(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=at&&(clearInterval(o),a.stop(this.pendingSubscriptionWatchLabel),n(!1))},this.pollingInterval)}),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name),this.clientId=""}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolName)(i);await this.rpcUnsubscribe(e,t,s);const n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getSdkError)("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolApi)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.createExpiringPromise)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(D.connection_stalled)}return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.hashMessage)(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolApi)(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.createExpiringPromise)(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(D.connection_stalled)}}rpcUnsubscribe(e,t,i){const s={method:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getRelayProtocolApi)(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,ce($({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,$({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,$({},t)),this.topicMap.set(t.topic,e),this.events.emit(I.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(I.deleted,ce($({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(I.sync)}async reset(){if(!this.cached.length)return;const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}this.events.emit(I.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isValidArray)(t)&&this.onBatchSubscribe(t.map((i,s)=>ce($({},e[s]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(_walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3__.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(D.connect,async()=>{await this.onConnect()}),this.relayer.on(D.disconnect,()=>{this.onDisconnect()}),this.events.on(I.created,async e=>{const t=I.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(I.deleted,async e=>{const t=I.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var nr=Object.defineProperty,Et=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,or=Object.prototype.propertyIsEnumerable,ft=(r,e,t)=>e in r?nr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hr=(r,e)=>{for(var t in e||(e={}))ar.call(e,t)&&ft(r,t,e[t]);if(Et)for(var t of Et(e))or.call(e,t)&&ft(r,t,e[t]);return r};class wt extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.IRelayer{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.name=Qe,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(e.logger,this.name):pino__WEBPACK_IMPORTED_MODULE_1___default()((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getDefaultLoggerOptions)({level:e.logger||Ze})),this.messages=new Dt(this.logger,e.core),this.subscriber=new mt(this,this.logger),this.publisher=new Zs(this,this.logger),this.relayUrl=e?.relayUrl||he,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){this.isInitialized();let i="";return await Promise.all([new Promise(s=>{this.subscriber.once(I.created,n=>{n.topic===e&&s()})}),new Promise(async s=>{i=await this.subscriber.subscribe(e,t),s()})]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(D.transport_closed))}async transportOpen(e){if(!this.reconnecting){this.relayUrl=e||this.relayUrl,this.transportExplicitlyClosed=!1,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(I.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,i)=>{await (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.createExpiringPromise)(this.provider.connect(),5e3,"socket stalled").catch(s=>i(s)).then(()=>t()).finally(()=>this.removeListener(D.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(D.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.events.emit(D.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_11__.JsonRpcProvider(new _walletconnect_jsonrpc_ws_connection__WEBPACK_IMPORTED_MODULE_13__["default"]((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.formatRelayRpcUrl)({sdkVersion:it,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;return await this.subscriber.isSubscribed(t)?this.messages.has(t,i):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.isJsonRpcRequest)(e)){if(!e.method.endsWith(et))return;const t=e.params,{topic:i,message:s,publishedAt:n}=t.data,a={topic:i,message:s,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(hr({type:"event",event:t.id},a)),this.events.emit(t.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(D.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(M.payload,e=>this.onProviderPayload(e)),this.provider.on(M.connect,()=>{this.events.emit(D.connect)}),this.provider.on(M.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(M.error,e=>{this.logger.error(e),this.events.emit(D.error,e)})}registerEventListeners(){this.events.on(D.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(D.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.toMiliseconds)(tt))}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var cr=Object.defineProperty,vt=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,It=(r,e,t)=>e in r?cr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ct=(r,e)=>{for(var t in e||(e={}))ur.call(e,t)&&It(r,t,e[t]);if(vt)for(var t of vt(e))lr.call(e,t)&&It(r,t,e[t]);return r};class _t extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.IStore{constructor(e,t,i,s=T,n=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=st,this.cached=[],this.initialized=!1,this.storagePrefix=T,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isUndefined)(a)?this.map.set(this.getKey(a),a):(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isProposalStruct)(a)?this.map.set(a.id,a):(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isSessionStruct)(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,o)=>{this.isInitialized(),this.map.has(a)?await this.update(a,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:o}),this.map.set(a,o),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(o=>Object.keys(a).every(h=>lodash_isequal__WEBPACK_IMPORTED_MODULE_14___default()(o[h],a[h]))):this.values),this.update=async(a,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:o});const h=Ct(Ct({},this.getData(a)),o);this.map.set(a,h),await this.persist()},this.delete=async(a,o)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:o}),this.map.delete(a),await this.persist())},this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Rt{constructor(e,t){this.core=e,this.logger=t,this.name=ot,this.version=ht,this.events=new (events__WEBPACK_IMPORTED_MODULE_0___default()),this.initialized=!1,this.storagePrefix=T,this.ignoredPayloadTypes=[_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.TYPE_1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.generateRandomBytes32)(),s=await this.core.crypto.setSymKey(i),n=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.calcExpiry)(_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.FIVE_MINUTES),a={protocol:We},o={topic:s,expiry:n,relay:a,active:!1},h=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.formatUri)({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a});return await this.pairings.set(s,o),await this.core.relayer.subscribe(s),this.core.expirer.set(s,n),{topic:s,uri:h}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:s,symKey:n,relay:a}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.parseUri)(i.uri);if(this.pairings.keys.includes(s))throw new Error(`Pairing already exists: ${s}`);if(this.core.crypto.hasKeys(s))throw new Error(`Keychain already exists: ${s}`);const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.calcExpiry)(_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.FIVE_MINUTES),h={topic:s,relay:a,expiry:o,active:!1};return await this.pairings.set(s,h),await this.core.crypto.setSymKey(n,s),await this.core.relayer.subscribe(s,{relay:a}),this.core.expirer.set(s,o),i.activatePairing&&await this.activate({topic:s}),h},this.activate=async({topic:i})=>{this.isInitialized();const s=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.calcExpiry)(_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:s}),this.core.expirer.set(i,s)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:a,resolve:o,reject:h}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.createDelayedPromise)();this.events.once((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.engineEvent)("pairing_ping",n),({error:d})=>{d?h(d):o()}),await a()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getSdkError)("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,n)=>{const a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.formatJsonRpcRequest)(s,n),o=await this.core.crypto.encode(i,a),h=N[s].req;return this.core.history.set(i,a),await this.core.relayer.publish(i,o,h),a.id},this.sendResult=async(i,s,n)=>{const a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.formatJsonRpcResult)(i,n),o=await this.core.crypto.encode(s,a),h=await this.core.history.get(s,i),d=N[h.request.method].res;await this.core.relayer.publish(s,o,d),await this.core.history.resolve(a)},this.sendError=async(i,s,n)=>{const a=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.formatJsonRpcError)(i,n),o=await this.core.crypto.encode(s,a),h=await this.core.history.get(s,i),d=N[h.request.method]?N[h.request.method].res:N.unregistered_method.res;await this.core.relayer.publish(s,o,d),await this.core.history.resolve(a)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getSdkError)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isExpired)(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:n}=i,a=n.method;if(this.pairings.keys.includes(s))switch(a){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:n}=i,a=(await this.core.history.get(s,n.id)).request.method;if(this.pairings.keys.includes(s))switch(a){case"wc_pairingPing":return this.onPairingPingResponse(s,n);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit("pairing_ping",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onPairingPingResponse=(i,s)=>{const{id:n}=s;setTimeout(()=>{(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.isJsonRpcResult)(s)?this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.engineEvent)("pairing_ping",n),{}):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.isJsonRpcError)(s)&&this.events.emit((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.engineEvent)("pairing_ping",n),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:n,topic:i})}catch(a){await this.sendError(n,i,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:n,method:a}=s;try{if(this.registeredMethods.includes(a))return;const o=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getSdkError)("WC_METHOD_UNSUPPORTED",a);await this.sendError(n,i,o),this.logger.error(o)}catch(o){await this.sendError(n,i,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getSdkError)("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isValidParams)(i)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(s)}if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isValidUrl)(i.uri)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(s)}},this.isValidPing=async i=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isValidParams)(i)){const{message:n}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isValidParams)(i)){const{message:n}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isValidString)(i,!1)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.isExpired)(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name),this.pairings=new _t(this.core,this.logger,this.name,this.storagePrefix)}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(D.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.isJsonRpcRequest)(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.isJsonRpcResponse)(s)&&(await this.core.history.resolve(s),this.onRelayEventResponse({topic:t,payload:s}))})}registerExpirerEvents(){this.core.expirer.on(m.expired,async e=>{const{topic:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.parseExpirerTarget)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class St extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.IJsonRpcHistory{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.name=ct,this.version=ut,this.cached=[],this.initialized=!1,this.storagePrefix=T,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const a={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n};this.records.set(a.id,a),this.events.emit(C.created,a)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.isJsonRpcError)(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.events.emit(C.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(C.deleted,n)}})},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name)}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_12__.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(C.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(C.created,e=>{const t=C.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(C.updated,e=>{const t=C.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(C.deleted,e=>{const t=C.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Pt extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.IExpirer{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.name=lt,this.version=dt,this.cached=[],this.initialized=!1,this.storagePrefix=T,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const n=this.formatTarget(i),a={target:n,expiry:s};this.expirations.set(n,a),this.checkExpiry(n,a),this.events.emit(m.created,{target:n,expiration:a})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(m.deleted,{target:s,expiration:n})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name)}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.formatTopicTarget)(e);if(typeof e=="number")return (0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.formatIdTarget)(e);const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(m.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_10__.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(m.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(_walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3__.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(m.created,e=>{const t=m.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(m.expired,e=>{const t=m.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(m.deleted,e=>{const t=m.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_8__.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dr=Object.defineProperty,Tt=Object.getOwnPropertySymbols,gr=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,xt=(r,e,t)=>e in r?dr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ot=(r,e)=>{for(var t in e||(e={}))gr.call(e,t)&&xt(r,t,e[t]);if(Tt)for(var t of Tt(e))pr.call(e,t)&&xt(r,t,e[t]);return r};class Y extends _walletconnect_types__WEBPACK_IMPORTED_MODULE_5__.ICore{constructor(e){super(e),this.protocol=ae,this.version=Ke,this.name=G,this.events=new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter,this.initialized=!1,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||he;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:pino__WEBPACK_IMPORTED_MODULE_1___default()((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getDefaultLoggerOptions)({level:e?.logger||ke.logger}));this.logger=(0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.generateChildLogger)(t,this.name),this.heartbeat=new _walletconnect_heartbeat__WEBPACK_IMPORTED_MODULE_3__.HeartBeat,this.crypto=new pt(this,this.logger,e?.keychain),this.history=new St(this,this.logger),this.expirer=new Pt(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new _walletconnect_keyvaluestorage__WEBPACK_IMPORTED_MODULE_2__["default"](Ot(Ot({},Be),e?.storageOptions)),this.relayer=new wt({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Rt(this,this.logger)}static async init(e){const t=new Y(e);return await t.initialize(),t}get context(){return (0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_4__.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Dr=Y;
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js":
/*!***********************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js ***!
  \***********************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HEARTBEAT_EVENTS = exports.HEARTBEAT_INTERVAL = void 0;
const time_1 = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
exports.HEARTBEAT_INTERVAL = time_1.FIVE_SECONDS;
exports.HEARTBEAT_EVENTS = {
    pulse: "heartbeat_pulse",
};
//# sourceMappingURL=heartbeat.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./heartbeat */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/heartbeat.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js ***!
  \*************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.HeartBeat = void 0;
const tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
const events_1 = __webpack_require__(/*! events */ "./node_modules/events/events.js");
const time_1 = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
const types_1 = __webpack_require__(/*! ./types */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js");
const constants_1 = __webpack_require__(/*! ./constants */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js");
class HeartBeat extends types_1.IHeartBeat {
    constructor(opts) {
        super(opts);
        this.events = new events_1.EventEmitter();
        this.interval = constants_1.HEARTBEAT_INTERVAL;
        this.interval = (opts === null || opts === void 0 ? void 0 : opts.interval) || constants_1.HEARTBEAT_INTERVAL;
    }
    static init(opts) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const heartbeat = new HeartBeat(opts);
            yield heartbeat.init();
            return heartbeat;
        });
    }
    init() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            yield this.initialize();
        });
    }
    stop() {
        clearInterval(this.intervalRef);
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.once(event, listener);
    }
    off(event, listener) {
        this.events.off(event, listener);
    }
    removeListener(event, listener) {
        this.events.removeListener(event, listener);
    }
    initialize() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            this.intervalRef = setInterval(() => this.pulse(), time_1.toMiliseconds(this.interval));
        });
    }
    pulse() {
        this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse);
    }
}
exports.HeartBeat = HeartBeat;
//# sourceMappingURL=heartbeat.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/index.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/index.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./heartbeat */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/heartbeat.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./types */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./constants */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/constants/index.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
exports.IHeartBeat = void 0;
const events_1 = __webpack_require__(/*! @walletconnect/events */ "./node_modules/@walletconnect/events/dist/esm/index.js");
class IHeartBeat extends events_1.IEvents {
    constructor(opts) {
        super();
    }
}
exports.IHeartBeat = IHeartBeat;
//# sourceMappingURL=heartbeat.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/index.js ***!
  \***************************************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


Object.defineProperty(exports, "__esModule", ({ value: true }));
const tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./heartbeat */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/heartbeat/dist/cjs/types/heartbeat.js"), exports);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-provider/dist/esm/index.js":
/*!****************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-provider/dist/esm/index.js ***!
  \****************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JsonRpcProvider: () => (/* reexport safe */ _provider__WEBPACK_IMPORTED_MODULE_0__.JsonRpcProvider),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _provider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./provider */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-provider/dist/esm/provider.js");


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_provider__WEBPACK_IMPORTED_MODULE_0__["default"]);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-provider/dist/esm/provider.js":
/*!*******************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-provider/dist/esm/provider.js ***!
  \*******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JsonRpcProvider: () => (/* binding */ JsonRpcProvider),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ "./node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js");


class JsonRpcProvider extends _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_1__.IJsonRpcProvider {
    constructor(connection) {
        super(connection);
        this.events = new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
        this.hasRegisteredEventListeners = false;
        this.connection = this.setConnection(connection);
        if (this.connection.connected) {
            this.registerEventListeners();
        }
    }
    async connect(connection = this.connection) {
        await this.open(connection);
    }
    async disconnect() {
        await this.close();
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.once(event, listener);
    }
    off(event, listener) {
        this.events.off(event, listener);
    }
    removeListener(event, listener) {
        this.events.removeListener(event, listener);
    }
    async request(request, context) {
        return this.requestStrict((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_1__.formatJsonRpcRequest)(request.method, request.params || []), context);
    }
    async requestStrict(request, context) {
        return new Promise(async (resolve, reject) => {
            if (!this.connection.connected) {
                try {
                    await this.open();
                }
                catch (e) {
                    reject(e);
                }
            }
            this.events.on(`${request.id}`, response => {
                if ((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_1__.isJsonRpcError)(response)) {
                    reject(response.error);
                }
                else {
                    resolve(response.result);
                }
            });
            try {
                await this.connection.send(request, context);
            }
            catch (e) {
                reject(e);
            }
        });
    }
    setConnection(connection = this.connection) {
        return connection;
    }
    onPayload(payload) {
        this.events.emit("payload", payload);
        if ((0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_1__.isJsonRpcResponse)(payload)) {
            this.events.emit(`${payload.id}`, payload);
        }
        else {
            this.events.emit("message", {
                type: payload.method,
                data: payload.params,
            });
        }
    }
    onClose(event) {
        if (event && event.code === 3000) {
            this.events.emit("error", new Error(`WebSocket connection closed abnormally with code: ${event.code} ${event.reason ? `(${event.reason})` : ""}`));
        }
        this.events.emit("disconnect");
    }
    async open(connection = this.connection) {
        if (this.connection === connection && this.connection.connected)
            return;
        if (this.connection.connected)
            this.close();
        if (typeof connection === "string") {
            await this.connection.open(connection);
            connection = this.connection;
        }
        this.connection = this.setConnection(connection);
        await this.connection.open();
        this.registerEventListeners();
        this.events.emit("connect");
    }
    async close() {
        await this.connection.close();
    }
    registerEventListeners() {
        if (this.hasRegisteredEventListeners)
            return;
        this.connection.on("payload", (payload) => this.onPayload(payload));
        this.connection.on("close", (event) => this.onClose(event));
        this.connection.on("error", (error) => this.events.emit("error", error));
        this.connection.on("register_error", (error) => this.onClose());
        this.hasRegisteredEventListeners = true;
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (JsonRpcProvider);
//# sourceMappingURL=provider.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-ws-connection/dist/esm/index.js":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-ws-connection/dist/esm/index.js ***!
  \*********************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WsConnection: () => (/* reexport safe */ _ws__WEBPACK_IMPORTED_MODULE_0__.WsConnection),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ws__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ws */ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-ws-connection/dist/esm/ws.js");


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_ws__WEBPACK_IMPORTED_MODULE_0__["default"]);
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-ws-connection/dist/esm/ws.js":
/*!******************************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/jsonrpc-ws-connection/dist/esm/ws.js ***!
  \******************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WsConnection: () => (/* binding */ WsConnection),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/safe-json */ "./node_modules/@walletconnect/safe-json/dist/esm/index.js");
/* harmony import */ var _walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/jsonrpc-utils */ "./node_modules/@walletconnect/jsonrpc-utils/dist/esm/index.js");



const EVENT_EMITTER_MAX_LISTENERS_DEFAULT = 10;
const resolveWebSocketImplementation = () => {
    if (typeof __webpack_require__.g !== "undefined" && typeof __webpack_require__.g.WebSocket !== "undefined") {
        return __webpack_require__.g.WebSocket;
    }
    if (typeof window !== "undefined" && typeof window.WebSocket !== "undefined") {
        return window.WebSocket;
    }
    return __webpack_require__(/*! ws */ "./node_modules/@walletconnect/sign-client/node_modules/ws/browser.js");
};
const isBrowser = () => typeof window !== "undefined";
const WS = resolveWebSocketImplementation();
class WsConnection {
    constructor(url) {
        this.url = url;
        this.events = new events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
        this.registering = false;
        if (!(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__.isWsUrl)(url)) {
            throw new Error(`Provided URL is not compatible with WebSocket connection: ${url}`);
        }
        this.url = url;
    }
    get connected() {
        return typeof this.socket !== "undefined";
    }
    get connecting() {
        return this.registering;
    }
    on(event, listener) {
        this.events.on(event, listener);
    }
    once(event, listener) {
        this.events.once(event, listener);
    }
    off(event, listener) {
        this.events.off(event, listener);
    }
    removeListener(event, listener) {
        this.events.removeListener(event, listener);
    }
    async open(url = this.url) {
        await this.register(url);
    }
    async close() {
        return new Promise((resolve, reject) => {
            if (typeof this.socket === "undefined") {
                reject(new Error("Connection already closed"));
                return;
            }
            this.socket.onclose = event => {
                this.onClose(event);
                resolve();
            };
            this.socket.close();
        });
    }
    async send(payload, context) {
        if (typeof this.socket === "undefined") {
            this.socket = await this.register();
        }
        try {
            this.socket.send((0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_1__.safeJsonStringify)(payload));
        }
        catch (e) {
            this.onError(payload.id, e);
        }
    }
    register(url = this.url) {
        if (!(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__.isWsUrl)(url)) {
            throw new Error(`Provided URL is not compatible with WebSocket connection: ${url}`);
        }
        if (this.registering) {
            const currentMaxListeners = this.events.getMaxListeners();
            if (this.events.listenerCount("register_error") >= currentMaxListeners ||
                this.events.listenerCount("open") >= currentMaxListeners) {
                this.events.setMaxListeners(currentMaxListeners + 1);
            }
            return new Promise((resolve, reject) => {
                this.events.once("register_error", error => {
                    this.resetMaxListeners();
                    reject(error);
                });
                this.events.once("open", () => {
                    this.resetMaxListeners();
                    if (typeof this.socket === "undefined") {
                        return reject(new Error("WebSocket connection is missing or invalid"));
                    }
                    resolve(this.socket);
                });
            });
        }
        this.url = url;
        this.registering = true;
        return new Promise((resolve, reject) => {
            const opts = !(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__.isReactNative)() ? { rejectUnauthorized: !(0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__.isLocalhostUrl)(url) } : undefined;
            const socket = new WS(url, [], opts);
            if (isBrowser()) {
                socket.onerror = (event) => {
                    const errorEvent = event;
                    reject(this.emitError(errorEvent.error));
                };
            }
            else {
                socket.on("error", (errorEvent) => {
                    reject(this.emitError(errorEvent));
                });
            }
            socket.onopen = () => {
                this.onOpen(socket);
                resolve(socket);
            };
        });
    }
    onOpen(socket) {
        socket.onmessage = (event) => this.onPayload(event);
        socket.onclose = event => this.onClose(event);
        this.socket = socket;
        this.registering = false;
        this.events.emit("open");
    }
    onClose(event) {
        this.socket = undefined;
        this.registering = false;
        this.events.emit("close", event);
    }
    onPayload(e) {
        if (typeof e.data === "undefined")
            return;
        const payload = typeof e.data === "string" ? (0,_walletconnect_safe_json__WEBPACK_IMPORTED_MODULE_1__.safeJsonParse)(e.data) : e.data;
        this.events.emit("payload", payload);
    }
    onError(id, e) {
        const error = this.parseError(e);
        const message = error.message || error.toString();
        const payload = (0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__.formatJsonRpcError)(id, message);
        this.events.emit("payload", payload);
    }
    parseError(e, url = this.url) {
        return (0,_walletconnect_jsonrpc_utils__WEBPACK_IMPORTED_MODULE_2__.parseConnectionError)(e, url, "WS");
    }
    resetMaxListeners() {
        if (this.events.getMaxListeners() > EVENT_EMITTER_MAX_LISTENERS_DEFAULT) {
            this.events.setMaxListeners(EVENT_EMITTER_MAX_LISTENERS_DEFAULT);
        }
    }
    emitError(errorEvent) {
        const error = this.parseError(new Error((errorEvent === null || errorEvent === void 0 ? void 0 : errorEvent.message) || `WebSocket connection failed for URL: ${this.url}`));
        this.events.emit("register_error", error);
        return error;
    }
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WsConnection);
//# sourceMappingURL=ws.js.map

/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/types/dist/index.es.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/types/dist/index.es.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ICore: () => (/* binding */ n),
/* harmony export */   ICrypto: () => (/* binding */ l),
/* harmony export */   IEngine: () => (/* binding */ C),
/* harmony export */   IEngineEvents: () => (/* binding */ b),
/* harmony export */   IExpirer: () => (/* binding */ E),
/* harmony export */   IJsonRpcHistory: () => (/* binding */ h),
/* harmony export */   IKeyChain: () => (/* binding */ d),
/* harmony export */   IMessageTracker: () => (/* binding */ a),
/* harmony export */   IPairing: () => (/* binding */ m),
/* harmony export */   IPublisher: () => (/* binding */ u),
/* harmony export */   IRelayer: () => (/* binding */ g),
/* harmony export */   ISignClient: () => (/* binding */ y),
/* harmony export */   ISignClientEvents: () => (/* binding */ v),
/* harmony export */   IStore: () => (/* binding */ p),
/* harmony export */   ISubscriber: () => (/* binding */ x),
/* harmony export */   ISubscriberTopicMap: () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @walletconnect/events */ "./node_modules/@walletconnect/events/dist/esm/index.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);
class n extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s){super(),this.opts=s,this.protocol="wc",this.version=2}}class l{constructor(s,t,o){this.core=s,this.logger=t}}class h extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,t){super(),this.core=s,this.logger=t,this.records=new Map}}class a{constructor(s,t){this.logger=s,this.core=t}}class u extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,t){super(),this.relayer=s,this.logger=t}}class g extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s){super()}}class p{constructor(s,t,o,S){this.core=s,this.logger=t,this.name=o}}class I{constructor(){this.map=new Map}}class x extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,t){super(),this.relayer=s,this.logger=t}}class d{constructor(s,t){this.core=s,this.logger=t}}class E extends _walletconnect_events__WEBPACK_IMPORTED_MODULE_0__.IEvents{constructor(s,t){super(),this.core=s,this.logger=t}}class m{constructor(s,t){this.logger=s,this.core=t}}class v extends (events__WEBPACK_IMPORTED_MODULE_1___default()){constructor(){super()}}class y{constructor(s){this.opts=s,this.protocol="wc",this.version=2}}class b extends events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter{constructor(){super()}}class C{constructor(s){this.client=s}}
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/utils/dist/index.es.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/@walletconnect/utils/dist/index.es.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BASE10: () => (/* binding */ G),
/* harmony export */   BASE16: () => (/* binding */ f),
/* harmony export */   BASE64: () => (/* binding */ K),
/* harmony export */   COLON: () => (/* binding */ kn),
/* harmony export */   DEFAULT_DEPTH: () => (/* binding */ Z),
/* harmony export */   EMPTY_SPACE: () => (/* binding */ L),
/* harmony export */   ENV_MAP: () => (/* binding */ _),
/* harmony export */   ONE_THOUSAND: () => (/* binding */ Ln),
/* harmony export */   REACT_NATIVE_PRODUCT: () => (/* binding */ Ue),
/* harmony export */   RELAYER_DEFAULT_PROTOCOL: () => (/* binding */ xe),
/* harmony export */   SDK_TYPE: () => (/* binding */ we),
/* harmony export */   SLASH: () => (/* binding */ _e),
/* harmony export */   TYPE_0: () => (/* binding */ Y),
/* harmony export */   TYPE_1: () => (/* binding */ U),
/* harmony export */   UTF8: () => (/* binding */ k),
/* harmony export */   appendToQueryString: () => (/* binding */ $e),
/* harmony export */   assertType: () => (/* binding */ zn),
/* harmony export */   buildApprovedNamespaces: () => (/* binding */ Ot),
/* harmony export */   calcExpiry: () => (/* binding */ rt),
/* harmony export */   capitalize: () => (/* binding */ Qn),
/* harmony export */   capitalizeWord: () => (/* binding */ Le),
/* harmony export */   createDelayedPromise: () => (/* binding */ Zn),
/* harmony export */   createExpiringPromise: () => (/* binding */ Xn),
/* harmony export */   decodeTypeByte: () => (/* binding */ j),
/* harmony export */   decrypt: () => (/* binding */ Cn),
/* harmony export */   deriveSymKey: () => (/* binding */ Un),
/* harmony export */   deserialize: () => (/* binding */ Q),
/* harmony export */   encodeTypeByte: () => (/* binding */ Se),
/* harmony export */   encrypt: () => (/* binding */ jn),
/* harmony export */   engineEvent: () => (/* binding */ st),
/* harmony export */   enumify: () => (/* binding */ Jn),
/* harmony export */   formatAccountId: () => (/* binding */ Ee),
/* harmony export */   formatAccountWithChain: () => (/* binding */ gn),
/* harmony export */   formatChainId: () => (/* binding */ ye),
/* harmony export */   formatExpirerTarget: () => (/* binding */ ne),
/* harmony export */   formatIdTarget: () => (/* binding */ nt),
/* harmony export */   formatMessage: () => (/* binding */ Pn),
/* harmony export */   formatMessageContext: () => (/* binding */ Bn),
/* harmony export */   formatRelayParams: () => (/* binding */ ze),
/* harmony export */   formatRelayRpcUrl: () => (/* binding */ Hn),
/* harmony export */   formatTopicTarget: () => (/* binding */ et),
/* harmony export */   formatUA: () => (/* binding */ Me),
/* harmony export */   formatUri: () => (/* binding */ pt),
/* harmony export */   generateKeyPair: () => (/* binding */ Rn),
/* harmony export */   generateRandomBytes32: () => (/* binding */ An),
/* harmony export */   getAccountsChains: () => (/* binding */ T),
/* harmony export */   getAccountsFromNamespaces: () => (/* binding */ bn),
/* harmony export */   getAddressFromAccount: () => (/* binding */ he),
/* harmony export */   getAddressesFromAccounts: () => (/* binding */ Nn),
/* harmony export */   getAppMetadata: () => (/* binding */ xn),
/* harmony export */   getChainFromAccount: () => (/* binding */ ve),
/* harmony export */   getChainsFromAccounts: () => (/* binding */ ge),
/* harmony export */   getChainsFromNamespace: () => (/* binding */ V),
/* harmony export */   getChainsFromNamespaces: () => (/* binding */ On),
/* harmony export */   getChainsFromRequiredNamespaces: () => (/* binding */ Sn),
/* harmony export */   getDidAddress: () => (/* binding */ be),
/* harmony export */   getDidAddressSegments: () => (/* binding */ M),
/* harmony export */   getDidChainId: () => (/* binding */ Ne),
/* harmony export */   getEnvironment: () => (/* binding */ ee),
/* harmony export */   getHttpUrl: () => (/* binding */ qn),
/* harmony export */   getInternalError: () => (/* binding */ N),
/* harmony export */   getJavascriptID: () => (/* binding */ Ve),
/* harmony export */   getJavascriptOS: () => (/* binding */ De),
/* harmony export */   getLastItems: () => (/* binding */ ke),
/* harmony export */   getNamespacedDidChainId: () => (/* binding */ In),
/* harmony export */   getNamespacesChains: () => (/* binding */ Ye),
/* harmony export */   getNamespacesEventsForChainId: () => (/* binding */ Je),
/* harmony export */   getNamespacesMethodsForChainId: () => (/* binding */ We),
/* harmony export */   getRelayClientMetadata: () => (/* binding */ Fn),
/* harmony export */   getRelayProtocolApi: () => (/* binding */ ct),
/* harmony export */   getRelayProtocolName: () => (/* binding */ it),
/* harmony export */   getRequiredNamespacesFromNamespaces: () => (/* binding */ bt),
/* harmony export */   getSdkError: () => (/* binding */ R),
/* harmony export */   getUniqueValues: () => (/* binding */ B),
/* harmony export */   hasOverlap: () => (/* binding */ b),
/* harmony export */   hashKey: () => (/* binding */ _n),
/* harmony export */   hashMessage: () => (/* binding */ wn),
/* harmony export */   isBrowser: () => (/* binding */ Ce),
/* harmony export */   isCaipNamespace: () => (/* binding */ te),
/* harmony export */   isConformingNamespaces: () => (/* binding */ cn),
/* harmony export */   isExpired: () => (/* binding */ ot),
/* harmony export */   isNode: () => (/* binding */ X),
/* harmony export */   isProposalStruct: () => (/* binding */ Rt),
/* harmony export */   isReactNative: () => (/* binding */ je),
/* harmony export */   isSessionCompatible: () => (/* binding */ Pt),
/* harmony export */   isSessionStruct: () => (/* binding */ At),
/* harmony export */   isTypeOneEnvelope: () => (/* binding */ Dn),
/* harmony export */   isUndefined: () => (/* binding */ S),
/* harmony export */   isValidAccountId: () => (/* binding */ Ze),
/* harmony export */   isValidAccounts: () => (/* binding */ nn),
/* harmony export */   isValidActions: () => (/* binding */ rn),
/* harmony export */   isValidArray: () => (/* binding */ C),
/* harmony export */   isValidChainId: () => (/* binding */ H),
/* harmony export */   isValidChains: () => (/* binding */ Xe),
/* harmony export */   isValidController: () => (/* binding */ Ut),
/* harmony export */   isValidErrorReason: () => (/* binding */ $t),
/* harmony export */   isValidEvent: () => (/* binding */ Mt),
/* harmony export */   isValidId: () => (/* binding */ jt),
/* harmony export */   isValidNamespaceAccounts: () => (/* binding */ tn),
/* harmony export */   isValidNamespaceActions: () => (/* binding */ se),
/* harmony export */   isValidNamespaceChains: () => (/* binding */ en),
/* harmony export */   isValidNamespaceMethodsOrEvents: () => (/* binding */ oe),
/* harmony export */   isValidNamespaces: () => (/* binding */ on),
/* harmony export */   isValidNamespacesChainId: () => (/* binding */ Kt),
/* harmony export */   isValidNamespacesEvent: () => (/* binding */ Lt),
/* harmony export */   isValidNamespacesRequest: () => (/* binding */ kt),
/* harmony export */   isValidNumber: () => (/* binding */ F),
/* harmony export */   isValidObject: () => (/* binding */ x),
/* harmony export */   isValidParams: () => (/* binding */ Ct),
/* harmony export */   isValidRelay: () => (/* binding */ sn),
/* harmony export */   isValidRelays: () => (/* binding */ wt),
/* harmony export */   isValidRequest: () => (/* binding */ Dt),
/* harmony export */   isValidRequestExpiry: () => (/* binding */ Ht),
/* harmony export */   isValidRequiredNamespaces: () => (/* binding */ _t),
/* harmony export */   isValidResponse: () => (/* binding */ Vt),
/* harmony export */   isValidString: () => (/* binding */ m),
/* harmony export */   isValidUrl: () => (/* binding */ Tt),
/* harmony export */   mapEntries: () => (/* binding */ Wn),
/* harmony export */   mapToObj: () => (/* binding */ Gn),
/* harmony export */   mergeArrays: () => (/* binding */ O),
/* harmony export */   normalizeNamespaces: () => (/* binding */ re),
/* harmony export */   objToMap: () => (/* binding */ Yn),
/* harmony export */   parseAccountId: () => (/* binding */ z),
/* harmony export */   parseChainId: () => (/* binding */ me),
/* harmony export */   parseContextNames: () => (/* binding */ Ke),
/* harmony export */   parseExpirerTarget: () => (/* binding */ tt),
/* harmony export */   parseNamespaceKey: () => (/* binding */ Qe),
/* harmony export */   parseRelayParams: () => (/* binding */ qe),
/* harmony export */   parseUri: () => (/* binding */ ft),
/* harmony export */   serialize: () => (/* binding */ Ie),
/* harmony export */   validateDecoding: () => (/* binding */ $n),
/* harmony export */   validateEncoding: () => (/* binding */ Pe)
/* harmony export */ });
/* harmony import */ var _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stablelib/chacha20poly1305 */ "./node_modules/@stablelib/chacha20poly1305/lib/chacha20poly1305.js");
/* harmony import */ var _stablelib_hkdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stablelib/hkdf */ "./node_modules/@stablelib/hkdf/lib/hkdf.js");
/* harmony import */ var _stablelib_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stablelib/random */ "./node_modules/@stablelib/random/lib/random.js");
/* harmony import */ var _stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stablelib/sha256 */ "./node_modules/@stablelib/sha256/lib/sha256.js");
/* harmony import */ var _stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stablelib/x25519 */ "./node_modules/@stablelib/x25519/lib/x25519.js");
/* harmony import */ var uint8arrays__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uint8arrays */ "./node_modules/uint8arrays/esm/src/index.js");
/* harmony import */ var detect_browser__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! detect-browser */ "./node_modules/detect-browser/es/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @walletconnect/window-getters */ "./node_modules/@walletconnect/window-getters/dist/cjs/index.js");
/* harmony import */ var _walletconnect_window_metadata__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @walletconnect/window-metadata */ "./node_modules/@walletconnect/window-metadata/dist/cjs/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! query-string */ "./node_modules/@walletconnect/sign-client/node_modules/query-string/index.js");
/* harmony import */ var _walletconnect_relay_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @walletconnect/relay-api */ "./node_modules/@walletconnect/relay-api/dist/esm/index.js");
/* provided dependency */ var process = __webpack_require__(/*! ./node_modules/process/browser.js */ "./node_modules/process/browser.js");
const D=":";function me(e){const[n,t]=e.split(D);return{namespace:n,reference:t}}function ye(e){const{namespace:n,reference:t}=e;return[n,t].join(D)}function z(e){const[n,t,r]=e.split(D);return{namespace:n,reference:t,address:r}}function Ee(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join(D)}function B(e,n){const t=[];return e.forEach(r=>{const o=n(r);t.includes(o)||t.push(o)}),t}function he(e){const{address:n}=z(e);return n}function ve(e){const{namespace:n,reference:t}=z(e);return ye({namespace:n,reference:t})}function gn(e,n){const{namespace:t,reference:r}=me(n);return Ee({namespace:t,reference:r,address:e})}function Nn(e){return B(e,he)}function ge(e){return B(e,ve)}function bn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.accounts)}),t}function On(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...ge(o.accounts))}),t}function Sn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...V(r,o))}),t}function V(e,n){return e.includes(":")?[e]:n.chains||[]}const M=e=>e?.split(":"),Ne=e=>{const n=e&&M(e);if(n)return n[3]},In=e=>{const n=e&&M(e);if(n)return n[2]+":"+n[3]},be=e=>{const n=e&&M(e);if(n)return n.pop()},Pn=(e,n)=>{const t=`${e.domain} wants you to sign in with your Ethereum account:`,r=be(n),o=e.statement,s=`URI: ${e.aud}`,c=`Version: ${e.version}`,d=`Chain ID: ${Ne(n)}`,l=`Nonce: ${e.nonce}`,i=`Issued At: ${e.iat}`,u=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(a=>`- ${a}`).join(`
`)}`:void 0;return[t,r,"",o,"",s,c,d,l,i,u].filter(a=>a!=null).join(`
`)},G="base10",f="base16",K="base64pad",k="utf8",Y=0,U=1,Tn=0,Oe=1,W=12,J=32;function Rn(){const e=_stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__.generateKeyPair();return{privateKey:(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e.secretKey,f),publicKey:(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e.publicKey,f)}}function An(){const e=(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(J);return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e,f)}function Un(e,n){const t=_stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__.sharedKey((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,f),(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(n,f)),r=new _stablelib_hkdf__WEBPACK_IMPORTED_MODULE_1__.HKDF(_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.SHA256,t).expand(J);return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(r,f)}function _n(e){const n=(0,_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.hash)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,f));return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(n,f)}function wn(e){const n=(0,_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.hash)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,k));return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(n,f)}function Se(e){return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(`${e}`,G)}function j(e){return Number((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e,G))}function jn(e){const n=Se(typeof e.type<"u"?e.type:Y);if(j(n)===U&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.senderPublicKey,f):void 0,r=typeof e.iv<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.iv,f):(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(W),o=new _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__.ChaCha20Poly1305((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.symKey,f)).seal(r,(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.message,k));return Ie({type:n,sealed:o,iv:r,senderPublicKey:t})}function Cn(e){const n=new _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__.ChaCha20Poly1305((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.symKey,f)),{sealed:t,iv:r}=Q(e.encoded),o=n.open(r,t);if(o===null)throw new Error("Failed to decrypt");return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(o,k)}function Ie(e){if(j(e.type)===U){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.concat)([e.type,e.senderPublicKey,e.iv,e.sealed]),K)}return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.concat)([e.type,e.iv,e.sealed]),K)}function Q(e){const n=(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,K),t=n.slice(Tn,Oe),r=Oe;if(j(t)===U){const d=r+J,l=d+W,i=n.slice(r,d),u=n.slice(d,l),a=n.slice(l);return{type:t,sealed:a,iv:u,senderPublicKey:i}}const o=r+W,s=n.slice(r,o),c=n.slice(o);return{type:t,sealed:c,iv:s}}function $n(e,n){const t=Q(e);return Pe({type:j(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(t.senderPublicKey,f):void 0,receiverPublicKey:n?.receiverPublicKey})}function Pe(e){const n=e?.type||Y;if(n===U){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Dn(e){return e.type===U&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Vn=Object.defineProperty,Te=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Re=(e,n,t)=>n in e?Vn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ae=(e,n)=>{for(var t in n||(n={}))Mn.call(n,t)&&Re(e,t,n[t]);if(Te)for(var t of Te(n))Kn.call(n,t)&&Re(e,t,n[t]);return e};const Ue="ReactNative",_={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},L=" ",kn=":",_e="/",Z=2,Ln=1e3,we="js";function X(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function je(){return!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getDocument)()&&!!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getNavigator)()&&navigator.product===Ue}function Ce(){return!X()&&!!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getNavigator)()}function ee(){return je()?_.reactNative:X()?_.node:Ce()?_.browser:_.unknown}function $e(e,n){let t=query_string__WEBPACK_IMPORTED_MODULE_9__.parse(e);return t=Ae(Ae({},t),n),e=query_string__WEBPACK_IMPORTED_MODULE_9__.stringify(t),e}function xn(){return (0,_walletconnect_window_metadata__WEBPACK_IMPORTED_MODULE_8__.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function Fn(e,n){var t;const r=ee(),o={protocol:e,version:n,env:r};return r==="browser"&&(o.host=((t=(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getLocation)())==null?void 0:t.host)||"unknown"),o}function De(){const e=(0,detect_browser__WEBPACK_IMPORTED_MODULE_11__.detect)();if(e===null)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[n,e.name,e.version].join("-"):[n,e.version].join("-")}function Ve(){var e;const n=ee();return n===_.browser?[n,((e=(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getLocation)())==null?void 0:e.host)||"unknown"].join(":"):n}function Me(e,n,t){const r=De(),o=Ve();return[[e,n].join("-"),[we,t].join("-"),r,o].join("/")}function Hn({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:c}){const d=t.split("?"),l=Me(e,n,r),i={auth:o,ua:l,projectId:s,useOnCloseEvent:c||void 0},u=$e(d[1]||"",i);return d[0]+"?"+u}function qn(e){let n=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const t=typeof n<"u"?e.split("://")[1]:e;return n=n==="wss"?"https":"http",[n,t].join("://")}function zn(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid "${n}" param`)}function Ke(e,n=Z){return ke(e.split(_e),n)}function Bn(e){return Ke(e).join(L)}function b(e,n){return e.filter(t=>n.includes(t)).length===e.length}function ke(e,n=Z){return e.slice(Math.max(e.length-n,0))}function Gn(e){return Object.fromEntries(e.entries())}function Yn(e){return new Map(Object.entries(e))}function Wn(e,n){const t={};return Object.keys(e).forEach(r=>{t[r]=n(e[r])}),t}const Jn=e=>e;function Le(e){return e.trim().replace(/^\w/,n=>n.toUpperCase())}function Qn(e){return e.split(L).map(n=>Le(n)).join(L)}function Zn(e=_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,n){const t=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e||_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES);let r,o,s;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c))},reject:c=>{s&&o&&(clearTimeout(s),o(c))},done:()=>new Promise((c,d)=>{s=setTimeout(()=>{d(new Error(n))},t),r=c,o=d})}}function Xn(e,n,t){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(t)),n);try{const c=await e;r(c)}catch(c){o(c)}clearTimeout(s)})}function ne(e,n){if(typeof n=="string"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function et(e){return ne("topic",e)}function nt(e){return ne("id",e)}function tt(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if(n==="topic"&&typeof t=="string")r.topic=t;else if(n==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function rt(e,n){return (0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.fromMiliseconds)((n||Date.now())+(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e))}function ot(e){return Date.now()>=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e)}function st(e,n){return`${e}${n?`:${n}`:""}`}function O(e=[],n=[]){return[...new Set([...e,...n])]}const xe="irn";function it(e){return e?.relay||{protocol:xe}}function ct(e){const n=_walletconnect_relay_api__WEBPACK_IMPORTED_MODULE_10__.RELAY_JSONRPC[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var at=Object.defineProperty,Fe=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,He=(e,n,t)=>n in e?at(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,lt=(e,n)=>{for(var t in n||(n={}))ut.call(n,t)&&He(e,t,n[t]);if(Fe)for(var t of Fe(n))dt.call(n,t)&&He(e,t,n[t]);return e};function qe(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,""),c=e[o];t[s]=c}}),t}function ft(e){const n=e.indexOf(":"),t=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split("@"),s=typeof t<"u"?e.substring(t):"",c=query_string__WEBPACK_IMPORTED_MODULE_9__.parse(s);return{protocol:r,topic:o[0],version:parseInt(o[1],10),symKey:c.symKey,relay:qe(c)}}function ze(e,n="-"){const t="relay",r={};return Object.keys(e).forEach(o=>{const s=t+n+o;e[o]&&(r[s]=e[o])}),r}function pt(e){return`${e.protocol}:${e.topic}@${e.version}?`+query_string__WEBPACK_IMPORTED_MODULE_9__.stringify(lt({symKey:e.symKey},ze(e.relay)))}var mt=Object.defineProperty,yt=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Ge=(e,n,t)=>n in e?mt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,gt=(e,n)=>{for(var t in n||(n={}))ht.call(n,t)&&Ge(e,t,n[t]);if(Be)for(var t of Be(n))vt.call(n,t)&&Ge(e,t,n[t]);return e},Nt=(e,n)=>yt(e,Et(n));function T(e){const n=[];return e.forEach(t=>{const[r,o]=t.split(":");n.push(`${r}:${o}`)}),n}function Ye(e){const n=[];return Object.values(e).forEach(t=>{n.push(...T(t.accounts))}),n}function We(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.methods)}),t}function Je(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.events)}),t}function bt(e,n){const t=on(e,n);if(t)throw new Error(t.message);const r={};for(const[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return r}function Ot(e){const{requiredNamespaces:n,optionalNamespaces:t={},supportedNamespaces:r}=e,o=re(n),s=re(t),c={};Object.keys(r).forEach(i=>{const u=r[i].chains,a=r[i].methods,g=r[i].events,A=r[i].accounts;c[i]={chains:u,methods:a,events:g,accounts:A}});const d=cn(n,c,"approve()");if(d)throw new Error(d.message);const l={};return Object.keys(o).forEach(i=>{const u=r[i].chains.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.chains)==null?void 0:y.includes(v)}),a=r[i].methods.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.methods)==null?void 0:y.includes(v)}),g=r[i].events.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.events)==null?void 0:y.includes(v)}),A=u.map(v=>r[i].accounts.filter(p=>p.includes(v))).flat();l[i]={chains:u,methods:a,events:g,accounts:A}}),Object.keys(s).forEach(i=>{var u,a,g,A,v,p;if(!r[i])return;const y=(a=(u=s[i])==null?void 0:u.chains)==null?void 0:a.filter(I=>r[i].chains.includes(I)),un=r[i].methods.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.methods)==null?void 0:w.includes(I)}),dn=r[i].events.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.events)==null?void 0:w.includes(I)}),ln=y?.map(I=>r[i].accounts.filter(P=>P.includes(I))).flat();l[i]={chains:O((g=l[i])==null?void 0:g.chains,y),methods:O((A=l[i])==null?void 0:A.methods,un),events:O((v=l[i])==null?void 0:v.events,dn),accounts:O((p=l[i])==null?void 0:p.accounts,ln)}}),l}function te(e){return e.includes(":")}function Qe(e){return te(e)?e.split(":")[0]:e}function re(e){var n,t,r;const o={};if(!x(e))return o;for(const[s,c]of Object.entries(e)){const d=te(s)?[s]:c.chains,l=c.methods||[],i=c.events||[],u=Qe(s);o[u]=Nt(gt({},o[u]),{chains:O(d,(n=o[u])==null?void 0:n.chains),methods:O(l,(t=o[u])==null?void 0:t.methods),events:O(i,(r=o[u])==null?void 0:r.events)})}return o}const St={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},It={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N(e,n){const{message:t,code:r}=It[e];return{message:n?`${t} ${n}`:t,code:r}}function R(e,n){const{message:t,code:r}=St[e];return{message:n?`${t} ${n}`:t,code:r}}function C(e,n){return Array.isArray(e)?typeof n<"u"&&e.length?e.every(n):!0:!1}function x(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function S(e){return typeof e>"u"}function m(e,n){return n&&S(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function F(e,n){return n&&S(e)?!0:typeof e=="number"&&!isNaN(e)}function Pt(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t);let s=!0;return b(o,r)?(r.forEach(c=>{const{accounts:d,methods:l,events:i}=e.namespaces[c],u=T(d),a=t[c];(!b(V(c,a),u)||!b(a.methods,l)||!b(a.events,i))&&(s=!1)}),s):!1}function H(e){return m(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Ze(e){if(m(e,!1)&&e.includes(":")){const n=e.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&H(t)}}return!1}function Tt(e){if(m(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Rt(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function At(e){return e?.topic}function Ut(e,n){let t=null;return m(e?.publicKey,!1)||(t=N("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function oe(e){let n=!0;return C(e)?e.length&&(n=e.every(t=>m(t,!1))):n=!1,n}function Xe(e,n,t){let r=null;return C(n)?n.forEach(o=>{r||(!H(o)||!o.includes(e))&&(r=R("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):r=R("UNSUPPORTED_CHAINS",`${t}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),r}function en(e,n){let t=null;return Object.entries(e).forEach(([r,o])=>{if(t)return;const s=Xe(r,V(r,o),`${n} requiredNamespace`);s&&(t=s)}),t}function nn(e,n){let t=null;return C(e)?e.forEach(r=>{t||Ze(r)||(t=R("UNSUPPORTED_ACCOUNTS",`${n}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=R("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function tn(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=nn(r?.accounts,`${n} namespace`);o&&(t=o)}),t}function rn(e,n){let t=null;return oe(e?.methods)?oe(e?.events)||(t=R("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=R("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}function se(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=rn(r,`${n}, namespace`);o&&(t=o)}),t}function _t(e,n,t){let r=null;if(e&&x(e)){const o=se(e,n);o&&(r=o);const s=en(e,n);s&&(r=s)}else r=N("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function on(e,n){let t=null;if(e&&x(e)){const r=se(e,n);r&&(t=r);const o=tn(e,n);o&&(t=o)}else t=N("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function sn(e){return m(e.protocol,!0)}function wt(e,n){let t=!1;return n&&!e?t=!0:e&&C(e)&&e.length&&e.forEach(r=>{t=sn(r)}),t}function jt(e){return typeof e=="number"}function Ct(e){return typeof e<"u"&&typeof e!==null}function $t(e){return!(!e||typeof e!="object"||!e.code||!F(e.code,!1)||!e.message||!m(e.message,!1))}function Dt(e){return!(S(e)||!m(e.method,!1))}function Vt(e){return!(S(e)||S(e.result)&&S(e.error)||!F(e.id,!1)||!m(e.jsonrpc,!1))}function Mt(e){return!(S(e)||!m(e.name,!1))}function Kt(e,n){return!(!H(n)||!Ye(e).includes(n))}function kt(e,n,t){return m(t,!1)?We(e,n).includes(t):!1}function Lt(e,n,t){return m(t,!1)?Je(e,n).includes(t):!1}function cn(e,n,t){let r=null;const o=xt(e),s=Ft(n),c=Object.keys(o),d=Object.keys(s),l=an(Object.keys(e)),i=an(Object.keys(n)),u=l.filter(a=>!i.includes(a));return u.length&&(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(n).toString()}`)),b(c,d)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${d.toString()}`)),Object.keys(n).forEach(a=>{if(!a.includes(":")||r)return;const g=T(n[a].accounts);g.includes(a)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${a}
        Required: ${a}
        Approved: ${g.toString()}`))}),c.forEach(a=>{r||(b(o[a].methods,s[a].methods)?b(o[a].events,s[a].events)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`))}),r}function xt(e){const n={};return Object.keys(e).forEach(t=>{var r;t.includes(":")?n[t]=e[t]:(r=e[t].chains)==null||r.forEach(o=>{n[o]={methods:e[t].methods,events:e[t].events}})}),n}function an(e){return[...new Set(e.map(n=>n.includes(":")?n.split(":")[0]:n))]}function Ft(e){const n={};return Object.keys(e).forEach(t=>{if(t.includes(":"))n[t]=e[t];else{const r=T(e[t].accounts);r?.forEach(o=>{n[o]={accounts:e[t].accounts.filter(s=>s.includes(`${o}:`)),methods:e[t].methods,events:e[t].events}})}}),n}function Ht(e,n){return F(e,!1)&&e<=n.max&&e>=n.min}
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/filter-obj/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/filter-obj/index.js ***!
  \**********************************************************************************/
/***/ ((module) => {


module.exports = function (obj, predicate) {
	var ret = {};
	var keys = Object.keys(obj);
	var isArr = Array.isArray(predicate);

	for (var i = 0; i < keys.length; i++) {
		var key = keys[i];
		var val = obj[key];

		if (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {
			ret[key] = val;
		}
	}

	return ret;
};


/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/query-string/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/query-string/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


const strictUriEncode = __webpack_require__(/*! strict-uri-encode */ "./node_modules/strict-uri-encode/index.js");
const decodeComponent = __webpack_require__(/*! decode-uri-component */ "./node_modules/decode-uri-component/index.js");
const splitOnFirst = __webpack_require__(/*! split-on-first */ "./node_modules/split-on-first/index.js");
const filterObject = __webpack_require__(/*! filter-obj */ "./node_modules/@walletconnect/sign-client/node_modules/filter-obj/index.js");

const isNullOrUndefined = value => value === null || value === undefined;

const encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');

function encoderForArrayFormat(options) {
	switch (options.arrayFormat) {
		case 'index':
			return key => (result, value) => {
				const index = result.length;

				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), '[', index, ']'].join('')];
				}

				return [
					...result,
					[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')
				];
			};

		case 'bracket':
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), '[]'].join('')];
				}

				return [...result, [encode(key, options), '[]=', encode(value, options)].join('')];
			};

		case 'colon-list-separator':
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), ':list='].join('')];
				}

				return [...result, [encode(key, options), ':list=', encode(value, options)].join('')];
			};

		case 'comma':
		case 'separator':
		case 'bracket-separator': {
			const keyValueSep = options.arrayFormat === 'bracket-separator' ?
				'[]=' :
				'=';

			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				// Translate null to an empty string so that it doesn't serialize as 'null'
				value = value === null ? '' : value;

				if (result.length === 0) {
					return [[encode(key, options), keyValueSep, encode(value, options)].join('')];
				}

				return [[result, encode(value, options)].join(options.arrayFormatSeparator)];
			};
		}

		default:
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, encode(key, options)];
				}

				return [...result, [encode(key, options), '=', encode(value, options)].join('')];
			};
	}
}

function parserForArrayFormat(options) {
	let result;

	switch (options.arrayFormat) {
		case 'index':
			return (key, value, accumulator) => {
				result = /\[(\d*)\]$/.exec(key);

				key = key.replace(/\[\d*\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = {};
				}

				accumulator[key][result[1]] = value;
			};

		case 'bracket':
			return (key, value, accumulator) => {
				result = /(\[\])$/.exec(key);
				key = key.replace(/\[\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		case 'colon-list-separator':
			return (key, value, accumulator) => {
				result = /(:list)$/.exec(key);
				key = key.replace(/:list$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		case 'comma':
		case 'separator':
			return (key, value, accumulator) => {
				const isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);
				const isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));
				value = isEncodedArray ? decode(value, options) : value;
				const newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);
				accumulator[key] = newValue;
			};

		case 'bracket-separator':
			return (key, value, accumulator) => {
				const isArray = /(\[\])$/.test(key);
				key = key.replace(/\[\]$/, '');

				if (!isArray) {
					accumulator[key] = value ? decode(value, options) : value;
					return;
				}

				const arrayValue = value === null ?
					[] :
					value.split(options.arrayFormatSeparator).map(item => decode(item, options));

				if (accumulator[key] === undefined) {
					accumulator[key] = arrayValue;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], arrayValue);
			};

		default:
			return (key, value, accumulator) => {
				if (accumulator[key] === undefined) {
					accumulator[key] = value;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};
	}
}

function validateArrayFormatSeparator(value) {
	if (typeof value !== 'string' || value.length !== 1) {
		throw new TypeError('arrayFormatSeparator must be single character string');
	}
}

function encode(value, options) {
	if (options.encode) {
		return options.strict ? strictUriEncode(value) : encodeURIComponent(value);
	}

	return value;
}

function decode(value, options) {
	if (options.decode) {
		return decodeComponent(value);
	}

	return value;
}

function keysSorter(input) {
	if (Array.isArray(input)) {
		return input.sort();
	}

	if (typeof input === 'object') {
		return keysSorter(Object.keys(input))
			.sort((a, b) => Number(a) - Number(b))
			.map(key => input[key]);
	}

	return input;
}

function removeHash(input) {
	const hashStart = input.indexOf('#');
	if (hashStart !== -1) {
		input = input.slice(0, hashStart);
	}

	return input;
}

function getHash(url) {
	let hash = '';
	const hashStart = url.indexOf('#');
	if (hashStart !== -1) {
		hash = url.slice(hashStart);
	}

	return hash;
}

function extract(input) {
	input = removeHash(input);
	const queryStart = input.indexOf('?');
	if (queryStart === -1) {
		return '';
	}

	return input.slice(queryStart + 1);
}

function parseValue(value, options) {
	if (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {
		value = Number(value);
	} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {
		value = value.toLowerCase() === 'true';
	}

	return value;
}

function parse(query, options) {
	options = Object.assign({
		decode: true,
		sort: true,
		arrayFormat: 'none',
		arrayFormatSeparator: ',',
		parseNumbers: false,
		parseBooleans: false
	}, options);

	validateArrayFormatSeparator(options.arrayFormatSeparator);

	const formatter = parserForArrayFormat(options);

	// Create an object with no prototype
	const ret = Object.create(null);

	if (typeof query !== 'string') {
		return ret;
	}

	query = query.trim().replace(/^[?#&]/, '');

	if (!query) {
		return ret;
	}

	for (const param of query.split('&')) {
		if (param === '') {
			continue;
		}

		let [key, value] = splitOnFirst(options.decode ? param.replace(/\+/g, ' ') : param, '=');

		// Missing `=` should be `null`:
		// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters
		value = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);
		formatter(decode(key, options), value, ret);
	}

	for (const key of Object.keys(ret)) {
		const value = ret[key];
		if (typeof value === 'object' && value !== null) {
			for (const k of Object.keys(value)) {
				value[k] = parseValue(value[k], options);
			}
		} else {
			ret[key] = parseValue(value, options);
		}
	}

	if (options.sort === false) {
		return ret;
	}

	return (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {
		const value = ret[key];
		if (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {
			// Sort object keys, not values
			result[key] = keysSorter(value);
		} else {
			result[key] = value;
		}

		return result;
	}, Object.create(null));
}

exports.extract = extract;
exports.parse = parse;

exports.stringify = (object, options) => {
	if (!object) {
		return '';
	}

	options = Object.assign({
		encode: true,
		strict: true,
		arrayFormat: 'none',
		arrayFormatSeparator: ','
	}, options);

	validateArrayFormatSeparator(options.arrayFormatSeparator);

	const shouldFilter = key => (
		(options.skipNull && isNullOrUndefined(object[key])) ||
		(options.skipEmptyString && object[key] === '')
	);

	const formatter = encoderForArrayFormat(options);

	const objectCopy = {};

	for (const key of Object.keys(object)) {
		if (!shouldFilter(key)) {
			objectCopy[key] = object[key];
		}
	}

	const keys = Object.keys(objectCopy);

	if (options.sort !== false) {
		keys.sort(options.sort);
	}

	return keys.map(key => {
		const value = object[key];

		if (value === undefined) {
			return '';
		}

		if (value === null) {
			return encode(key, options);
		}

		if (Array.isArray(value)) {
			if (value.length === 0 && options.arrayFormat === 'bracket-separator') {
				return encode(key, options) + '[]';
			}

			return value
				.reduce(formatter(key), [])
				.join('&');
		}

		return encode(key, options) + '=' + encode(value, options);
	}).filter(x => x.length > 0).join('&');
};

exports.parseUrl = (url, options) => {
	options = Object.assign({
		decode: true
	}, options);

	const [url_, hash] = splitOnFirst(url, '#');

	return Object.assign(
		{
			url: url_.split('?')[0] || '',
			query: parse(extract(url), options)
		},
		options && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}
	);
};

exports.stringifyUrl = (object, options) => {
	options = Object.assign({
		encode: true,
		strict: true,
		[encodeFragmentIdentifier]: true
	}, options);

	const url = removeHash(object.url).split('?')[0] || '';
	const queryFromUrl = exports.extract(object.url);
	const parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});

	const query = Object.assign(parsedQueryFromUrl, object.query);
	let queryString = exports.stringify(query, options);
	if (queryString) {
		queryString = `?${queryString}`;
	}

	let hash = getHash(object.url);
	if (object.fragmentIdentifier) {
		hash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;
	}

	return `${url}${queryString}${hash}`;
};

exports.pick = (input, filter, options) => {
	options = Object.assign({
		parseFragmentIdentifier: true,
		[encodeFragmentIdentifier]: false
	}, options);

	const {url, query, fragmentIdentifier} = exports.parseUrl(input, options);
	return exports.stringifyUrl({
		url,
		query: filterObject(query, filter),
		fragmentIdentifier
	}, options);
};

exports.exclude = (input, filter, options) => {
	const exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);

	return exports.pick(input, exclusionFilter, options);
};


/***/ }),

/***/ "./node_modules/@walletconnect/sign-client/node_modules/ws/browser.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@walletconnect/sign-client/node_modules/ws/browser.js ***!
  \****************************************************************************/
/***/ ((module) => {



module.exports = function () {
  throw new Error(
    'ws does not work in the browser. Browser clients must use the native ' +
      'WebSocket object'
  );
};


/***/ }),

/***/ "./node_modules/@walletconnect/universal-provider/dist/index.es.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@walletconnect/universal-provider/dist/index.es.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UniversalProvider: () => (/* binding */ pe),
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pino */ "./node_modules/pino/browser.js");
/* harmony import */ var pino__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pino__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @walletconnect/sign-client */ "./node_modules/@walletconnect/sign-client/dist/index.es.js");
/* harmony import */ var _walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @walletconnect/utils */ "./node_modules/@walletconnect/universal-provider/node_modules/@walletconnect/utils/dist/index.es.js");
/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @walletconnect/logger */ "./node_modules/@walletconnect/logger/dist/cjs/index.js");
/* harmony import */ var _walletconnect_logger__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_logger__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @walletconnect/jsonrpc-provider */ "./node_modules/@walletconnect/jsonrpc-provider/dist/esm/index.js");
/* harmony import */ var _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @walletconnect/jsonrpc-http-connection */ "./node_modules/@walletconnect/jsonrpc-http-connection/dist/esm/index.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");
/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_6__);
/* provided dependency */ var console = __webpack_require__(/*! ./node_modules/console-browserify/index.js */ "./node_modules/console-browserify/index.js");
const I="error",M="wss://relay.walletconnect.com",G="wc",z="universal_provider",E=`${G}@${2}:${z}:`,x="https://rpc.walletconnect.com/v1",o={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var J=Object.defineProperty,$=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,H=(i,e,t)=>e in i?J(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,f=(i,e)=>{for(var t in e||(e={}))V.call(e,t)&&H(i,t,e[t]);if($)for(var t of $(e))W.call(e,t)&&H(i,t,e[t]);return i};function a(i,e,t){let s;const n=g(i);return e.rpcMap&&(s=e.rpcMap[n]),s||(s=`${x}?chainId=eip155:${n}&projectId=${t}`),s}function g(i){return i.includes("eip155")?Number(i.split(":")[1]):Number(i)}function K(i,e){if(!e.includes(i))throw new Error(`Chain '${i}' not approved. Please use one of the following: ${e.toString()}`)}function X(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Y(i,e){const t=Object.keys(e.namespaces).filter(n=>n.includes(i));if(!t.length)return[];const s=[];return t.forEach(n=>{const r=e.namespaces[n].accounts;s.push(...r)}),s}function B(i,e={}){const t=A(i),s=A(e);return f({},Object.assign(t,s))}function A(i){var e,t,s,n;const r={};if(!(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.isValidObject)(i))return r;for(const[v,l]of Object.entries(i)){const q=y(v)?[v]:l.chains,S=l.methods||[],D=l.events||[],p=N(v);r[p]={chains:P(q,(e=r[p])==null?void 0:e.chains),methods:P(S,(t=r[p])==null?void 0:t.methods),events:P(D,(s=r[p])==null?void 0:s.events),rpcMap:f(f({},(n=r[p])==null?void 0:n.rpcMap),l.rpcMap)}}return r}function y(i){return i.includes(":")}function N(i){return y(i)?i.split(":")[0]:i}function P(i=[],e=[]){return[...new Set([...i,...e])]}const h=(i,e)=>{const t=s=>{s.request!==e.request||s.topic!==e.topic||(i.events.removeListener("session_request_sent",t),Q(e))};i.on("session_request_sent",t)};function Q(i){if(typeof window<"u")try{const e=window.localStorage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");if(e){const t=JSON.parse(e),s=t?.href;if(typeof s=="string"){s.endsWith("/")&&s.slice(0,-1);const n=`${s}/wc?requestId=${i.id}&sessionTopic=${i.topic}`;window.open(n,"_self","noreferrer noopener")}}}catch(e){console.error(e)}}class Z{constructor(e){this.name="eip155",this.namespace=e.namespace,this.client=e.client,this.events=e.events,this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){var t;switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return this.handleSwitchChain(e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0"),null;case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?(h(this.client,e),await this.client.request(e)):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const s=g(e);if(!this.httpProviders[s]){const n=t||a(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,n)}this.chainId=s,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__.HttpConnection(s))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const n=g(t);e[n]=this.createHttpProvider(n,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){const t=parseInt(e,16),s=`${this.name}:${t}`;K(s,this.namespace.chains),this.setDefaultChain(`${t}`)}}class ee{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__["default"](s))}}class te{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__["default"](s))}}class se{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__["default"](s))}}class ie{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__["default"](s))}}class ne{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=e.events,this.client=e.client,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?(h(this.client,e),this.client.request(e)):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||a(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(o.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||a(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new _walletconnect_jsonrpc_provider__WEBPACK_IMPORTED_MODULE_4__.JsonRpcProvider(new _walletconnect_jsonrpc_http_connection__WEBPACK_IMPORTED_MODULE_5__["default"](s))}}var re=Object.defineProperty,ae=Object.defineProperties,oe=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,b=(i,e,t)=>e in i?re(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,u=(i,e)=>{for(var t in e||(e={}))ce.call(e,t)&&b(i,t,e[t]);if(O)for(var t of O(e))he.call(e,t)&&b(i,t,e[t]);return i},w=(i,e)=>ae(i,oe(e));class m{constructor(e){this.events=new (events__WEBPACK_IMPORTED_MODULE_6___default()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:pino__WEBPACK_IMPORTED_MODULE_0___default()((0,_walletconnect_logger__WEBPACK_IMPORTED_MODULE_3__.getDefaultLoggerOptions)({level:e?.logger||I}))}static async init(e){const t=new m(e);return await t.initialize(),t}async request(e,t){const[s,n]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:u({},e),chainId:`${s}:${n}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(n=>t(null,n)).catch(n=>t(n,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.getSdkError)("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await n().then(r=>{this.session=r}).catch(r=>{if(r.message!==_walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_1__.PROPOSAL_EXPIRY_MESSAGE)throw r;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{const[s,n]=this.validateChain(e);this.getProvider(s).setDefaultChain(n,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if((0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.isValidArray)(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await _walletconnect_sign_client__WEBPACK_IMPORTED_MODULE_1__["default"].init({logger:this.providerOpts.logger||I,relayUrl:this.providerOpts.relayUrl||M,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");[...new Set(Object.keys(this.session.namespaces).map(e=>N(e)))].forEach(e=>{if(!this.session)return;const t=Y(e,this.session),s=X(t),n=B(this.namespaces,this.optionalNamespaces),r=w(u({},n[e]),{accounts:t,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new Z({client:this.client,namespace:r,events:this.events});break;case"solana":this.rpcProviders[e]=new ee({client:this.client,namespace:r,events:this.events});break;case"cosmos":this.rpcProviders[e]=new te({client:this.client,namespace:r,events:this.events});break;case"polkadot":break;case"cip34":this.rpcProviders[e]=new se({client:this.client,namespace:r,events:this.events});break;case"elrond":this.rpcProviders[e]=new ie({client:this.client,namespace:r,events:this.events});break;case"multiversx":this.rpcProviders[e]=new ne({client:this.client,namespace:r,events:this.events});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?this.events.emit("accountsChanged",s.data):s.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:n}=t,r=(s=this.client)==null?void 0:s.session.get(e);this.session=w(u({},r),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",w(u({},(0,_walletconnect_utils__WEBPACK_IMPORTED_MODULE_2__.getSdkError)("USER_DISCONNECTED")),{data:e.topic}))}),this.on(o.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:n}=e;if(!t||!Object.keys(t).length)throw new Error("Namespaces must be not empty");this.namespaces=t,this.optionalNamespaces=s,this.sessionProperties=n,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=e?.split(":")||["",""];if(t&&!Object.keys(this.namespaces).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const n=Object.keys(this.namespaces)[0],r=this.rpcProviders[n].getDefaultChain();return[n,r]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){const[s,n]=this.validateChain(e);t||this.getProvider(s).setDefaultChain(n),this.namespaces[s].defaultChain=n,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${E}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${E}/${e}`)}}const pe=m;
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/universal-provider/node_modules/@walletconnect/utils/dist/index.es.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@walletconnect/universal-provider/node_modules/@walletconnect/utils/dist/index.es.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BASE10: () => (/* binding */ G),
/* harmony export */   BASE16: () => (/* binding */ f),
/* harmony export */   BASE64: () => (/* binding */ K),
/* harmony export */   COLON: () => (/* binding */ kn),
/* harmony export */   DEFAULT_DEPTH: () => (/* binding */ Z),
/* harmony export */   EMPTY_SPACE: () => (/* binding */ L),
/* harmony export */   ENV_MAP: () => (/* binding */ _),
/* harmony export */   ONE_THOUSAND: () => (/* binding */ Ln),
/* harmony export */   REACT_NATIVE_PRODUCT: () => (/* binding */ Ue),
/* harmony export */   RELAYER_DEFAULT_PROTOCOL: () => (/* binding */ xe),
/* harmony export */   SDK_TYPE: () => (/* binding */ we),
/* harmony export */   SLASH: () => (/* binding */ _e),
/* harmony export */   TYPE_0: () => (/* binding */ Y),
/* harmony export */   TYPE_1: () => (/* binding */ U),
/* harmony export */   UTF8: () => (/* binding */ k),
/* harmony export */   appendToQueryString: () => (/* binding */ $e),
/* harmony export */   assertType: () => (/* binding */ zn),
/* harmony export */   buildApprovedNamespaces: () => (/* binding */ Ot),
/* harmony export */   calcExpiry: () => (/* binding */ rt),
/* harmony export */   capitalize: () => (/* binding */ Qn),
/* harmony export */   capitalizeWord: () => (/* binding */ Le),
/* harmony export */   createDelayedPromise: () => (/* binding */ Zn),
/* harmony export */   createExpiringPromise: () => (/* binding */ Xn),
/* harmony export */   decodeTypeByte: () => (/* binding */ j),
/* harmony export */   decrypt: () => (/* binding */ Cn),
/* harmony export */   deriveSymKey: () => (/* binding */ Un),
/* harmony export */   deserialize: () => (/* binding */ Q),
/* harmony export */   encodeTypeByte: () => (/* binding */ Se),
/* harmony export */   encrypt: () => (/* binding */ jn),
/* harmony export */   engineEvent: () => (/* binding */ st),
/* harmony export */   enumify: () => (/* binding */ Jn),
/* harmony export */   formatAccountId: () => (/* binding */ Ee),
/* harmony export */   formatAccountWithChain: () => (/* binding */ gn),
/* harmony export */   formatChainId: () => (/* binding */ ye),
/* harmony export */   formatExpirerTarget: () => (/* binding */ ne),
/* harmony export */   formatIdTarget: () => (/* binding */ nt),
/* harmony export */   formatMessage: () => (/* binding */ Pn),
/* harmony export */   formatMessageContext: () => (/* binding */ Bn),
/* harmony export */   formatRelayParams: () => (/* binding */ ze),
/* harmony export */   formatRelayRpcUrl: () => (/* binding */ Hn),
/* harmony export */   formatTopicTarget: () => (/* binding */ et),
/* harmony export */   formatUA: () => (/* binding */ Me),
/* harmony export */   formatUri: () => (/* binding */ pt),
/* harmony export */   generateKeyPair: () => (/* binding */ Rn),
/* harmony export */   generateRandomBytes32: () => (/* binding */ An),
/* harmony export */   getAccountsChains: () => (/* binding */ T),
/* harmony export */   getAccountsFromNamespaces: () => (/* binding */ bn),
/* harmony export */   getAddressFromAccount: () => (/* binding */ he),
/* harmony export */   getAddressesFromAccounts: () => (/* binding */ Nn),
/* harmony export */   getAppMetadata: () => (/* binding */ xn),
/* harmony export */   getChainFromAccount: () => (/* binding */ ve),
/* harmony export */   getChainsFromAccounts: () => (/* binding */ ge),
/* harmony export */   getChainsFromNamespace: () => (/* binding */ V),
/* harmony export */   getChainsFromNamespaces: () => (/* binding */ On),
/* harmony export */   getChainsFromRequiredNamespaces: () => (/* binding */ Sn),
/* harmony export */   getDidAddress: () => (/* binding */ be),
/* harmony export */   getDidAddressSegments: () => (/* binding */ M),
/* harmony export */   getDidChainId: () => (/* binding */ Ne),
/* harmony export */   getEnvironment: () => (/* binding */ ee),
/* harmony export */   getHttpUrl: () => (/* binding */ qn),
/* harmony export */   getInternalError: () => (/* binding */ N),
/* harmony export */   getJavascriptID: () => (/* binding */ Ve),
/* harmony export */   getJavascriptOS: () => (/* binding */ De),
/* harmony export */   getLastItems: () => (/* binding */ ke),
/* harmony export */   getNamespacedDidChainId: () => (/* binding */ In),
/* harmony export */   getNamespacesChains: () => (/* binding */ Ye),
/* harmony export */   getNamespacesEventsForChainId: () => (/* binding */ Je),
/* harmony export */   getNamespacesMethodsForChainId: () => (/* binding */ We),
/* harmony export */   getRelayClientMetadata: () => (/* binding */ Fn),
/* harmony export */   getRelayProtocolApi: () => (/* binding */ ct),
/* harmony export */   getRelayProtocolName: () => (/* binding */ it),
/* harmony export */   getRequiredNamespacesFromNamespaces: () => (/* binding */ bt),
/* harmony export */   getSdkError: () => (/* binding */ R),
/* harmony export */   getUniqueValues: () => (/* binding */ B),
/* harmony export */   hasOverlap: () => (/* binding */ b),
/* harmony export */   hashKey: () => (/* binding */ _n),
/* harmony export */   hashMessage: () => (/* binding */ wn),
/* harmony export */   isBrowser: () => (/* binding */ Ce),
/* harmony export */   isCaipNamespace: () => (/* binding */ te),
/* harmony export */   isConformingNamespaces: () => (/* binding */ cn),
/* harmony export */   isExpired: () => (/* binding */ ot),
/* harmony export */   isNode: () => (/* binding */ X),
/* harmony export */   isProposalStruct: () => (/* binding */ Rt),
/* harmony export */   isReactNative: () => (/* binding */ je),
/* harmony export */   isSessionCompatible: () => (/* binding */ Pt),
/* harmony export */   isSessionStruct: () => (/* binding */ At),
/* harmony export */   isTypeOneEnvelope: () => (/* binding */ Dn),
/* harmony export */   isUndefined: () => (/* binding */ S),
/* harmony export */   isValidAccountId: () => (/* binding */ Ze),
/* harmony export */   isValidAccounts: () => (/* binding */ nn),
/* harmony export */   isValidActions: () => (/* binding */ rn),
/* harmony export */   isValidArray: () => (/* binding */ C),
/* harmony export */   isValidChainId: () => (/* binding */ H),
/* harmony export */   isValidChains: () => (/* binding */ Xe),
/* harmony export */   isValidController: () => (/* binding */ Ut),
/* harmony export */   isValidErrorReason: () => (/* binding */ $t),
/* harmony export */   isValidEvent: () => (/* binding */ Mt),
/* harmony export */   isValidId: () => (/* binding */ jt),
/* harmony export */   isValidNamespaceAccounts: () => (/* binding */ tn),
/* harmony export */   isValidNamespaceActions: () => (/* binding */ se),
/* harmony export */   isValidNamespaceChains: () => (/* binding */ en),
/* harmony export */   isValidNamespaceMethodsOrEvents: () => (/* binding */ oe),
/* harmony export */   isValidNamespaces: () => (/* binding */ on),
/* harmony export */   isValidNamespacesChainId: () => (/* binding */ Kt),
/* harmony export */   isValidNamespacesEvent: () => (/* binding */ Lt),
/* harmony export */   isValidNamespacesRequest: () => (/* binding */ kt),
/* harmony export */   isValidNumber: () => (/* binding */ F),
/* harmony export */   isValidObject: () => (/* binding */ x),
/* harmony export */   isValidParams: () => (/* binding */ Ct),
/* harmony export */   isValidRelay: () => (/* binding */ sn),
/* harmony export */   isValidRelays: () => (/* binding */ wt),
/* harmony export */   isValidRequest: () => (/* binding */ Dt),
/* harmony export */   isValidRequestExpiry: () => (/* binding */ Ht),
/* harmony export */   isValidRequiredNamespaces: () => (/* binding */ _t),
/* harmony export */   isValidResponse: () => (/* binding */ Vt),
/* harmony export */   isValidString: () => (/* binding */ m),
/* harmony export */   isValidUrl: () => (/* binding */ Tt),
/* harmony export */   mapEntries: () => (/* binding */ Wn),
/* harmony export */   mapToObj: () => (/* binding */ Gn),
/* harmony export */   mergeArrays: () => (/* binding */ O),
/* harmony export */   normalizeNamespaces: () => (/* binding */ re),
/* harmony export */   objToMap: () => (/* binding */ Yn),
/* harmony export */   parseAccountId: () => (/* binding */ z),
/* harmony export */   parseChainId: () => (/* binding */ me),
/* harmony export */   parseContextNames: () => (/* binding */ Ke),
/* harmony export */   parseExpirerTarget: () => (/* binding */ tt),
/* harmony export */   parseNamespaceKey: () => (/* binding */ Qe),
/* harmony export */   parseRelayParams: () => (/* binding */ qe),
/* harmony export */   parseUri: () => (/* binding */ ft),
/* harmony export */   serialize: () => (/* binding */ Ie),
/* harmony export */   validateDecoding: () => (/* binding */ $n),
/* harmony export */   validateEncoding: () => (/* binding */ Pe)
/* harmony export */ });
/* harmony import */ var _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stablelib/chacha20poly1305 */ "./node_modules/@stablelib/chacha20poly1305/lib/chacha20poly1305.js");
/* harmony import */ var _stablelib_hkdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @stablelib/hkdf */ "./node_modules/@stablelib/hkdf/lib/hkdf.js");
/* harmony import */ var _stablelib_random__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @stablelib/random */ "./node_modules/@stablelib/random/lib/random.js");
/* harmony import */ var _stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @stablelib/sha256 */ "./node_modules/@stablelib/sha256/lib/sha256.js");
/* harmony import */ var _stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @stablelib/x25519 */ "./node_modules/@stablelib/x25519/lib/x25519.js");
/* harmony import */ var uint8arrays__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uint8arrays */ "./node_modules/uint8arrays/esm/src/index.js");
/* harmony import */ var detect_browser__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! detect-browser */ "./node_modules/detect-browser/es/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @walletconnect/time */ "./node_modules/@walletconnect/time/dist/cjs/index.js");
/* harmony import */ var _walletconnect_time__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @walletconnect/window-getters */ "./node_modules/@walletconnect/window-getters/dist/cjs/index.js");
/* harmony import */ var _walletconnect_window_metadata__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @walletconnect/window-metadata */ "./node_modules/@walletconnect/window-metadata/dist/cjs/index.js");
/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! query-string */ "./node_modules/@walletconnect/universal-provider/node_modules/query-string/index.js");
/* harmony import */ var _walletconnect_relay_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @walletconnect/relay-api */ "./node_modules/@walletconnect/relay-api/dist/esm/index.js");
/* provided dependency */ var process = __webpack_require__(/*! ./node_modules/process/browser.js */ "./node_modules/process/browser.js");
const D=":";function me(e){const[n,t]=e.split(D);return{namespace:n,reference:t}}function ye(e){const{namespace:n,reference:t}=e;return[n,t].join(D)}function z(e){const[n,t,r]=e.split(D);return{namespace:n,reference:t,address:r}}function Ee(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join(D)}function B(e,n){const t=[];return e.forEach(r=>{const o=n(r);t.includes(o)||t.push(o)}),t}function he(e){const{address:n}=z(e);return n}function ve(e){const{namespace:n,reference:t}=z(e);return ye({namespace:n,reference:t})}function gn(e,n){const{namespace:t,reference:r}=me(n);return Ee({namespace:t,reference:r,address:e})}function Nn(e){return B(e,he)}function ge(e){return B(e,ve)}function bn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.accounts)}),t}function On(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...ge(o.accounts))}),t}function Sn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...V(r,o))}),t}function V(e,n){return e.includes(":")?[e]:n.chains||[]}const M=e=>e?.split(":"),Ne=e=>{const n=e&&M(e);if(n)return n[3]},In=e=>{const n=e&&M(e);if(n)return n[2]+":"+n[3]},be=e=>{const n=e&&M(e);if(n)return n.pop()},Pn=(e,n)=>{const t=`${e.domain} wants you to sign in with your Ethereum account:`,r=be(n),o=e.statement,s=`URI: ${e.aud}`,c=`Version: ${e.version}`,d=`Chain ID: ${Ne(n)}`,l=`Nonce: ${e.nonce}`,i=`Issued At: ${e.iat}`,u=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(a=>`- ${a}`).join(`
`)}`:void 0;return[t,r,"",o,"",s,c,d,l,i,u].filter(a=>a!=null).join(`
`)},G="base10",f="base16",K="base64pad",k="utf8",Y=0,U=1,Tn=0,Oe=1,W=12,J=32;function Rn(){const e=_stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__.generateKeyPair();return{privateKey:(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e.secretKey,f),publicKey:(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e.publicKey,f)}}function An(){const e=(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(J);return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e,f)}function Un(e,n){const t=_stablelib_x25519__WEBPACK_IMPORTED_MODULE_4__.sharedKey((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,f),(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(n,f)),r=new _stablelib_hkdf__WEBPACK_IMPORTED_MODULE_1__.HKDF(_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.SHA256,t).expand(J);return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(r,f)}function _n(e){const n=(0,_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.hash)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,f));return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(n,f)}function wn(e){const n=(0,_stablelib_sha256__WEBPACK_IMPORTED_MODULE_3__.hash)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,k));return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(n,f)}function Se(e){return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(`${e}`,G)}function j(e){return Number((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(e,G))}function jn(e){const n=Se(typeof e.type<"u"?e.type:Y);if(j(n)===U&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.senderPublicKey,f):void 0,r=typeof e.iv<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.iv,f):(0,_stablelib_random__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(W),o=new _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__.ChaCha20Poly1305((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.symKey,f)).seal(r,(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.message,k));return Ie({type:n,sealed:o,iv:r,senderPublicKey:t})}function Cn(e){const n=new _stablelib_chacha20poly1305__WEBPACK_IMPORTED_MODULE_0__.ChaCha20Poly1305((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e.symKey,f)),{sealed:t,iv:r}=Q(e.encoded),o=n.open(r,t);if(o===null)throw new Error("Failed to decrypt");return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(o,k)}function Ie(e){if(j(e.type)===U){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.concat)([e.type,e.senderPublicKey,e.iv,e.sealed]),K)}return (0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)((0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.concat)([e.type,e.iv,e.sealed]),K)}function Q(e){const n=(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.fromString)(e,K),t=n.slice(Tn,Oe),r=Oe;if(j(t)===U){const d=r+J,l=d+W,i=n.slice(r,d),u=n.slice(d,l),a=n.slice(l);return{type:t,sealed:a,iv:u,senderPublicKey:i}}const o=r+W,s=n.slice(r,o),c=n.slice(o);return{type:t,sealed:c,iv:s}}function $n(e,n){const t=Q(e);return Pe({type:j(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?(0,uint8arrays__WEBPACK_IMPORTED_MODULE_5__.toString)(t.senderPublicKey,f):void 0,receiverPublicKey:n?.receiverPublicKey})}function Pe(e){const n=e?.type||Y;if(n===U){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Dn(e){return e.type===U&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Vn=Object.defineProperty,Te=Object.getOwnPropertySymbols,Mn=Object.prototype.hasOwnProperty,Kn=Object.prototype.propertyIsEnumerable,Re=(e,n,t)=>n in e?Vn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ae=(e,n)=>{for(var t in n||(n={}))Mn.call(n,t)&&Re(e,t,n[t]);if(Te)for(var t of Te(n))Kn.call(n,t)&&Re(e,t,n[t]);return e};const Ue="ReactNative",_={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},L=" ",kn=":",_e="/",Z=2,Ln=1e3,we="js";function X(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function je(){return!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getDocument)()&&!!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getNavigator)()&&navigator.product===Ue}function Ce(){return!X()&&!!(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getNavigator)()}function ee(){return je()?_.reactNative:X()?_.node:Ce()?_.browser:_.unknown}function $e(e,n){let t=query_string__WEBPACK_IMPORTED_MODULE_9__.parse(e);return t=Ae(Ae({},t),n),e=query_string__WEBPACK_IMPORTED_MODULE_9__.stringify(t),e}function xn(){return (0,_walletconnect_window_metadata__WEBPACK_IMPORTED_MODULE_8__.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function Fn(e,n){var t;const r=ee(),o={protocol:e,version:n,env:r};return r==="browser"&&(o.host=((t=(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getLocation)())==null?void 0:t.host)||"unknown"),o}function De(){const e=(0,detect_browser__WEBPACK_IMPORTED_MODULE_11__.detect)();if(e===null)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[n,e.name,e.version].join("-"):[n,e.version].join("-")}function Ve(){var e;const n=ee();return n===_.browser?[n,((e=(0,_walletconnect_window_getters__WEBPACK_IMPORTED_MODULE_7__.getLocation)())==null?void 0:e.host)||"unknown"].join(":"):n}function Me(e,n,t){const r=De(),o=Ve();return[[e,n].join("-"),[we,t].join("-"),r,o].join("/")}function Hn({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:c}){const d=t.split("?"),l=Me(e,n,r),i={auth:o,ua:l,projectId:s,useOnCloseEvent:c||void 0},u=$e(d[1]||"",i);return d[0]+"?"+u}function qn(e){let n=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const t=typeof n<"u"?e.split("://")[1]:e;return n=n==="wss"?"https":"http",[n,t].join("://")}function zn(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid "${n}" param`)}function Ke(e,n=Z){return ke(e.split(_e),n)}function Bn(e){return Ke(e).join(L)}function b(e,n){return e.filter(t=>n.includes(t)).length===e.length}function ke(e,n=Z){return e.slice(Math.max(e.length-n,0))}function Gn(e){return Object.fromEntries(e.entries())}function Yn(e){return new Map(Object.entries(e))}function Wn(e,n){const t={};return Object.keys(e).forEach(r=>{t[r]=n(e[r])}),t}const Jn=e=>e;function Le(e){return e.trim().replace(/^\w/,n=>n.toUpperCase())}function Qn(e){return e.split(L).map(n=>Le(n)).join(L)}function Zn(e=_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES,n){const t=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e||_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.FIVE_MINUTES);let r,o,s;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c))},reject:c=>{s&&o&&(clearTimeout(s),o(c))},done:()=>new Promise((c,d)=>{s=setTimeout(()=>{d(new Error(n))},t),r=c,o=d})}}function Xn(e,n,t){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(t)),n);try{const c=await e;r(c)}catch(c){o(c)}clearTimeout(s)})}function ne(e,n){if(typeof n=="string"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function et(e){return ne("topic",e)}function nt(e){return ne("id",e)}function tt(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if(n==="topic"&&typeof t=="string")r.topic=t;else if(n==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function rt(e,n){return (0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.fromMiliseconds)((n||Date.now())+(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e))}function ot(e){return Date.now()>=(0,_walletconnect_time__WEBPACK_IMPORTED_MODULE_6__.toMiliseconds)(e)}function st(e,n){return`${e}${n?`:${n}`:""}`}function O(e=[],n=[]){return[...new Set([...e,...n])]}const xe="irn";function it(e){return e?.relay||{protocol:xe}}function ct(e){const n=_walletconnect_relay_api__WEBPACK_IMPORTED_MODULE_10__.RELAY_JSONRPC[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var at=Object.defineProperty,Fe=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,He=(e,n,t)=>n in e?at(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,lt=(e,n)=>{for(var t in n||(n={}))ut.call(n,t)&&He(e,t,n[t]);if(Fe)for(var t of Fe(n))dt.call(n,t)&&He(e,t,n[t]);return e};function qe(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,""),c=e[o];t[s]=c}}),t}function ft(e){const n=e.indexOf(":"),t=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split("@"),s=typeof t<"u"?e.substring(t):"",c=query_string__WEBPACK_IMPORTED_MODULE_9__.parse(s);return{protocol:r,topic:o[0],version:parseInt(o[1],10),symKey:c.symKey,relay:qe(c)}}function ze(e,n="-"){const t="relay",r={};return Object.keys(e).forEach(o=>{const s=t+n+o;e[o]&&(r[s]=e[o])}),r}function pt(e){return`${e.protocol}:${e.topic}@${e.version}?`+query_string__WEBPACK_IMPORTED_MODULE_9__.stringify(lt({symKey:e.symKey},ze(e.relay)))}var mt=Object.defineProperty,yt=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,ht=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Ge=(e,n,t)=>n in e?mt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,gt=(e,n)=>{for(var t in n||(n={}))ht.call(n,t)&&Ge(e,t,n[t]);if(Be)for(var t of Be(n))vt.call(n,t)&&Ge(e,t,n[t]);return e},Nt=(e,n)=>yt(e,Et(n));function T(e){const n=[];return e.forEach(t=>{const[r,o]=t.split(":");n.push(`${r}:${o}`)}),n}function Ye(e){const n=[];return Object.values(e).forEach(t=>{n.push(...T(t.accounts))}),n}function We(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.methods)}),t}function Je(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.events)}),t}function bt(e,n){const t=on(e,n);if(t)throw new Error(t.message);const r={};for(const[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return r}function Ot(e){const{requiredNamespaces:n,optionalNamespaces:t={},supportedNamespaces:r}=e,o=re(n),s=re(t),c={};Object.keys(r).forEach(i=>{const u=r[i].chains,a=r[i].methods,g=r[i].events,A=r[i].accounts;c[i]={chains:u,methods:a,events:g,accounts:A}});const d=cn(n,c,"approve()");if(d)throw new Error(d.message);const l={};return Object.keys(o).forEach(i=>{const u=r[i].chains.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.chains)==null?void 0:y.includes(v)}),a=r[i].methods.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.methods)==null?void 0:y.includes(v)}),g=r[i].events.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.events)==null?void 0:y.includes(v)}),A=u.map(v=>r[i].accounts.filter(p=>p.includes(v))).flat();l[i]={chains:u,methods:a,events:g,accounts:A}}),Object.keys(s).forEach(i=>{var u,a,g,A,v,p;if(!r[i])return;const y=(a=(u=s[i])==null?void 0:u.chains)==null?void 0:a.filter(I=>r[i].chains.includes(I)),un=r[i].methods.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.methods)==null?void 0:w.includes(I)}),dn=r[i].events.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.events)==null?void 0:w.includes(I)}),ln=y?.map(I=>r[i].accounts.filter(P=>P.includes(I))).flat();l[i]={chains:O((g=l[i])==null?void 0:g.chains,y),methods:O((A=l[i])==null?void 0:A.methods,un),events:O((v=l[i])==null?void 0:v.events,dn),accounts:O((p=l[i])==null?void 0:p.accounts,ln)}}),l}function te(e){return e.includes(":")}function Qe(e){return te(e)?e.split(":")[0]:e}function re(e){var n,t,r;const o={};if(!x(e))return o;for(const[s,c]of Object.entries(e)){const d=te(s)?[s]:c.chains,l=c.methods||[],i=c.events||[],u=Qe(s);o[u]=Nt(gt({},o[u]),{chains:O(d,(n=o[u])==null?void 0:n.chains),methods:O(l,(t=o[u])==null?void 0:t.methods),events:O(i,(r=o[u])==null?void 0:r.events)})}return o}const St={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},It={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N(e,n){const{message:t,code:r}=It[e];return{message:n?`${t} ${n}`:t,code:r}}function R(e,n){const{message:t,code:r}=St[e];return{message:n?`${t} ${n}`:t,code:r}}function C(e,n){return Array.isArray(e)?typeof n<"u"&&e.length?e.every(n):!0:!1}function x(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function S(e){return typeof e>"u"}function m(e,n){return n&&S(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function F(e,n){return n&&S(e)?!0:typeof e=="number"&&!isNaN(e)}function Pt(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t);let s=!0;return b(o,r)?(r.forEach(c=>{const{accounts:d,methods:l,events:i}=e.namespaces[c],u=T(d),a=t[c];(!b(V(c,a),u)||!b(a.methods,l)||!b(a.events,i))&&(s=!1)}),s):!1}function H(e){return m(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Ze(e){if(m(e,!1)&&e.includes(":")){const n=e.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&H(t)}}return!1}function Tt(e){if(m(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function Rt(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function At(e){return e?.topic}function Ut(e,n){let t=null;return m(e?.publicKey,!1)||(t=N("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function oe(e){let n=!0;return C(e)?e.length&&(n=e.every(t=>m(t,!1))):n=!1,n}function Xe(e,n,t){let r=null;return C(n)?n.forEach(o=>{r||(!H(o)||!o.includes(e))&&(r=R("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):r=R("UNSUPPORTED_CHAINS",`${t}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),r}function en(e,n){let t=null;return Object.entries(e).forEach(([r,o])=>{if(t)return;const s=Xe(r,V(r,o),`${n} requiredNamespace`);s&&(t=s)}),t}function nn(e,n){let t=null;return C(e)?e.forEach(r=>{t||Ze(r)||(t=R("UNSUPPORTED_ACCOUNTS",`${n}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=R("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function tn(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=nn(r?.accounts,`${n} namespace`);o&&(t=o)}),t}function rn(e,n){let t=null;return oe(e?.methods)?oe(e?.events)||(t=R("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=R("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}function se(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=rn(r,`${n}, namespace`);o&&(t=o)}),t}function _t(e,n,t){let r=null;if(e&&x(e)){const o=se(e,n);o&&(r=o);const s=en(e,n);s&&(r=s)}else r=N("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function on(e,n){let t=null;if(e&&x(e)){const r=se(e,n);r&&(t=r);const o=tn(e,n);o&&(t=o)}else t=N("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function sn(e){return m(e.protocol,!0)}function wt(e,n){let t=!1;return n&&!e?t=!0:e&&C(e)&&e.length&&e.forEach(r=>{t=sn(r)}),t}function jt(e){return typeof e=="number"}function Ct(e){return typeof e<"u"&&typeof e!==null}function $t(e){return!(!e||typeof e!="object"||!e.code||!F(e.code,!1)||!e.message||!m(e.message,!1))}function Dt(e){return!(S(e)||!m(e.method,!1))}function Vt(e){return!(S(e)||S(e.result)&&S(e.error)||!F(e.id,!1)||!m(e.jsonrpc,!1))}function Mt(e){return!(S(e)||!m(e.name,!1))}function Kt(e,n){return!(!H(n)||!Ye(e).includes(n))}function kt(e,n,t){return m(t,!1)?We(e,n).includes(t):!1}function Lt(e,n,t){return m(t,!1)?Je(e,n).includes(t):!1}function cn(e,n,t){let r=null;const o=xt(e),s=Ft(n),c=Object.keys(o),d=Object.keys(s),l=an(Object.keys(e)),i=an(Object.keys(n)),u=l.filter(a=>!i.includes(a));return u.length&&(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(n).toString()}`)),b(c,d)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${d.toString()}`)),Object.keys(n).forEach(a=>{if(!a.includes(":")||r)return;const g=T(n[a].accounts);g.includes(a)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${a}
        Required: ${a}
        Approved: ${g.toString()}`))}),c.forEach(a=>{r||(b(o[a].methods,s[a].methods)?b(o[a].events,s[a].events)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`))}),r}function xt(e){const n={};return Object.keys(e).forEach(t=>{var r;t.includes(":")?n[t]=e[t]:(r=e[t].chains)==null||r.forEach(o=>{n[o]={methods:e[t].methods,events:e[t].events}})}),n}function an(e){return[...new Set(e.map(n=>n.includes(":")?n.split(":")[0]:n))]}function Ft(e){const n={};return Object.keys(e).forEach(t=>{if(t.includes(":"))n[t]=e[t];else{const r=T(e[t].accounts);r?.forEach(o=>{n[o]={accounts:e[t].accounts.filter(s=>s.includes(`${o}:`)),methods:e[t].methods,events:e[t].events}})}}),n}function Ht(e,n){return F(e,!1)&&e<=n.max&&e>=n.min}
//# sourceMappingURL=index.es.js.map


/***/ }),

/***/ "./node_modules/@walletconnect/universal-provider/node_modules/filter-obj/index.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@walletconnect/universal-provider/node_modules/filter-obj/index.js ***!
  \*****************************************************************************************/
/***/ ((module) => {


module.exports = function (obj, predicate) {
	var ret = {};
	var keys = Object.keys(obj);
	var isArr = Array.isArray(predicate);

	for (var i = 0; i < keys.length; i++) {
		var key = keys[i];
		var val = obj[key];

		if (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {
			ret[key] = val;
		}
	}

	return ret;
};


/***/ }),

/***/ "./node_modules/@walletconnect/universal-provider/node_modules/query-string/index.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@walletconnect/universal-provider/node_modules/query-string/index.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {


const strictUriEncode = __webpack_require__(/*! strict-uri-encode */ "./node_modules/strict-uri-encode/index.js");
const decodeComponent = __webpack_require__(/*! decode-uri-component */ "./node_modules/decode-uri-component/index.js");
const splitOnFirst = __webpack_require__(/*! split-on-first */ "./node_modules/split-on-first/index.js");
const filterObject = __webpack_require__(/*! filter-obj */ "./node_modules/@walletconnect/universal-provider/node_modules/filter-obj/index.js");

const isNullOrUndefined = value => value === null || value === undefined;

const encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');

function encoderForArrayFormat(options) {
	switch (options.arrayFormat) {
		case 'index':
			return key => (result, value) => {
				const index = result.length;

				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), '[', index, ']'].join('')];
				}

				return [
					...result,
					[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')
				];
			};

		case 'bracket':
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), '[]'].join('')];
				}

				return [...result, [encode(key, options), '[]=', encode(value, options)].join('')];
			};

		case 'colon-list-separator':
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, [encode(key, options), ':list='].join('')];
				}

				return [...result, [encode(key, options), ':list=', encode(value, options)].join('')];
			};

		case 'comma':
		case 'separator':
		case 'bracket-separator': {
			const keyValueSep = options.arrayFormat === 'bracket-separator' ?
				'[]=' :
				'=';

			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				// Translate null to an empty string so that it doesn't serialize as 'null'
				value = value === null ? '' : value;

				if (result.length === 0) {
					return [[encode(key, options), keyValueSep, encode(value, options)].join('')];
				}

				return [[result, encode(value, options)].join(options.arrayFormatSeparator)];
			};
		}

		default:
			return key => (result, value) => {
				if (
					value === undefined ||
					(options.skipNull && value === null) ||
					(options.skipEmptyString && value === '')
				) {
					return result;
				}

				if (value === null) {
					return [...result, encode(key, options)];
				}

				return [...result, [encode(key, options), '=', encode(value, options)].join('')];
			};
	}
}

function parserForArrayFormat(options) {
	let result;

	switch (options.arrayFormat) {
		case 'index':
			return (key, value, accumulator) => {
				result = /\[(\d*)\]$/.exec(key);

				key = key.replace(/\[\d*\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = {};
				}

				accumulator[key][result[1]] = value;
			};

		case 'bracket':
			return (key, value, accumulator) => {
				result = /(\[\])$/.exec(key);
				key = key.replace(/\[\]$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		case 'colon-list-separator':
			return (key, value, accumulator) => {
				result = /(:list)$/.exec(key);
				key = key.replace(/:list$/, '');

				if (!result) {
					accumulator[key] = value;
					return;
				}

				if (accumulator[key] === undefined) {
					accumulator[key] = [value];
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};

		case 'comma':
		case 'separator':
			return (key, value, accumulator) => {
				const isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);
				const isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));
				value = isEncodedArray ? decode(value, options) : value;
				const newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);
				accumulator[key] = newValue;
			};

		case 'bracket-separator':
			return (key, value, accumulator) => {
				const isArray = /(\[\])$/.test(key);
				key = key.replace(/\[\]$/, '');

				if (!isArray) {
					accumulator[key] = value ? decode(value, options) : value;
					return;
				}

				const arrayValue = value === null ?
					[] :
					value.split(options.arrayFormatSeparator).map(item => decode(item, options));

				if (accumulator[key] === undefined) {
					accumulator[key] = arrayValue;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], arrayValue);
			};

		default:
			return (key, value, accumulator) => {
				if (accumulator[key] === undefined) {
					accumulator[key] = value;
					return;
				}

				accumulator[key] = [].concat(accumulator[key], value);
			};
	}
}

function validateArrayFormatSeparator(value) {
	if (typeof value !== 'string' || value.length !== 1) {
		throw new TypeError('arrayFormatSeparator must be single character string');
	}
}

function encode(value, options) {
	if (options.encode) {
		return options.strict ? strictUriEncode(value) : encodeURIComponent(value);
	}

	return value;
}

function decode(value, options) {
	if (options.decode) {
		return decodeComponent(value);
	}

	return value;
}

function keysSorter(input) {
	if (Array.isArray(input)) {
		return input.sort();
	}

	if (typeof input === 'object') {
		return keysSorter(Object.keys(input))
			.sort((a, b) => Number(a) - Number(b))
			.map(key => input[key]);
	}

	return input;
}

function removeHash(input) {
	const hashStart = input.indexOf('#');
	if (hashStart !== -1) {
		input = input.slice(0, hashStart);
	}

	return input;
}

function getHash(url) {
	let hash = '';
	const hashStart = url.indexOf('#');
	if (hashStart !== -1) {
		hash = url.slice(hashStart);
	}

	return hash;
}

function extract(input) {
	input = removeHash(input);
	const queryStart = input.indexOf('?');
	if (queryStart === -1) {
		return '';
	}

	return input.slice(queryStart + 1);
}

function parseValue(value, options) {
	if (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {
		value = Number(value);
	} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {
		value = value.toLowerCase() === 'true';
	}

	return value;
}

function parse(query, options) {
	options = Object.assign({
		decode: true,
		sort: true,
		arrayFormat: 'none',
		arrayFormatSeparator: ',',
		parseNumbers: false,
		parseBooleans: false
	}, options);

	validateArrayFormatSeparator(options.arrayFormatSeparator);

	const formatter = parserForArrayFormat(options);

	// Create an object with no prototype
	const ret = Object.create(null);

	if (typeof query !== 'string') {
		return ret;
	}

	query = query.trim().replace(/^[?#&]/, '');

	if (!query) {
		return ret;
	}

	for (const param of query.split('&')) {
		if (param === '') {
			continue;
		}

		let [key, value] = splitOnFirst(options.decode ? param.replace(/\+/g, ' ') : param, '=');

		// Missing `=` should be `null`:
		// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters
		value = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);
		formatter(decode(key, options), value, ret);
	}

	for (const key of Object.keys(ret)) {
		const value = ret[key];
		if (typeof value === 'object' && value !== null) {
			for (const k of Object.keys(value)) {
				value[k] = parseValue(value[k], options);
			}
		} else {
			ret[key] = parseValue(value, options);
		}
	}

	if (options.sort === false) {
		return ret;
	}

	return (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {
		const value = ret[key];
		if (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {
			// Sort object keys, not values
			result[key] = keysSorter(value);
		} else {
			result[key] = value;
		}

		return result;
	}, Object.create(null));
}

exports.extract = extract;
exports.parse = parse;

exports.stringify = (object, options) => {
	if (!object) {
		return '';
	}

	options = Object.assign({
		encode: true,
		strict: true,
		arrayFormat: 'none',
		arrayFormatSeparator: ','
	}, options);

	validateArrayFormatSeparator(options.arrayFormatSeparator);

	const shouldFilter = key => (
		(options.skipNull && isNullOrUndefined(object[key])) ||
		(options.skipEmptyString && object[key] === '')
	);

	const formatter = encoderForArrayFormat(options);

	const objectCopy = {};

	for (const key of Object.keys(object)) {
		if (!shouldFilter(key)) {
			objectCopy[key] = object[key];
		}
	}

	const keys = Object.keys(objectCopy);

	if (options.sort !== false) {
		keys.sort(options.sort);
	}

	return keys.map(key => {
		const value = object[key];

		if (value === undefined) {
			return '';
		}

		if (value === null) {
			return encode(key, options);
		}

		if (Array.isArray(value)) {
			if (value.length === 0 && options.arrayFormat === 'bracket-separator') {
				return encode(key, options) + '[]';
			}

			return value
				.reduce(formatter(key), [])
				.join('&');
		}

		return encode(key, options) + '=' + encode(value, options);
	}).filter(x => x.length > 0).join('&');
};

exports.parseUrl = (url, options) => {
	options = Object.assign({
		decode: true
	}, options);

	const [url_, hash] = splitOnFirst(url, '#');

	return Object.assign(
		{
			url: url_.split('?')[0] || '',
			query: parse(extract(url), options)
		},
		options && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}
	);
};

exports.stringifyUrl = (object, options) => {
	options = Object.assign({
		encode: true,
		strict: true,
		[encodeFragmentIdentifier]: true
	}, options);

	const url = removeHash(object.url).split('?')[0] || '';
	const queryFromUrl = exports.extract(object.url);
	const parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});

	const query = Object.assign(parsedQueryFromUrl, object.query);
	let queryString = exports.stringify(query, options);
	if (queryString) {
		queryString = `?${queryString}`;
	}

	let hash = getHash(object.url);
	if (object.fragmentIdentifier) {
		hash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;
	}

	return `${url}${queryString}${hash}`;
};

exports.pick = (input, filter, options) => {
	options = Object.assign({
		parseFragmentIdentifier: true,
		[encodeFragmentIdentifier]: false
	}, options);

	const {url, query, fragmentIdentifier} = exports.parseUrl(input, options);
	return exports.stringifyUrl({
		url,
		query: filterObject(query, filter),
		fragmentIdentifier
	}, options);
};

exports.exclude = (input, filter, options) => {
	const exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);

	return exports.pick(input, exclusionFilter, options);
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FsbGV0Y29ubmVjdC1ldGhlcmV1bS1wcm92aWRlci1kaXN0LWluZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ04sd0NBQXdDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSw2Z0JBQTZnQiwyTkFBMk4sa0RBQWtELG1CQUFtQixxQkFBcUIsMkJBQTJCLGdEQUFnRCxTQUFTLG9CQUFvQixjQUFjLGtDQUFrQyxjQUFjLFdBQVcsZUFBZSxFQUFFLGNBQWMsTUFBTSx5RkFBeUYsR0FBRyxJQUFJLGtFQUFDLHNDQUFzQywyQkFBMkIsZUFBZSxJQUFJLHFDQUFxQywrREFBK0QsaUVBQWlFLFlBQVksb0NBQW9DLDhIQUE4SCxPQUFPLHVCQUF1QixRQUFRLGNBQWMsZ0JBQWdCLGdEQUFDLGtYQUFrWCxhQUFhLHFCQUFxQixjQUFjLCtCQUErQixpQkFBaUIscUVBQXFFLGVBQWUsNERBQTRELGdCQUFnQix1RUFBdUUsaUJBQWlCLHdFQUF3RSxlQUFlLDhEQUE4RCw2QkFBNkIsRUFBRSxpQkFBaUIsc0ZBQXNGLHdCQUF3QixNQUFNLHNCQUFzQixhQUFhLElBQUksdUNBQXVDLE1BQU0sa0VBQWtFLCtIQUErSCxrQ0FBa0MsWUFBWSxvQkFBb0IsS0FBSyxvQkFBb0Isb0JBQW9CLEdBQUcsNkJBQTZCLFlBQVksS0FBSyxZQUFZLHdCQUF3QixFQUFFLEVBQUUsYUFBYSxrQ0FBa0MsUUFBUSwrRUFBQyxnQ0FBZ0MsZ0RBQWdELHdCQUF3QixFQUFFLFNBQVMsb0NBQW9DLFFBQVEscUNBQXFDLG1CQUFtQiwwREFBMEQsc0JBQXNCLFNBQVMsY0FBYywyQkFBMkIseUJBQXlCLG1DQUFtQyxNQUFNLFNBQVMsSUFBSSxRQUFRLEdBQUcsZ1FBQWdRLG9DQUFvQyxvQkFBb0IsK0VBQStFLHNDQUFzQyxxQ0FBcUMsc0NBQXNDLHNGQUFzRixDQUFDLGlFQUFDLHdCQUF3QixzQ0FBc0MsR0FBRyxtQ0FBbUMsUUFBUSwrRkFBK0YsTUFBTSxxQ0FBcUMsRUFBRSxt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QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsZUFBZTtBQUNmLGFBQWE7O0FBRWIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHdE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TUFBTSxHQUFHLE1BQU0sZUFBZSxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sZUFBZSxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLFNBQVMsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sU0FBUyxNQUFNLEdBQUcsTUFBTSxlQUFlLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLFNBQVMsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLHFCQUFxQixNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLFNBQVMsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLFNBQVMsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxTQUFTLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSw0RkFBNEYsZUFBZSx3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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsZUFBZTtBQUNmLGFBQWE7O0FBRWIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFF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QUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsZUFBZTtBQUNmLGFBQWE7O0FBRWIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUEsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHdEQUF3RCwyQ0FBMkM7QUFDbkc7QUFDQTs7QUFFQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSx5REFBeUQsWUFBWTs7QUFFckU7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7O0FBRUE7QUFDQTtBQUNBLGFBQWEsMkdBQTJHO0FBQ3hIOztBQUVBLFdBQVcsSUFBSSxFQUFFLFlBQVksRUFBRSxLQUFLO0FBQ3BDOztBQUVBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLFFBQVEsZ0NBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBLGVBQWU7QUFDZjs7QUFFQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvZXRoZXJldW0tcHJvdmlkZXIvZGlzdC9pbmRleC5lcy5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9ldGhlcmV1bS1wcm92aWRlci9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvdXRpbHMvZGlzdC9pbmRleC5lcy5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9ldGhlcmV1bS1wcm92aWRlci9ub2RlX21vZHVsZXMvZmlsdGVyLW9iai9pbmRleC5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9ldGhlcmV1bS1wcm92aWRlci9ub2RlX21vZHVsZXMvcXVlcnktc3RyaW5nL2luZGV4LmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2pzb25ycGMtaHR0cC1jb25uZWN0aW9uL2Rpc3QvZXNtL2h0dHAuanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvanNvbnJwYy1odHRwLWNvbm5lY3Rpb24vZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvZGlzdC9pbmRleC5lcy5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvY29yZS9kaXN0L2luZGV4LmVzLmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9oZWFydGJlYXQvZGlzdC9janMvY29uc3RhbnRzL2hlYXJ0YmVhdC5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvaGVhcnRiZWF0L2Rpc3QvY2pzL2NvbnN0YW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvaGVhcnRiZWF0L2Rpc3QvY2pzL2hlYXJ0YmVhdC5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvaGVhcnRiZWF0L2Rpc3QvY2pzL2luZGV4LmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9oZWFydGJlYXQvZGlzdC9janMvdHlwZXMvaGVhcnRiZWF0LmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9oZWFydGJlYXQvZGlzdC9janMvdHlwZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2pzb25ycGMtcHJvdmlkZXIvZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2pzb25ycGMtcHJvdmlkZXIvZGlzdC9lc20vcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L2pzb25ycGMtd3MtY29ubmVjdGlvbi9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC9zaWduLWNsaWVudC9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvanNvbnJwYy13cy1jb25uZWN0aW9uL2Rpc3QvZXNtL3dzLmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC90eXBlcy9kaXN0L2luZGV4LmVzLmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC91dGlscy9kaXN0L2luZGV4LmVzLmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9maWx0ZXItb2JqL2luZGV4LmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3NpZ24tY2xpZW50L25vZGVfbW9kdWxlcy9xdWVyeS1zdHJpbmcvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnQvbm9kZV9tb2R1bGVzL3dzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvdW5pdmVyc2FsLXByb3ZpZGVyL2Rpc3QvaW5kZXguZXMuanMiLCJ3ZWJwYWNrOi8vdGhpcmR3ZWItbGVhcm4tdGhlbWUvLi9ub2RlX21vZHVsZXMvQHdhbGxldGNvbm5lY3QvdW5pdmVyc2FsLXByb3ZpZGVyL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC91dGlscy9kaXN0L2luZGV4LmVzLmpzIiwid2VicGFjazovL3RoaXJkd2ViLWxlYXJuLXRoZW1lLy4vbm9kZV9tb2R1bGVzL0B3YWxsZXRjb25uZWN0L3VuaXZlcnNhbC1wcm92aWRlci9ub2RlX21vZHVsZXMvZmlsdGVyLW9iai9pbmRleC5qcyIsIndlYnBhY2s6Ly90aGlyZHdlYi1sZWFybi10aGVtZS8uL25vZGVfbW9kdWxlcy9Ad2FsbGV0Y29ubmVjdC91bml2ZXJzYWwtcHJvdmlkZXIvbm9kZV9tb2R1bGVzL3F1ZXJ5LXN0cmluZy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnR7RXZlbnRFbWl0dGVyIGFzIFJ9ZnJvbVwiZXZlbnRzXCI7aW1wb3J0e2dldEFjY291bnRzRnJvbU5hbWVzcGFjZXMgYXMgVCxnZXRTZGtFcnJvciBhcyBTLGlzVmFsaWRBcnJheSBhcyB2fWZyb21cIkB3YWxsZXRjb25uZWN0L3V0aWxzXCI7aW1wb3J0e1VuaXZlcnNhbFByb3ZpZGVyIGFzIFB9ZnJvbVwiQHdhbGxldGNvbm5lY3QvdW5pdmVyc2FsLXByb3ZpZGVyXCI7Y29uc3Qgaj1cIndjXCIsJD1cImV0aGVyZXVtX3Byb3ZpZGVyXCIscT1gJHtqfUAkezJ9OiR7JH06YCxOPVwiaHR0cHM6Ly9ycGMud2FsbGV0Y29ubmVjdC5jb20vdjEvXCIscD1bXCJldGhfc2VuZFRyYW5zYWN0aW9uXCIsXCJwZXJzb25hbF9zaWduXCJdLEQ9W1wiZXRoX2FjY291bnRzXCIsXCJldGhfcmVxdWVzdEFjY291bnRzXCIsXCJldGhfY2FsbFwiLFwiZXRoX2dldEJhbGFuY2VcIixcImV0aF9zZW5kUmF3VHJhbnNhY3Rpb25cIixcImV0aF9zaWduXCIsXCJldGhfc2lnblRyYW5zYWN0aW9uXCIsXCJldGhfc2lnblR5cGVkRGF0YVwiLFwiZXRoX3NpZ25UeXBlZERhdGFfdjNcIixcImV0aF9zaWduVHlwZWREYXRhX3Y0XCIsXCJ3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpblwiLFwid2FsbGV0X2FkZEV0aGVyZXVtQ2hhaW5cIixcIndhbGxldF9nZXRQZXJtaXNzaW9uc1wiLFwid2FsbGV0X3JlcXVlc3RQZXJtaXNzaW9uc1wiLFwid2FsbGV0X3JlZ2lzdGVyT25ib2FyZGluZ1wiLFwid2FsbGV0X3dhdGNoQXNzZXRcIixcIndhbGxldF9zY2FuUVJDb2RlXCJdLHU9W1wiY2hhaW5DaGFuZ2VkXCIsXCJhY2NvdW50c0NoYW5nZWRcIl0sVT1bXCJtZXNzYWdlXCIsXCJkaXNjb25uZWN0XCIsXCJjb25uZWN0XCJdO3ZhciBRPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxMPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzLEg9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsXz1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLEc9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxLPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUseT0oYSx0LHMpPT50IGluIGE/UShhLHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnN9KTphW3RdPXMsST0oYSx0KT0+e2Zvcih2YXIgcyBpbiB0fHwodD17fSkpRy5jYWxsKHQscykmJnkoYSxzLHRbc10pO2lmKF8pZm9yKHZhciBzIG9mIF8odCkpSy5jYWxsKHQscykmJnkoYSxzLHRbc10pO3JldHVybiBhfSxPPShhLHQpPT5MKGEsSCh0KSk7ZnVuY3Rpb24gQyhhKXtyZXR1cm4gTnVtYmVyKGFbMF0uc3BsaXQoXCI6XCIpWzFdKX1mdW5jdGlvbiB3KGEpe3JldHVybmAweCR7YS50b1N0cmluZygxNil9YH1mdW5jdGlvbiBWKGEpe2NvbnN0e2NoYWluczp0LG9wdGlvbmFsQ2hhaW5zOnMsbWV0aG9kczppLG9wdGlvbmFsTWV0aG9kczplLGV2ZW50czpuLG9wdGlvbmFsRXZlbnRzOmMscnBjTWFwOmh9PWE7aWYoIXYodCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjaGFpbnNcIik7Y29uc3Qgbz10LHI9aXx8cCxmPW58fHUsTT17W0MobyldOmhbQyhvKV19LEU9e2NoYWluczpvLG1ldGhvZHM6cixldmVudHM6ZixycGNNYXA6TX0sbD1uPy5maWx0ZXIoZz0+IXUuaW5jbHVkZXMoZykpLGQ9aT8uZmlsdGVyKGc9PiFwLmluY2x1ZGVzKGcpKTtpZighcyYmIWMmJiFlJiYhKGwhPW51bGwmJmwubGVuZ3RoKSYmIShkIT1udWxsJiZkLmxlbmd0aCkpcmV0dXJue3JlcXVpcmVkOkV9O2NvbnN0IGI9bD8ubGVuZ3RoJiZkPy5sZW5ndGh8fCFzLEE9e2NoYWluczpbLi4ubmV3IFNldChiP28uY29uY2F0KHN8fFtdKTpzKV0sbWV0aG9kczpbLi4ubmV3IFNldChyLmNvbmNhdChlfHxbXSkpXSxldmVudHM6Wy4uLm5ldyBTZXQoZi5jb25jYXQoY3x8W10pKV0scnBjTWFwOmh9O3JldHVybntyZXF1aXJlZDpFLG9wdGlvbmFsOkF9fWNsYXNzIG17Y29uc3RydWN0b3IoKXt0aGlzLmV2ZW50cz1uZXcgUix0aGlzLm5hbWVzcGFjZT1cImVpcDE1NVwiLHRoaXMuYWNjb3VudHM9W10sdGhpcy5jaGFpbklkPTEsdGhpcy5TVE9SQUdFX0tFWT1xLHRoaXMub249KHQscyk9Pih0aGlzLmV2ZW50cy5vbih0LHMpLHRoaXMpLHRoaXMub25jZT0odCxzKT0+KHRoaXMuZXZlbnRzLm9uY2UodCxzKSx0aGlzKSx0aGlzLnJlbW92ZUxpc3RlbmVyPSh0LHMpPT4odGhpcy5ldmVudHMucmVtb3ZlTGlzdGVuZXIodCxzKSx0aGlzKSx0aGlzLm9mZj0odCxzKT0+KHRoaXMuZXZlbnRzLm9mZih0LHMpLHRoaXMpLHRoaXMucGFyc2VBY2NvdW50PXQ9PnRoaXMuaXNDb21wYXRpYmxlQ2hhaW5JZCh0KT90aGlzLnBhcnNlQWNjb3VudElkKHQpLmFkZHJlc3M6dCx0aGlzLnNpZ25lcj17fSx0aGlzLnJwYz17fX1zdGF0aWMgYXN5bmMgaW5pdCh0KXtjb25zdCBzPW5ldyBtO3JldHVybiBhd2FpdCBzLmluaXRpYWxpemUodCksc31hc3luYyByZXF1ZXN0KHQpe3JldHVybiBhd2FpdCB0aGlzLnNpZ25lci5yZXF1ZXN0KHQsdGhpcy5mb3JtYXRDaGFpbklkKHRoaXMuY2hhaW5JZCkpfXNlbmRBc3luYyh0LHMpe3RoaXMuc2lnbmVyLnNlbmRBc3luYyh0LHMsdGhpcy5mb3JtYXRDaGFpbklkKHRoaXMuY2hhaW5JZCkpfWdldCBjb25uZWN0ZWQoKXtyZXR1cm4gdGhpcy5zaWduZXIuY2xpZW50P3RoaXMuc2lnbmVyLmNsaWVudC5jb3JlLnJlbGF5ZXIuY29ubmVjdGVkOiExfWdldCBjb25uZWN0aW5nKCl7cmV0dXJuIHRoaXMuc2lnbmVyLmNsaWVudD90aGlzLnNpZ25lci5jbGllbnQuY29yZS5yZWxheWVyLmNvbm5lY3Rpbmc6ITF9YXN5bmMgZW5hYmxlKCl7cmV0dXJuIHRoaXMuc2Vzc2lvbnx8YXdhaXQgdGhpcy5jb25uZWN0KCksYXdhaXQgdGhpcy5yZXF1ZXN0KHttZXRob2Q6XCJldGhfcmVxdWVzdEFjY291bnRzXCJ9KX1hc3luYyBjb25uZWN0KHQpe2lmKCF0aGlzLnNpZ25lci5jbGllbnQpdGhyb3cgbmV3IEVycm9yKFwiUHJvdmlkZXIgbm90IGluaXRpYWxpemVkLiBDYWxsIGluaXQoKSBmaXJzdFwiKTt0aGlzLmxvYWRDb25uZWN0T3B0cyh0KTtjb25zdHtyZXF1aXJlZDpzLG9wdGlvbmFsOml9PVYodGhpcy5ycGMpO3RyeXtjb25zdCBlPWF3YWl0IG5ldyBQcm9taXNlKGFzeW5jKGMsaCk9Pnt2YXIgbzt0aGlzLnJwYy5zaG93UXJNb2RhbCYmKChvPXRoaXMubW9kYWwpPT1udWxsfHxvLnN1YnNjcmliZU1vZGFsKHI9Pnshci5vcGVuJiYhdGhpcy5zaWduZXIuc2Vzc2lvbiYmKHRoaXMuc2lnbmVyLmFib3J0UGFpcmluZ0F0dGVtcHQoKSxoKG5ldyBFcnJvcihcIkNvbm5lY3Rpb24gcmVxdWVzdCByZXNldC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIikpKX0pKSxhd2FpdCB0aGlzLnNpZ25lci5jb25uZWN0KE8oSSh7bmFtZXNwYWNlczp7W3RoaXMubmFtZXNwYWNlXTpzfX0saSYme29wdGlvbmFsTmFtZXNwYWNlczp7W3RoaXMubmFtZXNwYWNlXTppfX0pLHtwYWlyaW5nVG9waWM6dD8ucGFpcmluZ1RvcGljfSkpLnRoZW4ocj0+e2Mocil9KS5jYXRjaChyPT57aChuZXcgRXJyb3Ioci5tZXNzYWdlKSl9KX0pO2lmKCFlKXJldHVybjt0aGlzLnNldENoYWluSWRzKHRoaXMucnBjLmNoYWlucyk7Y29uc3Qgbj1UKGUubmFtZXNwYWNlcyxbdGhpcy5uYW1lc3BhY2VdKTt0aGlzLnNldEFjY291bnRzKG4pLHRoaXMuZXZlbnRzLmVtaXQoXCJjb25uZWN0XCIse2NoYWluSWQ6dyh0aGlzLmNoYWluSWQpfSl9Y2F0Y2goZSl7dGhyb3cgdGhpcy5zaWduZXIubG9nZ2VyLmVycm9yKGUpLGV9ZmluYWxseXt0aGlzLm1vZGFsJiZ0aGlzLm1vZGFsLmNsb3NlTW9kYWwoKX19YXN5bmMgZGlzY29ubmVjdCgpe3RoaXMuc2Vzc2lvbiYmYXdhaXQgdGhpcy5zaWduZXIuZGlzY29ubmVjdCgpLHRoaXMucmVzZXQoKX1nZXQgaXNXYWxsZXRDb25uZWN0KCl7cmV0dXJuITB9Z2V0IHNlc3Npb24oKXtyZXR1cm4gdGhpcy5zaWduZXIuc2Vzc2lvbn1yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCl7dGhpcy5zaWduZXIub24oXCJzZXNzaW9uX2V2ZW50XCIsdD0+e2NvbnN0e3BhcmFtczpzfT10LHtldmVudDppfT1zO2kubmFtZT09PVwiYWNjb3VudHNDaGFuZ2VkXCI/KHRoaXMuYWNjb3VudHM9dGhpcy5wYXJzZUFjY291bnRzKGkuZGF0YSksdGhpcy5ldmVudHMuZW1pdChcImFjY291bnRzQ2hhbmdlZFwiLHRoaXMuYWNjb3VudHMpKTppLm5hbWU9PT1cImNoYWluQ2hhbmdlZFwiP3RoaXMuc2V0Q2hhaW5JZCh0aGlzLmZvcm1hdENoYWluSWQoaS5kYXRhKSk6dGhpcy5ldmVudHMuZW1pdChpLm5hbWUsaS5kYXRhKSx0aGlzLmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9ldmVudFwiLHQpfSksdGhpcy5zaWduZXIub24oXCJjaGFpbkNoYW5nZWRcIix0PT57Y29uc3Qgcz1wYXJzZUludCh0KTt0aGlzLmNoYWluSWQ9cyx0aGlzLmV2ZW50cy5lbWl0KFwiY2hhaW5DaGFuZ2VkXCIsdyh0aGlzLmNoYWluSWQpKSx0aGlzLnBlcnNpc3QoKX0pLHRoaXMuc2lnbmVyLm9uKFwic2Vzc2lvbl91cGRhdGVcIix0PT57dGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fdXBkYXRlXCIsdCl9KSx0aGlzLnNpZ25lci5vbihcInNlc3Npb25fZGVsZXRlXCIsdD0+e3RoaXMucmVzZXQoKSx0aGlzLmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9kZWxldGVcIix0KSx0aGlzLmV2ZW50cy5lbWl0KFwiZGlzY29ubmVjdFwiLE8oSSh7fSxTKFwiVVNFUl9ESVNDT05ORUNURURcIikpLHtkYXRhOnQudG9waWMsbmFtZTpcIlVTRVJfRElTQ09OTkVDVEVEXCJ9KSl9KSx0aGlzLnNpZ25lci5vbihcImRpc3BsYXlfdXJpXCIsdD0+e3ZhciBzLGk7dGhpcy5ycGMuc2hvd1FyTW9kYWwmJigocz10aGlzLm1vZGFsKT09bnVsbHx8cy5jbG9zZU1vZGFsKCksKGk9dGhpcy5tb2RhbCk9PW51bGx8fGkub3Blbk1vZGFsKHt1cmk6dH0pKSx0aGlzLmV2ZW50cy5lbWl0KFwiZGlzcGxheV91cmlcIix0KX0pfXNldEh0dHBQcm92aWRlcih0KXt0aGlzLnJlcXVlc3Qoe21ldGhvZDpcIndhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluXCIscGFyYW1zOlt7Y2hhaW5JZDp0LnRvU3RyaW5nKDE2KX1dfSl9aXNDb21wYXRpYmxlQ2hhaW5JZCh0KXtyZXR1cm4gdHlwZW9mIHQ9PVwic3RyaW5nXCI/dC5zdGFydHNXaXRoKGAke3RoaXMubmFtZXNwYWNlfTpgKTohMX1mb3JtYXRDaGFpbklkKHQpe3JldHVybmAke3RoaXMubmFtZXNwYWNlfToke3R9YH1wYXJzZUNoYWluSWQodCl7cmV0dXJuIE51bWJlcih0LnNwbGl0KFwiOlwiKVsxXSl9c2V0Q2hhaW5JZHModCl7Y29uc3Qgcz10LmZpbHRlcihpPT50aGlzLmlzQ29tcGF0aWJsZUNoYWluSWQoaSkpLm1hcChpPT50aGlzLnBhcnNlQ2hhaW5JZChpKSk7cy5sZW5ndGgmJih0aGlzLmNoYWluSWQ9c1swXSx0aGlzLmV2ZW50cy5lbWl0KFwiY2hhaW5DaGFuZ2VkXCIsdyh0aGlzLmNoYWluSWQpKSx0aGlzLnBlcnNpc3QoKSl9c2V0Q2hhaW5JZCh0KXtpZih0aGlzLmlzQ29tcGF0aWJsZUNoYWluSWQodCkpe2NvbnN0IHM9dGhpcy5wYXJzZUNoYWluSWQodCk7dGhpcy5jaGFpbklkPXMsdGhpcy5zZXRIdHRwUHJvdmlkZXIocyl9fXBhcnNlQWNjb3VudElkKHQpe2NvbnN0W3MsaSxlXT10LnNwbGl0KFwiOlwiKTtyZXR1cm57Y2hhaW5JZDpgJHtzfToke2l9YCxhZGRyZXNzOmV9fXNldEFjY291bnRzKHQpe3RoaXMuYWNjb3VudHM9dC5maWx0ZXIocz0+dGhpcy5wYXJzZUNoYWluSWQodGhpcy5wYXJzZUFjY291bnRJZChzKS5jaGFpbklkKT09PXRoaXMuY2hhaW5JZCkubWFwKHM9PnRoaXMucGFyc2VBY2NvdW50SWQocykuYWRkcmVzcyksdGhpcy5ldmVudHMuZW1pdChcImFjY291bnRzQ2hhbmdlZFwiLHRoaXMuYWNjb3VudHMpfWdldFJwY0NvbmZpZyh0KXt2YXIgcyxpO3JldHVybntjaGFpbnM6KChzPXQuY2hhaW5zKT09bnVsbD92b2lkIDA6cy5tYXAoZT0+dGhpcy5mb3JtYXRDaGFpbklkKGUpKSl8fFtgJHt0aGlzLm5hbWVzcGFjZX06MWBdLG9wdGlvbmFsQ2hhaW5zOnQub3B0aW9uYWxDaGFpbnM/dC5vcHRpb25hbENoYWlucy5tYXAoZT0+dGhpcy5mb3JtYXRDaGFpbklkKGUpKTp2b2lkIDAsbWV0aG9kczp0Py5tZXRob2RzfHxwLGV2ZW50czp0Py5ldmVudHN8fHUsb3B0aW9uYWxNZXRob2RzOnQ/Lm9wdGlvbmFsTWV0aG9kc3x8W10sb3B0aW9uYWxFdmVudHM6dD8ub3B0aW9uYWxFdmVudHN8fFtdLHJwY01hcDp0Py5ycGNNYXB8fHRoaXMuYnVpbGRScGNNYXAodC5jaGFpbnMuY29uY2F0KHQub3B0aW9uYWxDaGFpbnN8fFtdKSx0LnByb2plY3RJZCksc2hvd1FyTW9kYWw6Qm9vbGVhbih0Py5zaG93UXJNb2RhbCkscXJNb2RhbE9wdGlvbnM6KGk9dD8ucXJNb2RhbE9wdGlvbnMpIT1udWxsP2k6dm9pZCAwLHByb2plY3RJZDp0LnByb2plY3RJZCxtZXRhZGF0YTp0Lm1ldGFkYXRhfX1idWlsZFJwY01hcCh0LHMpe2NvbnN0IGk9e307cmV0dXJuIHQuZm9yRWFjaChlPT57aVtlXT10aGlzLmdldFJwY1VybChlLHMpfSksaX1hc3luYyBpbml0aWFsaXplKHQpe2lmKHRoaXMucnBjPXRoaXMuZ2V0UnBjQ29uZmlnKHQpLHRoaXMuY2hhaW5JZD1DKHRoaXMucnBjLmNoYWlucyksdGhpcy5zaWduZXI9YXdhaXQgUC5pbml0KHtwcm9qZWN0SWQ6dGhpcy5ycGMucHJvamVjdElkLG1ldGFkYXRhOnRoaXMucnBjLm1ldGFkYXRhfSksdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCksYXdhaXQgdGhpcy5sb2FkUGVyc2lzdGVkU2Vzc2lvbigpLHRoaXMucnBjLnNob3dRck1vZGFsKXRyeXtjb25zdHtXZWIzTW9kYWw6c309YXdhaXQgaW1wb3J0KFwiQHdlYjNtb2RhbC9zdGFuZGFsb25lXCIpO3RoaXMubW9kYWw9bmV3IHMoSSh7d2FsbGV0Q29ubmVjdFZlcnNpb246Mixwcm9qZWN0SWQ6dGhpcy5ycGMucHJvamVjdElkLHN0YW5kYWxvbmVDaGFpbnM6dGhpcy5ycGMuY2hhaW5zfSx0aGlzLnJwYy5xck1vZGFsT3B0aW9ucykpfWNhdGNoe3Rocm93IG5ldyBFcnJvcihcIlRvIHVzZSBRUiBtb2RhbCwgcGxlYXNlIGluc3RhbGwgQHdlYjNtb2RhbC9zdGFuZGFsb25lIHBhY2thZ2VcIil9fWxvYWRDb25uZWN0T3B0cyh0KXtpZighdClyZXR1cm47Y29uc3R7Y2hhaW5zOnMsb3B0aW9uYWxDaGFpbnM6aSxycGNNYXA6ZX09dDtzJiZ2KHMpJiYodGhpcy5ycGMuY2hhaW5zPXMubWFwKG49PnRoaXMuZm9ybWF0Q2hhaW5JZChuKSkscy5mb3JFYWNoKG49Pnt0aGlzLnJwYy5ycGNNYXBbbl09ZT8uW25dfHx0aGlzLmdldFJwY1VybChuKX0pKSxpJiZ2KGkpJiYodGhpcy5ycGMub3B0aW9uYWxDaGFpbnM9W10sdGhpcy5ycGMub3B0aW9uYWxDaGFpbnM9aT8ubWFwKG49PnRoaXMuZm9ybWF0Q2hhaW5JZChuKSksaS5mb3JFYWNoKG49Pnt0aGlzLnJwYy5ycGNNYXBbbl09ZT8uW25dfHx0aGlzLmdldFJwY1VybChuKX0pKX1nZXRScGNVcmwodCxzKXt2YXIgaTtyZXR1cm4oKGk9dGhpcy5ycGMucnBjTWFwKT09bnVsbD92b2lkIDA6aVt0XSl8fGAke059P2NoYWluSWQ9ZWlwMTU1OiR7dH0mcHJvamVjdElkPSR7c3x8dGhpcy5ycGMucHJvamVjdElkfWB9YXN5bmMgbG9hZFBlcnNpc3RlZFNlc3Npb24oKXtpZighdGhpcy5zZXNzaW9uKXJldHVybjtjb25zdCB0PWF3YWl0IHRoaXMuc2lnbmVyLmNsaWVudC5jb3JlLnN0b3JhZ2UuZ2V0SXRlbShgJHt0aGlzLlNUT1JBR0VfS0VZfS9jaGFpbklkYCk7dGhpcy5zZXRDaGFpbklkcyh0P1t0aGlzLmZvcm1hdENoYWluSWQodCldOnRoaXMuc2Vzc2lvbi5uYW1lc3BhY2VzW3RoaXMubmFtZXNwYWNlXS5hY2NvdW50cyksdGhpcy5zZXRBY2NvdW50cyh0aGlzLnNlc3Npb24ubmFtZXNwYWNlc1t0aGlzLm5hbWVzcGFjZV0uYWNjb3VudHMpfXJlc2V0KCl7dGhpcy5jaGFpbklkPTEsdGhpcy5hY2NvdW50cz1bXX1wZXJzaXN0KCl7dGhpcy5zZXNzaW9uJiZ0aGlzLnNpZ25lci5jbGllbnQuY29yZS5zdG9yYWdlLnNldEl0ZW0oYCR7dGhpcy5TVE9SQUdFX0tFWX0vY2hhaW5JZGAsdGhpcy5jaGFpbklkKX1wYXJzZUFjY291bnRzKHQpe3JldHVybiB0eXBlb2YgdD09XCJzdHJpbmdcInx8dCBpbnN0YW5jZW9mIFN0cmluZz9bdGhpcy5wYXJzZUFjY291bnQodCldOnQubWFwKHM9PnRoaXMucGFyc2VBY2NvdW50KHMpKX19Y29uc3QgWT1tO2V4cG9ydHtZIGFzIEV0aGVyZXVtUHJvdmlkZXIsVSBhcyBPUFRJT05BTF9FVkVOVFMsRCBhcyBPUFRJT05BTF9NRVRIT0RTLHUgYXMgUkVRVUlSRURfRVZFTlRTLHAgYXMgUkVRVUlSRURfTUVUSE9EUyxtIGFzIGRlZmF1bHR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iLCJpbXBvcnR7Q2hhQ2hhMjBQb2x5MTMwNSBhcyBpZX1mcm9tXCJAc3RhYmxlbGliL2NoYWNoYTIwcG9seTEzMDVcIjtpbXBvcnR7SEtERiBhcyBmbn1mcm9tXCJAc3RhYmxlbGliL2hrZGZcIjtpbXBvcnR7cmFuZG9tQnl0ZXMgYXMgY2V9ZnJvbVwiQHN0YWJsZWxpYi9yYW5kb21cIjtpbXBvcnR7U0hBMjU2IGFzIHBuLGhhc2ggYXMgYWV9ZnJvbVwiQHN0YWJsZWxpYi9zaGEyNTZcIjtpbXBvcnQqYXMgdWUgZnJvbVwiQHN0YWJsZWxpYi94MjU1MTlcIjtpbXBvcnR7dG9TdHJpbmcgYXMgRSxmcm9tU3RyaW5nIGFzIGgsY29uY2F0IGFzIGRlfWZyb21cInVpbnQ4YXJyYXlzXCI7aW1wb3J0e2RldGVjdCBhcyBtbn1mcm9tXCJkZXRlY3QtYnJvd3NlclwiO2ltcG9ydHt0b01pbGlzZWNvbmRzIGFzIHEsRklWRV9NSU5VVEVTIGFzIGxlLGZyb21NaWxpc2Vjb25kcyBhcyB5bn1mcm9tXCJAd2FsbGV0Y29ubmVjdC90aW1lXCI7aW1wb3J0e2dldERvY3VtZW50IGFzIEVuLGdldE5hdmlnYXRvciBhcyBmZSxnZXRMb2NhdGlvbiBhcyBwZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC93aW5kb3ctZ2V0dGVyc1wiO2ltcG9ydHtnZXRXaW5kb3dNZXRhZGF0YSBhcyBobn1mcm9tXCJAd2FsbGV0Y29ubmVjdC93aW5kb3ctbWV0YWRhdGFcIjtpbXBvcnQqYXMgJCBmcm9tXCJxdWVyeS1zdHJpbmdcIjtpbXBvcnR7UkVMQVlfSlNPTlJQQyBhcyB2bn1mcm9tXCJAd2FsbGV0Y29ubmVjdC9yZWxheS1hcGlcIjtjb25zdCBEPVwiOlwiO2Z1bmN0aW9uIG1lKGUpe2NvbnN0W24sdF09ZS5zcGxpdChEKTtyZXR1cm57bmFtZXNwYWNlOm4scmVmZXJlbmNlOnR9fWZ1bmN0aW9uIHllKGUpe2NvbnN0e25hbWVzcGFjZTpuLHJlZmVyZW5jZTp0fT1lO3JldHVybltuLHRdLmpvaW4oRCl9ZnVuY3Rpb24geihlKXtjb25zdFtuLHQscl09ZS5zcGxpdChEKTtyZXR1cm57bmFtZXNwYWNlOm4scmVmZXJlbmNlOnQsYWRkcmVzczpyfX1mdW5jdGlvbiBFZShlKXtjb25zdHtuYW1lc3BhY2U6bixyZWZlcmVuY2U6dCxhZGRyZXNzOnJ9PWU7cmV0dXJuW24sdCxyXS5qb2luKEQpfWZ1bmN0aW9uIEIoZSxuKXtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2gocj0+e2NvbnN0IG89bihyKTt0LmluY2x1ZGVzKG8pfHx0LnB1c2gobyl9KSx0fWZ1bmN0aW9uIGhlKGUpe2NvbnN0e2FkZHJlc3M6bn09eihlKTtyZXR1cm4gbn1mdW5jdGlvbiB2ZShlKXtjb25zdHtuYW1lc3BhY2U6bixyZWZlcmVuY2U6dH09eihlKTtyZXR1cm4geWUoe25hbWVzcGFjZTpuLHJlZmVyZW5jZTp0fSl9ZnVuY3Rpb24gZ24oZSxuKXtjb25zdHtuYW1lc3BhY2U6dCxyZWZlcmVuY2U6cn09bWUobik7cmV0dXJuIEVlKHtuYW1lc3BhY2U6dCxyZWZlcmVuY2U6cixhZGRyZXNzOmV9KX1mdW5jdGlvbiBObihlKXtyZXR1cm4gQihlLGhlKX1mdW5jdGlvbiBnZShlKXtyZXR1cm4gQihlLHZlKX1mdW5jdGlvbiBibihlLG49W10pe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e2lmKG4ubGVuZ3RoJiYhbi5pbmNsdWRlcyhyKSlyZXR1cm47Y29uc3Qgbz1lW3JdO3QucHVzaCguLi5vLmFjY291bnRzKX0pLHR9ZnVuY3Rpb24gT24oZSxuPVtdKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHI9PntpZihuLmxlbmd0aCYmIW4uaW5jbHVkZXMocikpcmV0dXJuO2NvbnN0IG89ZVtyXTt0LnB1c2goLi4uZ2Uoby5hY2NvdW50cykpfSksdH1mdW5jdGlvbiBTbihlLG49W10pe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e2lmKG4ubGVuZ3RoJiYhbi5pbmNsdWRlcyhyKSlyZXR1cm47Y29uc3Qgbz1lW3JdO3QucHVzaCguLi5WKHIsbykpfSksdH1mdW5jdGlvbiBWKGUsbil7cmV0dXJuIGUuaW5jbHVkZXMoXCI6XCIpP1tlXTpuLmNoYWluc3x8W119Y29uc3QgTT1lPT5lPy5zcGxpdChcIjpcIiksTmU9ZT0+e2NvbnN0IG49ZSYmTShlKTtpZihuKXJldHVybiBuWzNdfSxJbj1lPT57Y29uc3Qgbj1lJiZNKGUpO2lmKG4pcmV0dXJuIG5bMl0rXCI6XCIrblszXX0sYmU9ZT0+e2NvbnN0IG49ZSYmTShlKTtpZihuKXJldHVybiBuLnBvcCgpfSxQbj0oZSxuKT0+e2NvbnN0IHQ9YCR7ZS5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OmAscj1iZShuKSxvPWUuc3RhdGVtZW50LHM9YFVSSTogJHtlLmF1ZH1gLGM9YFZlcnNpb246ICR7ZS52ZXJzaW9ufWAsZD1gQ2hhaW4gSUQ6ICR7TmUobil9YCxsPWBOb25jZTogJHtlLm5vbmNlfWAsaT1gSXNzdWVkIEF0OiAke2UuaWF0fWAsdT1lLnJlc291cmNlcyYmZS5yZXNvdXJjZXMubGVuZ3RoPjA/YFJlc291cmNlczpcbiR7ZS5yZXNvdXJjZXMubWFwKGE9PmAtICR7YX1gKS5qb2luKGBcbmApfWA6dm9pZCAwO3JldHVyblt0LHIsXCJcIixvLFwiXCIscyxjLGQsbCxpLHVdLmZpbHRlcihhPT5hIT1udWxsKS5qb2luKGBcbmApfSxHPVwiYmFzZTEwXCIsZj1cImJhc2UxNlwiLEs9XCJiYXNlNjRwYWRcIixrPVwidXRmOFwiLFk9MCxVPTEsVG49MCxPZT0xLFc9MTIsSj0zMjtmdW5jdGlvbiBSbigpe2NvbnN0IGU9dWUuZ2VuZXJhdGVLZXlQYWlyKCk7cmV0dXJue3ByaXZhdGVLZXk6RShlLnNlY3JldEtleSxmKSxwdWJsaWNLZXk6RShlLnB1YmxpY0tleSxmKX19ZnVuY3Rpb24gQW4oKXtjb25zdCBlPWNlKEopO3JldHVybiBFKGUsZil9ZnVuY3Rpb24gVW4oZSxuKXtjb25zdCB0PXVlLnNoYXJlZEtleShoKGUsZiksaChuLGYpKSxyPW5ldyBmbihwbix0KS5leHBhbmQoSik7cmV0dXJuIEUocixmKX1mdW5jdGlvbiBfbihlKXtjb25zdCBuPWFlKGgoZSxmKSk7cmV0dXJuIEUobixmKX1mdW5jdGlvbiB3bihlKXtjb25zdCBuPWFlKGgoZSxrKSk7cmV0dXJuIEUobixmKX1mdW5jdGlvbiBTZShlKXtyZXR1cm4gaChgJHtlfWAsRyl9ZnVuY3Rpb24gaihlKXtyZXR1cm4gTnVtYmVyKEUoZSxHKSl9ZnVuY3Rpb24gam4oZSl7Y29uc3Qgbj1TZSh0eXBlb2YgZS50eXBlPFwidVwiP2UudHlwZTpZKTtpZihqKG4pPT09VSYmdHlwZW9mIGUuc2VuZGVyUHVibGljS2V5PlwidVwiKXRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgc2VuZGVyIHB1YmxpYyBrZXkgZm9yIHR5cGUgMSBlbnZlbG9wZVwiKTtjb25zdCB0PXR5cGVvZiBlLnNlbmRlclB1YmxpY0tleTxcInVcIj9oKGUuc2VuZGVyUHVibGljS2V5LGYpOnZvaWQgMCxyPXR5cGVvZiBlLml2PFwidVwiP2goZS5pdixmKTpjZShXKSxvPW5ldyBpZShoKGUuc3ltS2V5LGYpKS5zZWFsKHIsaChlLm1lc3NhZ2UsaykpO3JldHVybiBJZSh7dHlwZTpuLHNlYWxlZDpvLGl2OnIsc2VuZGVyUHVibGljS2V5OnR9KX1mdW5jdGlvbiBDbihlKXtjb25zdCBuPW5ldyBpZShoKGUuc3ltS2V5LGYpKSx7c2VhbGVkOnQsaXY6cn09UShlLmVuY29kZWQpLG89bi5vcGVuKHIsdCk7aWYobz09PW51bGwpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGRlY3J5cHRcIik7cmV0dXJuIEUobyxrKX1mdW5jdGlvbiBJZShlKXtpZihqKGUudHlwZSk9PT1VKXtpZih0eXBlb2YgZS5zZW5kZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBzZW5kZXIgcHVibGljIGtleSBmb3IgdHlwZSAxIGVudmVsb3BlXCIpO3JldHVybiBFKGRlKFtlLnR5cGUsZS5zZW5kZXJQdWJsaWNLZXksZS5pdixlLnNlYWxlZF0pLEspfXJldHVybiBFKGRlKFtlLnR5cGUsZS5pdixlLnNlYWxlZF0pLEspfWZ1bmN0aW9uIFEoZSl7Y29uc3Qgbj1oKGUsSyksdD1uLnNsaWNlKFRuLE9lKSxyPU9lO2lmKGoodCk9PT1VKXtjb25zdCBkPXIrSixsPWQrVyxpPW4uc2xpY2UocixkKSx1PW4uc2xpY2UoZCxsKSxhPW4uc2xpY2UobCk7cmV0dXJue3R5cGU6dCxzZWFsZWQ6YSxpdjp1LHNlbmRlclB1YmxpY0tleTppfX1jb25zdCBvPXIrVyxzPW4uc2xpY2UocixvKSxjPW4uc2xpY2Uobyk7cmV0dXJue3R5cGU6dCxzZWFsZWQ6YyxpdjpzfX1mdW5jdGlvbiAkbihlLG4pe2NvbnN0IHQ9UShlKTtyZXR1cm4gUGUoe3R5cGU6aih0LnR5cGUpLHNlbmRlclB1YmxpY0tleTp0eXBlb2YgdC5zZW5kZXJQdWJsaWNLZXk8XCJ1XCI/RSh0LnNlbmRlclB1YmxpY0tleSxmKTp2b2lkIDAscmVjZWl2ZXJQdWJsaWNLZXk6bj8ucmVjZWl2ZXJQdWJsaWNLZXl9KX1mdW5jdGlvbiBQZShlKXtjb25zdCBuPWU/LnR5cGV8fFk7aWYobj09PVUpe2lmKHR5cGVvZiBlPy5zZW5kZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBzZW5kZXIgcHVibGljIGtleVwiKTtpZih0eXBlb2YgZT8ucmVjZWl2ZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyByZWNlaXZlciBwdWJsaWMga2V5XCIpfXJldHVybnt0eXBlOm4sc2VuZGVyUHVibGljS2V5OmU/LnNlbmRlclB1YmxpY0tleSxyZWNlaXZlclB1YmxpY0tleTplPy5yZWNlaXZlclB1YmxpY0tleX19ZnVuY3Rpb24gRG4oZSl7cmV0dXJuIGUudHlwZT09PVUmJnR5cGVvZiBlLnNlbmRlclB1YmxpY0tleT09XCJzdHJpbmdcIiYmdHlwZW9mIGUucmVjZWl2ZXJQdWJsaWNLZXk9PVwic3RyaW5nXCJ9dmFyIFZuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxUZT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLE1uPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksS249T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxSZT0oZSxuLHQpPT5uIGluIGU/Vm4oZSxuLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6ZVtuXT10LEFlPShlLG4pPT57Zm9yKHZhciB0IGluIG58fChuPXt9KSlNbi5jYWxsKG4sdCkmJlJlKGUsdCxuW3RdKTtpZihUZSlmb3IodmFyIHQgb2YgVGUobikpS24uY2FsbChuLHQpJiZSZShlLHQsblt0XSk7cmV0dXJuIGV9O2NvbnN0IFVlPVwiUmVhY3ROYXRpdmVcIixfPXtyZWFjdE5hdGl2ZTpcInJlYWN0LW5hdGl2ZVwiLG5vZGU6XCJub2RlXCIsYnJvd3NlcjpcImJyb3dzZXJcIix1bmtub3duOlwidW5rbm93blwifSxMPVwiIFwiLGtuPVwiOlwiLF9lPVwiL1wiLFo9MixMbj0xZTMsd2U9XCJqc1wiO2Z1bmN0aW9uIFgoKXtyZXR1cm4gdHlwZW9mIHByb2Nlc3M8XCJ1XCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zPFwidVwiJiZ0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlPFwidVwifWZ1bmN0aW9uIGplKCl7cmV0dXJuIUVuKCkmJiEhZmUoKSYmbmF2aWdhdG9yLnByb2R1Y3Q9PT1VZX1mdW5jdGlvbiBDZSgpe3JldHVybiFYKCkmJiEhZmUoKX1mdW5jdGlvbiBlZSgpe3JldHVybiBqZSgpP18ucmVhY3ROYXRpdmU6WCgpP18ubm9kZTpDZSgpP18uYnJvd3NlcjpfLnVua25vd259ZnVuY3Rpb24gJGUoZSxuKXtsZXQgdD0kLnBhcnNlKGUpO3JldHVybiB0PUFlKEFlKHt9LHQpLG4pLGU9JC5zdHJpbmdpZnkodCksZX1mdW5jdGlvbiB4bigpe3JldHVybiBobigpfHx7bmFtZTpcIlwiLGRlc2NyaXB0aW9uOlwiXCIsdXJsOlwiXCIsaWNvbnM6W1wiXCJdfX1mdW5jdGlvbiBGbihlLG4pe3ZhciB0O2NvbnN0IHI9ZWUoKSxvPXtwcm90b2NvbDplLHZlcnNpb246bixlbnY6cn07cmV0dXJuIHI9PT1cImJyb3dzZXJcIiYmKG8uaG9zdD0oKHQ9cGUoKSk9PW51bGw/dm9pZCAwOnQuaG9zdCl8fFwidW5rbm93blwiKSxvfWZ1bmN0aW9uIERlKCl7Y29uc3QgZT1tbigpO2lmKGU9PT1udWxsKXJldHVyblwidW5rbm93blwiO2NvbnN0IG49ZS5vcz9lLm9zLnJlcGxhY2UoXCIgXCIsXCJcIikudG9Mb3dlckNhc2UoKTpcInVua25vd25cIjtyZXR1cm4gZS50eXBlPT09XCJicm93c2VyXCI/W24sZS5uYW1lLGUudmVyc2lvbl0uam9pbihcIi1cIik6W24sZS52ZXJzaW9uXS5qb2luKFwiLVwiKX1mdW5jdGlvbiBWZSgpe3ZhciBlO2NvbnN0IG49ZWUoKTtyZXR1cm4gbj09PV8uYnJvd3Nlcj9bbiwoKGU9cGUoKSk9PW51bGw/dm9pZCAwOmUuaG9zdCl8fFwidW5rbm93blwiXS5qb2luKFwiOlwiKTpufWZ1bmN0aW9uIE1lKGUsbix0KXtjb25zdCByPURlKCksbz1WZSgpO3JldHVybltbZSxuXS5qb2luKFwiLVwiKSxbd2UsdF0uam9pbihcIi1cIikscixvXS5qb2luKFwiL1wiKX1mdW5jdGlvbiBIbih7cHJvdG9jb2w6ZSx2ZXJzaW9uOm4scmVsYXlVcmw6dCxzZGtWZXJzaW9uOnIsYXV0aDpvLHByb2plY3RJZDpzLHVzZU9uQ2xvc2VFdmVudDpjfSl7Y29uc3QgZD10LnNwbGl0KFwiP1wiKSxsPU1lKGUsbixyKSxpPXthdXRoOm8sdWE6bCxwcm9qZWN0SWQ6cyx1c2VPbkNsb3NlRXZlbnQ6Y3x8dm9pZCAwfSx1PSRlKGRbMV18fFwiXCIsaSk7cmV0dXJuIGRbMF0rXCI/XCIrdX1mdW5jdGlvbiBxbihlKXtsZXQgbj0oZS5tYXRjaCgvXlteOl0rKD89OlxcL1xcLykvZ2kpfHxbXSlbMF07Y29uc3QgdD10eXBlb2YgbjxcInVcIj9lLnNwbGl0KFwiOi8vXCIpWzFdOmU7cmV0dXJuIG49bj09PVwid3NzXCI/XCJodHRwc1wiOlwiaHR0cFwiLFtuLHRdLmpvaW4oXCI6Ly9cIil9ZnVuY3Rpb24gem4oZSxuLHQpe2lmKCFlW25dfHx0eXBlb2YgZVtuXSE9PXQpdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIG9yIGludmFsaWQgXCIke259XCIgcGFyYW1gKX1mdW5jdGlvbiBLZShlLG49Wil7cmV0dXJuIGtlKGUuc3BsaXQoX2UpLG4pfWZ1bmN0aW9uIEJuKGUpe3JldHVybiBLZShlKS5qb2luKEwpfWZ1bmN0aW9uIGIoZSxuKXtyZXR1cm4gZS5maWx0ZXIodD0+bi5pbmNsdWRlcyh0KSkubGVuZ3RoPT09ZS5sZW5ndGh9ZnVuY3Rpb24ga2UoZSxuPVope3JldHVybiBlLnNsaWNlKE1hdGgubWF4KGUubGVuZ3RoLW4sMCkpfWZ1bmN0aW9uIEduKGUpe3JldHVybiBPYmplY3QuZnJvbUVudHJpZXMoZS5lbnRyaWVzKCkpfWZ1bmN0aW9uIFluKGUpe3JldHVybiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGUpKX1mdW5jdGlvbiBXbihlLG4pe2NvbnN0IHQ9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e3Rbcl09bihlW3JdKX0pLHR9Y29uc3QgSm49ZT0+ZTtmdW5jdGlvbiBMZShlKXtyZXR1cm4gZS50cmltKCkucmVwbGFjZSgvXlxcdy8sbj0+bi50b1VwcGVyQ2FzZSgpKX1mdW5jdGlvbiBRbihlKXtyZXR1cm4gZS5zcGxpdChMKS5tYXAobj0+TGUobikpLmpvaW4oTCl9ZnVuY3Rpb24gWm4oZT1sZSxuKXtjb25zdCB0PXEoZXx8bGUpO2xldCByLG8scztyZXR1cm57cmVzb2x2ZTpjPT57cyYmciYmKGNsZWFyVGltZW91dChzKSxyKGMpKX0scmVqZWN0OmM9PntzJiZvJiYoY2xlYXJUaW1lb3V0KHMpLG8oYykpfSxkb25lOigpPT5uZXcgUHJvbWlzZSgoYyxkKT0+e3M9c2V0VGltZW91dCgoKT0+e2QobmV3IEVycm9yKG4pKX0sdCkscj1jLG89ZH0pfX1mdW5jdGlvbiBYbihlLG4sdCl7cmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jKHIsbyk9Pntjb25zdCBzPXNldFRpbWVvdXQoKCk9Pm8obmV3IEVycm9yKHQpKSxuKTt0cnl7Y29uc3QgYz1hd2FpdCBlO3IoYyl9Y2F0Y2goYyl7byhjKX1jbGVhclRpbWVvdXQocyl9KX1mdW5jdGlvbiBuZShlLG4pe2lmKHR5cGVvZiBuPT1cInN0cmluZ1wiJiZuLnN0YXJ0c1dpdGgoYCR7ZX06YCkpcmV0dXJuIG47aWYoZS50b0xvd2VyQ2FzZSgpPT09XCJ0b3BpY1wiKXtpZih0eXBlb2YgbiE9XCJzdHJpbmdcIil0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIG11c3QgYmUgXCJzdHJpbmdcIiBmb3IgZXhwaXJlciB0YXJnZXQgdHlwZTogdG9waWMnKTtyZXR1cm5gdG9waWM6JHtufWB9ZWxzZSBpZihlLnRvTG93ZXJDYXNlKCk9PT1cImlkXCIpe2lmKHR5cGVvZiBuIT1cIm51bWJlclwiKXRocm93IG5ldyBFcnJvcignVmFsdWUgbXVzdCBiZSBcIm51bWJlclwiIGZvciBleHBpcmVyIHRhcmdldCB0eXBlOiBpZCcpO3JldHVybmBpZDoke259YH10aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZXhwaXJlciB0YXJnZXQgdHlwZTogJHtlfWApfWZ1bmN0aW9uIGV0KGUpe3JldHVybiBuZShcInRvcGljXCIsZSl9ZnVuY3Rpb24gbnQoZSl7cmV0dXJuIG5lKFwiaWRcIixlKX1mdW5jdGlvbiB0dChlKXtjb25zdFtuLHRdPWUuc3BsaXQoXCI6XCIpLHI9e2lkOnZvaWQgMCx0b3BpYzp2b2lkIDB9O2lmKG49PT1cInRvcGljXCImJnR5cGVvZiB0PT1cInN0cmluZ1wiKXIudG9waWM9dDtlbHNlIGlmKG49PT1cImlkXCImJk51bWJlci5pc0ludGVnZXIoTnVtYmVyKHQpKSlyLmlkPU51bWJlcih0KTtlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0YXJnZXQsIGV4cGVjdGVkIGlkOm51bWJlciBvciB0b3BpYzpzdHJpbmcsIGdvdCAke259OiR7dH1gKTtyZXR1cm4gcn1mdW5jdGlvbiBydChlLG4pe3JldHVybiB5bigobnx8RGF0ZS5ub3coKSkrcShlKSl9ZnVuY3Rpb24gb3QoZSl7cmV0dXJuIERhdGUubm93KCk+PXEoZSl9ZnVuY3Rpb24gc3QoZSxuKXtyZXR1cm5gJHtlfSR7bj9gOiR7bn1gOlwiXCJ9YH1mdW5jdGlvbiBPKGU9W10sbj1bXSl7cmV0dXJuWy4uLm5ldyBTZXQoWy4uLmUsLi4ubl0pXX1jb25zdCB4ZT1cImlyblwiO2Z1bmN0aW9uIGl0KGUpe3JldHVybiBlPy5yZWxheXx8e3Byb3RvY29sOnhlfX1mdW5jdGlvbiBjdChlKXtjb25zdCBuPXZuW2VdO2lmKHR5cGVvZiBuPlwidVwiKXRocm93IG5ldyBFcnJvcihgUmVsYXkgUHJvdG9jb2wgbm90IHN1cHBvcnRlZDogJHtlfWApO3JldHVybiBufXZhciBhdD1PYmplY3QuZGVmaW5lUHJvcGVydHksRmU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyx1dD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGR0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsSGU9KGUsbix0KT0+biBpbiBlP2F0KGUsbix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOmVbbl09dCxsdD0oZSxuKT0+e2Zvcih2YXIgdCBpbiBufHwobj17fSkpdXQuY2FsbChuLHQpJiZIZShlLHQsblt0XSk7aWYoRmUpZm9yKHZhciB0IG9mIEZlKG4pKWR0LmNhbGwobix0KSYmSGUoZSx0LG5bdF0pO3JldHVybiBlfTtmdW5jdGlvbiBxZShlLG49XCItXCIpe2NvbnN0IHQ9e30scj1cInJlbGF5XCIrbjtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChvPT57aWYoby5zdGFydHNXaXRoKHIpKXtjb25zdCBzPW8ucmVwbGFjZShyLFwiXCIpLGM9ZVtvXTt0W3NdPWN9fSksdH1mdW5jdGlvbiBmdChlKXtjb25zdCBuPWUuaW5kZXhPZihcIjpcIiksdD1lLmluZGV4T2YoXCI/XCIpIT09LTE/ZS5pbmRleE9mKFwiP1wiKTp2b2lkIDAscj1lLnN1YnN0cmluZygwLG4pLG89ZS5zdWJzdHJpbmcobisxLHQpLnNwbGl0KFwiQFwiKSxzPXR5cGVvZiB0PFwidVwiP2Uuc3Vic3RyaW5nKHQpOlwiXCIsYz0kLnBhcnNlKHMpO3JldHVybntwcm90b2NvbDpyLHRvcGljOm9bMF0sdmVyc2lvbjpwYXJzZUludChvWzFdLDEwKSxzeW1LZXk6Yy5zeW1LZXkscmVsYXk6cWUoYyl9fWZ1bmN0aW9uIHplKGUsbj1cIi1cIil7Y29uc3QgdD1cInJlbGF5XCIscj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChvPT57Y29uc3Qgcz10K24rbztlW29dJiYocltzXT1lW29dKX0pLHJ9ZnVuY3Rpb24gcHQoZSl7cmV0dXJuYCR7ZS5wcm90b2NvbH06JHtlLnRvcGljfUAke2UudmVyc2lvbn0/YCskLnN0cmluZ2lmeShsdCh7c3ltS2V5OmUuc3ltS2V5fSx6ZShlLnJlbGF5KSkpfXZhciBtdD1PYmplY3QuZGVmaW5lUHJvcGVydHkseXQ9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsRXQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsQmU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxodD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHZ0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsR2U9KGUsbix0KT0+biBpbiBlP210KGUsbix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOmVbbl09dCxndD0oZSxuKT0+e2Zvcih2YXIgdCBpbiBufHwobj17fSkpaHQuY2FsbChuLHQpJiZHZShlLHQsblt0XSk7aWYoQmUpZm9yKHZhciB0IG9mIEJlKG4pKXZ0LmNhbGwobix0KSYmR2UoZSx0LG5bdF0pO3JldHVybiBlfSxOdD0oZSxuKT0+eXQoZSxFdChuKSk7ZnVuY3Rpb24gVChlKXtjb25zdCBuPVtdO3JldHVybiBlLmZvckVhY2godD0+e2NvbnN0W3Isb109dC5zcGxpdChcIjpcIik7bi5wdXNoKGAke3J9OiR7b31gKX0pLG59ZnVuY3Rpb24gWWUoZSl7Y29uc3Qgbj1bXTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhlKS5mb3JFYWNoKHQ9PntuLnB1c2goLi4uVCh0LmFjY291bnRzKSl9KSxufWZ1bmN0aW9uIFdlKGUsbil7Y29uc3QgdD1bXTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhlKS5mb3JFYWNoKHI9PntUKHIuYWNjb3VudHMpLmluY2x1ZGVzKG4pJiZ0LnB1c2goLi4uci5tZXRob2RzKX0pLHR9ZnVuY3Rpb24gSmUoZSxuKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3QudmFsdWVzKGUpLmZvckVhY2gocj0+e1Qoci5hY2NvdW50cykuaW5jbHVkZXMobikmJnQucHVzaCguLi5yLmV2ZW50cyl9KSx0fWZ1bmN0aW9uIGJ0KGUsbil7Y29uc3QgdD1vbihlLG4pO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQubWVzc2FnZSk7Y29uc3Qgcj17fTtmb3IoY29uc3RbbyxzXW9mIE9iamVjdC5lbnRyaWVzKGUpKXJbb109e21ldGhvZHM6cy5tZXRob2RzLGV2ZW50czpzLmV2ZW50cyxjaGFpbnM6cy5hY2NvdW50cy5tYXAoYz0+YCR7Yy5zcGxpdChcIjpcIilbMF19OiR7Yy5zcGxpdChcIjpcIilbMV19YCl9O3JldHVybiByfWZ1bmN0aW9uIE90KGUpe2NvbnN0e3JlcXVpcmVkTmFtZXNwYWNlczpuLG9wdGlvbmFsTmFtZXNwYWNlczp0PXt9LHN1cHBvcnRlZE5hbWVzcGFjZXM6cn09ZSxvPXJlKG4pLHM9cmUodCksYz17fTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGk9Pntjb25zdCB1PXJbaV0uY2hhaW5zLGE9cltpXS5tZXRob2RzLGc9cltpXS5ldmVudHMsQT1yW2ldLmFjY291bnRzO2NbaV09e2NoYWluczp1LG1ldGhvZHM6YSxldmVudHM6ZyxhY2NvdW50czpBfX0pO2NvbnN0IGQ9Y24obixjLFwiYXBwcm92ZSgpXCIpO2lmKGQpdGhyb3cgbmV3IEVycm9yKGQubWVzc2FnZSk7Y29uc3QgbD17fTtyZXR1cm4gT2JqZWN0LmtleXMobykuZm9yRWFjaChpPT57Y29uc3QgdT1yW2ldLmNoYWlucy5maWx0ZXIodj0+e3ZhciBwLHk7cmV0dXJuKHk9KHA9b1tpXSk9PW51bGw/dm9pZCAwOnAuY2hhaW5zKT09bnVsbD92b2lkIDA6eS5pbmNsdWRlcyh2KX0pLGE9cltpXS5tZXRob2RzLmZpbHRlcih2PT57dmFyIHAseTtyZXR1cm4oeT0ocD1vW2ldKT09bnVsbD92b2lkIDA6cC5tZXRob2RzKT09bnVsbD92b2lkIDA6eS5pbmNsdWRlcyh2KX0pLGc9cltpXS5ldmVudHMuZmlsdGVyKHY9Pnt2YXIgcCx5O3JldHVybih5PShwPW9baV0pPT1udWxsP3ZvaWQgMDpwLmV2ZW50cyk9PW51bGw/dm9pZCAwOnkuaW5jbHVkZXModil9KSxBPXUubWFwKHY9PnJbaV0uYWNjb3VudHMuZmlsdGVyKHA9PnAuaW5jbHVkZXModikpKS5mbGF0KCk7bFtpXT17Y2hhaW5zOnUsbWV0aG9kczphLGV2ZW50czpnLGFjY291bnRzOkF9fSksT2JqZWN0LmtleXMocykuZm9yRWFjaChpPT57dmFyIHUsYSxnLEEsdixwO2lmKCFyW2ldKXJldHVybjtjb25zdCB5PShhPSh1PXNbaV0pPT1udWxsP3ZvaWQgMDp1LmNoYWlucyk9PW51bGw/dm9pZCAwOmEuZmlsdGVyKEk9PnJbaV0uY2hhaW5zLmluY2x1ZGVzKEkpKSx1bj1yW2ldLm1ldGhvZHMuZmlsdGVyKEk9Pnt2YXIgUCx3O3JldHVybih3PShQPXNbaV0pPT1udWxsP3ZvaWQgMDpQLm1ldGhvZHMpPT1udWxsP3ZvaWQgMDp3LmluY2x1ZGVzKEkpfSksZG49cltpXS5ldmVudHMuZmlsdGVyKEk9Pnt2YXIgUCx3O3JldHVybih3PShQPXNbaV0pPT1udWxsP3ZvaWQgMDpQLmV2ZW50cyk9PW51bGw/dm9pZCAwOncuaW5jbHVkZXMoSSl9KSxsbj15Py5tYXAoST0+cltpXS5hY2NvdW50cy5maWx0ZXIoUD0+UC5pbmNsdWRlcyhJKSkpLmZsYXQoKTtsW2ldPXtjaGFpbnM6TygoZz1sW2ldKT09bnVsbD92b2lkIDA6Zy5jaGFpbnMseSksbWV0aG9kczpPKChBPWxbaV0pPT1udWxsP3ZvaWQgMDpBLm1ldGhvZHMsdW4pLGV2ZW50czpPKCh2PWxbaV0pPT1udWxsP3ZvaWQgMDp2LmV2ZW50cyxkbiksYWNjb3VudHM6TygocD1sW2ldKT09bnVsbD92b2lkIDA6cC5hY2NvdW50cyxsbil9fSksbH1mdW5jdGlvbiB0ZShlKXtyZXR1cm4gZS5pbmNsdWRlcyhcIjpcIil9ZnVuY3Rpb24gUWUoZSl7cmV0dXJuIHRlKGUpP2Uuc3BsaXQoXCI6XCIpWzBdOmV9ZnVuY3Rpb24gcmUoZSl7dmFyIG4sdCxyO2NvbnN0IG89e307aWYoIXgoZSkpcmV0dXJuIG87Zm9yKGNvbnN0W3MsY11vZiBPYmplY3QuZW50cmllcyhlKSl7Y29uc3QgZD10ZShzKT9bc106Yy5jaGFpbnMsbD1jLm1ldGhvZHN8fFtdLGk9Yy5ldmVudHN8fFtdLHU9UWUocyk7b1t1XT1OdChndCh7fSxvW3VdKSx7Y2hhaW5zOk8oZCwobj1vW3VdKT09bnVsbD92b2lkIDA6bi5jaGFpbnMpLG1ldGhvZHM6TyhsLCh0PW9bdV0pPT1udWxsP3ZvaWQgMDp0Lm1ldGhvZHMpLGV2ZW50czpPKGksKHI9b1t1XSk9PW51bGw/dm9pZCAwOnIuZXZlbnRzKX0pfXJldHVybiBvfWNvbnN0IFN0PXtJTlZBTElEX01FVEhPRDp7bWVzc2FnZTpcIkludmFsaWQgbWV0aG9kLlwiLGNvZGU6MTAwMX0sSU5WQUxJRF9FVkVOVDp7bWVzc2FnZTpcIkludmFsaWQgZXZlbnQuXCIsY29kZToxMDAyfSxJTlZBTElEX1VQREFURV9SRVFVRVNUOnttZXNzYWdlOlwiSW52YWxpZCB1cGRhdGUgcmVxdWVzdC5cIixjb2RlOjEwMDN9LElOVkFMSURfRVhURU5EX1JFUVVFU1Q6e21lc3NhZ2U6XCJJbnZhbGlkIGV4dGVuZCByZXF1ZXN0LlwiLGNvZGU6MTAwNH0sSU5WQUxJRF9TRVNTSU9OX1NFVFRMRV9SRVFVRVNUOnttZXNzYWdlOlwiSW52YWxpZCBzZXNzaW9uIHNldHRsZSByZXF1ZXN0LlwiLGNvZGU6MTAwNX0sVU5BVVRIT1JJWkVEX01FVEhPRDp7bWVzc2FnZTpcIlVuYXV0aG9yaXplZCBtZXRob2QuXCIsY29kZTozMDAxfSxVTkFVVEhPUklaRURfRVZFTlQ6e21lc3NhZ2U6XCJVbmF1dGhvcml6ZWQgZXZlbnQuXCIsY29kZTozMDAyfSxVTkFVVEhPUklaRURfVVBEQVRFX1JFUVVFU1Q6e21lc3NhZ2U6XCJVbmF1dGhvcml6ZWQgdXBkYXRlIHJlcXVlc3QuXCIsY29kZTozMDAzfSxVTkFVVEhPUklaRURfRVhURU5EX1JFUVVFU1Q6e21lc3NhZ2U6XCJVbmF1dGhvcml6ZWQgZXh0ZW5kIHJlcXVlc3QuXCIsY29kZTozMDA0fSxVU0VSX1JFSkVDVEVEOnttZXNzYWdlOlwiVXNlciByZWplY3RlZC5cIixjb2RlOjVlM30sVVNFUl9SRUpFQ1RFRF9DSEFJTlM6e21lc3NhZ2U6XCJVc2VyIHJlamVjdGVkIGNoYWlucy5cIixjb2RlOjUwMDF9LFVTRVJfUkVKRUNURURfTUVUSE9EUzp7bWVzc2FnZTpcIlVzZXIgcmVqZWN0ZWQgbWV0aG9kcy5cIixjb2RlOjUwMDJ9LFVTRVJfUkVKRUNURURfRVZFTlRTOnttZXNzYWdlOlwiVXNlciByZWplY3RlZCBldmVudHMuXCIsY29kZTo1MDAzfSxVTlNVUFBPUlRFRF9DSEFJTlM6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCBjaGFpbnMuXCIsY29kZTo1MTAwfSxVTlNVUFBPUlRFRF9NRVRIT0RTOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgbWV0aG9kcy5cIixjb2RlOjUxMDF9LFVOU1VQUE9SVEVEX0VWRU5UUzp7bWVzc2FnZTpcIlVuc3VwcG9ydGVkIGV2ZW50cy5cIixjb2RlOjUxMDJ9LFVOU1VQUE9SVEVEX0FDQ09VTlRTOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgYWNjb3VudHMuXCIsY29kZTo1MTAzfSxVTlNVUFBPUlRFRF9OQU1FU1BBQ0VfS0VZOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgbmFtZXNwYWNlIGtleS5cIixjb2RlOjUxMDR9LFVTRVJfRElTQ09OTkVDVEVEOnttZXNzYWdlOlwiVXNlciBkaXNjb25uZWN0ZWQuXCIsY29kZTo2ZTN9LFNFU1NJT05fU0VUVExFTUVOVF9GQUlMRUQ6e21lc3NhZ2U6XCJTZXNzaW9uIHNldHRsZW1lbnQgZmFpbGVkLlwiLGNvZGU6N2UzfSxXQ19NRVRIT0RfVU5TVVBQT1JURUQ6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCB3Y18gbWV0aG9kLlwiLGNvZGU6MTAwMDF9fSxJdD17Tk9UX0lOSVRJQUxJWkVEOnttZXNzYWdlOlwiTm90IGluaXRpYWxpemVkLlwiLGNvZGU6MX0sTk9fTUFUQ0hJTkdfS0VZOnttZXNzYWdlOlwiTm8gbWF0Y2hpbmcga2V5LlwiLGNvZGU6Mn0sUkVTVE9SRV9XSUxMX09WRVJSSURFOnttZXNzYWdlOlwiUmVzdG9yZSB3aWxsIG92ZXJyaWRlLlwiLGNvZGU6M30sUkVTVUJTQ1JJQkVEOnttZXNzYWdlOlwiUmVzdWJzY3JpYmVkLlwiLGNvZGU6NH0sTUlTU0lOR19PUl9JTlZBTElEOnttZXNzYWdlOlwiTWlzc2luZyBvciBpbnZhbGlkLlwiLGNvZGU6NX0sRVhQSVJFRDp7bWVzc2FnZTpcIkV4cGlyZWQuXCIsY29kZTo2fSxVTktOT1dOX1RZUEU6e21lc3NhZ2U6XCJVbmtub3duIHR5cGUuXCIsY29kZTo3fSxNSVNNQVRDSEVEX1RPUElDOnttZXNzYWdlOlwiTWlzbWF0Y2hlZCB0b3BpYy5cIixjb2RlOjh9LE5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVM6e21lc3NhZ2U6XCJOb24gY29uZm9ybWluZyBuYW1lc3BhY2VzLlwiLGNvZGU6OX19O2Z1bmN0aW9uIE4oZSxuKXtjb25zdHttZXNzYWdlOnQsY29kZTpyfT1JdFtlXTtyZXR1cm57bWVzc2FnZTpuP2Ake3R9ICR7bn1gOnQsY29kZTpyfX1mdW5jdGlvbiBSKGUsbil7Y29uc3R7bWVzc2FnZTp0LGNvZGU6cn09U3RbZV07cmV0dXJue21lc3NhZ2U6bj9gJHt0fSAke259YDp0LGNvZGU6cn19ZnVuY3Rpb24gQyhlLG4pe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3R5cGVvZiBuPFwidVwiJiZlLmxlbmd0aD9lLmV2ZXJ5KG4pOiEwOiExfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlKT09PU9iamVjdC5wcm90b3R5cGUmJk9iamVjdC5rZXlzKGUpLmxlbmd0aH1mdW5jdGlvbiBTKGUpe3JldHVybiB0eXBlb2YgZT5cInVcIn1mdW5jdGlvbiBtKGUsbil7cmV0dXJuIG4mJlMoZSk/ITA6dHlwZW9mIGU9PVwic3RyaW5nXCImJkJvb2xlYW4oZS50cmltKCkubGVuZ3RoKX1mdW5jdGlvbiBGKGUsbil7cmV0dXJuIG4mJlMoZSk/ITA6dHlwZW9mIGU9PVwibnVtYmVyXCImJiFpc05hTihlKX1mdW5jdGlvbiBQdChlLG4pe2NvbnN0e3JlcXVpcmVkTmFtZXNwYWNlczp0fT1uLHI9T2JqZWN0LmtleXMoZS5uYW1lc3BhY2VzKSxvPU9iamVjdC5rZXlzKHQpO2xldCBzPSEwO3JldHVybiBiKG8scik/KHIuZm9yRWFjaChjPT57Y29uc3R7YWNjb3VudHM6ZCxtZXRob2RzOmwsZXZlbnRzOml9PWUubmFtZXNwYWNlc1tjXSx1PVQoZCksYT10W2NdOyghYihWKGMsYSksdSl8fCFiKGEubWV0aG9kcyxsKXx8IWIoYS5ldmVudHMsaSkpJiYocz0hMSl9KSxzKTohMX1mdW5jdGlvbiBIKGUpe3JldHVybiBtKGUsITEpJiZlLmluY2x1ZGVzKFwiOlwiKT9lLnNwbGl0KFwiOlwiKS5sZW5ndGg9PT0yOiExfWZ1bmN0aW9uIFplKGUpe2lmKG0oZSwhMSkmJmUuaW5jbHVkZXMoXCI6XCIpKXtjb25zdCBuPWUuc3BsaXQoXCI6XCIpO2lmKG4ubGVuZ3RoPT09Myl7Y29uc3QgdD1uWzBdK1wiOlwiK25bMV07cmV0dXJuISFuWzJdJiZIKHQpfX1yZXR1cm4hMX1mdW5jdGlvbiBUdChlKXtpZihtKGUsITEpKXRyeXtyZXR1cm4gdHlwZW9mIG5ldyBVUkwoZSk8XCJ1XCJ9Y2F0Y2h7cmV0dXJuITF9cmV0dXJuITF9ZnVuY3Rpb24gUnQoZSl7dmFyIG47cmV0dXJuKG49ZT8ucHJvcG9zZXIpPT1udWxsP3ZvaWQgMDpuLnB1YmxpY0tleX1mdW5jdGlvbiBBdChlKXtyZXR1cm4gZT8udG9waWN9ZnVuY3Rpb24gVXQoZSxuKXtsZXQgdD1udWxsO3JldHVybiBtKGU/LnB1YmxpY0tleSwhMSl8fCh0PU4oXCJNSVNTSU5HX09SX0lOVkFMSURcIixgJHtufSBjb250cm9sbGVyIHB1YmxpYyBrZXkgc2hvdWxkIGJlIGEgc3RyaW5nYCkpLHR9ZnVuY3Rpb24gb2UoZSl7bGV0IG49ITA7cmV0dXJuIEMoZSk/ZS5sZW5ndGgmJihuPWUuZXZlcnkodD0+bSh0LCExKSkpOm49ITEsbn1mdW5jdGlvbiBYZShlLG4sdCl7bGV0IHI9bnVsbDtyZXR1cm4gQyhuKT9uLmZvckVhY2gobz0+e3J8fCghSChvKXx8IW8uaW5jbHVkZXMoZSkpJiYocj1SKFwiVU5TVVBQT1JURURfQ0hBSU5TXCIsYCR7dH0sIGNoYWluICR7b30gc2hvdWxkIGJlIGEgc3RyaW5nIGFuZCBjb25mb3JtIHRvIFwibmFtZXNwYWNlOmNoYWluSWRcIiBmb3JtYXRgKSl9KTpyPVIoXCJVTlNVUFBPUlRFRF9DSEFJTlNcIixgJHt0fSwgY2hhaW5zICR7bn0gc2hvdWxkIGJlIGFuIGFycmF5IG9mIHN0cmluZ3MgY29uZm9ybWluZyB0byBcIm5hbWVzcGFjZTpjaGFpbklkXCIgZm9ybWF0YCkscn1mdW5jdGlvbiBlbihlLG4pe2xldCB0PW51bGw7cmV0dXJuIE9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKFtyLG9dKT0+e2lmKHQpcmV0dXJuO2NvbnN0IHM9WGUocixWKHIsbyksYCR7bn0gcmVxdWlyZWROYW1lc3BhY2VgKTtzJiYodD1zKX0pLHR9ZnVuY3Rpb24gbm4oZSxuKXtsZXQgdD1udWxsO3JldHVybiBDKGUpP2UuZm9yRWFjaChyPT57dHx8WmUocil8fCh0PVIoXCJVTlNVUFBPUlRFRF9BQ0NPVU5UU1wiLGAke259LCBhY2NvdW50ICR7cn0gc2hvdWxkIGJlIGEgc3RyaW5nIGFuZCBjb25mb3JtIHRvIFwibmFtZXNwYWNlOmNoYWluSWQ6YWRkcmVzc1wiIGZvcm1hdGApKX0pOnQ9UihcIlVOU1VQUE9SVEVEX0FDQ09VTlRTXCIsYCR7bn0sIGFjY291bnRzIHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIGNvbmZvcm1pbmcgdG8gXCJuYW1lc3BhY2U6Y2hhaW5JZDphZGRyZXNzXCIgZm9ybWF0YCksdH1mdW5jdGlvbiB0bihlLG4pe2xldCB0PW51bGw7cmV0dXJuIE9iamVjdC52YWx1ZXMoZSkuZm9yRWFjaChyPT57aWYodClyZXR1cm47Y29uc3Qgbz1ubihyPy5hY2NvdW50cyxgJHtufSBuYW1lc3BhY2VgKTtvJiYodD1vKX0pLHR9ZnVuY3Rpb24gcm4oZSxuKXtsZXQgdD1udWxsO3JldHVybiBvZShlPy5tZXRob2RzKT9vZShlPy5ldmVudHMpfHwodD1SKFwiVU5TVVBQT1JURURfRVZFTlRTXCIsYCR7bn0sIGV2ZW50cyBzaG91bGQgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBlbXB0eSBhcnJheSBmb3Igbm8gZXZlbnRzYCkpOnQ9UihcIlVOU1VQUE9SVEVEX01FVEhPRFNcIixgJHtufSwgbWV0aG9kcyBzaG91bGQgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBlbXB0eSBhcnJheSBmb3Igbm8gbWV0aG9kc2ApLHR9ZnVuY3Rpb24gc2UoZSxuKXtsZXQgdD1udWxsO3JldHVybiBPYmplY3QudmFsdWVzKGUpLmZvckVhY2gocj0+e2lmKHQpcmV0dXJuO2NvbnN0IG89cm4ocixgJHtufSwgbmFtZXNwYWNlYCk7byYmKHQ9byl9KSx0fWZ1bmN0aW9uIF90KGUsbix0KXtsZXQgcj1udWxsO2lmKGUmJngoZSkpe2NvbnN0IG89c2UoZSxuKTtvJiYocj1vKTtjb25zdCBzPWVuKGUsbik7cyYmKHI9cyl9ZWxzZSByPU4oXCJNSVNTSU5HX09SX0lOVkFMSURcIixgJHtufSwgJHt0fSBzaG91bGQgYmUgYW4gb2JqZWN0IHdpdGggZGF0YWApO3JldHVybiByfWZ1bmN0aW9uIG9uKGUsbil7bGV0IHQ9bnVsbDtpZihlJiZ4KGUpKXtjb25zdCByPXNlKGUsbik7ciYmKHQ9cik7Y29uc3Qgbz10bihlLG4pO28mJih0PW8pfWVsc2UgdD1OKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYCR7bn0sIG5hbWVzcGFjZXMgc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIGRhdGFgKTtyZXR1cm4gdH1mdW5jdGlvbiBzbihlKXtyZXR1cm4gbShlLnByb3RvY29sLCEwKX1mdW5jdGlvbiB3dChlLG4pe2xldCB0PSExO3JldHVybiBuJiYhZT90PSEwOmUmJkMoZSkmJmUubGVuZ3RoJiZlLmZvckVhY2gocj0+e3Q9c24ocil9KSx0fWZ1bmN0aW9uIGp0KGUpe3JldHVybiB0eXBlb2YgZT09XCJudW1iZXJcIn1mdW5jdGlvbiBDdChlKXtyZXR1cm4gdHlwZW9mIGU8XCJ1XCImJnR5cGVvZiBlIT09bnVsbH1mdW5jdGlvbiAkdChlKXtyZXR1cm4hKCFlfHx0eXBlb2YgZSE9XCJvYmplY3RcInx8IWUuY29kZXx8IUYoZS5jb2RlLCExKXx8IWUubWVzc2FnZXx8IW0oZS5tZXNzYWdlLCExKSl9ZnVuY3Rpb24gRHQoZSl7cmV0dXJuIShTKGUpfHwhbShlLm1ldGhvZCwhMSkpfWZ1bmN0aW9uIFZ0KGUpe3JldHVybiEoUyhlKXx8UyhlLnJlc3VsdCkmJlMoZS5lcnJvcil8fCFGKGUuaWQsITEpfHwhbShlLmpzb25ycGMsITEpKX1mdW5jdGlvbiBNdChlKXtyZXR1cm4hKFMoZSl8fCFtKGUubmFtZSwhMSkpfWZ1bmN0aW9uIEt0KGUsbil7cmV0dXJuISghSChuKXx8IVllKGUpLmluY2x1ZGVzKG4pKX1mdW5jdGlvbiBrdChlLG4sdCl7cmV0dXJuIG0odCwhMSk/V2UoZSxuKS5pbmNsdWRlcyh0KTohMX1mdW5jdGlvbiBMdChlLG4sdCl7cmV0dXJuIG0odCwhMSk/SmUoZSxuKS5pbmNsdWRlcyh0KTohMX1mdW5jdGlvbiBjbihlLG4sdCl7bGV0IHI9bnVsbDtjb25zdCBvPXh0KGUpLHM9RnQobiksYz1PYmplY3Qua2V5cyhvKSxkPU9iamVjdC5rZXlzKHMpLGw9YW4oT2JqZWN0LmtleXMoZSkpLGk9YW4oT2JqZWN0LmtleXMobikpLHU9bC5maWx0ZXIoYT0+IWkuaW5jbHVkZXMoYSkpO3JldHVybiB1Lmxlbmd0aCYmKHI9TihcIk5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVNcIixgJHt0fSBuYW1lc3BhY2VzIGtleXMgZG9uJ3Qgc2F0aXNmeSByZXF1aXJlZE5hbWVzcGFjZXMuXG4gICAgICBSZXF1aXJlZDogJHt1LnRvU3RyaW5nKCl9XG4gICAgICBSZWNlaXZlZDogJHtPYmplY3Qua2V5cyhuKS50b1N0cmluZygpfWApKSxiKGMsZCl8fChyPU4oXCJOT05fQ09ORk9STUlOR19OQU1FU1BBQ0VTXCIsYCR7dH0gbmFtZXNwYWNlcyBjaGFpbnMgZG9uJ3Qgc2F0aXNmeSByZXF1aXJlZCBuYW1lc3BhY2VzLlxuICAgICAgUmVxdWlyZWQ6ICR7Yy50b1N0cmluZygpfVxuICAgICAgQXBwcm92ZWQ6ICR7ZC50b1N0cmluZygpfWApKSxPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGE9PntpZighYS5pbmNsdWRlcyhcIjpcIil8fHIpcmV0dXJuO2NvbnN0IGc9VChuW2FdLmFjY291bnRzKTtnLmluY2x1ZGVzKGEpfHwocj1OKFwiTk9OX0NPTkZPUk1JTkdfTkFNRVNQQUNFU1wiLGAke3R9IG5hbWVzcGFjZXMgYWNjb3VudHMgZG9uJ3Qgc2F0aXNmeSBuYW1lc3BhY2UgYWNjb3VudHMgZm9yICR7YX1cbiAgICAgICAgUmVxdWlyZWQ6ICR7YX1cbiAgICAgICAgQXBwcm92ZWQ6ICR7Zy50b1N0cmluZygpfWApKX0pLGMuZm9yRWFjaChhPT57cnx8KGIob1thXS5tZXRob2RzLHNbYV0ubWV0aG9kcyk/YihvW2FdLmV2ZW50cyxzW2FdLmV2ZW50cyl8fChyPU4oXCJOT05fQ09ORk9STUlOR19OQU1FU1BBQ0VTXCIsYCR7dH0gbmFtZXNwYWNlcyBldmVudHMgZG9uJ3Qgc2F0aXNmeSBuYW1lc3BhY2UgZXZlbnRzIGZvciAke2F9YCkpOnI9TihcIk5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVNcIixgJHt0fSBuYW1lc3BhY2VzIG1ldGhvZHMgZG9uJ3Qgc2F0aXNmeSBuYW1lc3BhY2UgbWV0aG9kcyBmb3IgJHthfWApKX0pLHJ9ZnVuY3Rpb24geHQoZSl7Y29uc3Qgbj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57dmFyIHI7dC5pbmNsdWRlcyhcIjpcIik/blt0XT1lW3RdOihyPWVbdF0uY2hhaW5zKT09bnVsbHx8ci5mb3JFYWNoKG89PntuW29dPXttZXRob2RzOmVbdF0ubWV0aG9kcyxldmVudHM6ZVt0XS5ldmVudHN9fSl9KSxufWZ1bmN0aW9uIGFuKGUpe3JldHVyblsuLi5uZXcgU2V0KGUubWFwKG49Pm4uaW5jbHVkZXMoXCI6XCIpP24uc3BsaXQoXCI6XCIpWzBdOm4pKV19ZnVuY3Rpb24gRnQoZSl7Y29uc3Qgbj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57aWYodC5pbmNsdWRlcyhcIjpcIikpblt0XT1lW3RdO2Vsc2V7Y29uc3Qgcj1UKGVbdF0uYWNjb3VudHMpO3I/LmZvckVhY2gobz0+e25bb109e2FjY291bnRzOmVbdF0uYWNjb3VudHMuZmlsdGVyKHM9PnMuaW5jbHVkZXMoYCR7b306YCkpLG1ldGhvZHM6ZVt0XS5tZXRob2RzLGV2ZW50czplW3RdLmV2ZW50c319KX19KSxufWZ1bmN0aW9uIEh0KGUsbil7cmV0dXJuIEYoZSwhMSkmJmU8PW4ubWF4JiZlPj1uLm1pbn1leHBvcnR7RyBhcyBCQVNFMTAsZiBhcyBCQVNFMTYsSyBhcyBCQVNFNjQsa24gYXMgQ09MT04sWiBhcyBERUZBVUxUX0RFUFRILEwgYXMgRU1QVFlfU1BBQ0UsXyBhcyBFTlZfTUFQLExuIGFzIE9ORV9USE9VU0FORCxVZSBhcyBSRUFDVF9OQVRJVkVfUFJPRFVDVCx4ZSBhcyBSRUxBWUVSX0RFRkFVTFRfUFJPVE9DT0wsd2UgYXMgU0RLX1RZUEUsX2UgYXMgU0xBU0gsWSBhcyBUWVBFXzAsVSBhcyBUWVBFXzEsayBhcyBVVEY4LCRlIGFzIGFwcGVuZFRvUXVlcnlTdHJpbmcsem4gYXMgYXNzZXJ0VHlwZSxPdCBhcyBidWlsZEFwcHJvdmVkTmFtZXNwYWNlcyxydCBhcyBjYWxjRXhwaXJ5LFFuIGFzIGNhcGl0YWxpemUsTGUgYXMgY2FwaXRhbGl6ZVdvcmQsWm4gYXMgY3JlYXRlRGVsYXllZFByb21pc2UsWG4gYXMgY3JlYXRlRXhwaXJpbmdQcm9taXNlLGogYXMgZGVjb2RlVHlwZUJ5dGUsQ24gYXMgZGVjcnlwdCxVbiBhcyBkZXJpdmVTeW1LZXksUSBhcyBkZXNlcmlhbGl6ZSxTZSBhcyBlbmNvZGVUeXBlQnl0ZSxqbiBhcyBlbmNyeXB0LHN0IGFzIGVuZ2luZUV2ZW50LEpuIGFzIGVudW1pZnksRWUgYXMgZm9ybWF0QWNjb3VudElkLGduIGFzIGZvcm1hdEFjY291bnRXaXRoQ2hhaW4seWUgYXMgZm9ybWF0Q2hhaW5JZCxuZSBhcyBmb3JtYXRFeHBpcmVyVGFyZ2V0LG50IGFzIGZvcm1hdElkVGFyZ2V0LFBuIGFzIGZvcm1hdE1lc3NhZ2UsQm4gYXMgZm9ybWF0TWVzc2FnZUNvbnRleHQsemUgYXMgZm9ybWF0UmVsYXlQYXJhbXMsSG4gYXMgZm9ybWF0UmVsYXlScGNVcmwsZXQgYXMgZm9ybWF0VG9waWNUYXJnZXQsTWUgYXMgZm9ybWF0VUEscHQgYXMgZm9ybWF0VXJpLFJuIGFzIGdlbmVyYXRlS2V5UGFpcixBbiBhcyBnZW5lcmF0ZVJhbmRvbUJ5dGVzMzIsVCBhcyBnZXRBY2NvdW50c0NoYWlucyxibiBhcyBnZXRBY2NvdW50c0Zyb21OYW1lc3BhY2VzLGhlIGFzIGdldEFkZHJlc3NGcm9tQWNjb3VudCxObiBhcyBnZXRBZGRyZXNzZXNGcm9tQWNjb3VudHMseG4gYXMgZ2V0QXBwTWV0YWRhdGEsdmUgYXMgZ2V0Q2hhaW5Gcm9tQWNjb3VudCxnZSBhcyBnZXRDaGFpbnNGcm9tQWNjb3VudHMsViBhcyBnZXRDaGFpbnNGcm9tTmFtZXNwYWNlLE9uIGFzIGdldENoYWluc0Zyb21OYW1lc3BhY2VzLFNuIGFzIGdldENoYWluc0Zyb21SZXF1aXJlZE5hbWVzcGFjZXMsYmUgYXMgZ2V0RGlkQWRkcmVzcyxNIGFzIGdldERpZEFkZHJlc3NTZWdtZW50cyxOZSBhcyBnZXREaWRDaGFpbklkLGVlIGFzIGdldEVudmlyb25tZW50LHFuIGFzIGdldEh0dHBVcmwsTiBhcyBnZXRJbnRlcm5hbEVycm9yLFZlIGFzIGdldEphdmFzY3JpcHRJRCxEZSBhcyBnZXRKYXZhc2NyaXB0T1Msa2UgYXMgZ2V0TGFzdEl0ZW1zLEluIGFzIGdldE5hbWVzcGFjZWREaWRDaGFpbklkLFllIGFzIGdldE5hbWVzcGFjZXNDaGFpbnMsSmUgYXMgZ2V0TmFtZXNwYWNlc0V2ZW50c0ZvckNoYWluSWQsV2UgYXMgZ2V0TmFtZXNwYWNlc01ldGhvZHNGb3JDaGFpbklkLEZuIGFzIGdldFJlbGF5Q2xpZW50TWV0YWRhdGEsY3QgYXMgZ2V0UmVsYXlQcm90b2NvbEFwaSxpdCBhcyBnZXRSZWxheVByb3RvY29sTmFtZSxidCBhcyBnZXRSZXF1aXJlZE5hbWVzcGFjZXNGcm9tTmFtZXNwYWNlcyxSIGFzIGdldFNka0Vycm9yLEIgYXMgZ2V0VW5pcXVlVmFsdWVzLGIgYXMgaGFzT3ZlcmxhcCxfbiBhcyBoYXNoS2V5LHduIGFzIGhhc2hNZXNzYWdlLENlIGFzIGlzQnJvd3Nlcix0ZSBhcyBpc0NhaXBOYW1lc3BhY2UsY24gYXMgaXNDb25mb3JtaW5nTmFtZXNwYWNlcyxvdCBhcyBpc0V4cGlyZWQsWCBhcyBpc05vZGUsUnQgYXMgaXNQcm9wb3NhbFN0cnVjdCxqZSBhcyBpc1JlYWN0TmF0aXZlLFB0IGFzIGlzU2Vzc2lvbkNvbXBhdGlibGUsQXQgYXMgaXNTZXNzaW9uU3RydWN0LERuIGFzIGlzVHlwZU9uZUVudmVsb3BlLFMgYXMgaXNVbmRlZmluZWQsWmUgYXMgaXNWYWxpZEFjY291bnRJZCxubiBhcyBpc1ZhbGlkQWNjb3VudHMscm4gYXMgaXNWYWxpZEFjdGlvbnMsQyBhcyBpc1ZhbGlkQXJyYXksSCBhcyBpc1ZhbGlkQ2hhaW5JZCxYZSBhcyBpc1ZhbGlkQ2hhaW5zLFV0IGFzIGlzVmFsaWRDb250cm9sbGVyLCR0IGFzIGlzVmFsaWRFcnJvclJlYXNvbixNdCBhcyBpc1ZhbGlkRXZlbnQsanQgYXMgaXNWYWxpZElkLHRuIGFzIGlzVmFsaWROYW1lc3BhY2VBY2NvdW50cyxzZSBhcyBpc1ZhbGlkTmFtZXNwYWNlQWN0aW9ucyxlbiBhcyBpc1ZhbGlkTmFtZXNwYWNlQ2hhaW5zLG9lIGFzIGlzVmFsaWROYW1lc3BhY2VNZXRob2RzT3JFdmVudHMsb24gYXMgaXNWYWxpZE5hbWVzcGFjZXMsS3QgYXMgaXNWYWxpZE5hbWVzcGFjZXNDaGFpbklkLEx0IGFzIGlzVmFsaWROYW1lc3BhY2VzRXZlbnQsa3QgYXMgaXNWYWxpZE5hbWVzcGFjZXNSZXF1ZXN0LEYgYXMgaXNWYWxpZE51bWJlcix4IGFzIGlzVmFsaWRPYmplY3QsQ3QgYXMgaXNWYWxpZFBhcmFtcyxzbiBhcyBpc1ZhbGlkUmVsYXksd3QgYXMgaXNWYWxpZFJlbGF5cyxEdCBhcyBpc1ZhbGlkUmVxdWVzdCxIdCBhcyBpc1ZhbGlkUmVxdWVzdEV4cGlyeSxfdCBhcyBpc1ZhbGlkUmVxdWlyZWROYW1lc3BhY2VzLFZ0IGFzIGlzVmFsaWRSZXNwb25zZSxtIGFzIGlzVmFsaWRTdHJpbmcsVHQgYXMgaXNWYWxpZFVybCxXbiBhcyBtYXBFbnRyaWVzLEduIGFzIG1hcFRvT2JqLE8gYXMgbWVyZ2VBcnJheXMscmUgYXMgbm9ybWFsaXplTmFtZXNwYWNlcyxZbiBhcyBvYmpUb01hcCx6IGFzIHBhcnNlQWNjb3VudElkLG1lIGFzIHBhcnNlQ2hhaW5JZCxLZSBhcyBwYXJzZUNvbnRleHROYW1lcyx0dCBhcyBwYXJzZUV4cGlyZXJUYXJnZXQsUWUgYXMgcGFyc2VOYW1lc3BhY2VLZXkscWUgYXMgcGFyc2VSZWxheVBhcmFtcyxmdCBhcyBwYXJzZVVyaSxJZSBhcyBzZXJpYWxpemUsJG4gYXMgdmFsaWRhdGVEZWNvZGluZyxQZSBhcyB2YWxpZGF0ZUVuY29kaW5nfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBwcmVkaWNhdGUpIHtcblx0dmFyIHJldCA9IHt9O1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdHZhciBpc0FyciA9IEFycmF5LmlzQXJyYXkocHJlZGljYXRlKTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIga2V5ID0ga2V5c1tpXTtcblx0XHR2YXIgdmFsID0gb2JqW2tleV07XG5cblx0XHRpZiAoaXNBcnIgPyBwcmVkaWNhdGUuaW5kZXhPZihrZXkpICE9PSAtMSA6IHByZWRpY2F0ZShrZXksIHZhbCwgb2JqKSkge1xuXHRcdFx0cmV0W2tleV0gPSB2YWw7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5jb25zdCBzdHJpY3RVcmlFbmNvZGUgPSByZXF1aXJlKCdzdHJpY3QtdXJpLWVuY29kZScpO1xuY29uc3QgZGVjb2RlQ29tcG9uZW50ID0gcmVxdWlyZSgnZGVjb2RlLXVyaS1jb21wb25lbnQnKTtcbmNvbnN0IHNwbGl0T25GaXJzdCA9IHJlcXVpcmUoJ3NwbGl0LW9uLWZpcnN0Jyk7XG5jb25zdCBmaWx0ZXJPYmplY3QgPSByZXF1aXJlKCdmaWx0ZXItb2JqJyk7XG5cbmNvbnN0IGlzTnVsbE9yVW5kZWZpbmVkID0gdmFsdWUgPT4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcblxuY29uc3QgZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyID0gU3ltYm9sKCdlbmNvZGVGcmFnbWVudElkZW50aWZpZXInKTtcblxuZnVuY3Rpb24gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0c3dpdGNoIChvcHRpb25zLmFycmF5Rm9ybWF0KSB7XG5cdFx0Y2FzZSAnaW5kZXgnOlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBpbmRleCA9IHJlc3VsdC5sZW5ndGg7XG5cblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1snLCBpbmRleCwgJ10nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdC4uLnJlc3VsdCxcblx0XHRcdFx0XHRbZW5jb2RlKGtleSwgb3B0aW9ucyksICdbJywgZW5jb2RlKGluZGV4LCBvcHRpb25zKSwgJ109JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJylcblx0XHRcdFx0XTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1tdJ10uam9pbignJyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1tdPScsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4oJycpXTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdjb2xvbi1saXN0LXNlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4ga2V5ID0+IChyZXN1bHQsIHZhbHVlKSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHR2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0KG9wdGlvbnMuc2tpcE51bGwgJiYgdmFsdWUgPT09IG51bGwpIHx8XG5cdFx0XHRcdFx0KG9wdGlvbnMuc2tpcEVtcHR5U3RyaW5nICYmIHZhbHVlID09PSAnJylcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBbLi4ucmVzdWx0LCBbZW5jb2RlKGtleSwgb3B0aW9ucyksICc6bGlzdD0nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnOmxpc3Q9JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJyldO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2NvbW1hJzpcblx0XHRjYXNlICdzZXBhcmF0b3InOlxuXHRcdGNhc2UgJ2JyYWNrZXQtc2VwYXJhdG9yJzoge1xuXHRcdFx0Y29uc3Qga2V5VmFsdWVTZXAgPSBvcHRpb25zLmFycmF5Rm9ybWF0ID09PSAnYnJhY2tldC1zZXBhcmF0b3InID9cblx0XHRcdFx0J1tdPScgOlxuXHRcdFx0XHQnPSc7XG5cblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhbnNsYXRlIG51bGwgdG8gYW4gZW1wdHkgc3RyaW5nIHNvIHRoYXQgaXQgZG9lc24ndCBzZXJpYWxpemUgYXMgJ251bGwnXG5cdFx0XHRcdHZhbHVlID0gdmFsdWUgPT09IG51bGwgPyAnJyA6IHZhbHVlO1xuXG5cdFx0XHRcdGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFtbZW5jb2RlKGtleSwgb3B0aW9ucyksIGtleVZhbHVlU2VwLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW1tyZXN1bHQsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4ob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcildO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgZW5jb2RlKGtleSwgb3B0aW9ucyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJz0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhcnNlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0bGV0IHJlc3VsdDtcblxuXHRzd2l0Y2ggKG9wdGlvbnMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdHJlc3VsdCA9IC9cXFsoXFxkKilcXF0kLy5leGVjKGtleSk7XG5cblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcZCpcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0ge307XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldW3Jlc3VsdFsxXV0gPSB2YWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0cmVzdWx0ID0gLyhcXFtcXF0pJC8uZXhlYyhrZXkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvXFxbXFxdJC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29sb24tbGlzdC1zZXBhcmF0b3InOlxuXHRcdFx0cmV0dXJuIChrZXksIHZhbHVlLCBhY2N1bXVsYXRvcikgPT4ge1xuXHRcdFx0XHRyZXN1bHQgPSAvKDpsaXN0KSQvLmV4ZWMoa2V5KTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoLzpsaXN0JC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29tbWEnOlxuXHRcdGNhc2UgJ3NlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmluY2x1ZGVzKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXHRcdFx0XHRjb25zdCBpc0VuY29kZWRBcnJheSA9ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICFpc0FycmF5ICYmIGRlY29kZSh2YWx1ZSwgb3B0aW9ucykuaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcikpO1xuXHRcdFx0XHR2YWx1ZSA9IGlzRW5jb2RlZEFycmF5ID8gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSA6IHZhbHVlO1xuXHRcdFx0XHRjb25zdCBuZXdWYWx1ZSA9IGlzQXJyYXkgfHwgaXNFbmNvZGVkQXJyYXkgPyB2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpIDogdmFsdWUgPT09IG51bGwgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBuZXdWYWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0LXNlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSAvKFxcW1xcXSkkLy50ZXN0KGtleSk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9cXFtcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghaXNBcnJheSkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZSA/IGRlY29kZSh2YWx1ZSwgb3B0aW9ucykgOiB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhcnJheVZhbHVlID0gdmFsdWUgPT09IG51bGwgP1xuXHRcdFx0XHRcdFtdIDpcblx0XHRcdFx0XHR2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpO1xuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gYXJyYXlWYWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIGFycmF5VmFsdWUpO1xuXHRcdFx0fTtcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3IodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgdmFsdWUubGVuZ3RoICE9PSAxKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignYXJyYXlGb3JtYXRTZXBhcmF0b3IgbXVzdCBiZSBzaW5nbGUgY2hhcmFjdGVyIHN0cmluZycpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWx1ZSwgb3B0aW9ucykge1xuXHRpZiAob3B0aW9ucy5lbmNvZGUpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5zdHJpY3QgPyBzdHJpY3RVcmlFbmNvZGUodmFsdWUpIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmRlY29kZSkge1xuXHRcdHJldHVybiBkZWNvZGVDb21wb25lbnQodmFsdWUpO1xuXHR9XG5cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBrZXlzU29ydGVyKGlucHV0KSB7XG5cdGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHRcdHJldHVybiBpbnB1dC5zb3J0KCk7XG5cdH1cblxuXHRpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuXHRcdHJldHVybiBrZXlzU29ydGVyKE9iamVjdC5rZXlzKGlucHV0KSlcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBOdW1iZXIoYSkgLSBOdW1iZXIoYikpXG5cdFx0XHQubWFwKGtleSA9PiBpbnB1dFtrZXldKTtcblx0fVxuXG5cdHJldHVybiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSGFzaChpbnB1dCkge1xuXHRjb25zdCBoYXNoU3RhcnQgPSBpbnB1dC5pbmRleE9mKCcjJyk7XG5cdGlmIChoYXNoU3RhcnQgIT09IC0xKSB7XG5cdFx0aW5wdXQgPSBpbnB1dC5zbGljZSgwLCBoYXNoU3RhcnQpO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5mdW5jdGlvbiBnZXRIYXNoKHVybCkge1xuXHRsZXQgaGFzaCA9ICcnO1xuXHRjb25zdCBoYXNoU3RhcnQgPSB1cmwuaW5kZXhPZignIycpO1xuXHRpZiAoaGFzaFN0YXJ0ICE9PSAtMSkge1xuXHRcdGhhc2ggPSB1cmwuc2xpY2UoaGFzaFN0YXJ0KTtcblx0fVxuXG5cdHJldHVybiBoYXNoO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0KGlucHV0KSB7XG5cdGlucHV0ID0gcmVtb3ZlSGFzaChpbnB1dCk7XG5cdGNvbnN0IHF1ZXJ5U3RhcnQgPSBpbnB1dC5pbmRleE9mKCc/Jyk7XG5cdGlmIChxdWVyeVN0YXJ0ID09PSAtMSkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdHJldHVybiBpbnB1dC5zbGljZShxdWVyeVN0YXJ0ICsgMSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVmFsdWUodmFsdWUsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMucGFyc2VOdW1iZXJzICYmICFOdW1iZXIuaXNOYU4oTnVtYmVyKHZhbHVlKSkgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpICE9PSAnJykpIHtcblx0XHR2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5wYXJzZUJvb2xlYW5zICYmIHZhbHVlICE9PSBudWxsICYmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykpIHtcblx0XHR2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2UocXVlcnksIG9wdGlvbnMpIHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdGRlY29kZTogdHJ1ZSxcblx0XHRzb3J0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZScsXG5cdFx0YXJyYXlGb3JtYXRTZXBhcmF0b3I6ICcsJyxcblx0XHRwYXJzZU51bWJlcnM6IGZhbHNlLFxuXHRcdHBhcnNlQm9vbGVhbnM6IGZhbHNlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3Iob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcik7XG5cblx0Y29uc3QgZm9ybWF0dGVyID0gcGFyc2VyRm9yQXJyYXlGb3JtYXQob3B0aW9ucyk7XG5cblx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB3aXRoIG5vIHByb3RvdHlwZVxuXHRjb25zdCByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5cdGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHF1ZXJ5ID0gcXVlcnkudHJpbSgpLnJlcGxhY2UoL15bPyMmXS8sICcnKTtcblxuXHRpZiAoIXF1ZXJ5KSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdGZvciAoY29uc3QgcGFyYW0gb2YgcXVlcnkuc3BsaXQoJyYnKSkge1xuXHRcdGlmIChwYXJhbSA9PT0gJycpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGxldCBba2V5LCB2YWx1ZV0gPSBzcGxpdE9uRmlyc3Qob3B0aW9ucy5kZWNvZGUgPyBwYXJhbS5yZXBsYWNlKC9cXCsvZywgJyAnKSA6IHBhcmFtLCAnPScpO1xuXG5cdFx0Ly8gTWlzc2luZyBgPWAgc2hvdWxkIGJlIGBudWxsYDpcblx0XHQvLyBodHRwOi8vdzMub3JnL1RSLzIwMTIvV0QtdXJsLTIwMTIwNTI0LyNjb2xsZWN0LXVybC1wYXJhbWV0ZXJzXG5cdFx0dmFsdWUgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IFsnY29tbWEnLCAnc2VwYXJhdG9yJywgJ2JyYWNrZXQtc2VwYXJhdG9yJ10uaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdCkgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0Zm9ybWF0dGVyKGRlY29kZShrZXksIG9wdGlvbnMpLCB2YWx1ZSwgcmV0KTtcblx0fVxuXG5cdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHJldCkpIHtcblx0XHRjb25zdCB2YWx1ZSA9IHJldFtrZXldO1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG5cdFx0XHRcdHZhbHVlW2tdID0gcGFyc2VWYWx1ZSh2YWx1ZVtrXSwgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldFtrZXldID0gcGFyc2VWYWx1ZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc29ydCA9PT0gZmFsc2UpIHtcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0cmV0dXJuIChvcHRpb25zLnNvcnQgPT09IHRydWUgPyBPYmplY3Qua2V5cyhyZXQpLnNvcnQoKSA6IE9iamVjdC5rZXlzKHJldCkuc29ydChvcHRpb25zLnNvcnQpKS5yZWR1Y2UoKHJlc3VsdCwga2V5KSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSByZXRba2V5XTtcblx0XHRpZiAoQm9vbGVhbih2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdC8vIFNvcnQgb2JqZWN0IGtleXMsIG5vdCB2YWx1ZXNcblx0XHRcdHJlc3VsdFtrZXldID0ga2V5c1NvcnRlcih2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59XG5cbmV4cG9ydHMuZXh0cmFjdCA9IGV4dHJhY3Q7XG5leHBvcnRzLnBhcnNlID0gcGFyc2U7XG5cbmV4cG9ydHMuc3RyaW5naWZ5ID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRpZiAoIW9iamVjdCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRlbmNvZGU6IHRydWUsXG5cdFx0c3RyaWN0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZScsXG5cdFx0YXJyYXlGb3JtYXRTZXBhcmF0b3I6ICcsJ1xuXHR9LCBvcHRpb25zKTtcblxuXHR2YWxpZGF0ZUFycmF5Rm9ybWF0U2VwYXJhdG9yKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXG5cdGNvbnN0IHNob3VsZEZpbHRlciA9IGtleSA9PiAoXG5cdFx0KG9wdGlvbnMuc2tpcE51bGwgJiYgaXNOdWxsT3JVbmRlZmluZWQob2JqZWN0W2tleV0pKSB8fFxuXHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiBvYmplY3Rba2V5XSA9PT0gJycpXG5cdCk7XG5cblx0Y29uc3QgZm9ybWF0dGVyID0gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpO1xuXG5cdGNvbnN0IG9iamVjdENvcHkgPSB7fTtcblxuXHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG5cdFx0aWYgKCFzaG91bGRGaWx0ZXIoa2V5KSkge1xuXHRcdFx0b2JqZWN0Q29weVtrZXldID0gb2JqZWN0W2tleV07XG5cdFx0fVxuXHR9XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdENvcHkpO1xuXG5cdGlmIChvcHRpb25zLnNvcnQgIT09IGZhbHNlKSB7XG5cdFx0a2V5cy5zb3J0KG9wdGlvbnMuc29ydCk7XG5cdH1cblxuXHRyZXR1cm4ga2V5cy5tYXAoa2V5ID0+IHtcblx0XHRjb25zdCB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG5cdFx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBlbmNvZGUoa2V5LCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdGlmICh2YWx1ZS5sZW5ndGggPT09IDAgJiYgb3B0aW9ucy5hcnJheUZvcm1hdCA9PT0gJ2JyYWNrZXQtc2VwYXJhdG9yJykge1xuXHRcdFx0XHRyZXR1cm4gZW5jb2RlKGtleSwgb3B0aW9ucykgKyAnW10nO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdFx0LnJlZHVjZShmb3JtYXR0ZXIoa2V5KSwgW10pXG5cdFx0XHRcdC5qb2luKCcmJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVuY29kZShrZXksIG9wdGlvbnMpICsgJz0nICsgZW5jb2RlKHZhbHVlLCBvcHRpb25zKTtcblx0fSkuZmlsdGVyKHggPT4geC5sZW5ndGggPiAwKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnRzLnBhcnNlVXJsID0gKHVybCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZGVjb2RlOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IFt1cmxfLCBoYXNoXSA9IHNwbGl0T25GaXJzdCh1cmwsICcjJyk7XG5cblx0cmV0dXJuIE9iamVjdC5hc3NpZ24oXG5cdFx0e1xuXHRcdFx0dXJsOiB1cmxfLnNwbGl0KCc/JylbMF0gfHwgJycsXG5cdFx0XHRxdWVyeTogcGFyc2UoZXh0cmFjdCh1cmwpLCBvcHRpb25zKVxuXHRcdH0sXG5cdFx0b3B0aW9ucyAmJiBvcHRpb25zLnBhcnNlRnJhZ21lbnRJZGVudGlmaWVyICYmIGhhc2ggPyB7ZnJhZ21lbnRJZGVudGlmaWVyOiBkZWNvZGUoaGFzaCwgb3B0aW9ucyl9IDoge31cblx0KTtcbn07XG5cbmV4cG9ydHMuc3RyaW5naWZ5VXJsID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZW5jb2RlOiB0cnVlLFxuXHRcdHN0cmljdDogdHJ1ZSxcblx0XHRbZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyXTogdHJ1ZVxuXHR9LCBvcHRpb25zKTtcblxuXHRjb25zdCB1cmwgPSByZW1vdmVIYXNoKG9iamVjdC51cmwpLnNwbGl0KCc/JylbMF0gfHwgJyc7XG5cdGNvbnN0IHF1ZXJ5RnJvbVVybCA9IGV4cG9ydHMuZXh0cmFjdChvYmplY3QudXJsKTtcblx0Y29uc3QgcGFyc2VkUXVlcnlGcm9tVXJsID0gZXhwb3J0cy5wYXJzZShxdWVyeUZyb21VcmwsIHtzb3J0OiBmYWxzZX0pO1xuXG5cdGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmFzc2lnbihwYXJzZWRRdWVyeUZyb21VcmwsIG9iamVjdC5xdWVyeSk7XG5cdGxldCBxdWVyeVN0cmluZyA9IGV4cG9ydHMuc3RyaW5naWZ5KHF1ZXJ5LCBvcHRpb25zKTtcblx0aWYgKHF1ZXJ5U3RyaW5nKSB7XG5cdFx0cXVlcnlTdHJpbmcgPSBgPyR7cXVlcnlTdHJpbmd9YDtcblx0fVxuXG5cdGxldCBoYXNoID0gZ2V0SGFzaChvYmplY3QudXJsKTtcblx0aWYgKG9iamVjdC5mcmFnbWVudElkZW50aWZpZXIpIHtcblx0XHRoYXNoID0gYCMke29wdGlvbnNbZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyXSA/IGVuY29kZShvYmplY3QuZnJhZ21lbnRJZGVudGlmaWVyLCBvcHRpb25zKSA6IG9iamVjdC5mcmFnbWVudElkZW50aWZpZXJ9YDtcblx0fVxuXG5cdHJldHVybiBgJHt1cmx9JHtxdWVyeVN0cmluZ30ke2hhc2h9YDtcbn07XG5cbmV4cG9ydHMucGljayA9IChpbnB1dCwgZmlsdGVyLCBvcHRpb25zKSA9PiB7XG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRwYXJzZUZyYWdtZW50SWRlbnRpZmllcjogdHJ1ZSxcblx0XHRbZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyXTogZmFsc2Vcblx0fSwgb3B0aW9ucyk7XG5cblx0Y29uc3Qge3VybCwgcXVlcnksIGZyYWdtZW50SWRlbnRpZmllcn0gPSBleHBvcnRzLnBhcnNlVXJsKGlucHV0LCBvcHRpb25zKTtcblx0cmV0dXJuIGV4cG9ydHMuc3RyaW5naWZ5VXJsKHtcblx0XHR1cmwsXG5cdFx0cXVlcnk6IGZpbHRlck9iamVjdChxdWVyeSwgZmlsdGVyKSxcblx0XHRmcmFnbWVudElkZW50aWZpZXJcblx0fSwgb3B0aW9ucyk7XG59O1xuXG5leHBvcnRzLmV4Y2x1ZGUgPSAoaW5wdXQsIGZpbHRlciwgb3B0aW9ucykgPT4ge1xuXHRjb25zdCBleGNsdXNpb25GaWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBrZXkgPT4gIWZpbHRlci5pbmNsdWRlcyhrZXkpIDogKGtleSwgdmFsdWUpID0+ICFmaWx0ZXIoa2V5LCB2YWx1ZSk7XG5cblx0cmV0dXJuIGV4cG9ydHMucGljayhpbnB1dCwgZXhjbHVzaW9uRmlsdGVyLCBvcHRpb25zKTtcbn07XG4iLCJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiZXZlbnRzXCI7XG5pbXBvcnQgZmV0Y2ggZnJvbSBcImNyb3NzLWZldGNoXCI7XG5pbXBvcnQgeyBzYWZlSnNvblBhcnNlLCBzYWZlSnNvblN0cmluZ2lmeSB9IGZyb20gXCJAd2FsbGV0Y29ubmVjdC9zYWZlLWpzb25cIjtcbmltcG9ydCB7IGZvcm1hdEpzb25ScGNFcnJvciwgaXNIdHRwVXJsLCBwYXJzZUNvbm5lY3Rpb25FcnJvciwgfSBmcm9tIFwiQHdhbGxldGNvbm5lY3QvanNvbnJwYy11dGlsc1wiO1xuY29uc3QgREVGQVVMVF9IVFRQX0hFQURFUlMgPSB7XG4gICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbn07XG5jb25zdCBERUZBVUxUX0hUVFBfTUVUSE9EID0gXCJQT1NUXCI7XG5jb25zdCBERUZBVUxUX0ZFVENIX09QVFMgPSB7XG4gICAgaGVhZGVyczogREVGQVVMVF9IVFRQX0hFQURFUlMsXG4gICAgbWV0aG9kOiBERUZBVUxUX0hUVFBfTUVUSE9ELFxufTtcbmNvbnN0IEVWRU5UX0VNSVRURVJfTUFYX0xJU1RFTkVSU19ERUZBVUxUID0gMTA7XG5leHBvcnQgY2xhc3MgSHR0cENvbm5lY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHVybCwgZGlzYWJsZVByb3ZpZGVyUGluZyA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLmRpc2FibGVQcm92aWRlclBpbmcgPSBkaXNhYmxlUHJvdmlkZXJQaW5nO1xuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5pc0F2YWlsYWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICghaXNIdHRwVXJsKHVybCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvdmlkZWQgVVJMIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggSFRUUCBjb25uZWN0aW9uOiAke3VybH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5kaXNhYmxlUHJvdmlkZXJQaW5nID0gZGlzYWJsZVByb3ZpZGVyUGluZztcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdmFpbGFibGU7XG4gICAgfVxuICAgIGdldCBjb25uZWN0aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcmluZztcbiAgICB9XG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIG9uY2UoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uY2UoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIGFzeW5jIG9wZW4odXJsID0gdGhpcy51cmwpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Rlcih1cmwpO1xuICAgIH1cbiAgICBhc3luYyBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25uZWN0aW9uIGFscmVhZHkgY2xvc2VkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBzZW5kKHBheWxvYWQsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBzYWZlSnNvblN0cmluZ2lmeShwYXlsb2FkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRoaXMudXJsLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfRkVUQ0hfT1BUUyksIHsgYm9keSB9KSk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIHRoaXMub25QYXlsb2FkKHsgZGF0YSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKHBheWxvYWQuaWQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHJlZ2lzdGVyKHVybCA9IHRoaXMudXJsKSB7XG4gICAgICAgIGlmICghaXNIdHRwVXJsKHVybCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvdmlkZWQgVVJMIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggSFRUUCBjb25uZWN0aW9uOiAke3VybH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmluZykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudE1heExpc3RlbmVycyA9IHRoaXMuZXZlbnRzLmdldE1heExpc3RlbmVycygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRzLmxpc3RlbmVyQ291bnQoXCJyZWdpc3Rlcl9lcnJvclwiKSA+PSBjdXJyZW50TWF4TGlzdGVuZXJzIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMubGlzdGVuZXJDb3VudChcIm9wZW5cIikgPj0gY3VycmVudE1heExpc3RlbmVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnNldE1heExpc3RlbmVycyhjdXJyZW50TWF4TGlzdGVuZXJzICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uY2UoXCJyZWdpc3Rlcl9lcnJvclwiLCBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRNYXhMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRNYXhMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmlzQXZhaWxhYmxlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcIkhUVFAgY29ubmVjdGlvbiBpcyBtaXNzaW5nIG9yIGludmFsaWRcIikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNhYmxlUHJvdmlkZXJQaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IHNhZmVKc29uU3RyaW5naWZ5KHsgaWQ6IDEsIGpzb25ycGM6IFwiMi4wXCIsIG1ldGhvZDogXCJ0ZXN0XCIsIHBhcmFtczogW10gfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2godXJsLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfRkVUQ0hfT1BUUyksIHsgYm9keSB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMucGFyc2VFcnJvcihlKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJyZWdpc3Rlcl9lcnJvclwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UoKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5pc0F2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcIm9wZW5cIik7XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuaXNBdmFpbGFibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiY2xvc2VcIik7XG4gICAgfVxuICAgIG9uUGF5bG9hZChlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZS5kYXRhID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gdHlwZW9mIGUuZGF0YSA9PT0gXCJzdHJpbmdcIiA/IHNhZmVKc29uUGFyc2UoZS5kYXRhKSA6IGUuZGF0YTtcbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcInBheWxvYWRcIiwgcGF5bG9hZCk7XG4gICAgfVxuICAgIG9uRXJyb3IoaWQsIGUpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLnBhcnNlRXJyb3IoZSk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlIHx8IGVycm9yLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBmb3JtYXRKc29uUnBjRXJyb3IoaWQsIG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwicGF5bG9hZFwiLCBwYXlsb2FkKTtcbiAgICB9XG4gICAgcGFyc2VFcnJvcihlLCB1cmwgPSB0aGlzLnVybCkge1xuICAgICAgICByZXR1cm4gcGFyc2VDb25uZWN0aW9uRXJyb3IoZSwgdXJsLCBcIkhUVFBcIik7XG4gICAgfVxuICAgIHJlc2V0TWF4TGlzdGVuZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5ldmVudHMuZ2V0TWF4TGlzdGVuZXJzKCkgPiBFVkVOVF9FTUlUVEVSX01BWF9MSVNURU5FUlNfREVGQVVMVCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMuc2V0TWF4TGlzdGVuZXJzKEVWRU5UX0VNSVRURVJfTUFYX0xJU1RFTkVSU19ERUZBVUxUKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEh0dHBDb25uZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHR0cC5qcy5tYXAiLCJpbXBvcnQgSHR0cENvbm5lY3Rpb24gZnJvbSBcIi4vaHR0cFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vaHR0cFwiO1xuZXhwb3J0IGRlZmF1bHQgSHR0cENvbm5lY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgYWUgZnJvbVwicGlub1wiO2ltcG9ydHtSRUxBWUVSX0RFRkFVTFRfUFJPVE9DT0wgYXMgY2UsUkVMQVlFUl9FVkVOVFMgYXMgRixFWFBJUkVSX0VWRU5UUyBhcyBwZSxTdG9yZSBhcyB6LENvcmUgYXMgbGV9ZnJvbVwiQHdhbGxldGNvbm5lY3QvY29yZVwiO2ltcG9ydHtnZXREZWZhdWx0TG9nZ2VyT3B0aW9ucyBhcyBoZSxnZW5lcmF0ZUNoaWxkTG9nZ2VyIGFzIGRlLGdldExvZ2dlckNvbnRleHQgYXMgZ2V9ZnJvbVwiQHdhbGxldGNvbm5lY3QvbG9nZ2VyXCI7aW1wb3J0e0lFbmdpbmUgYXMgbWUsSVNpZ25DbGllbnQgYXMgd2V9ZnJvbVwiQHdhbGxldGNvbm5lY3QvdHlwZXNcIjtpbXBvcnR7VFlQRV8xIGFzIHVlLGNyZWF0ZURlbGF5ZWRQcm9taXNlIGFzIHYsZW5naW5lRXZlbnQgYXMgbCxnZXRJbnRlcm5hbEVycm9yIGFzIGMsY2FsY0V4cGlyeSBhcyBfLGlzVmFsaWRPYmplY3QgYXMgaixnZXRSZXF1aXJlZE5hbWVzcGFjZXNGcm9tTmFtZXNwYWNlcyBhcyB5ZSxnZXRTZGtFcnJvciBhcyBSLGlzU2Vzc2lvbkNvbXBhdGlibGUgYXMgU2UsaXNFeHBpcmVkIGFzIGYsaXNWYWxpZFBhcmFtcyBhcyBTLGlzVW5kZWZpbmVkIGFzIEQsaXNWYWxpZFJlbGF5cyBhcyBFZSxpc1ZhbGlkUmVxdWlyZWROYW1lc3BhY2VzIGFzIEllLGlzVmFsaWROYW1lc3BhY2VzIGFzIFksaXNDb25mb3JtaW5nTmFtZXNwYWNlcyBhcyBRLGlzVmFsaWRTdHJpbmcgYXMgQSxpc1ZhbGlkRXJyb3JSZWFzb24gYXMgX2UsaXNWYWxpZFJlbGF5IGFzIFJlLGlzVmFsaWRDb250cm9sbGVyIGFzIE5lLGlzVmFsaWROYW1lc3BhY2VzQ2hhaW5JZCBhcyBCLGlzVmFsaWRSZXF1ZXN0IGFzIHFlLGlzVmFsaWROYW1lc3BhY2VzUmVxdWVzdCBhcyBQZSxpc1ZhbGlkUmVxdWVzdEV4cGlyeSBhcyB2ZSxpc1ZhbGlkUmVzcG9uc2UgYXMgZmUsaXNWYWxpZEV2ZW50IGFzIE9lLGlzVmFsaWROYW1lc3BhY2VzRXZlbnQgYXMgVmUscGFyc2VFeHBpcmVyVGFyZ2V0IGFzIFRlLGlzVmFsaWRJZCBhcyB4ZSxnZXRBcHBNZXRhZGF0YSBhcyBEZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC91dGlsc1wiO2ltcG9ydCBBZSx7RXZlbnRFbWl0dGVyIGFzIGJlfWZyb21cImV2ZW50c1wiO2ltcG9ydHtUSElSVFlfREFZUyBhcyBMZSxTRVZFTl9EQVlTIGFzIFcsRklWRV9NSU5VVEVTIGFzIHcsT05FX0RBWSBhcyBPLFRISVJUWV9TRUNPTkRTIGFzIFp9ZnJvbVwiQHdhbGxldGNvbm5lY3QvdGltZVwiO2ltcG9ydHtpc0pzb25ScGNSZXN1bHQgYXMgTixpc0pzb25ScGNFcnJvciBhcyBxLGZvcm1hdEpzb25ScGNSZXF1ZXN0IGFzIENlLGZvcm1hdEpzb25ScGNSZXN1bHQgYXMgR2UsZm9ybWF0SnNvblJwY0Vycm9yIGFzICRlLGlzSnNvblJwY1JlcXVlc3QgYXMgTWUsaXNKc29uUnBjUmVzcG9uc2UgYXMgVWV9ZnJvbVwiQHdhbGxldGNvbm5lY3QvanNvbnJwYy11dGlsc1wiO2NvbnN0IGs9XCJ3Y1wiLFg9MixKPVwiY2xpZW50XCIsQz1gJHtrfUAke1h9OiR7Sn06YCxHPXtuYW1lOkosbG9nZ2VyOlwiZXJyb3JcIixjb250cm9sbGVyOiExLHJlbGF5VXJsOlwid3NzOi8vcmVsYXkud2FsbGV0Y29ubmVjdC5jb21cIn0sS2U9e3Nlc3Npb25fcHJvcG9zYWw6XCJzZXNzaW9uX3Byb3Bvc2FsXCIsc2Vzc2lvbl91cGRhdGU6XCJzZXNzaW9uX3VwZGF0ZVwiLHNlc3Npb25fZXh0ZW5kOlwic2Vzc2lvbl9leHRlbmRcIixzZXNzaW9uX3Bpbmc6XCJzZXNzaW9uX3BpbmdcIixzZXNzaW9uX2RlbGV0ZTpcInNlc3Npb25fZGVsZXRlXCIsc2Vzc2lvbl9leHBpcmU6XCJzZXNzaW9uX2V4cGlyZVwiLHNlc3Npb25fcmVxdWVzdDpcInNlc3Npb25fcmVxdWVzdFwiLHNlc3Npb25fcmVxdWVzdF9zZW50Olwic2Vzc2lvbl9yZXF1ZXN0X3NlbnRcIixzZXNzaW9uX2V2ZW50Olwic2Vzc2lvbl9ldmVudFwiLHByb3Bvc2FsX2V4cGlyZTpcInByb3Bvc2FsX2V4cGlyZVwifSx6ZT17ZGF0YWJhc2U6XCI6bWVtb3J5OlwifSxqZT17Y3JlYXRlZDpcImhpc3RvcnlfY3JlYXRlZFwiLHVwZGF0ZWQ6XCJoaXN0b3J5X3VwZGF0ZWRcIixkZWxldGVkOlwiaGlzdG9yeV9kZWxldGVkXCIsc3luYzpcImhpc3Rvcnlfc3luY1wifSxZZT1cImhpc3RvcnlcIixrZT1cIjAuM1wiLGVlPVwicHJvcG9zYWxcIixYZT1MZSxzZT1cIlByb3Bvc2FsIGV4cGlyZWRcIix0ZT1cInNlc3Npb25cIixiPVcsaWU9XCJlbmdpbmVcIixWPXt3Y19zZXNzaW9uUHJvcG9zZTp7cmVxOnt0dGw6dyxwcm9tcHQ6ITAsdGFnOjExMDB9LHJlczp7dHRsOncscHJvbXB0OiExLHRhZzoxMTAxfX0sd2Nfc2Vzc2lvblNldHRsZTp7cmVxOnt0dGw6dyxwcm9tcHQ6ITEsdGFnOjExMDJ9LHJlczp7dHRsOncscHJvbXB0OiExLHRhZzoxMTAzfX0sd2Nfc2Vzc2lvblVwZGF0ZTp7cmVxOnt0dGw6Tyxwcm9tcHQ6ITEsdGFnOjExMDR9LHJlczp7dHRsOk8scHJvbXB0OiExLHRhZzoxMTA1fX0sd2Nfc2Vzc2lvbkV4dGVuZDp7cmVxOnt0dGw6Tyxwcm9tcHQ6ITEsdGFnOjExMDZ9LHJlczp7dHRsOk8scHJvbXB0OiExLHRhZzoxMTA3fX0sd2Nfc2Vzc2lvblJlcXVlc3Q6e3JlcTp7dHRsOncscHJvbXB0OiEwLHRhZzoxMTA4fSxyZXM6e3R0bDp3LHByb21wdDohMSx0YWc6MTEwOX19LHdjX3Nlc3Npb25FdmVudDp7cmVxOnt0dGw6dyxwcm9tcHQ6ITAsdGFnOjExMTB9LHJlczp7dHRsOncscHJvbXB0OiExLHRhZzoxMTExfX0sd2Nfc2Vzc2lvbkRlbGV0ZTp7cmVxOnt0dGw6Tyxwcm9tcHQ6ITEsdGFnOjExMTJ9LHJlczp7dHRsOk8scHJvbXB0OiExLHRhZzoxMTEzfX0sd2Nfc2Vzc2lvblBpbmc6e3JlcTp7dHRsOloscHJvbXB0OiExLHRhZzoxMTE0fSxyZXM6e3R0bDpaLHByb21wdDohMSx0YWc6MTExNX19fSwkPXttaW46dyxtYXg6V30sbmU9XCJyZXF1ZXN0XCI7dmFyIEplPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxIZT1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxGZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxvZT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFFlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksQmU9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxyZT0oZCxuLGUpPT5uIGluIGQ/SmUoZCxuLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSk6ZFtuXT1lLHU9KGQsbik9Pntmb3IodmFyIGUgaW4gbnx8KG49e30pKVFlLmNhbGwobixlKSYmcmUoZCxlLG5bZV0pO2lmKG9lKWZvcih2YXIgZSBvZiBvZShuKSlCZS5jYWxsKG4sZSkmJnJlKGQsZSxuW2VdKTtyZXR1cm4gZH0sSD0oZCxuKT0+SGUoZCxGZShuKSk7Y2xhc3MgV2UgZXh0ZW5kcyBtZXtjb25zdHJ1Y3RvcihuKXtzdXBlcihuKSx0aGlzLm5hbWU9aWUsdGhpcy5ldmVudHM9bmV3IEFlLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5pZ25vcmVkUGF5bG9hZFR5cGVzPVt1ZV0sdGhpcy5pbml0PWFzeW5jKCk9Pnt0aGlzLmluaXRpYWxpemVkfHwoYXdhaXQgdGhpcy5jbGVhbnVwKCksdGhpcy5yZWdpc3RlclJlbGF5ZXJFdmVudHMoKSx0aGlzLnJlZ2lzdGVyRXhwaXJlckV2ZW50cygpLHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5yZWdpc3Rlcih7bWV0aG9kczpPYmplY3Qua2V5cyhWKX0pLHRoaXMuaW5pdGlhbGl6ZWQ9ITApfSx0aGlzLmNvbm5lY3Q9YXN5bmMgZT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IHM9SCh1KHt9LGUpLHtyZXF1aXJlZE5hbWVzcGFjZXM6ZS5yZXF1aXJlZE5hbWVzcGFjZXN8fHt9LG9wdGlvbmFsTmFtZXNwYWNlczplLm9wdGlvbmFsTmFtZXNwYWNlc3x8e319KTthd2FpdCB0aGlzLmlzVmFsaWRDb25uZWN0KHMpO2NvbnN0e3BhaXJpbmdUb3BpYzp0LHJlcXVpcmVkTmFtZXNwYWNlczppLG9wdGlvbmFsTmFtZXNwYWNlczpvLHNlc3Npb25Qcm9wZXJ0aWVzOmEscmVsYXlzOnJ9PXM7bGV0IHA9dCxoLEU9ITE7aWYocCYmKEU9dGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmdldChwKS5hY3RpdmUpLCFwfHwhRSl7Y29uc3R7dG9waWM6SSx1cmk6Z309YXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLmNyZWF0ZSgpO3A9SSxoPWd9Y29uc3QgbT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZUtleVBhaXIoKSxQPXUoe3JlcXVpcmVkTmFtZXNwYWNlczppLG9wdGlvbmFsTmFtZXNwYWNlczpvLHJlbGF5czpyPz9be3Byb3RvY29sOmNlfV0scHJvcG9zZXI6e3B1YmxpY0tleTptLG1ldGFkYXRhOnRoaXMuY2xpZW50Lm1ldGFkYXRhfX0sYSYme3Nlc3Npb25Qcm9wZXJ0aWVzOmF9KSx7cmVqZWN0OnkscmVzb2x2ZTpULGRvbmU6VX09dih3LHNlKTtpZih0aGlzLmV2ZW50cy5vbmNlKGwoXCJzZXNzaW9uX2Nvbm5lY3RcIiksYXN5bmMoe2Vycm9yOkksc2Vzc2lvbjpnfSk9PntpZihJKXkoSSk7ZWxzZSBpZihnKXtnLnNlbGYucHVibGljS2V5PW07Y29uc3QgeD1IKHUoe30sZykse3JlcXVpcmVkTmFtZXNwYWNlczpnLnJlcXVpcmVkTmFtZXNwYWNlcyxvcHRpb25hbE5hbWVzcGFjZXM6Zy5vcHRpb25hbE5hbWVzcGFjZXN9KTthd2FpdCB0aGlzLmNsaWVudC5zZXNzaW9uLnNldChnLnRvcGljLHgpLGF3YWl0IHRoaXMuc2V0RXhwaXJ5KGcudG9waWMsZy5leHBpcnkpLHAmJmF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy51cGRhdGVNZXRhZGF0YSh7dG9waWM6cCxtZXRhZGF0YTpnLnBlZXIubWV0YWRhdGF9KSxUKHgpfX0pLCFwKXtjb25zdHttZXNzYWdlOkl9PWMoXCJOT19NQVRDSElOR19LRVlcIixgY29ubmVjdCgpIHBhaXJpbmcgdG9waWM6ICR7cH1gKTt0aHJvdyBuZXcgRXJyb3IoSSl9Y29uc3QgTD1hd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHAsXCJ3Y19zZXNzaW9uUHJvcG9zZVwiLFApLEs9Xyh3KTtyZXR1cm4gYXdhaXQgdGhpcy5zZXRQcm9wb3NhbChMLHUoe2lkOkwsZXhwaXJ5Okt9LFApKSx7dXJpOmgsYXBwcm92YWw6VX19LHRoaXMucGFpcj1hc3luYyBlPT4odGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXIoZSkpLHRoaXMuYXBwcm92ZT1hc3luYyBlPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkQXBwcm92ZShlKTtjb25zdHtpZDpzLHJlbGF5UHJvdG9jb2w6dCxuYW1lc3BhY2VzOmksc2Vzc2lvblByb3BlcnRpZXM6b309ZSxhPXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChzKTtsZXR7cGFpcmluZ1RvcGljOnIscHJvcG9zZXI6cCxyZXF1aXJlZE5hbWVzcGFjZXM6aCxvcHRpb25hbE5hbWVzcGFjZXM6RX09YTtyPXJ8fFwiXCIsaihoKXx8KGg9eWUoaSxcImFwcHJvdmUoKVwiKSk7Y29uc3QgbT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZW5lcmF0ZUtleVBhaXIoKSxQPXAucHVibGljS2V5LHk9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZ2VuZXJhdGVTaGFyZWRLZXkobSxQKTtyJiZzJiYoYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnVwZGF0ZU1ldGFkYXRhKHt0b3BpYzpyLG1ldGFkYXRhOnAubWV0YWRhdGF9KSxhd2FpdCB0aGlzLnNlbmRSZXN1bHQocyxyLHtyZWxheTp7cHJvdG9jb2w6dD8/XCJpcm5cIn0scmVzcG9uZGVyUHVibGljS2V5Om19KSxhd2FpdCB0aGlzLmNsaWVudC5wcm9wb3NhbC5kZWxldGUocyxSKFwiVVNFUl9ESVNDT05ORUNURURcIikpLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5hY3RpdmF0ZSh7dG9waWM6cn0pKTtjb25zdCBUPXUoe3JlbGF5Ontwcm90b2NvbDp0Pz9cImlyblwifSxuYW1lc3BhY2VzOmkscmVxdWlyZWROYW1lc3BhY2VzOmgsb3B0aW9uYWxOYW1lc3BhY2VzOkUscGFpcmluZ1RvcGljOnIsY29udHJvbGxlcjp7cHVibGljS2V5Om0sbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LGV4cGlyeTpfKGIpfSxvJiZ7c2Vzc2lvblByb3BlcnRpZXM6b30pO2F3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUoeSk7Y29uc3QgVT1hd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHksXCJ3Y19zZXNzaW9uU2V0dGxlXCIsVCkse2RvbmU6TCxyZXNvbHZlOksscmVqZWN0Okl9PXYoKTt0aGlzLmV2ZW50cy5vbmNlKGwoXCJzZXNzaW9uX2FwcHJvdmVcIixVKSwoe2Vycm9yOnh9KT0+e3g/SSh4KTpLKHRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KHkpKX0pO2NvbnN0IGc9SCh1KHt9LFQpLHt0b3BpYzp5LHBhaXJpbmdUb3BpYzpyLGFja25vd2xlZGdlZDohMSxzZWxmOlQuY29udHJvbGxlcixwZWVyOntwdWJsaWNLZXk6cC5wdWJsaWNLZXksbWV0YWRhdGE6cC5tZXRhZGF0YX0sY29udHJvbGxlcjptfSk7cmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24uc2V0KHksZyksYXdhaXQgdGhpcy5zZXRFeHBpcnkoeSxfKGIpKSx7dG9waWM6eSxhY2tub3dsZWRnZWQ6TH19LHRoaXMucmVqZWN0PWFzeW5jIGU9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKSxhd2FpdCB0aGlzLmlzVmFsaWRSZWplY3QoZSk7Y29uc3R7aWQ6cyxyZWFzb246dH09ZSx7cGFpcmluZ1RvcGljOml9PXRoaXMuY2xpZW50LnByb3Bvc2FsLmdldChzKTtpJiYoYXdhaXQgdGhpcy5zZW5kRXJyb3IocyxpLHQpLGF3YWl0IHRoaXMuY2xpZW50LnByb3Bvc2FsLmRlbGV0ZShzLFIoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSkpfSx0aGlzLnVwZGF0ZT1hc3luYyBlPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkVXBkYXRlKGUpO2NvbnN0e3RvcGljOnMsbmFtZXNwYWNlczp0fT1lLGk9YXdhaXQgdGhpcy5zZW5kUmVxdWVzdChzLFwid2Nfc2Vzc2lvblVwZGF0ZVwiLHtuYW1lc3BhY2VzOnR9KSx7ZG9uZTpvLHJlc29sdmU6YSxyZWplY3Q6cn09digpO3JldHVybiB0aGlzLmV2ZW50cy5vbmNlKGwoXCJzZXNzaW9uX3VwZGF0ZVwiLGkpLCh7ZXJyb3I6cH0pPT57cD9yKHApOmEoKX0pLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKHMse25hbWVzcGFjZXM6dH0pLHthY2tub3dsZWRnZWQ6b319LHRoaXMuZXh0ZW5kPWFzeW5jIGU9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKSxhd2FpdCB0aGlzLmlzVmFsaWRFeHRlbmQoZSk7Y29uc3R7dG9waWM6c309ZSx0PWF3YWl0IHRoaXMuc2VuZFJlcXVlc3QocyxcIndjX3Nlc3Npb25FeHRlbmRcIix7fSkse2RvbmU6aSxyZXNvbHZlOm8scmVqZWN0OmF9PXYoKTtyZXR1cm4gdGhpcy5ldmVudHMub25jZShsKFwic2Vzc2lvbl9leHRlbmRcIix0KSwoe2Vycm9yOnJ9KT0+e3I/YShyKTpvKCl9KSxhd2FpdCB0aGlzLnNldEV4cGlyeShzLF8oYikpLHthY2tub3dsZWRnZWQ6aX19LHRoaXMucmVxdWVzdD1hc3luYyBlPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkUmVxdWVzdChlKTtjb25zdHtjaGFpbklkOnMscmVxdWVzdDp0LHRvcGljOmksZXhwaXJ5Om99PWUsYT1hd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KGksXCJ3Y19zZXNzaW9uUmVxdWVzdFwiLHtyZXF1ZXN0OnQsY2hhaW5JZDpzfSxvKSx7ZG9uZTpyLHJlc29sdmU6cCxyZWplY3Q6aH09dihvKTtyZXR1cm4gdGhpcy5ldmVudHMub25jZShsKFwic2Vzc2lvbl9yZXF1ZXN0XCIsYSksKHtlcnJvcjpFLHJlc3VsdDptfSk9PntFP2goRSk6cChtKX0pLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9yZXF1ZXN0X3NlbnRcIix7dG9waWM6aSxyZXF1ZXN0OnQsY2hhaW5JZDpzLGlkOmF9KSxhd2FpdCByKCl9LHRoaXMucmVzcG9uZD1hc3luYyBlPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkUmVzcG9uZChlKTtjb25zdHt0b3BpYzpzLHJlc3BvbnNlOnR9PWUse2lkOml9PXQ7Tih0KT9hd2FpdCB0aGlzLnNlbmRSZXN1bHQoaSxzLHQucmVzdWx0KTpxKHQpJiZhd2FpdCB0aGlzLnNlbmRFcnJvcihpLHMsdC5lcnJvciksdGhpcy5kZWxldGVQZW5kaW5nU2Vzc2lvblJlcXVlc3QoZS5yZXNwb25zZS5pZCx7bWVzc2FnZTpcImZ1bGZpbGxlZFwiLGNvZGU6MH0pfSx0aGlzLnBpbmc9YXN5bmMgZT0+e3RoaXMuaXNJbml0aWFsaXplZCgpLGF3YWl0IHRoaXMuaXNWYWxpZFBpbmcoZSk7Y29uc3R7dG9waWM6c309ZTtpZih0aGlzLmNsaWVudC5zZXNzaW9uLmtleXMuaW5jbHVkZXMocykpe2NvbnN0IHQ9YXdhaXQgdGhpcy5zZW5kUmVxdWVzdChzLFwid2Nfc2Vzc2lvblBpbmdcIix7fSkse2RvbmU6aSxyZXNvbHZlOm8scmVqZWN0OmF9PXYoKTt0aGlzLmV2ZW50cy5vbmNlKGwoXCJzZXNzaW9uX3BpbmdcIix0KSwoe2Vycm9yOnJ9KT0+e3I/YShyKTpvKCl9KSxhd2FpdCBpKCl9ZWxzZSB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcucGFpcmluZ3Mua2V5cy5pbmNsdWRlcyhzKSYmYXdhaXQgdGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBpbmcoe3RvcGljOnN9KX0sdGhpcy5lbWl0PWFzeW5jIGU9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKSxhd2FpdCB0aGlzLmlzVmFsaWRFbWl0KGUpO2NvbnN0e3RvcGljOnMsZXZlbnQ6dCxjaGFpbklkOml9PWU7YXdhaXQgdGhpcy5zZW5kUmVxdWVzdChzLFwid2Nfc2Vzc2lvbkV2ZW50XCIse2V2ZW50OnQsY2hhaW5JZDppfSl9LHRoaXMuZGlzY29ubmVjdD1hc3luYyBlPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkRGlzY29ubmVjdChlKTtjb25zdHt0b3BpYzpzfT1lO3RoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhzKT8oYXdhaXQgdGhpcy5zZW5kUmVxdWVzdChzLFwid2Nfc2Vzc2lvbkRlbGV0ZVwiLFIoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSksYXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uKHMpKTphd2FpdCB0aGlzLmNsaWVudC5jb3JlLnBhaXJpbmcuZGlzY29ubmVjdCh7dG9waWM6c30pfSx0aGlzLmZpbmQ9ZT0+KHRoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMuY2xpZW50LnNlc3Npb24uZ2V0QWxsKCkuZmlsdGVyKHM9PlNlKHMsZSkpKSx0aGlzLmdldFBlbmRpbmdTZXNzaW9uUmVxdWVzdHM9KCk9Pih0aGlzLmlzSW5pdGlhbGl6ZWQoKSx0aGlzLmNsaWVudC5wZW5kaW5nUmVxdWVzdC5nZXRBbGwoKSksdGhpcy5kZWxldGVTZXNzaW9uPWFzeW5jKGUscyk9Pntjb25zdHtzZWxmOnR9PXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KGUpO2F3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci51bnN1YnNjcmliZShlKSxhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5jbGllbnQuc2Vzc2lvbi5kZWxldGUoZSxSKFwiVVNFUl9ESVNDT05ORUNURURcIikpLHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmRlbGV0ZUtleVBhaXIodC5wdWJsaWNLZXkpLHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmRlbGV0ZVN5bUtleShlKSxzP1Byb21pc2UucmVzb2x2ZSgpOnRoaXMuY2xpZW50LmNvcmUuZXhwaXJlci5kZWwoZSldKX0sdGhpcy5kZWxldGVQcm9wb3NhbD1hc3luYyhlLHMpPT57YXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuY2xpZW50LnByb3Bvc2FsLmRlbGV0ZShlLFIoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSkscz9Qcm9taXNlLnJlc29sdmUoKTp0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuZGVsKGUpXSl9LHRoaXMuZGVsZXRlUGVuZGluZ1Nlc3Npb25SZXF1ZXN0PWFzeW5jKGUscyx0PSExKT0+e2F3YWl0IFByb21pc2UuYWxsKFt0aGlzLmNsaWVudC5wZW5kaW5nUmVxdWVzdC5kZWxldGUoZSxzKSx0P1Byb21pc2UucmVzb2x2ZSgpOnRoaXMuY2xpZW50LmNvcmUuZXhwaXJlci5kZWwoZSldKX0sdGhpcy5zZXRFeHBpcnk9YXN5bmMoZSxzKT0+e3RoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5pbmNsdWRlcyhlKSYmYXdhaXQgdGhpcy5jbGllbnQuc2Vzc2lvbi51cGRhdGUoZSx7ZXhwaXJ5OnN9KSx0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuc2V0KGUscyl9LHRoaXMuc2V0UHJvcG9zYWw9YXN5bmMoZSxzKT0+e2F3YWl0IHRoaXMuY2xpZW50LnByb3Bvc2FsLnNldChlLHMpLHRoaXMuY2xpZW50LmNvcmUuZXhwaXJlci5zZXQoZSxzLmV4cGlyeSl9LHRoaXMuc2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0PWFzeW5jIGU9Pntjb25zdCBzPVYud2Nfc2Vzc2lvblJlcXVlc3QucmVxLnR0bCx7aWQ6dCx0b3BpYzppLHBhcmFtczpvfT1lO2F3YWl0IHRoaXMuY2xpZW50LnBlbmRpbmdSZXF1ZXN0LnNldCh0LHtpZDp0LHRvcGljOmkscGFyYW1zOm99KSxzJiZ0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIuc2V0KHQsXyhzKSl9LHRoaXMuc2VuZFJlcXVlc3Q9YXN5bmMoZSxzLHQsaSk9Pntjb25zdCBvPUNlKHMsdCksYT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5lbmNvZGUoZSxvKSxyPVZbc10ucmVxO3JldHVybiBpJiYoci50dGw9aSksdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnNldChlLG8pLHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5wdWJsaXNoKGUsYSxyKSxvLmlkfSx0aGlzLnNlbmRSZXN1bHQ9YXN5bmMoZSxzLHQpPT57Y29uc3QgaT1HZShlLHQpLG89YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZW5jb2RlKHMsaSksYT1hd2FpdCB0aGlzLmNsaWVudC5jb3JlLmhpc3RvcnkuZ2V0KHMsZSkscj1WW2EucmVxdWVzdC5tZXRob2RdLnJlczt0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIucHVibGlzaChzLG8sciksYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnJlc29sdmUoaSl9LHRoaXMuc2VuZEVycm9yPWFzeW5jKGUscyx0KT0+e2NvbnN0IGk9JGUoZSx0KSxvPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmVuY29kZShzLGkpLGE9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LmdldChzLGUpLHI9VlthLnJlcXVlc3QubWV0aG9kXS5yZXM7dGhpcy5jbGllbnQuY29yZS5yZWxheWVyLnB1Ymxpc2gocyxvLHIpLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5yZXNvbHZlKGkpfSx0aGlzLmNsZWFudXA9YXN5bmMoKT0+e2NvbnN0IGU9W10scz1bXTt0aGlzLmNsaWVudC5zZXNzaW9uLmdldEFsbCgpLmZvckVhY2godD0+e2YodC5leHBpcnkpJiZlLnB1c2godC50b3BpYyl9KSx0aGlzLmNsaWVudC5wcm9wb3NhbC5nZXRBbGwoKS5mb3JFYWNoKHQ9PntmKHQuZXhwaXJ5KSYmcy5wdXNoKHQuaWQpfSksYXdhaXQgUHJvbWlzZS5hbGwoWy4uLmUubWFwKHQ9PnRoaXMuZGVsZXRlU2Vzc2lvbih0KSksLi4ucy5tYXAodD0+dGhpcy5kZWxldGVQcm9wb3NhbCh0KSldKX0sdGhpcy5vblJlbGF5RXZlbnRSZXF1ZXN0PWU9Pntjb25zdHt0b3BpYzpzLHBheWxvYWQ6dH09ZSxpPXQubWV0aG9kO3N3aXRjaChpKXtjYXNlXCJ3Y19zZXNzaW9uUHJvcG9zZVwiOnJldHVybiB0aGlzLm9uU2Vzc2lvblByb3Bvc2VSZXF1ZXN0KHMsdCk7Y2FzZVwid2Nfc2Vzc2lvblNldHRsZVwiOnJldHVybiB0aGlzLm9uU2Vzc2lvblNldHRsZVJlcXVlc3Qocyx0KTtjYXNlXCJ3Y19zZXNzaW9uVXBkYXRlXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uVXBkYXRlUmVxdWVzdChzLHQpO2Nhc2VcIndjX3Nlc3Npb25FeHRlbmRcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25FeHRlbmRSZXF1ZXN0KHMsdCk7Y2FzZVwid2Nfc2Vzc2lvblBpbmdcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25QaW5nUmVxdWVzdChzLHQpO2Nhc2VcIndjX3Nlc3Npb25EZWxldGVcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25EZWxldGVSZXF1ZXN0KHMsdCk7Y2FzZVwid2Nfc2Vzc2lvblJlcXVlc3RcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25SZXF1ZXN0KHMsdCk7Y2FzZVwid2Nfc2Vzc2lvbkV2ZW50XCI6cmV0dXJuIHRoaXMub25TZXNzaW9uRXZlbnRSZXF1ZXN0KHMsdCk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jbGllbnQubG9nZ2VyLmluZm8oYFVuc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kICR7aX1gKX19LHRoaXMub25SZWxheUV2ZW50UmVzcG9uc2U9YXN5bmMgZT0+e2NvbnN0e3RvcGljOnMscGF5bG9hZDp0fT1lLGk9KGF3YWl0IHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5nZXQocyx0LmlkKSkucmVxdWVzdC5tZXRob2Q7c3dpdGNoKGkpe2Nhc2VcIndjX3Nlc3Npb25Qcm9wb3NlXCI6cmV0dXJuIHRoaXMub25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlKHMsdCk7Y2FzZVwid2Nfc2Vzc2lvblNldHRsZVwiOnJldHVybiB0aGlzLm9uU2Vzc2lvblNldHRsZVJlc3BvbnNlKHMsdCk7Y2FzZVwid2Nfc2Vzc2lvblVwZGF0ZVwiOnJldHVybiB0aGlzLm9uU2Vzc2lvblVwZGF0ZVJlc3BvbnNlKHMsdCk7Y2FzZVwid2Nfc2Vzc2lvbkV4dGVuZFwiOnJldHVybiB0aGlzLm9uU2Vzc2lvbkV4dGVuZFJlc3BvbnNlKHMsdCk7Y2FzZVwid2Nfc2Vzc2lvblBpbmdcIjpyZXR1cm4gdGhpcy5vblNlc3Npb25QaW5nUmVzcG9uc2Uocyx0KTtjYXNlXCJ3Y19zZXNzaW9uUmVxdWVzdFwiOnJldHVybiB0aGlzLm9uU2Vzc2lvblJlcXVlc3RSZXNwb25zZShzLHQpO2RlZmF1bHQ6cmV0dXJuIHRoaXMuY2xpZW50LmxvZ2dlci5pbmZvKGBVbnN1cHBvcnRlZCByZXNwb25zZSBtZXRob2QgJHtpfWApfX0sdGhpcy5vblNlc3Npb25Qcm9wb3NlUmVxdWVzdD1hc3luYyhlLHMpPT57Y29uc3R7cGFyYW1zOnQsaWQ6aX09czt0cnl7dGhpcy5pc1ZhbGlkQ29ubmVjdCh1KHt9LHMucGFyYW1zKSk7Y29uc3Qgbz1fKHcpLGE9dSh7aWQ6aSxwYWlyaW5nVG9waWM6ZSxleHBpcnk6b30sdCk7YXdhaXQgdGhpcy5zZXRQcm9wb3NhbChpLGEpLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9wcm9wb3NhbFwiLHtpZDppLHBhcmFtczphfSl9Y2F0Y2gobyl7YXdhaXQgdGhpcy5zZW5kRXJyb3IoaSxlLG8pLHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihvKX19LHRoaXMub25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlPWFzeW5jKGUscyk9Pntjb25zdHtpZDp0fT1zO2lmKE4ocykpe2NvbnN0e3Jlc3VsdDppfT1zO3RoaXMuY2xpZW50LmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcIm9uU2Vzc2lvblByb3Bvc2VSZXNwb25zZVwiLHJlc3VsdDppfSk7Y29uc3Qgbz10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQodCk7dGhpcy5jbGllbnQubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwib25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlXCIscHJvcG9zYWw6b30pO2NvbnN0IGE9by5wcm9wb3Nlci5wdWJsaWNLZXk7dGhpcy5jbGllbnQubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwib25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlXCIsc2VsZlB1YmxpY0tleTphfSk7Y29uc3Qgcj1pLnJlc3BvbmRlclB1YmxpY0tleTt0aGlzLmNsaWVudC5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJvblNlc3Npb25Qcm9wb3NlUmVzcG9uc2VcIixwZWVyUHVibGljS2V5OnJ9KTtjb25zdCBwPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUuY3J5cHRvLmdlbmVyYXRlU2hhcmVkS2V5KGEscik7dGhpcy5jbGllbnQubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwib25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlXCIsc2Vzc2lvblRvcGljOnB9KTtjb25zdCBoPWF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmUocCk7dGhpcy5jbGllbnQubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwib25TZXNzaW9uUHJvcG9zZVJlc3BvbnNlXCIsc3Vic2NyaXB0aW9uSWQ6aH0pLGF3YWl0IHRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5hY3RpdmF0ZSh7dG9waWM6ZX0pfWVsc2UgcShzKSYmKGF3YWl0IHRoaXMuY2xpZW50LnByb3Bvc2FsLmRlbGV0ZSh0LFIoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSksdGhpcy5ldmVudHMuZW1pdChsKFwic2Vzc2lvbl9jb25uZWN0XCIpLHtlcnJvcjpzLmVycm9yfSkpfSx0aGlzLm9uU2Vzc2lvblNldHRsZVJlcXVlc3Q9YXN5bmMoZSxzKT0+e2NvbnN0e2lkOnQscGFyYW1zOml9PXM7dHJ5e3RoaXMuaXNWYWxpZFNlc3Npb25TZXR0bGVSZXF1ZXN0KGkpO2NvbnN0e3JlbGF5Om8sY29udHJvbGxlcjphLGV4cGlyeTpyLG5hbWVzcGFjZXM6cCxyZXF1aXJlZE5hbWVzcGFjZXM6aCxvcHRpb25hbE5hbWVzcGFjZXM6RSxzZXNzaW9uUHJvcGVydGllczptLHBhaXJpbmdUb3BpYzpQfT1zLnBhcmFtcyx5PXUoe3RvcGljOmUscmVsYXk6byxleHBpcnk6cixuYW1lc3BhY2VzOnAsYWNrbm93bGVkZ2VkOiEwLHBhaXJpbmdUb3BpYzpQLHJlcXVpcmVkTmFtZXNwYWNlczpoLG9wdGlvbmFsTmFtZXNwYWNlczpFLGNvbnRyb2xsZXI6YS5wdWJsaWNLZXksc2VsZjp7cHVibGljS2V5OlwiXCIsbWV0YWRhdGE6dGhpcy5jbGllbnQubWV0YWRhdGF9LHBlZXI6e3B1YmxpY0tleTphLnB1YmxpY0tleSxtZXRhZGF0YTphLm1ldGFkYXRhfX0sbSYme3Nlc3Npb25Qcm9wZXJ0aWVzOm19KTthd2FpdCB0aGlzLnNlbmRSZXN1bHQocy5pZCxlLCEwKSx0aGlzLmV2ZW50cy5lbWl0KGwoXCJzZXNzaW9uX2Nvbm5lY3RcIikse3Nlc3Npb246eX0pfWNhdGNoKG8pe2F3YWl0IHRoaXMuc2VuZEVycm9yKHQsZSxvKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3Iobyl9fSx0aGlzLm9uU2Vzc2lvblNldHRsZVJlc3BvbnNlPWFzeW5jKGUscyk9Pntjb25zdHtpZDp0fT1zO04ocyk/KGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKGUse2Fja25vd2xlZGdlZDohMH0pLHRoaXMuZXZlbnRzLmVtaXQobChcInNlc3Npb25fYXBwcm92ZVwiLHQpLHt9KSk6cShzKSYmKGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24uZGVsZXRlKGUsUihcIlVTRVJfRElTQ09OTkVDVEVEXCIpKSx0aGlzLmV2ZW50cy5lbWl0KGwoXCJzZXNzaW9uX2FwcHJvdmVcIix0KSx7ZXJyb3I6cy5lcnJvcn0pKX0sdGhpcy5vblNlc3Npb25VcGRhdGVSZXF1ZXN0PWFzeW5jKGUscyk9Pntjb25zdHtwYXJhbXM6dCxpZDppfT1zO3RyeXt0aGlzLmlzVmFsaWRVcGRhdGUodSh7dG9waWM6ZX0sdCkpLGF3YWl0IHRoaXMuY2xpZW50LnNlc3Npb24udXBkYXRlKGUse25hbWVzcGFjZXM6dC5uYW1lc3BhY2VzfSksYXdhaXQgdGhpcy5zZW5kUmVzdWx0KGksZSwhMCksdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX3VwZGF0ZVwiLHtpZDppLHRvcGljOmUscGFyYW1zOnR9KX1jYXRjaChvKXthd2FpdCB0aGlzLnNlbmRFcnJvcihpLGUsbyksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKG8pfX0sdGhpcy5vblNlc3Npb25VcGRhdGVSZXNwb25zZT0oZSxzKT0+e2NvbnN0e2lkOnR9PXM7TihzKT90aGlzLmV2ZW50cy5lbWl0KGwoXCJzZXNzaW9uX3VwZGF0ZVwiLHQpLHt9KTpxKHMpJiZ0aGlzLmV2ZW50cy5lbWl0KGwoXCJzZXNzaW9uX3VwZGF0ZVwiLHQpLHtlcnJvcjpzLmVycm9yfSl9LHRoaXMub25TZXNzaW9uRXh0ZW5kUmVxdWVzdD1hc3luYyhlLHMpPT57Y29uc3R7aWQ6dH09czt0cnl7dGhpcy5pc1ZhbGlkRXh0ZW5kKHt0b3BpYzplfSksYXdhaXQgdGhpcy5zZXRFeHBpcnkoZSxfKGIpKSxhd2FpdCB0aGlzLnNlbmRSZXN1bHQodCxlLCEwKSx0aGlzLmNsaWVudC5ldmVudHMuZW1pdChcInNlc3Npb25fZXh0ZW5kXCIse2lkOnQsdG9waWM6ZX0pfWNhdGNoKGkpe2F3YWl0IHRoaXMuc2VuZEVycm9yKHQsZSxpKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoaSl9fSx0aGlzLm9uU2Vzc2lvbkV4dGVuZFJlc3BvbnNlPShlLHMpPT57Y29uc3R7aWQ6dH09cztOKHMpP3RoaXMuZXZlbnRzLmVtaXQobChcInNlc3Npb25fZXh0ZW5kXCIsdCkse30pOnEocykmJnRoaXMuZXZlbnRzLmVtaXQobChcInNlc3Npb25fZXh0ZW5kXCIsdCkse2Vycm9yOnMuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25QaW5nUmVxdWVzdD1hc3luYyhlLHMpPT57Y29uc3R7aWQ6dH09czt0cnl7dGhpcy5pc1ZhbGlkUGluZyh7dG9waWM6ZX0pLGF3YWl0IHRoaXMuc2VuZFJlc3VsdCh0LGUsITApLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9waW5nXCIse2lkOnQsdG9waWM6ZX0pfWNhdGNoKGkpe2F3YWl0IHRoaXMuc2VuZEVycm9yKHQsZSxpKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3IoaSl9fSx0aGlzLm9uU2Vzc2lvblBpbmdSZXNwb25zZT0oZSxzKT0+e2NvbnN0e2lkOnR9PXM7c2V0VGltZW91dCgoKT0+e04ocyk/dGhpcy5ldmVudHMuZW1pdChsKFwic2Vzc2lvbl9waW5nXCIsdCkse30pOnEocykmJnRoaXMuZXZlbnRzLmVtaXQobChcInNlc3Npb25fcGluZ1wiLHQpLHtlcnJvcjpzLmVycm9yfSl9LDUwMCl9LHRoaXMub25TZXNzaW9uRGVsZXRlUmVxdWVzdD1hc3luYyhlLHMpPT57Y29uc3R7aWQ6dH09czt0cnl7dGhpcy5pc1ZhbGlkRGlzY29ubmVjdCh7dG9waWM6ZSxyZWFzb246cy5wYXJhbXN9KSx0aGlzLmNsaWVudC5jb3JlLnJlbGF5ZXIub25jZShGLnB1Ymxpc2gsYXN5bmMoKT0+e2F3YWl0IHRoaXMuZGVsZXRlU2Vzc2lvbihlKX0pLGF3YWl0IHRoaXMuc2VuZFJlc3VsdCh0LGUsITApLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9kZWxldGVcIix7aWQ6dCx0b3BpYzplfSl9Y2F0Y2goaSl7YXdhaXQgdGhpcy5zZW5kRXJyb3IodCxlLGkpLHRoaXMuY2xpZW50LmxvZ2dlci5lcnJvcihpKX19LHRoaXMub25TZXNzaW9uUmVxdWVzdD1hc3luYyhlLHMpPT57Y29uc3R7aWQ6dCxwYXJhbXM6aX09czt0cnl7dGhpcy5pc1ZhbGlkUmVxdWVzdCh1KHt0b3BpYzplfSxpKSksYXdhaXQgdGhpcy5zZXRQZW5kaW5nU2Vzc2lvblJlcXVlc3Qoe2lkOnQsdG9waWM6ZSxwYXJhbXM6aX0pLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9yZXF1ZXN0XCIse2lkOnQsdG9waWM6ZSxwYXJhbXM6aX0pfWNhdGNoKG8pe2F3YWl0IHRoaXMuc2VuZEVycm9yKHQsZSxvKSx0aGlzLmNsaWVudC5sb2dnZXIuZXJyb3Iobyl9fSx0aGlzLm9uU2Vzc2lvblJlcXVlc3RSZXNwb25zZT0oZSxzKT0+e2NvbnN0e2lkOnR9PXM7TihzKT90aGlzLmV2ZW50cy5lbWl0KGwoXCJzZXNzaW9uX3JlcXVlc3RcIix0KSx7cmVzdWx0OnMucmVzdWx0fSk6cShzKSYmdGhpcy5ldmVudHMuZW1pdChsKFwic2Vzc2lvbl9yZXF1ZXN0XCIsdCkse2Vycm9yOnMuZXJyb3J9KX0sdGhpcy5vblNlc3Npb25FdmVudFJlcXVlc3Q9YXN5bmMoZSxzKT0+e2NvbnN0e2lkOnQscGFyYW1zOml9PXM7dHJ5e3RoaXMuaXNWYWxpZEVtaXQodSh7dG9waWM6ZX0saSkpLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9ldmVudFwiLHtpZDp0LHRvcGljOmUscGFyYW1zOml9KX1jYXRjaChvKXthd2FpdCB0aGlzLnNlbmRFcnJvcih0LGUsbyksdGhpcy5jbGllbnQubG9nZ2VyLmVycm9yKG8pfX0sdGhpcy5pc1ZhbGlkQ29ubmVjdD1hc3luYyBlPT57aWYoIVMoZSkpe2NvbnN0e21lc3NhZ2U6cn09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBjb25uZWN0KCkgcGFyYW1zOiAke0pTT04uc3RyaW5naWZ5KGUpfWApO3Rocm93IG5ldyBFcnJvcihyKX1jb25zdHtwYWlyaW5nVG9waWM6cyxyZXF1aXJlZE5hbWVzcGFjZXM6dCxvcHRpb25hbE5hbWVzcGFjZXM6aSxzZXNzaW9uUHJvcGVydGllczpvLHJlbGF5czphfT1lO2lmKEQocyl8fGF3YWl0IHRoaXMuaXNWYWxpZFBhaXJpbmdUb3BpYyhzKSwhRWUoYSwhMCkpe2NvbnN0e21lc3NhZ2U6cn09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBjb25uZWN0KCkgcmVsYXlzOiAke2F9YCk7dGhyb3cgbmV3IEVycm9yKHIpfSFEKHQpJiZqKHQpIT09MCYmdGhpcy52YWxpZGF0ZU5hbWVzcGFjZXModCxcInJlcXVpcmVkTmFtZXNwYWNlc1wiKSwhRChpKSYmaihpKSE9PTAmJnRoaXMudmFsaWRhdGVOYW1lc3BhY2VzKGksXCJvcHRpb25hbE5hbWVzcGFjZXNcIiksRChvKXx8dGhpcy52YWxpZGF0ZVNlc3Npb25Qcm9wcyhvLFwic2Vzc2lvblByb3BlcnRpZXNcIil9LHRoaXMudmFsaWRhdGVOYW1lc3BhY2VzPShlLHMpPT57Y29uc3QgdD1JZShlLFwiY29ubmVjdCgpXCIscyk7aWYodCl0aHJvdyBuZXcgRXJyb3IodC5tZXNzYWdlKX0sdGhpcy5pc1ZhbGlkQXBwcm92ZT1hc3luYyBlPT57aWYoIVMoZSkpdGhyb3cgbmV3IEVycm9yKGMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgYXBwcm92ZSgpIHBhcmFtczogJHtlfWApLm1lc3NhZ2UpO2NvbnN0e2lkOnMsbmFtZXNwYWNlczp0LHJlbGF5UHJvdG9jb2w6aSxzZXNzaW9uUHJvcGVydGllczpvfT1lO2F3YWl0IHRoaXMuaXNWYWxpZFByb3Bvc2FsSWQocyk7Y29uc3QgYT10aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQocykscj1ZKHQsXCJhcHByb3ZlKClcIik7aWYocil0aHJvdyBuZXcgRXJyb3Ioci5tZXNzYWdlKTtjb25zdCBwPVEoYS5yZXF1aXJlZE5hbWVzcGFjZXMsdCxcImFwcHJvdmUoKVwiKTtpZihwKXRocm93IG5ldyBFcnJvcihwLm1lc3NhZ2UpO2lmKCFBKGksITApKXtjb25zdHttZXNzYWdlOmh9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgYXBwcm92ZSgpIHJlbGF5UHJvdG9jb2w6ICR7aX1gKTt0aHJvdyBuZXcgRXJyb3IoaCl9RChvKXx8dGhpcy52YWxpZGF0ZVNlc3Npb25Qcm9wcyhvLFwic2Vzc2lvblByb3BlcnRpZXNcIil9LHRoaXMuaXNWYWxpZFJlamVjdD1hc3luYyBlPT57aWYoIVMoZSkpe2NvbnN0e21lc3NhZ2U6aX09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZWplY3QoKSBwYXJhbXM6ICR7ZX1gKTt0aHJvdyBuZXcgRXJyb3IoaSl9Y29uc3R7aWQ6cyxyZWFzb246dH09ZTtpZihhd2FpdCB0aGlzLmlzVmFsaWRQcm9wb3NhbElkKHMpLCFfZSh0KSl7Y29uc3R7bWVzc2FnZTppfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlamVjdCgpIHJlYXNvbjogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3IoaSl9fSx0aGlzLmlzVmFsaWRTZXNzaW9uU2V0dGxlUmVxdWVzdD1lPT57aWYoIVMoZSkpe2NvbnN0e21lc3NhZ2U6cH09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBvblNlc3Npb25TZXR0bGVSZXF1ZXN0KCkgcGFyYW1zOiAke2V9YCk7dGhyb3cgbmV3IEVycm9yKHApfWNvbnN0e3JlbGF5OnMsY29udHJvbGxlcjp0LG5hbWVzcGFjZXM6aSxleHBpcnk6b309ZTtpZighUmUocykpe2NvbnN0e21lc3NhZ2U6cH09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLFwib25TZXNzaW9uU2V0dGxlUmVxdWVzdCgpIHJlbGF5IHByb3RvY29sIHNob3VsZCBiZSBhIHN0cmluZ1wiKTt0aHJvdyBuZXcgRXJyb3IocCl9Y29uc3QgYT1OZSh0LFwib25TZXNzaW9uU2V0dGxlUmVxdWVzdCgpXCIpO2lmKGEpdGhyb3cgbmV3IEVycm9yKGEubWVzc2FnZSk7Y29uc3Qgcj1ZKGksXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7aWYocil0aHJvdyBuZXcgRXJyb3Ioci5tZXNzYWdlKTtpZihmKG8pKXtjb25zdHttZXNzYWdlOnB9PWMoXCJFWFBJUkVEXCIsXCJvblNlc3Npb25TZXR0bGVSZXF1ZXN0KClcIik7dGhyb3cgbmV3IEVycm9yKHApfX0sdGhpcy5pc1ZhbGlkVXBkYXRlPWFzeW5jIGU9PntpZighUyhlKSl7Y29uc3R7bWVzc2FnZTpyfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHVwZGF0ZSgpIHBhcmFtczogJHtlfWApO3Rocm93IG5ldyBFcnJvcihyKX1jb25zdHt0b3BpYzpzLG5hbWVzcGFjZXM6dH09ZTthd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uVG9waWMocyk7Y29uc3QgaT10aGlzLmNsaWVudC5zZXNzaW9uLmdldChzKSxvPVkodCxcInVwZGF0ZSgpXCIpO2lmKG8pdGhyb3cgbmV3IEVycm9yKG8ubWVzc2FnZSk7Y29uc3QgYT1RKGkucmVxdWlyZWROYW1lc3BhY2VzLHQsXCJ1cGRhdGUoKVwiKTtpZihhKXRocm93IG5ldyBFcnJvcihhLm1lc3NhZ2UpfSx0aGlzLmlzVmFsaWRFeHRlbmQ9YXN5bmMgZT0+e2lmKCFTKGUpKXtjb25zdHttZXNzYWdlOnR9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZXh0ZW5kKCkgcGFyYW1zOiAke2V9YCk7dGhyb3cgbmV3IEVycm9yKHQpfWNvbnN0e3RvcGljOnN9PWU7YXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKHMpfSx0aGlzLmlzVmFsaWRSZXF1ZXN0PWFzeW5jIGU9PntpZighUyhlKSl7Y29uc3R7bWVzc2FnZTpyfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlcXVlc3QoKSBwYXJhbXM6ICR7ZX1gKTt0aHJvdyBuZXcgRXJyb3Iocil9Y29uc3R7dG9waWM6cyxyZXF1ZXN0OnQsY2hhaW5JZDppLGV4cGlyeTpvfT1lO2F3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhzKTtjb25zdHtuYW1lc3BhY2VzOmF9PXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KHMpO2lmKCFCKGEsaSkpe2NvbnN0e21lc3NhZ2U6cn09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgY2hhaW5JZDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihyKX1pZighcWUodCkpe2NvbnN0e21lc3NhZ2U6cn09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3Iocil9aWYoIVBlKGEsaSx0Lm1ldGhvZCkpe2NvbnN0e21lc3NhZ2U6cn09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGByZXF1ZXN0KCkgbWV0aG9kOiAke3QubWV0aG9kfWApO3Rocm93IG5ldyBFcnJvcihyKX1pZihvJiYhdmUobywkKSl7Y29uc3R7bWVzc2FnZTpyfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlcXVlc3QoKSBleHBpcnk6ICR7b30uIEV4cGlyeSBtdXN0IGJlIGEgbnVtYmVyIChpbiBzZWNvbmRzKSBiZXR3ZWVuICR7JC5taW59IGFuZCAkeyQubWF4fWApO3Rocm93IG5ldyBFcnJvcihyKX19LHRoaXMuaXNWYWxpZFJlc3BvbmQ9YXN5bmMgZT0+e2lmKCFTKGUpKXtjb25zdHttZXNzYWdlOml9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcmVzcG9uZCgpIHBhcmFtczogJHtlfWApO3Rocm93IG5ldyBFcnJvcihpKX1jb25zdHt0b3BpYzpzLHJlc3BvbnNlOnR9PWU7aWYoYXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKHMpLCFmZSh0KSl7Y29uc3R7bWVzc2FnZTppfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHJlc3BvbmQoKSByZXNwb25zZTogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3IoaSl9fSx0aGlzLmlzVmFsaWRQaW5nPWFzeW5jIGU9PntpZighUyhlKSl7Y29uc3R7bWVzc2FnZTp0fT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHBpbmcoKSBwYXJhbXM6ICR7ZX1gKTt0aHJvdyBuZXcgRXJyb3IodCl9Y29uc3R7dG9waWM6c309ZTthd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uT3JQYWlyaW5nVG9waWMocyl9LHRoaXMuaXNWYWxpZEVtaXQ9YXN5bmMgZT0+e2lmKCFTKGUpKXtjb25zdHttZXNzYWdlOmF9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgZW1pdCgpIHBhcmFtczogJHtlfWApO3Rocm93IG5ldyBFcnJvcihhKX1jb25zdHt0b3BpYzpzLGV2ZW50OnQsY2hhaW5JZDppfT1lO2F3YWl0IHRoaXMuaXNWYWxpZFNlc3Npb25Ub3BpYyhzKTtjb25zdHtuYW1lc3BhY2VzOm99PXRoaXMuY2xpZW50LnNlc3Npb24uZ2V0KHMpO2lmKCFCKG8saSkpe2NvbnN0e21lc3NhZ2U6YX09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBlbWl0KCkgY2hhaW5JZDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihhKX1pZighT2UodCkpe2NvbnN0e21lc3NhZ2U6YX09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBlbWl0KCkgZXZlbnQ6ICR7SlNPTi5zdHJpbmdpZnkodCl9YCk7dGhyb3cgbmV3IEVycm9yKGEpfWlmKCFWZShvLGksdC5uYW1lKSl7Y29uc3R7bWVzc2FnZTphfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGVtaXQoKSBldmVudDogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3IoYSl9fSx0aGlzLmlzVmFsaWREaXNjb25uZWN0PWFzeW5jIGU9PntpZighUyhlKSl7Y29uc3R7bWVzc2FnZTp0fT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGRpc2Nvbm5lY3QoKSBwYXJhbXM6ICR7ZX1gKTt0aHJvdyBuZXcgRXJyb3IodCl9Y29uc3R7dG9waWM6c309ZTthd2FpdCB0aGlzLmlzVmFsaWRTZXNzaW9uT3JQYWlyaW5nVG9waWMocyl9LHRoaXMudmFsaWRhdGVTZXNzaW9uUHJvcHM9KGUscyk9PntPYmplY3QudmFsdWVzKGUpLmZvckVhY2godD0+e2lmKCFBKHQsITEpKXtjb25zdHttZXNzYWdlOml9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgJHtzfSBtdXN0IGJlIGluIFJlY29yZDxzdHJpbmcsIHN0cmluZz4gZm9ybWF0LiBSZWNlaXZlZDogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTt0aHJvdyBuZXcgRXJyb3IoaSl9fSl9fWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTpufT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3Iobil9fXJlZ2lzdGVyUmVsYXllckV2ZW50cygpe3RoaXMuY2xpZW50LmNvcmUucmVsYXllci5vbihGLm1lc3NhZ2UsYXN5bmMgbj0+e2NvbnN0e3RvcGljOmUsbWVzc2FnZTpzfT1uO2lmKHRoaXMuaWdub3JlZFBheWxvYWRUeXBlcy5pbmNsdWRlcyh0aGlzLmNsaWVudC5jb3JlLmNyeXB0by5nZXRQYXlsb2FkVHlwZShzKSkpcmV0dXJuO2NvbnN0IHQ9YXdhaXQgdGhpcy5jbGllbnQuY29yZS5jcnlwdG8uZGVjb2RlKGUscyk7TWUodCk/KHRoaXMuY2xpZW50LmNvcmUuaGlzdG9yeS5zZXQoZSx0KSx0aGlzLm9uUmVsYXlFdmVudFJlcXVlc3Qoe3RvcGljOmUscGF5bG9hZDp0fSkpOlVlKHQpJiYoYXdhaXQgdGhpcy5jbGllbnQuY29yZS5oaXN0b3J5LnJlc29sdmUodCksdGhpcy5vblJlbGF5RXZlbnRSZXNwb25zZSh7dG9waWM6ZSxwYXlsb2FkOnR9KSl9KX1yZWdpc3RlckV4cGlyZXJFdmVudHMoKXt0aGlzLmNsaWVudC5jb3JlLmV4cGlyZXIub24ocGUuZXhwaXJlZCxhc3luYyBuPT57Y29uc3R7dG9waWM6ZSxpZDpzfT1UZShuLnRhcmdldCk7aWYocyYmdGhpcy5jbGllbnQucGVuZGluZ1JlcXVlc3Qua2V5cy5pbmNsdWRlcyhzKSlyZXR1cm4gYXdhaXQgdGhpcy5kZWxldGVQZW5kaW5nU2Vzc2lvblJlcXVlc3QocyxjKFwiRVhQSVJFRFwiKSwhMCk7ZT90aGlzLmNsaWVudC5zZXNzaW9uLmtleXMuaW5jbHVkZXMoZSkmJihhd2FpdCB0aGlzLmRlbGV0ZVNlc3Npb24oZSwhMCksdGhpcy5jbGllbnQuZXZlbnRzLmVtaXQoXCJzZXNzaW9uX2V4cGlyZVwiLHt0b3BpYzplfSkpOnMmJihhd2FpdCB0aGlzLmRlbGV0ZVByb3Bvc2FsKHMsITApLHRoaXMuY2xpZW50LmV2ZW50cy5lbWl0KFwicHJvcG9zYWxfZXhwaXJlXCIse2lkOnN9KSl9KX1pc1ZhbGlkUGFpcmluZ1RvcGljKG4pe2lmKCFBKG4sITEpKXtjb25zdHttZXNzYWdlOmV9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcGFpcmluZyB0b3BpYyBzaG91bGQgYmUgYSBzdHJpbmc6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IoZSl9aWYoIXRoaXMuY2xpZW50LmNvcmUucGFpcmluZy5wYWlyaW5ncy5rZXlzLmluY2x1ZGVzKG4pKXtjb25zdHttZXNzYWdlOmV9PWMoXCJOT19NQVRDSElOR19LRVlcIixgcGFpcmluZyB0b3BpYyBkb2Vzbid0IGV4aXN0OiAke259YCk7dGhyb3cgbmV3IEVycm9yKGUpfWlmKGYodGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmdldChuKS5leHBpcnkpKXtjb25zdHttZXNzYWdlOmV9PWMoXCJFWFBJUkVEXCIsYHBhaXJpbmcgdG9waWM6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IoZSl9fWFzeW5jIGlzVmFsaWRTZXNzaW9uVG9waWMobil7aWYoIUEobiwhMSkpe2NvbnN0e21lc3NhZ2U6ZX09YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBzZXNzaW9uIHRvcGljIHNob3VsZCBiZSBhIHN0cmluZzogJHtufWApO3Rocm93IG5ldyBFcnJvcihlKX1pZighdGhpcy5jbGllbnQuc2Vzc2lvbi5rZXlzLmluY2x1ZGVzKG4pKXtjb25zdHttZXNzYWdlOmV9PWMoXCJOT19NQVRDSElOR19LRVlcIixgc2Vzc2lvbiB0b3BpYyBkb2Vzbid0IGV4aXN0OiAke259YCk7dGhyb3cgbmV3IEVycm9yKGUpfWlmKGYodGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQobikuZXhwaXJ5KSl7YXdhaXQgdGhpcy5kZWxldGVTZXNzaW9uKG4pO2NvbnN0e21lc3NhZ2U6ZX09YyhcIkVYUElSRURcIixgc2Vzc2lvbiB0b3BpYzogJHtufWApO3Rocm93IG5ldyBFcnJvcihlKX19YXN5bmMgaXNWYWxpZFNlc3Npb25PclBhaXJpbmdUb3BpYyhuKXtpZih0aGlzLmNsaWVudC5zZXNzaW9uLmtleXMuaW5jbHVkZXMobikpYXdhaXQgdGhpcy5pc1ZhbGlkU2Vzc2lvblRvcGljKG4pO2Vsc2UgaWYodGhpcy5jbGllbnQuY29yZS5wYWlyaW5nLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMobikpdGhpcy5pc1ZhbGlkUGFpcmluZ1RvcGljKG4pO2Vsc2UgaWYoQShuLCExKSl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYHNlc3Npb24gb3IgcGFpcmluZyB0b3BpYyBkb2Vzbid0IGV4aXN0OiAke259YCk7dGhyb3cgbmV3IEVycm9yKGUpfWVsc2V7Y29uc3R7bWVzc2FnZTplfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHNlc3Npb24gb3IgcGFpcmluZyB0b3BpYyBzaG91bGQgYmUgYSBzdHJpbmc6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IoZSl9fWFzeW5jIGlzVmFsaWRQcm9wb3NhbElkKG4pe2lmKCF4ZShuKSl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHByb3Bvc2FsIGlkIHNob3VsZCBiZSBhIG51bWJlcjogJHtufWApO3Rocm93IG5ldyBFcnJvcihlKX1pZighdGhpcy5jbGllbnQucHJvcG9zYWwua2V5cy5pbmNsdWRlcyhuKSl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYHByb3Bvc2FsIGlkIGRvZXNuJ3QgZXhpc3Q6ICR7bn1gKTt0aHJvdyBuZXcgRXJyb3IoZSl9aWYoZih0aGlzLmNsaWVudC5wcm9wb3NhbC5nZXQobikuZXhwaXJ5KSl7YXdhaXQgdGhpcy5kZWxldGVQcm9wb3NhbChuKTtjb25zdHttZXNzYWdlOmV9PWMoXCJFWFBJUkVEXCIsYHByb3Bvc2FsIGlkOiAke259YCk7dGhyb3cgbmV3IEVycm9yKGUpfX19Y2xhc3MgWmUgZXh0ZW5kcyB6e2NvbnN0cnVjdG9yKG4sZSl7c3VwZXIobixlLGVlLEMpLHRoaXMuY29yZT1uLHRoaXMubG9nZ2VyPWV9fWNsYXNzIGVzIGV4dGVuZHMgentjb25zdHJ1Y3RvcihuLGUpe3N1cGVyKG4sZSx0ZSxDKSx0aGlzLmNvcmU9bix0aGlzLmxvZ2dlcj1lfX1jbGFzcyBzcyBleHRlbmRzIHp7Y29uc3RydWN0b3IobixlKXtzdXBlcihuLGUsbmUsQyxzPT5zLmlkKSx0aGlzLmNvcmU9bix0aGlzLmxvZ2dlcj1lfX1jbGFzcyBNIGV4dGVuZHMgd2V7Y29uc3RydWN0b3Iobil7c3VwZXIobiksdGhpcy5wcm90b2NvbD1rLHRoaXMudmVyc2lvbj1YLHRoaXMubmFtZT1HLm5hbWUsdGhpcy5ldmVudHM9bmV3IGJlLHRoaXMub249KHMsdCk9PnRoaXMuZXZlbnRzLm9uKHMsdCksdGhpcy5vbmNlPShzLHQpPT50aGlzLmV2ZW50cy5vbmNlKHMsdCksdGhpcy5vZmY9KHMsdCk9PnRoaXMuZXZlbnRzLm9mZihzLHQpLHRoaXMucmVtb3ZlTGlzdGVuZXI9KHMsdCk9PnRoaXMuZXZlbnRzLnJlbW92ZUxpc3RlbmVyKHMsdCksdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnM9cz0+dGhpcy5ldmVudHMucmVtb3ZlQWxsTGlzdGVuZXJzKHMpLHRoaXMuY29ubmVjdD1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5jb25uZWN0KHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMucGFpcj1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5wYWlyKHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMuYXBwcm92ZT1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5hcHByb3ZlKHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMucmVqZWN0PWFzeW5jIHM9Pnt0cnl7cmV0dXJuIGF3YWl0IHRoaXMuZW5naW5lLnJlamVjdChzKX1jYXRjaCh0KXt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0Lm1lc3NhZ2UpLHR9fSx0aGlzLnVwZGF0ZT1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS51cGRhdGUocyl9Y2F0Y2godCl7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IodC5tZXNzYWdlKSx0fX0sdGhpcy5leHRlbmQ9YXN5bmMgcz0+e3RyeXtyZXR1cm4gYXdhaXQgdGhpcy5lbmdpbmUuZXh0ZW5kKHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMucmVxdWVzdD1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5yZXF1ZXN0KHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMucmVzcG9uZD1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5yZXNwb25kKHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMucGluZz1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5waW5nKHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMuZW1pdD1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5lbWl0KHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMuZGlzY29ubmVjdD1hc3luYyBzPT57dHJ5e3JldHVybiBhd2FpdCB0aGlzLmVuZ2luZS5kaXNjb25uZWN0KHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMuZmluZD1zPT57dHJ5e3JldHVybiB0aGlzLmVuZ2luZS5maW5kKHMpfWNhdGNoKHQpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHQubWVzc2FnZSksdH19LHRoaXMuZ2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0cz0oKT0+e3RyeXtyZXR1cm4gdGhpcy5lbmdpbmUuZ2V0UGVuZGluZ1Nlc3Npb25SZXF1ZXN0cygpfWNhdGNoKHMpe3Rocm93IHRoaXMubG9nZ2VyLmVycm9yKHMubWVzc2FnZSksc319LHRoaXMubmFtZT1uPy5uYW1lfHxHLm5hbWUsdGhpcy5tZXRhZGF0YT1uPy5tZXRhZGF0YXx8RGUoKTtjb25zdCBlPXR5cGVvZiBuPy5sb2dnZXI8XCJ1XCImJnR5cGVvZiBuPy5sb2dnZXIhPVwic3RyaW5nXCI/bi5sb2dnZXI6YWUoaGUoe2xldmVsOm4/LmxvZ2dlcnx8Ry5sb2dnZXJ9KSk7dGhpcy5jb3JlPW4/LmNvcmV8fG5ldyBsZShuKSx0aGlzLmxvZ2dlcj1kZShlLHRoaXMubmFtZSksdGhpcy5zZXNzaW9uPW5ldyBlcyh0aGlzLmNvcmUsdGhpcy5sb2dnZXIpLHRoaXMucHJvcG9zYWw9bmV3IFplKHRoaXMuY29yZSx0aGlzLmxvZ2dlciksdGhpcy5wZW5kaW5nUmVxdWVzdD1uZXcgc3ModGhpcy5jb3JlLHRoaXMubG9nZ2VyKSx0aGlzLmVuZ2luZT1uZXcgV2UodGhpcyl9c3RhdGljIGFzeW5jIGluaXQobil7Y29uc3QgZT1uZXcgTShuKTtyZXR1cm4gYXdhaXQgZS5pbml0aWFsaXplKCksZX1nZXQgY29udGV4dCgpe3JldHVybiBnZSh0aGlzLmxvZ2dlcil9Z2V0IHBhaXJpbmcoKXtyZXR1cm4gdGhpcy5jb3JlLnBhaXJpbmcucGFpcmluZ3N9YXN5bmMgaW5pdGlhbGl6ZSgpe3RoaXMubG9nZ2VyLnRyYWNlKFwiSW5pdGlhbGl6ZWRcIik7dHJ5e2F3YWl0IHRoaXMuY29yZS5zdGFydCgpLGF3YWl0IHRoaXMuc2Vzc2lvbi5pbml0KCksYXdhaXQgdGhpcy5wcm9wb3NhbC5pbml0KCksYXdhaXQgdGhpcy5wZW5kaW5nUmVxdWVzdC5pbml0KCksYXdhaXQgdGhpcy5lbmdpbmUuaW5pdCgpLHRoaXMubG9nZ2VyLmluZm8oXCJTaWduQ2xpZW50IEluaXRpYWxpemF0aW9uIFN1Y2Nlc3NcIil9Y2F0Y2gobil7dGhyb3cgdGhpcy5sb2dnZXIuaW5mbyhcIlNpZ25DbGllbnQgSW5pdGlhbGl6YXRpb24gRmFpbHVyZVwiKSx0aGlzLmxvZ2dlci5lcnJvcihuLm1lc3NhZ2UpLG59fX1jb25zdCB0cz1NO2V4cG9ydHtpZSBhcyBFTkdJTkVfQ09OVEVYVCxWIGFzIEVOR0lORV9SUENfT1BUUyxZZSBhcyBISVNUT1JZX0NPTlRFWFQsamUgYXMgSElTVE9SWV9FVkVOVFMsa2UgYXMgSElTVE9SWV9TVE9SQUdFX1ZFUlNJT04sZWUgYXMgUFJPUE9TQUxfQ09OVEVYVCxYZSBhcyBQUk9QT1NBTF9FWFBJUlksc2UgYXMgUFJPUE9TQUxfRVhQSVJZX01FU1NBR0UsbmUgYXMgUkVRVUVTVF9DT05URVhULHRlIGFzIFNFU1NJT05fQ09OVEVYVCxiIGFzIFNFU1NJT05fRVhQSVJZLCQgYXMgU0VTU0lPTl9SRVFVRVNUX0VYUElSWV9CT1VOREFSSUVTLEogYXMgU0lHTl9DTElFTlRfQ09OVEVYVCxHIGFzIFNJR05fQ0xJRU5UX0RFRkFVTFQsS2UgYXMgU0lHTl9DTElFTlRfRVZFTlRTLGsgYXMgU0lHTl9DTElFTlRfUFJPVE9DT0wsemUgYXMgU0lHTl9DTElFTlRfU1RPUkFHRV9PUFRJT05TLEMgYXMgU0lHTl9DTElFTlRfU1RPUkFHRV9QUkVGSVgsWCBhcyBTSUdOX0NMSUVOVF9WRVJTSU9OLHRzIGFzIFNpZ25DbGllbnQsTSBhcyBkZWZhdWx0fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzLmpzLm1hcFxuIiwiaW1wb3J0IEF0LHtFdmVudEVtaXR0ZXIgYXMgQX1mcm9tXCJldmVudHNcIjtpbXBvcnQgdWUgZnJvbVwicGlub1wiO2ltcG9ydCB6dCBmcm9tXCJAd2FsbGV0Y29ubmVjdC9rZXl2YWx1ZXN0b3JhZ2VcIjtpbXBvcnR7SEVBUlRCRUFUX0VWRU5UUyBhcyBILEhlYXJ0QmVhdCBhcyBOdH1mcm9tXCJAd2FsbGV0Y29ubmVjdC9oZWFydGJlYXRcIjtpbXBvcnR7Z2VuZXJhdGVDaGlsZExvZ2dlciBhcyB3LGdldExvZ2dlckNvbnRleHQgYXMgdixnZXREZWZhdWx0TG9nZ2VyT3B0aW9ucyBhcyBsZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC9sb2dnZXJcIjtpbXBvcnR7SU1lc3NhZ2VUcmFja2VyIGFzIFV0LElQdWJsaXNoZXIgYXMgTHQsSVN1YnNjcmliZXIgYXMgRnQsSVJlbGF5ZXIgYXMgTXQsSVN0b3JlIGFzICR0LElKc29uUnBjSGlzdG9yeSBhcyBLdCxJRXhwaXJlciBhcyBrdCxJQ29yZSBhcyBCdH1mcm9tXCJAd2FsbGV0Y29ubmVjdC90eXBlc1wiO2ltcG9ydHtzYWZlSnNvblN0cmluZ2lmeSBhcyBqdCxzYWZlSnNvblBhcnNlIGFzIFZ0fWZyb21cIkB3YWxsZXRjb25uZWN0L3NhZmUtanNvblwiO2ltcG9ydCphcyBrIGZyb21cIkB3YWxsZXRjb25uZWN0L3JlbGF5LWF1dGhcIjtpbXBvcnR7Z2V0SW50ZXJuYWxFcnJvciBhcyBjLG1hcFRvT2JqIGFzIGRlLG9ialRvTWFwIGFzIGdlLGdlbmVyYXRlS2V5UGFpciBhcyBxdCxnZW5lcmF0ZVJhbmRvbUJ5dGVzMzIgYXMgWCxkZXJpdmVTeW1LZXkgYXMgR3QsaGFzaEtleSBhcyBZdCx2YWxpZGF0ZUVuY29kaW5nIGFzIEp0LGlzVHlwZU9uZUVudmVsb3BlIGFzIHBlLGVuY3J5cHQgYXMgSHQsdmFsaWRhdGVEZWNvZGluZyBhcyBYdCxkZWNyeXB0IGFzIFd0LGRlc2VyaWFsaXplIGFzIERlLGRlY29kZVR5cGVCeXRlIGFzIFp0LEJBU0UxNiBhcyBRdCxoYXNoTWVzc2FnZSBhcyBCLGdldFJlbGF5UHJvdG9jb2xOYW1lIGFzIFcsY3JlYXRlRXhwaXJpbmdQcm9taXNlIGFzIGosZ2V0UmVsYXlQcm90b2NvbEFwaSBhcyBWLGlzVW5kZWZpbmVkIGFzIFosZ2V0U2RrRXJyb3IgYXMgTCxpc1ZhbGlkQXJyYXkgYXMgZWksZm9ybWF0UmVsYXlScGNVcmwgYXMgdGksaXNQcm9wb3NhbFN0cnVjdCBhcyBpaSxpc1Nlc3Npb25TdHJ1Y3QgYXMgc2ksVFlQRV8xIGFzIHJpLGNhbGNFeHBpcnkgYXMgUSxmb3JtYXRVcmkgYXMgbmkscGFyc2VVcmkgYXMgYWksY3JlYXRlRGVsYXllZFByb21pc2UgYXMgb2ksZW5naW5lRXZlbnQgYXMgZWUsaXNFeHBpcmVkIGFzIHllLGlzVmFsaWRQYXJhbXMgYXMgdGUsaXNWYWxpZFVybCBhcyBoaSxpc1ZhbGlkU3RyaW5nIGFzIGNpLHBhcnNlRXhwaXJlclRhcmdldCBhcyB1aSxmb3JtYXRUb3BpY1RhcmdldCBhcyBsaSxmb3JtYXRJZFRhcmdldCBhcyBkaX1mcm9tXCJAd2FsbGV0Y29ubmVjdC91dGlsc1wiO2ltcG9ydHt0b1N0cmluZyBhcyBnaX1mcm9tXCJ1aW50OGFycmF5c1wiO2ltcG9ydHtPTkVfREFZIGFzIHosU0lYX0hPVVJTIGFzIHBpLE9ORV9TRUNPTkQgYXMgRGksVEhJUlRZX0RBWVMgYXMgaWUsRklWRV9TRUNPTkRTIGFzIHlpLFRISVJUWV9TRUNPTkRTIGFzIGJlLFdhdGNoIGFzIGJpLHRvTWlsaXNlY29uZHMgYXMgbWUsRklWRV9NSU5VVEVTIGFzIEVlfWZyb21cIkB3YWxsZXRjb25uZWN0L3RpbWVcIjtpbXBvcnR7SnNvblJwY1Byb3ZpZGVyIGFzIG1pfWZyb21cIkB3YWxsZXRjb25uZWN0L2pzb25ycGMtcHJvdmlkZXJcIjtpbXBvcnR7aXNKc29uUnBjUmVxdWVzdCBhcyBmZSxmb3JtYXRKc29uUnBjUmVzdWx0IGFzIHdlLGZvcm1hdEpzb25ScGNSZXF1ZXN0IGFzIHZlLGZvcm1hdEpzb25ScGNFcnJvciBhcyBFaSxpc0pzb25ScGNSZXN1bHQgYXMgZmksaXNKc29uUnBjRXJyb3IgYXMgSWUsaXNKc29uUnBjUmVzcG9uc2UgYXMgd2l9ZnJvbVwiQHdhbGxldGNvbm5lY3QvanNvbnJwYy11dGlsc1wiO2ltcG9ydCB2aSBmcm9tXCJAd2FsbGV0Y29ubmVjdC9qc29ucnBjLXdzLWNvbm5lY3Rpb25cIjtpbXBvcnQgSWkgZnJvbVwibG9kYXNoLmlzZXF1YWxcIjtmdW5jdGlvbiBDaShyLGUpe2lmKHIubGVuZ3RoPj0yNTUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFscGhhYmV0IHRvbyBsb25nXCIpO2Zvcih2YXIgdD1uZXcgVWludDhBcnJheSgyNTYpLGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldPTI1NTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl7dmFyIG49ci5jaGFyQXQocyksYT1uLmNoYXJDb2RlQXQoMCk7aWYodFthXSE9PTI1NSl0aHJvdyBuZXcgVHlwZUVycm9yKG4rXCIgaXMgYW1iaWd1b3VzXCIpO3RbYV09c312YXIgbz1yLmxlbmd0aCxoPXIuY2hhckF0KDApLGQ9TWF0aC5sb2cobykvTWF0aC5sb2coMjU2KSxsPU1hdGgubG9nKDI1NikvTWF0aC5sb2cobyk7ZnVuY3Rpb24gZyh1KXtpZih1IGluc3RhbmNlb2YgVWludDhBcnJheXx8KEFycmF5QnVmZmVyLmlzVmlldyh1KT91PW5ldyBVaW50OEFycmF5KHUuYnVmZmVyLHUuYnl0ZU9mZnNldCx1LmJ5dGVMZW5ndGgpOkFycmF5LmlzQXJyYXkodSkmJih1PVVpbnQ4QXJyYXkuZnJvbSh1KSkpLCEodSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBVaW50OEFycmF5XCIpO2lmKHUubGVuZ3RoPT09MClyZXR1cm5cIlwiO2Zvcih2YXIgeT0wLE89MCxFPTAsXz11Lmxlbmd0aDtFIT09XyYmdVtFXT09PTA7KUUrKyx5Kys7Zm9yKHZhciBSPShfLUUpKmwrMT4+PjAsYj1uZXcgVWludDhBcnJheShSKTtFIT09Xzspe2Zvcih2YXIgUz11W0VdLHg9MCxmPVItMTsoUyE9PTB8fHg8TykmJmYhPT0tMTtmLS0seCsrKVMrPTI1NipiW2ZdPj4+MCxiW2ZdPVMlbz4+PjAsUz1TL28+Pj4wO2lmKFMhPT0wKXRocm93IG5ldyBFcnJvcihcIk5vbi16ZXJvIGNhcnJ5XCIpO089eCxFKyt9Zm9yKHZhciBQPVItTztQIT09UiYmYltQXT09PTA7KVArKztmb3IodmFyIEs9aC5yZXBlYXQoeSk7UDxSOysrUClLKz1yLmNoYXJBdChiW1BdKTtyZXR1cm4gS31mdW5jdGlvbiBVKHUpe2lmKHR5cGVvZiB1IT1cInN0cmluZ1wiKXRocm93IG5ldyBUeXBlRXJyb3IoXCJFeHBlY3RlZCBTdHJpbmdcIik7aWYodS5sZW5ndGg9PT0wKXJldHVybiBuZXcgVWludDhBcnJheTt2YXIgeT0wO2lmKHVbeV0hPT1cIiBcIil7Zm9yKHZhciBPPTAsRT0wO3VbeV09PT1oOylPKysseSsrO2Zvcih2YXIgXz0odS5sZW5ndGgteSkqZCsxPj4+MCxSPW5ldyBVaW50OEFycmF5KF8pO3VbeV07KXt2YXIgYj10W3UuY2hhckNvZGVBdCh5KV07aWYoYj09PTI1NSlyZXR1cm47Zm9yKHZhciBTPTAseD1fLTE7KGIhPT0wfHxTPEUpJiZ4IT09LTE7eC0tLFMrKyliKz1vKlJbeF0+Pj4wLFJbeF09YiUyNTY+Pj4wLGI9Yi8yNTY+Pj4wO2lmKGIhPT0wKXRocm93IG5ldyBFcnJvcihcIk5vbi16ZXJvIGNhcnJ5XCIpO0U9Uyx5Kyt9aWYodVt5XSE9PVwiIFwiKXtmb3IodmFyIGY9Xy1FO2YhPT1fJiZSW2ZdPT09MDspZisrO2Zvcih2YXIgUD1uZXcgVWludDhBcnJheShPKyhfLWYpKSxLPU87ZiE9PV87KVBbSysrXT1SW2YrK107cmV0dXJuIFB9fX1mdW5jdGlvbiBKKHUpe3ZhciB5PVUodSk7aWYoeSlyZXR1cm4geTt0aHJvdyBuZXcgRXJyb3IoYE5vbi0ke2V9IGNoYXJhY3RlcmApfXJldHVybntlbmNvZGU6ZyxkZWNvZGVVbnNhZmU6VSxkZWNvZGU6Sn19dmFyIF9pPUNpLFJpPV9pO2NvbnN0IENlPXI9PntpZihyIGluc3RhbmNlb2YgVWludDhBcnJheSYmci5jb25zdHJ1Y3Rvci5uYW1lPT09XCJVaW50OEFycmF5XCIpcmV0dXJuIHI7aWYociBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXJldHVybiBuZXcgVWludDhBcnJheShyKTtpZihBcnJheUJ1ZmZlci5pc1ZpZXcocikpcmV0dXJuIG5ldyBVaW50OEFycmF5KHIuYnVmZmVyLHIuYnl0ZU9mZnNldCxyLmJ5dGVMZW5ndGgpO3Rocm93IG5ldyBFcnJvcihcIlVua25vd24gdHlwZSwgbXVzdCBiZSBiaW5hcnkgdHlwZVwiKX0sU2k9cj0+bmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHIpLFBpPXI9Pm5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShyKTtjbGFzcyBUaXtjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5uYW1lPWUsdGhpcy5wcmVmaXg9dCx0aGlzLmJhc2VFbmNvZGU9aX1lbmNvZGUoZSl7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuYCR7dGhpcy5wcmVmaXh9JHt0aGlzLmJhc2VFbmNvZGUoZSl9YDt0aHJvdyBFcnJvcihcIlVua25vd24gdHlwZSwgbXVzdCBiZSBiaW5hcnkgdHlwZVwiKX19Y2xhc3MgeGl7Y29uc3RydWN0b3IoZSx0LGkpe2lmKHRoaXMubmFtZT1lLHRoaXMucHJlZml4PXQsdC5jb2RlUG9pbnRBdCgwKT09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHByZWZpeCBjaGFyYWN0ZXJcIik7dGhpcy5wcmVmaXhDb2RlUG9pbnQ9dC5jb2RlUG9pbnRBdCgwKSx0aGlzLmJhc2VEZWNvZGU9aX1kZWNvZGUoZSl7aWYodHlwZW9mIGU9PVwic3RyaW5nXCIpe2lmKGUuY29kZVBvaW50QXQoMCkhPT10aGlzLnByZWZpeENvZGVQb2ludCl0aHJvdyBFcnJvcihgVW5hYmxlIHRvIGRlY29kZSBtdWx0aWJhc2Ugc3RyaW5nICR7SlNPTi5zdHJpbmdpZnkoZSl9LCAke3RoaXMubmFtZX0gZGVjb2RlciBvbmx5IHN1cHBvcnRzIGlucHV0cyBwcmVmaXhlZCB3aXRoICR7dGhpcy5wcmVmaXh9YCk7cmV0dXJuIHRoaXMuYmFzZURlY29kZShlLnNsaWNlKHRoaXMucHJlZml4Lmxlbmd0aCkpfWVsc2UgdGhyb3cgRXJyb3IoXCJDYW4gb25seSBtdWx0aWJhc2UgZGVjb2RlIHN0cmluZ3NcIil9b3IoZSl7cmV0dXJuIF9lKHRoaXMsZSl9fWNsYXNzIE9pe2NvbnN0cnVjdG9yKGUpe3RoaXMuZGVjb2RlcnM9ZX1vcihlKXtyZXR1cm4gX2UodGhpcyxlKX1kZWNvZGUoZSl7Y29uc3QgdD1lWzBdLGk9dGhpcy5kZWNvZGVyc1t0XTtpZihpKXJldHVybiBpLmRlY29kZShlKTt0aHJvdyBSYW5nZUVycm9yKGBVbmFibGUgdG8gZGVjb2RlIG11bHRpYmFzZSBzdHJpbmcgJHtKU09OLnN0cmluZ2lmeShlKX0sIG9ubHkgaW5wdXRzIHByZWZpeGVkIHdpdGggJHtPYmplY3Qua2V5cyh0aGlzLmRlY29kZXJzKX0gYXJlIHN1cHBvcnRlZGApfX1jb25zdCBfZT0ocixlKT0+bmV3IE9pKHsuLi5yLmRlY29kZXJzfHx7W3IucHJlZml4XTpyfSwuLi5lLmRlY29kZXJzfHx7W2UucHJlZml4XTplfX0pO2NsYXNzIEFpe2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMubmFtZT1lLHRoaXMucHJlZml4PXQsdGhpcy5iYXNlRW5jb2RlPWksdGhpcy5iYXNlRGVjb2RlPXMsdGhpcy5lbmNvZGVyPW5ldyBUaShlLHQsaSksdGhpcy5kZWNvZGVyPW5ldyB4aShlLHQscyl9ZW5jb2RlKGUpe3JldHVybiB0aGlzLmVuY29kZXIuZW5jb2RlKGUpfWRlY29kZShlKXtyZXR1cm4gdGhpcy5kZWNvZGVyLmRlY29kZShlKX19Y29uc3QgcT0oe25hbWU6cixwcmVmaXg6ZSxlbmNvZGU6dCxkZWNvZGU6aX0pPT5uZXcgQWkocixlLHQsaSksRj0oe3ByZWZpeDpyLG5hbWU6ZSxhbHBoYWJldDp0fSk9Pntjb25zdHtlbmNvZGU6aSxkZWNvZGU6c309UmkodCxlKTtyZXR1cm4gcSh7cHJlZml4OnIsbmFtZTplLGVuY29kZTppLGRlY29kZTpuPT5DZShzKG4pKX0pfSx6aT0ocixlLHQsaSk9Pntjb25zdCBzPXt9O2ZvcihsZXQgbD0wO2w8ZS5sZW5ndGg7KytsKXNbZVtsXV09bDtsZXQgbj1yLmxlbmd0aDtmb3IoO3Jbbi0xXT09PVwiPVwiOyktLW47Y29uc3QgYT1uZXcgVWludDhBcnJheShuKnQvOHwwKTtsZXQgbz0wLGg9MCxkPTA7Zm9yKGxldCBsPTA7bDxuOysrbCl7Y29uc3QgZz1zW3JbbF1dO2lmKGc9PT12b2lkIDApdGhyb3cgbmV3IFN5bnRheEVycm9yKGBOb24tJHtpfSBjaGFyYWN0ZXJgKTtoPWg8PHR8ZyxvKz10LG8+PTgmJihvLT04LGFbZCsrXT0yNTUmaD4+byl9aWYobz49dHx8MjU1Jmg8PDgtbyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJVbmV4cGVjdGVkIGVuZCBvZiBkYXRhXCIpO3JldHVybiBhfSxOaT0ocixlLHQpPT57Y29uc3QgaT1lW2UubGVuZ3RoLTFdPT09XCI9XCIscz0oMTw8dCktMTtsZXQgbj1cIlwiLGE9MCxvPTA7Zm9yKGxldCBoPTA7aDxyLmxlbmd0aDsrK2gpZm9yKG89bzw8OHxyW2hdLGErPTg7YT50OylhLT10LG4rPWVbcyZvPj5hXTtpZihhJiYobis9ZVtzJm88PHQtYV0pLGkpZm9yKDtuLmxlbmd0aCp0Jjc7KW4rPVwiPVwiO3JldHVybiBufSxwPSh7bmFtZTpyLHByZWZpeDplLGJpdHNQZXJDaGFyOnQsYWxwaGFiZXQ6aX0pPT5xKHtwcmVmaXg6ZSxuYW1lOnIsZW5jb2RlKHMpe3JldHVybiBOaShzLGksdCl9LGRlY29kZShzKXtyZXR1cm4gemkocyxpLHQscil9fSksVWk9cSh7cHJlZml4OlwiXFwwXCIsbmFtZTpcImlkZW50aXR5XCIsZW5jb2RlOnI9PlBpKHIpLGRlY29kZTpyPT5TaShyKX0pO3ZhciBMaT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxpZGVudGl0eTpVaX0pO2NvbnN0IEZpPXAoe3ByZWZpeDpcIjBcIixuYW1lOlwiYmFzZTJcIixhbHBoYWJldDpcIjAxXCIsYml0c1BlckNoYXI6MX0pO3ZhciBNaT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxiYXNlMjpGaX0pO2NvbnN0ICRpPXAoe3ByZWZpeDpcIjdcIixuYW1lOlwiYmFzZThcIixhbHBoYWJldDpcIjAxMjM0NTY3XCIsYml0c1BlckNoYXI6M30pO3ZhciBLaT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxiYXNlODokaX0pO2NvbnN0IGtpPUYoe3ByZWZpeDpcIjlcIixuYW1lOlwiYmFzZTEwXCIsYWxwaGFiZXQ6XCIwMTIzNDU2Nzg5XCJ9KTt2YXIgQmk9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsYmFzZTEwOmtpfSk7Y29uc3Qgamk9cCh7cHJlZml4OlwiZlwiLG5hbWU6XCJiYXNlMTZcIixhbHBoYWJldDpcIjAxMjM0NTY3ODlhYmNkZWZcIixiaXRzUGVyQ2hhcjo0fSksVmk9cCh7cHJlZml4OlwiRlwiLG5hbWU6XCJiYXNlMTZ1cHBlclwiLGFscGhhYmV0OlwiMDEyMzQ1Njc4OUFCQ0RFRlwiLGJpdHNQZXJDaGFyOjR9KTt2YXIgcWk9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsYmFzZTE2OmppLGJhc2UxNnVwcGVyOlZpfSk7Y29uc3QgR2k9cCh7cHJlZml4OlwiYlwiLG5hbWU6XCJiYXNlMzJcIixhbHBoYWJldDpcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MjM0NTY3XCIsYml0c1BlckNoYXI6NX0pLFlpPXAoe3ByZWZpeDpcIkJcIixuYW1lOlwiYmFzZTMydXBwZXJcIixhbHBoYWJldDpcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMjM0NTY3XCIsYml0c1BlckNoYXI6NX0pLEppPXAoe3ByZWZpeDpcImNcIixuYW1lOlwiYmFzZTMycGFkXCIsYWxwaGFiZXQ6XCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejIzNDU2Nz1cIixiaXRzUGVyQ2hhcjo1fSksSGk9cCh7cHJlZml4OlwiQ1wiLG5hbWU6XCJiYXNlMzJwYWR1cHBlclwiLGFscGhhYmV0OlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoyMzQ1Njc9XCIsYml0c1BlckNoYXI6NX0pLFhpPXAoe3ByZWZpeDpcInZcIixuYW1lOlwiYmFzZTMyaGV4XCIsYWxwaGFiZXQ6XCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dlwiLGJpdHNQZXJDaGFyOjV9KSxXaT1wKHtwcmVmaXg6XCJWXCIsbmFtZTpcImJhc2UzMmhleHVwcGVyXCIsYWxwaGFiZXQ6XCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVlwiLGJpdHNQZXJDaGFyOjV9KSxaaT1wKHtwcmVmaXg6XCJ0XCIsbmFtZTpcImJhc2UzMmhleHBhZFwiLGFscGhhYmV0OlwiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXY9XCIsYml0c1BlckNoYXI6NX0pLFFpPXAoe3ByZWZpeDpcIlRcIixuYW1lOlwiYmFzZTMyaGV4cGFkdXBwZXJcIixhbHBoYWJldDpcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWPVwiLGJpdHNQZXJDaGFyOjV9KSxlcz1wKHtwcmVmaXg6XCJoXCIsbmFtZTpcImJhc2UzMnpcIixhbHBoYWJldDpcInlibmRyZmc4ZWprbWNwcXhvdDF1d2lzemEzNDVoNzY5XCIsYml0c1BlckNoYXI6NX0pO3ZhciB0cz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxiYXNlMzI6R2ksYmFzZTMydXBwZXI6WWksYmFzZTMycGFkOkppLGJhc2UzMnBhZHVwcGVyOkhpLGJhc2UzMmhleDpYaSxiYXNlMzJoZXh1cHBlcjpXaSxiYXNlMzJoZXhwYWQ6WmksYmFzZTMyaGV4cGFkdXBwZXI6UWksYmFzZTMyejplc30pO2NvbnN0IGlzPUYoe3ByZWZpeDpcImtcIixuYW1lOlwiYmFzZTM2XCIsYWxwaGFiZXQ6XCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIn0pLHNzPUYoe3ByZWZpeDpcIktcIixuYW1lOlwiYmFzZTM2dXBwZXJcIixhbHBoYWJldDpcIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwifSk7dmFyIHJzPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGJhc2UzNjppcyxiYXNlMzZ1cHBlcjpzc30pO2NvbnN0IG5zPUYoe25hbWU6XCJiYXNlNThidGNcIixwcmVmaXg6XCJ6XCIsYWxwaGFiZXQ6XCIxMjM0NTY3ODlBQkNERUZHSEpLTE1OUFFSU1RVVldYWVphYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6XCJ9KSxhcz1GKHtuYW1lOlwiYmFzZTU4ZmxpY2tyXCIscHJlZml4OlwiWlwiLGFscGhhYmV0OlwiMTIzNDU2Nzg5YWJjZGVmZ2hpamttbm9wcXJzdHV2d3h5ekFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWlwifSk7dmFyIG9zPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGJhc2U1OGJ0YzpucyxiYXNlNThmbGlja3I6YXN9KTtjb25zdCBocz1wKHtwcmVmaXg6XCJtXCIsbmFtZTpcImJhc2U2NFwiLGFscGhhYmV0OlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLGJpdHNQZXJDaGFyOjZ9KSxjcz1wKHtwcmVmaXg6XCJNXCIsbmFtZTpcImJhc2U2NHBhZFwiLGFscGhhYmV0OlwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cIixiaXRzUGVyQ2hhcjo2fSksdXM9cCh7cHJlZml4OlwidVwiLG5hbWU6XCJiYXNlNjR1cmxcIixhbHBoYWJldDpcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LV9cIixiaXRzUGVyQ2hhcjo2fSksbHM9cCh7cHJlZml4OlwiVVwiLG5hbWU6XCJiYXNlNjR1cmxwYWRcIixhbHBoYWJldDpcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LV89XCIsYml0c1BlckNoYXI6Nn0pO3ZhciBkcz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxiYXNlNjQ6aHMsYmFzZTY0cGFkOmNzLGJhc2U2NHVybDp1cyxiYXNlNjR1cmxwYWQ6bHN9KTtjb25zdCBSZT1BcnJheS5mcm9tKFwiXFx1ezFGNjgwfVxcdXsxRkE5MH1cXHUyNjA0XFx1ezFGNkYwfVxcdXsxRjMwQ31cXHV7MUYzMTF9XFx1ezFGMzEyfVxcdXsxRjMxM31cXHV7MUYzMTR9XFx1ezFGMzE1fVxcdXsxRjMxNn1cXHV7MUYzMTd9XFx1ezFGMzE4fVxcdXsxRjMwRH1cXHV7MUYzMEZ9XFx1ezFGMzBFfVxcdXsxRjQwOX1cXHUyNjAwXFx1ezFGNEJCfVxcdXsxRjVBNX1cXHV7MUY0QkV9XFx1ezFGNEJGfVxcdXsxRjYwMn1cXHUyNzY0XFx1ezFGNjBEfVxcdXsxRjkyM31cXHV7MUY2MEF9XFx1ezFGNjRGfVxcdXsxRjQ5NX1cXHV7MUY2MkR9XFx1ezFGNjE4fVxcdXsxRjQ0RH1cXHV7MUY2MDV9XFx1ezFGNDRGfVxcdXsxRjYwMX1cXHV7MUY1MjV9XFx1ezFGOTcwfVxcdXsxRjQ5NH1cXHV7MUY0OTZ9XFx1ezFGNDk5fVxcdXsxRjYyMn1cXHV7MUY5MTR9XFx1ezFGNjA2fVxcdXsxRjY0NH1cXHV7MUY0QUF9XFx1ezFGNjA5fVxcdTI2M0FcXHV7MUY0NEN9XFx1ezFGOTE3fVxcdXsxRjQ5Q31cXHV7MUY2MTR9XFx1ezFGNjBFfVxcdXsxRjYwN31cXHV7MUYzMzl9XFx1ezFGOTI2fVxcdXsxRjM4OX1cXHV7MUY0OUV9XFx1MjcwQ1xcdTI3MjhcXHV7MUY5Mzd9XFx1ezFGNjMxfVxcdXsxRjYwQ31cXHV7MUYzMzh9XFx1ezFGNjRDfVxcdXsxRjYwQn1cXHV7MUY0OTd9XFx1ezFGNDlBfVxcdXsxRjYwRn1cXHV7MUY0OUJ9XFx1ezFGNjQyfVxcdXsxRjQ5M31cXHV7MUY5Mjl9XFx1ezFGNjA0fVxcdXsxRjYwMH1cXHV7MUY1QTR9XFx1ezFGNjAzfVxcdXsxRjRBRn1cXHV7MUY2NDh9XFx1ezFGNDQ3fVxcdXsxRjNCNn1cXHV7MUY2MTJ9XFx1ezFGOTJEfVxcdTI3NjNcXHV7MUY2MUN9XFx1ezFGNDhCfVxcdXsxRjQ0MH1cXHV7MUY2MkF9XFx1ezFGNjExfVxcdXsxRjRBNX1cXHV7MUY2NEJ9XFx1ezFGNjFFfVxcdXsxRjYyOX1cXHV7MUY2MjF9XFx1ezFGOTJBfVxcdXsxRjQ0QX1cXHV7MUY5NzN9XFx1ezFGNjI1fVxcdXsxRjkyNH1cXHV7MUY0NDl9XFx1ezFGNDgzfVxcdXsxRjYzM31cXHUyNzBCXFx1ezFGNjFBfVxcdXsxRjYxRH1cXHV7MUY2MzR9XFx1ezFGMzFGfVxcdXsxRjYyQ31cXHV7MUY2NDN9XFx1ezFGMzQwfVxcdXsxRjMzN31cXHV7MUY2M0J9XFx1ezFGNjEzfVxcdTJCNTBcXHUyNzA1XFx1ezFGOTdBfVxcdXsxRjMwOH1cXHV7MUY2MDh9XFx1ezFGOTE4fVxcdXsxRjRBNn1cXHUyNzE0XFx1ezFGNjIzfVxcdXsxRjNDM31cXHV7MUY0OTB9XFx1MjYzOVxcdXsxRjM4QX1cXHV7MUY0OTh9XFx1ezFGNjIwfVxcdTI2MURcXHV7MUY2MTV9XFx1ezFGMzNBfVxcdXsxRjM4Mn1cXHV7MUYzM0J9XFx1ezFGNjEwfVxcdXsxRjU5NX1cXHV7MUY0OUR9XFx1ezFGNjRBfVxcdXsxRjYzOX1cXHV7MUY1RTN9XFx1ezFGNEFCfVxcdXsxRjQ4MH1cXHV7MUY0NTF9XFx1ezFGM0I1fVxcdXsxRjkxRX1cXHV7MUY2MUJ9XFx1ezFGNTM0fVxcdXsxRjYyNH1cXHV7MUYzM0N9XFx1ezFGNjJCfVxcdTI2QkRcXHV7MUY5MTl9XFx1MjYxNVxcdXsxRjNDNn1cXHV7MUY5MkJ9XFx1ezFGNDQ4fVxcdXsxRjYyRX1cXHV7MUY2NDZ9XFx1ezFGMzdCfVxcdXsxRjM0M31cXHV7MUY0MzZ9XFx1ezFGNDgxfVxcdXsxRjYzMn1cXHV7MUYzM0Z9XFx1ezFGOUUxfVxcdXsxRjM4MX1cXHUyNkExXFx1ezFGMzFFfVxcdXsxRjM4OH1cXHUyNzRDXFx1MjcwQVxcdXsxRjQ0Qn1cXHV7MUY2MzB9XFx1ezFGOTI4fVxcdXsxRjYzNn1cXHV7MUY5MUR9XFx1ezFGNkI2fVxcdXsxRjRCMH1cXHV7MUYzNTN9XFx1ezFGNEEyfVxcdXsxRjkxRn1cXHV7MUY2NDF9XFx1ezFGNkE4fVxcdXsxRjRBOH1cXHV7MUY5MkN9XFx1MjcwOFxcdXsxRjM4MH1cXHV7MUYzN0F9XFx1ezFGOTEzfVxcdXsxRjYxOX1cXHV7MUY0OUZ9XFx1ezFGMzMxfVxcdXsxRjYxNn1cXHV7MUY0NzZ9XFx1ezFGOTc0fVxcdTI1QjZcXHUyN0ExXFx1Mjc1M1xcdXsxRjQ4RX1cXHV7MUY0Qjh9XFx1MkIwN1xcdXsxRjYyOH1cXHV7MUYzMUF9XFx1ezFGOThCfVxcdXsxRjYzN31cXHV7MUY1N0F9XFx1MjZBMFxcdXsxRjY0NX1cXHV7MUY2MUZ9XFx1ezFGNjM1fVxcdXsxRjQ0RX1cXHV7MUY5MzJ9XFx1ezFGOTIwfVxcdXsxRjkyN31cXHV7MUY0Q0N9XFx1ezFGNTM1fVxcdXsxRjQ4NX1cXHV7MUY5RDB9XFx1ezFGNDNFfVxcdXsxRjM1Mn1cXHV7MUY2MTd9XFx1ezFGOTExfVxcdXsxRjMwQX1cXHV7MUY5MkZ9XFx1ezFGNDM3fVxcdTI2MEVcXHV7MUY0QTd9XFx1ezFGNjJGfVxcdXsxRjQ4Nn1cXHV7MUY0NDZ9XFx1ezFGM0E0fVxcdXsxRjY0N31cXHV7MUYzNTF9XFx1Mjc0NFxcdXsxRjMzNH1cXHV7MUY0QTN9XFx1ezFGNDM4fVxcdXsxRjQ4Q31cXHV7MUY0Q0R9XFx1ezFGOTQwfVxcdXsxRjkyMn1cXHV7MUY0NDV9XFx1ezFGNEExfVxcdXsxRjRBOX1cXHV7MUY0NTB9XFx1ezFGNEY4fVxcdXsxRjQ3Qn1cXHV7MUY5MTB9XFx1ezFGOTJFfVxcdXsxRjNCQ31cXHV7MUY5NzV9XFx1ezFGNkE5fVxcdXsxRjM0RX1cXHV7MUYzNEF9XFx1ezFGNDdDfVxcdXsxRjQ4RH1cXHV7MUY0RTN9XFx1ezFGOTQyfVwiKSxncz1SZS5yZWR1Y2UoKHIsZSx0KT0+KHJbdF09ZSxyKSxbXSkscHM9UmUucmVkdWNlKChyLGUsdCk9PihyW2UuY29kZVBvaW50QXQoMCldPXQsciksW10pO2Z1bmN0aW9uIERzKHIpe3JldHVybiByLnJlZHVjZSgoZSx0KT0+KGUrPWdzW3RdLGUpLFwiXCIpfWZ1bmN0aW9uIHlzKHIpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2Ygcil7Y29uc3QgaT1wc1t0LmNvZGVQb2ludEF0KDApXTtpZihpPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgTm9uLWJhc2UyNTZlbW9qaSBjaGFyYWN0ZXI6ICR7dH1gKTtlLnB1c2goaSl9cmV0dXJuIG5ldyBVaW50OEFycmF5KGUpfWNvbnN0IGJzPXEoe3ByZWZpeDpcIlxcdXsxRjY4MH1cIixuYW1lOlwiYmFzZTI1NmVtb2ppXCIsZW5jb2RlOkRzLGRlY29kZTp5c30pO3ZhciBtcz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxiYXNlMjU2ZW1vamk6YnN9KSxFcz1QZSxTZT0xMjgsZnM9MTI3LHdzPX5mcyx2cz1NYXRoLnBvdygyLDMxKTtmdW5jdGlvbiBQZShyLGUsdCl7ZT1lfHxbXSx0PXR8fDA7Zm9yKHZhciBpPXQ7cj49dnM7KWVbdCsrXT1yJjI1NXxTZSxyLz0xMjg7Zm9yKDtyJndzOyllW3QrK109ciYyNTV8U2Uscj4+Pj03O3JldHVybiBlW3RdPXJ8MCxQZS5ieXRlcz10LWkrMSxlfXZhciBJcz1zZSxDcz0xMjgsVGU9MTI3O2Z1bmN0aW9uIHNlKHIsaSl7dmFyIHQ9MCxpPWl8fDAscz0wLG49aSxhLG89ci5sZW5ndGg7ZG97aWYobj49byl0aHJvdyBzZS5ieXRlcz0wLG5ldyBSYW5nZUVycm9yKFwiQ291bGQgbm90IGRlY29kZSB2YXJpbnRcIik7YT1yW24rK10sdCs9czwyOD8oYSZUZSk8PHM6KGEmVGUpKk1hdGgucG93KDIscykscys9N313aGlsZShhPj1Dcyk7cmV0dXJuIHNlLmJ5dGVzPW4taSx0fXZhciBfcz1NYXRoLnBvdygyLDcpLFJzPU1hdGgucG93KDIsMTQpLFNzPU1hdGgucG93KDIsMjEpLFBzPU1hdGgucG93KDIsMjgpLFRzPU1hdGgucG93KDIsMzUpLHhzPU1hdGgucG93KDIsNDIpLE9zPU1hdGgucG93KDIsNDkpLEFzPU1hdGgucG93KDIsNTYpLHpzPU1hdGgucG93KDIsNjMpLE5zPWZ1bmN0aW9uKHIpe3JldHVybiByPF9zPzE6cjxScz8yOnI8U3M/MzpyPFBzPzQ6cjxUcz81OnI8eHM/NjpyPE9zPzc6cjxBcz84OnI8enM/OToxMH0sVXM9e2VuY29kZTpFcyxkZWNvZGU6SXMsZW5jb2RpbmdMZW5ndGg6TnN9LHhlPVVzO2NvbnN0IE9lPShyLGUsdD0wKT0+KHhlLmVuY29kZShyLGUsdCksZSksQWU9cj0+eGUuZW5jb2RpbmdMZW5ndGgocikscmU9KHIsZSk9Pntjb25zdCB0PWUuYnl0ZUxlbmd0aCxpPUFlKHIpLHM9aStBZSh0KSxuPW5ldyBVaW50OEFycmF5KHMrdCk7cmV0dXJuIE9lKHIsbiwwKSxPZSh0LG4saSksbi5zZXQoZSxzKSxuZXcgTHMocix0LGUsbil9O2NsYXNzIExze2NvbnN0cnVjdG9yKGUsdCxpLHMpe3RoaXMuY29kZT1lLHRoaXMuc2l6ZT10LHRoaXMuZGlnZXN0PWksdGhpcy5ieXRlcz1zfX1jb25zdCB6ZT0oe25hbWU6cixjb2RlOmUsZW5jb2RlOnR9KT0+bmV3IEZzKHIsZSx0KTtjbGFzcyBGc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5uYW1lPWUsdGhpcy5jb2RlPXQsdGhpcy5lbmNvZGU9aX1kaWdlc3QoZSl7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2NvbnN0IHQ9dGhpcy5lbmNvZGUoZSk7cmV0dXJuIHQgaW5zdGFuY2VvZiBVaW50OEFycmF5P3JlKHRoaXMuY29kZSx0KTp0LnRoZW4oaT0+cmUodGhpcy5jb2RlLGkpKX1lbHNlIHRocm93IEVycm9yKFwiVW5rbm93biB0eXBlLCBtdXN0IGJlIGJpbmFyeSB0eXBlXCIpfX1jb25zdCBOZT1yPT5hc3luYyBlPT5uZXcgVWludDhBcnJheShhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdChyLGUpKSxNcz16ZSh7bmFtZTpcInNoYTItMjU2XCIsY29kZToxOCxlbmNvZGU6TmUoXCJTSEEtMjU2XCIpfSksJHM9emUoe25hbWU6XCJzaGEyLTUxMlwiLGNvZGU6MTksZW5jb2RlOk5lKFwiU0hBLTUxMlwiKX0pO3ZhciBLcz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxzaGEyNTY6TXMsc2hhNTEyOiRzfSk7Y29uc3QgVWU9MCxrcz1cImlkZW50aXR5XCIsTGU9Q2UsQnM9cj0+cmUoVWUsTGUocikpLGpzPXtjb2RlOlVlLG5hbWU6a3MsZW5jb2RlOkxlLGRpZ2VzdDpCc307dmFyIFZzPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGlkZW50aXR5OmpzfSk7bmV3IFRleHRFbmNvZGVyLG5ldyBUZXh0RGVjb2Rlcjtjb25zdCBGZT17Li4uTGksLi4uTWksLi4uS2ksLi4uQmksLi4ucWksLi4udHMsLi4ucnMsLi4ub3MsLi4uZHMsLi4ubXN9Oyh7Li4uS3MsLi4uVnN9KTtmdW5jdGlvbiBxcyhyPTApe3JldHVybiBnbG9iYWxUaGlzLkJ1ZmZlciE9bnVsbCYmZ2xvYmFsVGhpcy5CdWZmZXIuYWxsb2NVbnNhZmUhPW51bGw/Z2xvYmFsVGhpcy5CdWZmZXIuYWxsb2NVbnNhZmUocik6bmV3IFVpbnQ4QXJyYXkocil9ZnVuY3Rpb24gTWUocixlLHQsaSl7cmV0dXJue25hbWU6cixwcmVmaXg6ZSxlbmNvZGVyOntuYW1lOnIscHJlZml4OmUsZW5jb2RlOnR9LGRlY29kZXI6e2RlY29kZTppfX19Y29uc3QgJGU9TWUoXCJ1dGY4XCIsXCJ1XCIscj0+XCJ1XCIrbmV3IFRleHREZWNvZGVyKFwidXRmOFwiKS5kZWNvZGUocikscj0+bmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHIuc3Vic3RyaW5nKDEpKSksbmU9TWUoXCJhc2NpaVwiLFwiYVwiLHI9PntsZXQgZT1cImFcIjtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyllKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHJbdF0pO3JldHVybiBlfSxyPT57cj1yLnN1YnN0cmluZygxKTtjb25zdCBlPXFzKHIubGVuZ3RoKTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyllW3RdPXIuY2hhckNvZGVBdCh0KTtyZXR1cm4gZX0pLEdzPXt1dGY4OiRlLFwidXRmLThcIjokZSxoZXg6RmUuYmFzZTE2LGxhdGluMTpuZSxhc2NpaTpuZSxiaW5hcnk6bmUsLi4uRmV9O2Z1bmN0aW9uIFlzKHIsZT1cInV0ZjhcIil7Y29uc3QgdD1Hc1tlXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGVuY29kaW5nIFwiJHtlfVwiYCk7cmV0dXJuKGU9PT1cInV0ZjhcInx8ZT09PVwidXRmLThcIikmJmdsb2JhbFRoaXMuQnVmZmVyIT1udWxsJiZnbG9iYWxUaGlzLkJ1ZmZlci5mcm9tIT1udWxsP2dsb2JhbFRoaXMuQnVmZmVyLmZyb20ocixcInV0ZjhcIik6dC5kZWNvZGVyLmRlY29kZShgJHt0LnByZWZpeH0ke3J9YCl9Y29uc3QgYWU9XCJ3Y1wiLEtlPTIsRz1cImNvcmVcIixUPWAke2FlfUAkezJ9OiR7R306YCxrZT17bmFtZTpHLGxvZ2dlcjpcImVycm9yXCJ9LEJlPXtkYXRhYmFzZTpcIjptZW1vcnk6XCJ9LGplPVwiY3J5cHRvXCIsb2U9XCJjbGllbnRfZWQyNTUxOV9zZWVkXCIsVmU9eixxZT1cImtleWNoYWluXCIsR2U9XCIwLjNcIixZZT1cIm1lc3NhZ2VzXCIsSmU9XCIwLjNcIixIZT1waSxYZT1cInB1Ymxpc2hlclwiLFdlPVwiaXJuXCIsWmU9XCJlcnJvclwiLGhlPVwid3NzOi8vcmVsYXkud2FsbGV0Y29ubmVjdC5jb21cIixRZT1cInJlbGF5ZXJcIixEPXttZXNzYWdlOlwicmVsYXllcl9tZXNzYWdlXCIsY29ubmVjdDpcInJlbGF5ZXJfY29ubmVjdFwiLGRpc2Nvbm5lY3Q6XCJyZWxheWVyX2Rpc2Nvbm5lY3RcIixlcnJvcjpcInJlbGF5ZXJfZXJyb3JcIixjb25uZWN0aW9uX3N0YWxsZWQ6XCJyZWxheWVyX2Nvbm5lY3Rpb25fc3RhbGxlZFwiLHRyYW5zcG9ydF9jbG9zZWQ6XCJyZWxheWVyX3RyYW5zcG9ydF9jbG9zZWRcIixwdWJsaXNoOlwicmVsYXllcl9wdWJsaXNoXCJ9LGV0PVwiX3N1YnNjcmlwdGlvblwiLE09e3BheWxvYWQ6XCJwYXlsb2FkXCIsY29ubmVjdDpcImNvbm5lY3RcIixkaXNjb25uZWN0OlwiZGlzY29ubmVjdFwiLGVycm9yOlwiZXJyb3JcIn0sdHQ9RGksSnM9e2RhdGFiYXNlOlwiOm1lbW9yeTpcIn0saXQ9XCIyLjYuMFwiLHN0PVwiMC4zXCIsST17Y3JlYXRlZDpcInN1YnNjcmlwdGlvbl9jcmVhdGVkXCIsZGVsZXRlZDpcInN1YnNjcmlwdGlvbl9kZWxldGVkXCIsZXhwaXJlZDpcInN1YnNjcmlwdGlvbl9leHBpcmVkXCIsZGlzYWJsZWQ6XCJzdWJzY3JpcHRpb25fZGlzYWJsZWRcIixzeW5jOlwic3Vic2NyaXB0aW9uX3N5bmNcIixyZXN1YnNjcmliZWQ6XCJzdWJzY3JpcHRpb25fcmVzdWJzY3JpYmVkXCJ9LEhzPWllLHJ0PVwic3Vic2NyaXB0aW9uXCIsbnQ9XCIwLjNcIixhdD15aSoxZTMsb3Q9XCJwYWlyaW5nXCIsaHQ9XCIwLjNcIixYcz1pZSxOPXt3Y19wYWlyaW5nRGVsZXRlOntyZXE6e3R0bDp6LHByb21wdDohMSx0YWc6MWUzfSxyZXM6e3R0bDp6LHByb21wdDohMSx0YWc6MTAwMX19LHdjX3BhaXJpbmdQaW5nOntyZXE6e3R0bDpiZSxwcm9tcHQ6ITEsdGFnOjEwMDJ9LHJlczp7dHRsOmJlLHByb21wdDohMSx0YWc6MTAwM319LHVucmVnaXN0ZXJlZF9tZXRob2Q6e3JlcTp7dHRsOnoscHJvbXB0OiExLHRhZzowfSxyZXM6e3R0bDp6LHByb21wdDohMSx0YWc6MH19fSxDPXtjcmVhdGVkOlwiaGlzdG9yeV9jcmVhdGVkXCIsdXBkYXRlZDpcImhpc3RvcnlfdXBkYXRlZFwiLGRlbGV0ZWQ6XCJoaXN0b3J5X2RlbGV0ZWRcIixzeW5jOlwiaGlzdG9yeV9zeW5jXCJ9LGN0PVwiaGlzdG9yeVwiLHV0PVwiMC4zXCIsbHQ9XCJleHBpcmVyXCIsbT17Y3JlYXRlZDpcImV4cGlyZXJfY3JlYXRlZFwiLGRlbGV0ZWQ6XCJleHBpcmVyX2RlbGV0ZWRcIixleHBpcmVkOlwiZXhwaXJlcl9leHBpcmVkXCIsc3luYzpcImV4cGlyZXJfc3luY1wifSxkdD1cIjAuM1wiLFdzPXo7Y2xhc3MgZ3R7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmNvcmU9ZSx0aGlzLmxvZ2dlcj10LHRoaXMua2V5Y2hhaW49bmV3IE1hcCx0aGlzLm5hbWU9cWUsdGhpcy52ZXJzaW9uPUdlLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5zdG9yYWdlUHJlZml4PVQsdGhpcy5pbml0PWFzeW5jKCk9PntpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3QgaT1hd2FpdCB0aGlzLmdldEtleUNoYWluKCk7dHlwZW9mIGk8XCJ1XCImJih0aGlzLmtleWNoYWluPWkpLHRoaXMuaW5pdGlhbGl6ZWQ9ITB9fSx0aGlzLmhhcz1pPT4odGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5rZXljaGFpbi5oYXMoaSkpLHRoaXMuc2V0PWFzeW5jKGkscyk9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKSx0aGlzLmtleWNoYWluLnNldChpLHMpLGF3YWl0IHRoaXMucGVyc2lzdCgpfSx0aGlzLmdldD1pPT57dGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3Qgcz10aGlzLmtleWNoYWluLmdldChpKTtpZih0eXBlb2Ygcz5cInVcIil7Y29uc3R7bWVzc2FnZTpufT1jKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYCR7dGhpcy5uYW1lfTogJHtpfWApO3Rocm93IG5ldyBFcnJvcihuKX1yZXR1cm4gc30sdGhpcy5kZWw9YXN5bmMgaT0+e3RoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMua2V5Y2hhaW4uZGVsZXRlKGkpLGF3YWl0IHRoaXMucGVyc2lzdCgpfSx0aGlzLmNvcmU9ZSx0aGlzLmxvZ2dlcj13KHQsdGhpcy5uYW1lKX1nZXQgY29udGV4dCgpe3JldHVybiB2KHRoaXMubG9nZ2VyKX1nZXQgc3RvcmFnZUtleSgpe3JldHVybiB0aGlzLnN0b3JhZ2VQcmVmaXgrdGhpcy52ZXJzaW9uK1wiLy9cIit0aGlzLm5hbWV9YXN5bmMgc2V0S2V5Q2hhaW4oZSl7YXdhaXQgdGhpcy5jb3JlLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXksZGUoZSkpfWFzeW5jIGdldEtleUNoYWluKCl7Y29uc3QgZT1hd2FpdCB0aGlzLmNvcmUuc3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmFnZUtleSk7cmV0dXJuIHR5cGVvZiBlPFwidVwiP2dlKGUpOnZvaWQgMH1hc3luYyBwZXJzaXN0KCl7YXdhaXQgdGhpcy5zZXRLZXlDaGFpbih0aGlzLmtleWNoYWluKX1pc0luaXRpYWxpemVkKCl7aWYoIXRoaXMuaW5pdGlhbGl6ZWQpe2NvbnN0e21lc3NhZ2U6ZX09YyhcIk5PVF9JTklUSUFMSVpFRFwiLHRoaXMubmFtZSk7dGhyb3cgbmV3IEVycm9yKGUpfX19Y2xhc3MgcHR7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuY29yZT1lLHRoaXMubG9nZ2VyPXQsdGhpcy5uYW1lPWplLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5pbml0PWFzeW5jKCk9Pnt0aGlzLmluaXRpYWxpemVkfHwoYXdhaXQgdGhpcy5rZXljaGFpbi5pbml0KCksdGhpcy5pbml0aWFsaXplZD0hMCl9LHRoaXMuaGFzS2V5cz1zPT4odGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5rZXljaGFpbi5oYXMocykpLHRoaXMuZ2V0Q2xpZW50SWQ9YXN5bmMoKT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IHM9YXdhaXQgdGhpcy5nZXRDbGllbnRTZWVkKCksbj1rLmdlbmVyYXRlS2V5UGFpcihzKTtyZXR1cm4gay5lbmNvZGVJc3Mobi5wdWJsaWNLZXkpfSx0aGlzLmdlbmVyYXRlS2V5UGFpcj0oKT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IHM9cXQoKTtyZXR1cm4gdGhpcy5zZXRQcml2YXRlS2V5KHMucHVibGljS2V5LHMucHJpdmF0ZUtleSl9LHRoaXMuc2lnbkpXVD1hc3luYyBzPT57dGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3Qgbj1hd2FpdCB0aGlzLmdldENsaWVudFNlZWQoKSxhPWsuZ2VuZXJhdGVLZXlQYWlyKG4pLG89WCgpLGg9VmU7cmV0dXJuIGF3YWl0IGsuc2lnbkpXVChvLHMsaCxhKX0sdGhpcy5nZW5lcmF0ZVNoYXJlZEtleT0ocyxuLGEpPT57dGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3Qgbz10aGlzLmdldFByaXZhdGVLZXkocyksaD1HdChvLG4pO3JldHVybiB0aGlzLnNldFN5bUtleShoLGEpfSx0aGlzLnNldFN5bUtleT1hc3luYyhzLG4pPT57dGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3QgYT1ufHxZdChzKTtyZXR1cm4gYXdhaXQgdGhpcy5rZXljaGFpbi5zZXQoYSxzKSxhfSx0aGlzLmRlbGV0ZUtleVBhaXI9YXN5bmMgcz0+e3RoaXMuaXNJbml0aWFsaXplZCgpLGF3YWl0IHRoaXMua2V5Y2hhaW4uZGVsKHMpfSx0aGlzLmRlbGV0ZVN5bUtleT1hc3luYyBzPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5rZXljaGFpbi5kZWwocyl9LHRoaXMuZW5jb2RlPWFzeW5jKHMsbixhKT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IG89SnQoYSksaD1qdChuKTtpZihwZShvKSl7Y29uc3QgVT1vLnNlbmRlclB1YmxpY0tleSxKPW8ucmVjZWl2ZXJQdWJsaWNLZXk7cz1hd2FpdCB0aGlzLmdlbmVyYXRlU2hhcmVkS2V5KFUsSil9Y29uc3QgZD10aGlzLmdldFN5bUtleShzKSx7dHlwZTpsLHNlbmRlclB1YmxpY0tleTpnfT1vO3JldHVybiBIdCh7dHlwZTpsLHN5bUtleTpkLG1lc3NhZ2U6aCxzZW5kZXJQdWJsaWNLZXk6Z30pfSx0aGlzLmRlY29kZT1hc3luYyhzLG4sYSk9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKTtjb25zdCBvPVh0KG4sYSk7aWYocGUobykpe2NvbnN0IGw9by5yZWNlaXZlclB1YmxpY0tleSxnPW8uc2VuZGVyUHVibGljS2V5O3M9YXdhaXQgdGhpcy5nZW5lcmF0ZVNoYXJlZEtleShsLGcpfWNvbnN0IGg9dGhpcy5nZXRTeW1LZXkocyksZD1XdCh7c3ltS2V5OmgsZW5jb2RlZDpufSk7cmV0dXJuIFZ0KGQpfSx0aGlzLmdldFBheWxvYWRUeXBlPXM9Pntjb25zdCBuPURlKHMpO3JldHVybiBadChuLnR5cGUpfSx0aGlzLmdldFBheWxvYWRTZW5kZXJQdWJsaWNLZXk9cz0+e2NvbnN0IG49RGUocyk7cmV0dXJuIG4uc2VuZGVyUHVibGljS2V5P2dpKG4uc2VuZGVyUHVibGljS2V5LFF0KTp2b2lkIDB9LHRoaXMuY29yZT1lLHRoaXMubG9nZ2VyPXcodCx0aGlzLm5hbWUpLHRoaXMua2V5Y2hhaW49aXx8bmV3IGd0KHRoaXMuY29yZSx0aGlzLmxvZ2dlcil9Z2V0IGNvbnRleHQoKXtyZXR1cm4gdih0aGlzLmxvZ2dlcil9YXN5bmMgc2V0UHJpdmF0ZUtleShlLHQpe3JldHVybiBhd2FpdCB0aGlzLmtleWNoYWluLnNldChlLHQpLGV9Z2V0UHJpdmF0ZUtleShlKXtyZXR1cm4gdGhpcy5rZXljaGFpbi5nZXQoZSl9YXN5bmMgZ2V0Q2xpZW50U2VlZCgpe2xldCBlPVwiXCI7dHJ5e2U9dGhpcy5rZXljaGFpbi5nZXQob2UpfWNhdGNoe2U9WCgpLGF3YWl0IHRoaXMua2V5Y2hhaW4uc2V0KG9lLGUpfXJldHVybiBZcyhlLFwiYmFzZTE2XCIpfWdldFN5bUtleShlKXtyZXR1cm4gdGhpcy5rZXljaGFpbi5nZXQoZSl9aXNJbml0aWFsaXplZCgpe2lmKCF0aGlzLmluaXRpYWxpemVkKXtjb25zdHttZXNzYWdlOmV9PWMoXCJOT1RfSU5JVElBTElaRURcIix0aGlzLm5hbWUpO3Rocm93IG5ldyBFcnJvcihlKX19fWNsYXNzIER0IGV4dGVuZHMgVXR7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQpLHRoaXMubG9nZ2VyPWUsdGhpcy5jb3JlPXQsdGhpcy5tZXNzYWdlcz1uZXcgTWFwLHRoaXMubmFtZT1ZZSx0aGlzLnZlcnNpb249SmUsdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnN0b3JhZ2VQcmVmaXg9VCx0aGlzLmluaXQ9YXN5bmMoKT0+e2lmKCF0aGlzLmluaXRpYWxpemVkKXt0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpO3RyeXtjb25zdCBpPWF3YWl0IHRoaXMuZ2V0UmVsYXllck1lc3NhZ2VzKCk7dHlwZW9mIGk8XCJ1XCImJih0aGlzLm1lc3NhZ2VzPWkpLHRoaXMubG9nZ2VyLmRlYnVnKGBTdWNjZXNzZnVsbHkgUmVzdG9yZWQgcmVjb3JkcyBmb3IgJHt0aGlzLm5hbWV9YCksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJyZXN0b3JlXCIsc2l6ZTp0aGlzLm1lc3NhZ2VzLnNpemV9KX1jYXRjaChpKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIFJlc3RvcmUgcmVjb3JkcyBmb3IgJHt0aGlzLm5hbWV9YCksdGhpcy5sb2dnZXIuZXJyb3IoaSl9ZmluYWxseXt0aGlzLmluaXRpYWxpemVkPSEwfX19LHRoaXMuc2V0PWFzeW5jKGkscyk9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKTtjb25zdCBuPUIocyk7bGV0IGE9dGhpcy5tZXNzYWdlcy5nZXQoaSk7cmV0dXJuIHR5cGVvZiBhPlwidVwiJiYoYT17fSksdHlwZW9mIGFbbl08XCJ1XCJ8fChhW25dPXMsdGhpcy5tZXNzYWdlcy5zZXQoaSxhKSxhd2FpdCB0aGlzLnBlcnNpc3QoKSksbn0sdGhpcy5nZXQ9aT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2xldCBzPXRoaXMubWVzc2FnZXMuZ2V0KGkpO3JldHVybiB0eXBlb2Ygcz5cInVcIiYmKHM9e30pLHN9LHRoaXMuaGFzPShpLHMpPT57dGhpcy5pc0luaXRpYWxpemVkKCk7Y29uc3Qgbj10aGlzLmdldChpKSxhPUIocyk7cmV0dXJuIHR5cGVvZiBuW2FdPFwidVwifSx0aGlzLmRlbD1hc3luYyBpPT57dGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5tZXNzYWdlcy5kZWxldGUoaSksYXdhaXQgdGhpcy5wZXJzaXN0KCl9LHRoaXMubG9nZ2VyPXcoZSx0aGlzLm5hbWUpLHRoaXMuY29yZT10fWdldCBjb250ZXh0KCl7cmV0dXJuIHYodGhpcy5sb2dnZXIpfWdldCBzdG9yYWdlS2V5KCl7cmV0dXJuIHRoaXMuc3RvcmFnZVByZWZpeCt0aGlzLnZlcnNpb24rXCIvL1wiK3RoaXMubmFtZX1hc3luYyBzZXRSZWxheWVyTWVzc2FnZXMoZSl7YXdhaXQgdGhpcy5jb3JlLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXksZGUoZSkpfWFzeW5jIGdldFJlbGF5ZXJNZXNzYWdlcygpe2NvbnN0IGU9YXdhaXQgdGhpcy5jb3JlLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXkpO3JldHVybiB0eXBlb2YgZTxcInVcIj9nZShlKTp2b2lkIDB9YXN5bmMgcGVyc2lzdCgpe2F3YWl0IHRoaXMuc2V0UmVsYXllck1lc3NhZ2VzKHRoaXMubWVzc2FnZXMpfWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3IoZSl9fX1jbGFzcyBacyBleHRlbmRzIEx0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSx0KSx0aGlzLnJlbGF5ZXI9ZSx0aGlzLmxvZ2dlcj10LHRoaXMuZXZlbnRzPW5ldyBBLHRoaXMubmFtZT1YZSx0aGlzLnF1ZXVlPW5ldyBNYXAsdGhpcy5wdWJsaXNoVGltZW91dD0xZTQsdGhpcy5wdWJsaXNoPWFzeW5jKGkscyxuKT0+e3RoaXMubG9nZ2VyLmRlYnVnKFwiUHVibGlzaGluZyBQYXlsb2FkXCIpLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwicHVibGlzaFwiLHBhcmFtczp7dG9waWM6aSxtZXNzYWdlOnMsb3B0czpufX0pO3RyeXtjb25zdCBhPW4/LnR0bHx8SGUsbz1XKG4pLGg9bj8ucHJvbXB0fHwhMSxkPW4/LnRhZ3x8MCxsPXt0b3BpYzppLG1lc3NhZ2U6cyxvcHRzOnt0dGw6YSxyZWxheTpvLHByb21wdDpoLHRhZzpkfX0sZz1CKHMpO3RoaXMucXVldWUuc2V0KGcsbCk7dHJ5e2F3YWl0IGF3YWl0IGoodGhpcy5ycGNQdWJsaXNoKGkscyxhLG8saCxkKSx0aGlzLnB1Ymxpc2hUaW1lb3V0KSx0aGlzLnJlbGF5ZXIuZXZlbnRzLmVtaXQoRC5wdWJsaXNoLGwpfWNhdGNoe3RoaXMubG9nZ2VyLmRlYnVnKFwiUHVibGlzaGluZyBQYXlsb2FkIHN0YWxsZWRcIiksdGhpcy5yZWxheWVyLmV2ZW50cy5lbWl0KEQuY29ubmVjdGlvbl9zdGFsbGVkKTtyZXR1cm59dGhpcy5vblB1Ymxpc2goZyxsKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIlN1Y2Nlc3NmdWxseSBQdWJsaXNoZWQgUGF5bG9hZFwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcInB1Ymxpc2hcIixwYXJhbXM6e3RvcGljOmksbWVzc2FnZTpzLG9wdHM6bn19KX1jYXRjaChhKXt0aHJvdyB0aGlzLmxvZ2dlci5kZWJ1ZyhcIkZhaWxlZCB0byBQdWJsaXNoIFBheWxvYWRcIiksdGhpcy5sb2dnZXIuZXJyb3IoYSksYX19LHRoaXMub249KGkscyk9Pnt0aGlzLmV2ZW50cy5vbihpLHMpfSx0aGlzLm9uY2U9KGkscyk9Pnt0aGlzLmV2ZW50cy5vbmNlKGkscyl9LHRoaXMub2ZmPShpLHMpPT57dGhpcy5ldmVudHMub2ZmKGkscyl9LHRoaXMucmVtb3ZlTGlzdGVuZXI9KGkscyk9Pnt0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihpLHMpfSx0aGlzLnJlbGF5ZXI9ZSx0aGlzLmxvZ2dlcj13KHQsdGhpcy5uYW1lKSx0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcnMoKX1nZXQgY29udGV4dCgpe3JldHVybiB2KHRoaXMubG9nZ2VyKX1ycGNQdWJsaXNoKGUsdCxpLHMsbixhKXt2YXIgbyxoLGQsbDtjb25zdCBnPXttZXRob2Q6VihzLnByb3RvY29sKS5wdWJsaXNoLHBhcmFtczp7dG9waWM6ZSxtZXNzYWdlOnQsdHRsOmkscHJvbXB0Om4sdGFnOmF9fTtyZXR1cm4gWigobz1nLnBhcmFtcyk9PW51bGw/dm9pZCAwOm8ucHJvbXB0KSYmKChoPWcucGFyYW1zKT09bnVsbHx8ZGVsZXRlIGgucHJvbXB0KSxaKChkPWcucGFyYW1zKT09bnVsbD92b2lkIDA6ZC50YWcpJiYoKGw9Zy5wYXJhbXMpPT1udWxsfHxkZWxldGUgbC50YWcpLHRoaXMubG9nZ2VyLmRlYnVnKFwiT3V0Z29pbmcgUmVsYXkgUGF5bG9hZFwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1lc3NhZ2VcIixkaXJlY3Rpb246XCJvdXRnb2luZ1wiLHJlcXVlc3Q6Z30pLHRoaXMucmVsYXllci5yZXF1ZXN0KGcpfW9uUHVibGlzaChlLHQpe3RoaXMucXVldWUuZGVsZXRlKGUpfWNoZWNrUXVldWUoKXt0aGlzLnF1ZXVlLmZvckVhY2goYXN5bmMgZT0+e2NvbnN0e3RvcGljOnQsbWVzc2FnZTppLG9wdHM6c309ZTthd2FpdCB0aGlzLnB1Ymxpc2godCxpLHMpfSl9cmVnaXN0ZXJFdmVudExpc3RlbmVycygpe3RoaXMucmVsYXllci5jb3JlLmhlYXJ0YmVhdC5vbihILnB1bHNlLCgpPT57dGhpcy5jaGVja1F1ZXVlKCl9KX19Y2xhc3MgUXN7Y29uc3RydWN0b3IoKXt0aGlzLm1hcD1uZXcgTWFwLHRoaXMuc2V0PShlLHQpPT57Y29uc3QgaT10aGlzLmdldChlKTt0aGlzLmV4aXN0cyhlLHQpfHx0aGlzLm1hcC5zZXQoZSxbLi4uaSx0XSl9LHRoaXMuZ2V0PWU9PnRoaXMubWFwLmdldChlKXx8W10sdGhpcy5leGlzdHM9KGUsdCk9PnRoaXMuZ2V0KGUpLmluY2x1ZGVzKHQpLHRoaXMuZGVsZXRlPShlLHQpPT57aWYodHlwZW9mIHQ+XCJ1XCIpe3RoaXMubWFwLmRlbGV0ZShlKTtyZXR1cm59aWYoIXRoaXMubWFwLmhhcyhlKSlyZXR1cm47Y29uc3QgaT10aGlzLmdldChlKTtpZighdGhpcy5leGlzdHMoZSx0KSlyZXR1cm47Y29uc3Qgcz1pLmZpbHRlcihuPT5uIT09dCk7aWYoIXMubGVuZ3RoKXt0aGlzLm1hcC5kZWxldGUoZSk7cmV0dXJufXRoaXMubWFwLnNldChlLHMpfSx0aGlzLmNsZWFyPSgpPT57dGhpcy5tYXAuY2xlYXIoKX19Z2V0IHRvcGljcygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMubWFwLmtleXMoKSl9fXZhciBlcj1PYmplY3QuZGVmaW5lUHJvcGVydHksdHI9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsaXI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMseXQ9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxzcj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHJyPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsYnQ9KHIsZSx0KT0+ZSBpbiByP2VyKHIsZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOnJbZV09dCwkPShyLGUpPT57Zm9yKHZhciB0IGluIGV8fChlPXt9KSlzci5jYWxsKGUsdCkmJmJ0KHIsdCxlW3RdKTtpZih5dClmb3IodmFyIHQgb2YgeXQoZSkpcnIuY2FsbChlLHQpJiZidChyLHQsZVt0XSk7cmV0dXJuIHJ9LGNlPShyLGUpPT50cihyLGlyKGUpKTtjbGFzcyBtdCBleHRlbmRzIEZ0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSx0KSx0aGlzLnJlbGF5ZXI9ZSx0aGlzLmxvZ2dlcj10LHRoaXMuc3Vic2NyaXB0aW9ucz1uZXcgTWFwLHRoaXMudG9waWNNYXA9bmV3IFFzLHRoaXMuZXZlbnRzPW5ldyBBLHRoaXMubmFtZT1ydCx0aGlzLnZlcnNpb249bnQsdGhpcy5wZW5kaW5nPW5ldyBNYXAsdGhpcy5jYWNoZWQ9W10sdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnBlbmRpbmdTdWJzY3JpcHRpb25XYXRjaExhYmVsPVwicGVuZGluZ19zdWJfd2F0Y2hfbGFiZWxcIix0aGlzLnBvbGxpbmdJbnRlcnZhbD0yMCx0aGlzLnN0b3JhZ2VQcmVmaXg9VCx0aGlzLnN1YnNjcmliZVRpbWVvdXQ9MWU0LHRoaXMucmVzdGFydEluUHJvZ3Jlc3M9ITEsdGhpcy5iYXRjaFN1YnNjcmliZVRvcGljc0xpbWl0PTUwMCx0aGlzLmluaXQ9YXN5bmMoKT0+e3RoaXMuaW5pdGlhbGl6ZWR8fCh0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpLGF3YWl0IHRoaXMucmVzdGFydCgpLHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVycygpLHRoaXMub25FbmFibGUoKSx0aGlzLmNsaWVudElkPWF3YWl0IHRoaXMucmVsYXllci5jb3JlLmNyeXB0by5nZXRDbGllbnRJZCgpKX0sdGhpcy5zdWJzY3JpYmU9YXN5bmMoaSxzKT0+e2F3YWl0IHRoaXMucmVzdGFydFRvQ29tcGxldGUoKSx0aGlzLmlzSW5pdGlhbGl6ZWQoKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIlN1YnNjcmliaW5nIFRvcGljXCIpLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwic3Vic2NyaWJlXCIscGFyYW1zOnt0b3BpYzppLG9wdHM6c319KTt0cnl7Y29uc3Qgbj1XKHMpLGE9e3RvcGljOmkscmVsYXk6bn07dGhpcy5wZW5kaW5nLnNldChpLGEpO2NvbnN0IG89YXdhaXQgdGhpcy5ycGNTdWJzY3JpYmUoaSxuKTtyZXR1cm4gdGhpcy5vblN1YnNjcmliZShvLGEpLHRoaXMubG9nZ2VyLmRlYnVnKFwiU3VjY2Vzc2Z1bGx5IFN1YnNjcmliZWQgVG9waWNcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJzdWJzY3JpYmVcIixwYXJhbXM6e3RvcGljOmksb3B0czpzfX0pLG99Y2F0Y2gobil7dGhyb3cgdGhpcy5sb2dnZXIuZGVidWcoXCJGYWlsZWQgdG8gU3Vic2NyaWJlIFRvcGljXCIpLHRoaXMubG9nZ2VyLmVycm9yKG4pLG59fSx0aGlzLnVuc3Vic2NyaWJlPWFzeW5jKGkscyk9Pnthd2FpdCB0aGlzLnJlc3RhcnRUb0NvbXBsZXRlKCksdGhpcy5pc0luaXRpYWxpemVkKCksdHlwZW9mIHM/LmlkPFwidVwiP2F3YWl0IHRoaXMudW5zdWJzY3JpYmVCeUlkKGkscy5pZCxzKTphd2FpdCB0aGlzLnVuc3Vic2NyaWJlQnlUb3BpYyhpLHMpfSx0aGlzLmlzU3Vic2NyaWJlZD1hc3luYyBpPT50aGlzLnRvcGljcy5pbmNsdWRlcyhpKT8hMDphd2FpdCBuZXcgUHJvbWlzZSgocyxuKT0+e2NvbnN0IGE9bmV3IGJpO2Euc3RhcnQodGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9uV2F0Y2hMYWJlbCk7Y29uc3Qgbz1zZXRJbnRlcnZhbCgoKT0+eyF0aGlzLnBlbmRpbmcuaGFzKGkpJiZ0aGlzLnRvcGljcy5pbmNsdWRlcyhpKSYmKGNsZWFySW50ZXJ2YWwobyksYS5zdG9wKHRoaXMucGVuZGluZ1N1YnNjcmlwdGlvbldhdGNoTGFiZWwpLHMoITApKSxhLmVsYXBzZWQodGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9uV2F0Y2hMYWJlbCk+PWF0JiYoY2xlYXJJbnRlcnZhbChvKSxhLnN0b3AodGhpcy5wZW5kaW5nU3Vic2NyaXB0aW9uV2F0Y2hMYWJlbCksbighMSkpfSx0aGlzLnBvbGxpbmdJbnRlcnZhbCl9KSx0aGlzLm9uPShpLHMpPT57dGhpcy5ldmVudHMub24oaSxzKX0sdGhpcy5vbmNlPShpLHMpPT57dGhpcy5ldmVudHMub25jZShpLHMpfSx0aGlzLm9mZj0oaSxzKT0+e3RoaXMuZXZlbnRzLm9mZihpLHMpfSx0aGlzLnJlbW92ZUxpc3RlbmVyPShpLHMpPT57dGhpcy5ldmVudHMucmVtb3ZlTGlzdGVuZXIoaSxzKX0sdGhpcy5yZXN0YXJ0PWFzeW5jKCk9Pnt0aGlzLnJlc3RhcnRJblByb2dyZXNzPSEwLGF3YWl0IHRoaXMucmVzdG9yZSgpLGF3YWl0IHRoaXMucmVzZXQoKSx0aGlzLnJlc3RhcnRJblByb2dyZXNzPSExfSx0aGlzLnJlbGF5ZXI9ZSx0aGlzLmxvZ2dlcj13KHQsdGhpcy5uYW1lKSx0aGlzLmNsaWVudElkPVwiXCJ9Z2V0IGNvbnRleHQoKXtyZXR1cm4gdih0aGlzLmxvZ2dlcil9Z2V0IHN0b3JhZ2VLZXkoKXtyZXR1cm4gdGhpcy5zdG9yYWdlUHJlZml4K3RoaXMudmVyc2lvbitcIi8vXCIrdGhpcy5uYW1lfWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLnNpemV9Z2V0IGlkcygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuc3Vic2NyaXB0aW9ucy5rZXlzKCkpfWdldCB2YWx1ZXMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnN1YnNjcmlwdGlvbnMudmFsdWVzKCkpfWdldCB0b3BpY3MoKXtyZXR1cm4gdGhpcy50b3BpY01hcC50b3BpY3N9aGFzU3Vic2NyaXB0aW9uKGUsdCl7bGV0IGk9ITE7dHJ5e2k9dGhpcy5nZXRTdWJzY3JpcHRpb24oZSkudG9waWM9PT10fWNhdGNoe31yZXR1cm4gaX1vbkVuYWJsZSgpe3RoaXMuY2FjaGVkPVtdLHRoaXMuaW5pdGlhbGl6ZWQ9ITB9b25EaXNhYmxlKCl7dGhpcy5jYWNoZWQ9dGhpcy52YWx1ZXMsdGhpcy5zdWJzY3JpcHRpb25zLmNsZWFyKCksdGhpcy50b3BpY01hcC5jbGVhcigpfWFzeW5jIHVuc3Vic2NyaWJlQnlUb3BpYyhlLHQpe2NvbnN0IGk9dGhpcy50b3BpY01hcC5nZXQoZSk7YXdhaXQgUHJvbWlzZS5hbGwoaS5tYXAoYXN5bmMgcz0+YXdhaXQgdGhpcy51bnN1YnNjcmliZUJ5SWQoZSxzLHQpKSl9YXN5bmMgdW5zdWJzY3JpYmVCeUlkKGUsdCxpKXt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlVuc3Vic2NyaWJpbmcgVG9waWNcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJ1bnN1YnNjcmliZVwiLHBhcmFtczp7dG9waWM6ZSxpZDp0LG9wdHM6aX19KTt0cnl7Y29uc3Qgcz1XKGkpO2F3YWl0IHRoaXMucnBjVW5zdWJzY3JpYmUoZSx0LHMpO2NvbnN0IG49TChcIlVTRVJfRElTQ09OTkVDVEVEXCIsYCR7dGhpcy5uYW1lfSwgJHtlfWApO2F3YWl0IHRoaXMub25VbnN1YnNjcmliZShlLHQsbiksdGhpcy5sb2dnZXIuZGVidWcoXCJTdWNjZXNzZnVsbHkgVW5zdWJzY3JpYmVkIFRvcGljXCIpLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwidW5zdWJzY3JpYmVcIixwYXJhbXM6e3RvcGljOmUsaWQ6dCxvcHRzOml9fSl9Y2F0Y2gocyl7dGhyb3cgdGhpcy5sb2dnZXIuZGVidWcoXCJGYWlsZWQgdG8gVW5zdWJzY3JpYmUgVG9waWNcIiksdGhpcy5sb2dnZXIuZXJyb3Iocyksc319YXN5bmMgcnBjU3Vic2NyaWJlKGUsdCl7Y29uc3QgaT17bWV0aG9kOlYodC5wcm90b2NvbCkuc3Vic2NyaWJlLHBhcmFtczp7dG9waWM6ZX19O3RoaXMubG9nZ2VyLmRlYnVnKFwiT3V0Z29pbmcgUmVsYXkgUGF5bG9hZFwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcInBheWxvYWRcIixkaXJlY3Rpb246XCJvdXRnb2luZ1wiLHJlcXVlc3Q6aX0pO3RyeXthd2FpdCBhd2FpdCBqKHRoaXMucmVsYXllci5yZXF1ZXN0KGkpLHRoaXMuc3Vic2NyaWJlVGltZW91dCl9Y2F0Y2h7dGhpcy5sb2dnZXIuZGVidWcoXCJPdXRnb2luZyBSZWxheSBTdWJzY3JpYmUgUGF5bG9hZCBzdGFsbGVkXCIpLHRoaXMucmVsYXllci5ldmVudHMuZW1pdChELmNvbm5lY3Rpb25fc3RhbGxlZCl9cmV0dXJuIEIoZSt0aGlzLmNsaWVudElkKX1hc3luYyBycGNCYXRjaFN1YnNjcmliZShlKXtpZighZS5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9ZVswXS5yZWxheSxpPXttZXRob2Q6Vih0LnByb3RvY29sKS5iYXRjaFN1YnNjcmliZSxwYXJhbXM6e3RvcGljczplLm1hcChzPT5zLnRvcGljKX19O3RoaXMubG9nZ2VyLmRlYnVnKFwiT3V0Z29pbmcgUmVsYXkgUGF5bG9hZFwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcInBheWxvYWRcIixkaXJlY3Rpb246XCJvdXRnb2luZ1wiLHJlcXVlc3Q6aX0pO3RyeXtyZXR1cm4gYXdhaXQgYXdhaXQgaih0aGlzLnJlbGF5ZXIucmVxdWVzdChpKSx0aGlzLnN1YnNjcmliZVRpbWVvdXQpfWNhdGNoe3RoaXMubG9nZ2VyLmRlYnVnKFwiT3V0Z29pbmcgUmVsYXkgUGF5bG9hZCBzdGFsbGVkXCIpLHRoaXMucmVsYXllci5ldmVudHMuZW1pdChELmNvbm5lY3Rpb25fc3RhbGxlZCl9fXJwY1Vuc3Vic2NyaWJlKGUsdCxpKXtjb25zdCBzPXttZXRob2Q6VihpLnByb3RvY29sKS51bnN1YnNjcmliZSxwYXJhbXM6e3RvcGljOmUsaWQ6dH19O3JldHVybiB0aGlzLmxvZ2dlci5kZWJ1ZyhcIk91dGdvaW5nIFJlbGF5IFBheWxvYWRcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJwYXlsb2FkXCIsZGlyZWN0aW9uOlwib3V0Z29pbmdcIixyZXF1ZXN0OnN9KSx0aGlzLnJlbGF5ZXIucmVxdWVzdChzKX1vblN1YnNjcmliZShlLHQpe3RoaXMuc2V0U3Vic2NyaXB0aW9uKGUsY2UoJCh7fSx0KSx7aWQ6ZX0pKSx0aGlzLnBlbmRpbmcuZGVsZXRlKHQudG9waWMpfW9uQmF0Y2hTdWJzY3JpYmUoZSl7ZS5sZW5ndGgmJmUuZm9yRWFjaCh0PT57dGhpcy5zZXRTdWJzY3JpcHRpb24odC5pZCwkKHt9LHQpKSx0aGlzLnBlbmRpbmcuZGVsZXRlKHQudG9waWMpfSl9YXN5bmMgb25VbnN1YnNjcmliZShlLHQsaSl7dGhpcy5ldmVudHMucmVtb3ZlQWxsTGlzdGVuZXJzKHQpLHRoaXMuaGFzU3Vic2NyaXB0aW9uKHQsZSkmJnRoaXMuZGVsZXRlU3Vic2NyaXB0aW9uKHQsaSksYXdhaXQgdGhpcy5yZWxheWVyLm1lc3NhZ2VzLmRlbChlKX1hc3luYyBzZXRSZWxheWVyU3Vic2NyaXB0aW9ucyhlKXthd2FpdCB0aGlzLnJlbGF5ZXIuY29yZS5zdG9yYWdlLnNldEl0ZW0odGhpcy5zdG9yYWdlS2V5LGUpfWFzeW5jIGdldFJlbGF5ZXJTdWJzY3JpcHRpb25zKCl7cmV0dXJuIGF3YWl0IHRoaXMucmVsYXllci5jb3JlLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXkpfXNldFN1YnNjcmlwdGlvbihlLHQpe3RoaXMuc3Vic2NyaXB0aW9ucy5oYXMoZSl8fCh0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNldHRpbmcgc3Vic2NyaXB0aW9uXCIpLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwic2V0U3Vic2NyaXB0aW9uXCIsaWQ6ZSxzdWJzY3JpcHRpb246dH0pLHRoaXMuYWRkU3Vic2NyaXB0aW9uKGUsdCkpfWFkZFN1YnNjcmlwdGlvbihlLHQpe3RoaXMuc3Vic2NyaXB0aW9ucy5zZXQoZSwkKHt9LHQpKSx0aGlzLnRvcGljTWFwLnNldCh0LnRvcGljLGUpLHRoaXMuZXZlbnRzLmVtaXQoSS5jcmVhdGVkLHQpfWdldFN1YnNjcmlwdGlvbihlKXt0aGlzLmxvZ2dlci5kZWJ1ZyhcIkdldHRpbmcgc3Vic2NyaXB0aW9uXCIpLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwiZ2V0U3Vic2NyaXB0aW9uXCIsaWQ6ZX0pO2NvbnN0IHQ9dGhpcy5zdWJzY3JpcHRpb25zLmdldChlKTtpZighdCl7Y29uc3R7bWVzc2FnZTppfT1jKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYCR7dGhpcy5uYW1lfTogJHtlfWApO3Rocm93IG5ldyBFcnJvcihpKX1yZXR1cm4gdH1kZWxldGVTdWJzY3JpcHRpb24oZSx0KXt0aGlzLmxvZ2dlci5kZWJ1ZyhcIkRlbGV0aW5nIHN1YnNjcmlwdGlvblwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcImRlbGV0ZVN1YnNjcmlwdGlvblwiLGlkOmUscmVhc29uOnR9KTtjb25zdCBpPXRoaXMuZ2V0U3Vic2NyaXB0aW9uKGUpO3RoaXMuc3Vic2NyaXB0aW9ucy5kZWxldGUoZSksdGhpcy50b3BpY01hcC5kZWxldGUoaS50b3BpYyxlKSx0aGlzLmV2ZW50cy5lbWl0KEkuZGVsZXRlZCxjZSgkKHt9LGkpLHtyZWFzb246dH0pKX1hc3luYyBwZXJzaXN0KCl7YXdhaXQgdGhpcy5zZXRSZWxheWVyU3Vic2NyaXB0aW9ucyh0aGlzLnZhbHVlcyksdGhpcy5ldmVudHMuZW1pdChJLnN5bmMpfWFzeW5jIHJlc2V0KCl7aWYoIXRoaXMuY2FjaGVkLmxlbmd0aClyZXR1cm47Y29uc3QgZT1NYXRoLmNlaWwodGhpcy5jYWNoZWQubGVuZ3RoL3RoaXMuYmF0Y2hTdWJzY3JpYmVUb3BpY3NMaW1pdCk7Zm9yKGxldCB0PTA7dDxlO3QrKyl7Y29uc3QgaT10aGlzLmNhY2hlZC5zcGxpY2UoMCx0aGlzLmJhdGNoU3Vic2NyaWJlVG9waWNzTGltaXQpO2F3YWl0IHRoaXMuYmF0Y2hTdWJzY3JpYmUoaSl9dGhpcy5ldmVudHMuZW1pdChJLnJlc3Vic2NyaWJlZCl9YXN5bmMgcmVzdG9yZSgpe3RyeXtjb25zdCBlPWF3YWl0IHRoaXMuZ2V0UmVsYXllclN1YnNjcmlwdGlvbnMoKTtpZih0eXBlb2YgZT5cInVcInx8IWUubGVuZ3RoKXJldHVybjtpZih0aGlzLnN1YnNjcmlwdGlvbnMuc2l6ZSl7Y29uc3R7bWVzc2FnZTp0fT1jKFwiUkVTVE9SRV9XSUxMX09WRVJSSURFXCIsdGhpcy5uYW1lKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSx0aGlzLmxvZ2dlci5lcnJvcihgJHt0aGlzLm5hbWV9OiAke0pTT04uc3RyaW5naWZ5KHRoaXMudmFsdWVzKX1gKSxuZXcgRXJyb3IodCl9dGhpcy5jYWNoZWQ9ZSx0aGlzLmxvZ2dlci5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IFJlc3RvcmVkIHN1YnNjcmlwdGlvbnMgZm9yICR7dGhpcy5uYW1lfWApLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwicmVzdG9yZVwiLHN1YnNjcmlwdGlvbnM6dGhpcy52YWx1ZXN9KX1jYXRjaChlKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIFJlc3RvcmUgc3Vic2NyaXB0aW9ucyBmb3IgJHt0aGlzLm5hbWV9YCksdGhpcy5sb2dnZXIuZXJyb3IoZSl9fWFzeW5jIGJhdGNoU3Vic2NyaWJlKGUpe2lmKCFlLmxlbmd0aClyZXR1cm47Y29uc3QgdD1hd2FpdCB0aGlzLnJwY0JhdGNoU3Vic2NyaWJlKGUpO2VpKHQpJiZ0aGlzLm9uQmF0Y2hTdWJzY3JpYmUodC5tYXAoKGkscyk9PmNlKCQoe30sZVtzXSkse2lkOml9KSkpfWFzeW5jIG9uQ29ubmVjdCgpe3RoaXMucmVzdGFydEluUHJvZ3Jlc3N8fChhd2FpdCB0aGlzLnJlc3RhcnQoKSx0aGlzLm9uRW5hYmxlKCkpfW9uRGlzY29ubmVjdCgpe3RoaXMub25EaXNhYmxlKCl9YXN5bmMgY2hlY2tQZW5kaW5nKCl7aWYodGhpcy5yZWxheWVyLnRyYW5zcG9ydEV4cGxpY2l0bHlDbG9zZWQpcmV0dXJuO2NvbnN0IGU9W107dGhpcy5wZW5kaW5nLmZvckVhY2godD0+e2UucHVzaCh0KX0pLGF3YWl0IHRoaXMuYmF0Y2hTdWJzY3JpYmUoZSl9cmVnaXN0ZXJFdmVudExpc3RlbmVycygpe3RoaXMucmVsYXllci5jb3JlLmhlYXJ0YmVhdC5vbihILnB1bHNlLGFzeW5jKCk9Pnthd2FpdCB0aGlzLmNoZWNrUGVuZGluZygpfSksdGhpcy5yZWxheWVyLm9uKEQuY29ubmVjdCxhc3luYygpPT57YXdhaXQgdGhpcy5vbkNvbm5lY3QoKX0pLHRoaXMucmVsYXllci5vbihELmRpc2Nvbm5lY3QsKCk9Pnt0aGlzLm9uRGlzY29ubmVjdCgpfSksdGhpcy5ldmVudHMub24oSS5jcmVhdGVkLGFzeW5jIGU9Pntjb25zdCB0PUkuY3JlYXRlZDt0aGlzLmxvZ2dlci5pbmZvKGBFbWl0dGluZyAke3R9YCksdGhpcy5sb2dnZXIuZGVidWcoe3R5cGU6XCJldmVudFwiLGV2ZW50OnQsZGF0YTplfSksYXdhaXQgdGhpcy5wZXJzaXN0KCl9KSx0aGlzLmV2ZW50cy5vbihJLmRlbGV0ZWQsYXN5bmMgZT0+e2NvbnN0IHQ9SS5kZWxldGVkO3RoaXMubG9nZ2VyLmluZm8oYEVtaXR0aW5nICR7dH1gKSx0aGlzLmxvZ2dlci5kZWJ1Zyh7dHlwZTpcImV2ZW50XCIsZXZlbnQ6dCxkYXRhOmV9KSxhd2FpdCB0aGlzLnBlcnNpc3QoKX0pfWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3IoZSl9fWFzeW5jIHJlc3RhcnRUb0NvbXBsZXRlKCl7dGhpcy5yZXN0YXJ0SW5Qcm9ncmVzcyYmYXdhaXQgbmV3IFByb21pc2UoZT0+e2NvbnN0IHQ9c2V0SW50ZXJ2YWwoKCk9Pnt0aGlzLnJlc3RhcnRJblByb2dyZXNzfHwoY2xlYXJJbnRlcnZhbCh0KSxlKCkpfSx0aGlzLnBvbGxpbmdJbnRlcnZhbCl9KX19dmFyIG5yPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxFdD1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLGFyPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksb3I9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxmdD0ocixlLHQpPT5lIGluIHI/bnIocixlLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6cltlXT10LGhyPShyLGUpPT57Zm9yKHZhciB0IGluIGV8fChlPXt9KSlhci5jYWxsKGUsdCkmJmZ0KHIsdCxlW3RdKTtpZihFdClmb3IodmFyIHQgb2YgRXQoZSkpb3IuY2FsbChlLHQpJiZmdChyLHQsZVt0XSk7cmV0dXJuIHJ9O2NsYXNzIHd0IGV4dGVuZHMgTXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5wcm90b2NvbD1cIndjXCIsdGhpcy52ZXJzaW9uPTIsdGhpcy5ldmVudHM9bmV3IEEsdGhpcy5uYW1lPVFlLHRoaXMudHJhbnNwb3J0RXhwbGljaXRseUNsb3NlZD0hMSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMucmVjb25uZWN0aW5nPSExLHRoaXMuY29ubmVjdGlvblN0YXR1c1BvbGxpbmdJbnRlcnZhbD0yMCx0aGlzLnN0YWxlQ29ubmVjdGlvbkVycm9ycz1bXCJzb2NrZXQgaGFuZyB1cFwiLFwic29ja2V0IHN0YWxsZWRcIl0sdGhpcy5yZXF1ZXN0PWFzeW5jIHQ9Pnt0aGlzLmxvZ2dlci5kZWJ1ZyhcIlB1Ymxpc2hpbmcgUmVxdWVzdCBQYXlsb2FkXCIpO3RyeXtyZXR1cm4gYXdhaXQgdGhpcy50b0VzdGFibGlzaENvbm5lY3Rpb24oKSxhd2FpdCB0aGlzLnByb3ZpZGVyLnJlcXVlc3QodCl9Y2F0Y2goaSl7dGhyb3cgdGhpcy5sb2dnZXIuZGVidWcoXCJGYWlsZWQgdG8gUHVibGlzaCBSZXF1ZXN0XCIpLHRoaXMubG9nZ2VyLmVycm9yKGkpLGl9fSx0aGlzLmNvcmU9ZS5jb3JlLHRoaXMubG9nZ2VyPXR5cGVvZiBlLmxvZ2dlcjxcInVcIiYmdHlwZW9mIGUubG9nZ2VyIT1cInN0cmluZ1wiP3coZS5sb2dnZXIsdGhpcy5uYW1lKTp1ZShsZSh7bGV2ZWw6ZS5sb2dnZXJ8fFplfSkpLHRoaXMubWVzc2FnZXM9bmV3IER0KHRoaXMubG9nZ2VyLGUuY29yZSksdGhpcy5zdWJzY3JpYmVyPW5ldyBtdCh0aGlzLHRoaXMubG9nZ2VyKSx0aGlzLnB1Ymxpc2hlcj1uZXcgWnModGhpcyx0aGlzLmxvZ2dlciksdGhpcy5yZWxheVVybD1lPy5yZWxheVVybHx8aGUsdGhpcy5wcm9qZWN0SWQ9ZS5wcm9qZWN0SWQsdGhpcy5wcm92aWRlcj17fX1hc3luYyBpbml0KCl7dGhpcy5sb2dnZXIudHJhY2UoXCJJbml0aWFsaXplZFwiKSxhd2FpdCB0aGlzLmNyZWF0ZVByb3ZpZGVyKCksYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMubWVzc2FnZXMuaW5pdCgpLHRoaXMudHJhbnNwb3J0T3BlbigpLHRoaXMuc3Vic2NyaWJlci5pbml0KCldKSx0aGlzLnJlZ2lzdGVyRXZlbnRMaXN0ZW5lcnMoKSx0aGlzLmluaXRpYWxpemVkPSEwfWdldCBjb250ZXh0KCl7cmV0dXJuIHYodGhpcy5sb2dnZXIpfWdldCBjb25uZWN0ZWQoKXtyZXR1cm4gdGhpcy5wcm92aWRlci5jb25uZWN0aW9uLmNvbm5lY3RlZH1nZXQgY29ubmVjdGluZygpe3JldHVybiB0aGlzLnByb3ZpZGVyLmNvbm5lY3Rpb24uY29ubmVjdGluZ31hc3luYyBwdWJsaXNoKGUsdCxpKXt0aGlzLmlzSW5pdGlhbGl6ZWQoKSxhd2FpdCB0aGlzLnB1Ymxpc2hlci5wdWJsaXNoKGUsdCxpKSxhd2FpdCB0aGlzLnJlY29yZE1lc3NhZ2VFdmVudCh7dG9waWM6ZSxtZXNzYWdlOnQscHVibGlzaGVkQXQ6RGF0ZS5ub3coKX0pfWFzeW5jIHN1YnNjcmliZShlLHQpe3RoaXMuaXNJbml0aWFsaXplZCgpO2xldCBpPVwiXCI7cmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKFtuZXcgUHJvbWlzZShzPT57dGhpcy5zdWJzY3JpYmVyLm9uY2UoSS5jcmVhdGVkLG49PntuLnRvcGljPT09ZSYmcygpfSl9KSxuZXcgUHJvbWlzZShhc3luYyBzPT57aT1hd2FpdCB0aGlzLnN1YnNjcmliZXIuc3Vic2NyaWJlKGUsdCkscygpfSldKSxpfWFzeW5jIHVuc3Vic2NyaWJlKGUsdCl7dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5zdWJzY3JpYmVyLnVuc3Vic2NyaWJlKGUsdCl9b24oZSx0KXt0aGlzLmV2ZW50cy5vbihlLHQpfW9uY2UoZSx0KXt0aGlzLmV2ZW50cy5vbmNlKGUsdCl9b2ZmKGUsdCl7dGhpcy5ldmVudHMub2ZmKGUsdCl9cmVtb3ZlTGlzdGVuZXIoZSx0KXt0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihlLHQpfWFzeW5jIHRyYW5zcG9ydENsb3NlKCl7dGhpcy50cmFuc3BvcnRFeHBsaWNpdGx5Q2xvc2VkPSEwLHRoaXMuY29ubmVjdGVkJiYoYXdhaXQgdGhpcy5wcm92aWRlci5kaXNjb25uZWN0KCksdGhpcy5ldmVudHMuZW1pdChELnRyYW5zcG9ydF9jbG9zZWQpKX1hc3luYyB0cmFuc3BvcnRPcGVuKGUpe2lmKCF0aGlzLnJlY29ubmVjdGluZyl7dGhpcy5yZWxheVVybD1lfHx0aGlzLnJlbGF5VXJsLHRoaXMudHJhbnNwb3J0RXhwbGljaXRseUNsb3NlZD0hMSx0aGlzLnJlY29ubmVjdGluZz0hMDt0cnl7YXdhaXQgUHJvbWlzZS5hbGwoW25ldyBQcm9taXNlKHQ9Pnt0aGlzLmluaXRpYWxpemVkfHx0KCksdGhpcy5zdWJzY3JpYmVyLm9uY2UoSS5yZXN1YnNjcmliZWQsKCk9Pnt0KCl9KX0pLGF3YWl0IFByb21pc2UucmFjZShbbmV3IFByb21pc2UoYXN5bmModCxpKT0+e2F3YWl0IGoodGhpcy5wcm92aWRlci5jb25uZWN0KCksNWUzLFwic29ja2V0IHN0YWxsZWRcIikuY2F0Y2gocz0+aShzKSkudGhlbigoKT0+dCgpKS5maW5hbGx5KCgpPT50aGlzLnJlbW92ZUxpc3RlbmVyKEQudHJhbnNwb3J0X2Nsb3NlZCx0aGlzLnJlamVjdFRyYW5zcG9ydE9wZW4pKX0pLG5ldyBQcm9taXNlKHQ9PnRoaXMub25jZShELnRyYW5zcG9ydF9jbG9zZWQsdGhpcy5yZWplY3RUcmFuc3BvcnRPcGVuKSldKV0pfWNhdGNoKHQpe3RoaXMubG9nZ2VyLmVycm9yKHQpO2NvbnN0IGk9dDtpZighdGhpcy5pc0Nvbm5lY3Rpb25TdGFsbGVkKGkubWVzc2FnZSkpdGhyb3cgdDt0aGlzLmV2ZW50cy5lbWl0KEQudHJhbnNwb3J0X2Nsb3NlZCl9ZmluYWxseXt0aGlzLnJlY29ubmVjdGluZz0hMX19fWFzeW5jIHJlc3RhcnRUcmFuc3BvcnQoZSl7dGhpcy50cmFuc3BvcnRFeHBsaWNpdGx5Q2xvc2VkfHwodGhpcy5yZWxheVVybD1lfHx0aGlzLnJlbGF5VXJsLGF3YWl0IHRoaXMudHJhbnNwb3J0Q2xvc2UoKSxhd2FpdCB0aGlzLmNyZWF0ZVByb3ZpZGVyKCksYXdhaXQgdGhpcy50cmFuc3BvcnRPcGVuKCkpfWlzQ29ubmVjdGlvblN0YWxsZWQoZSl7cmV0dXJuIHRoaXMuc3RhbGVDb25uZWN0aW9uRXJyb3JzLnNvbWUodD0+ZS5pbmNsdWRlcyh0KSl9cmVqZWN0VHJhbnNwb3J0T3Blbigpe3Rocm93IG5ldyBFcnJvcihcImNsb3NlVHJhbnNwb3J0IGNhbGxlZCBiZWZvcmUgY29ubmVjdGlvbiB3YXMgZXN0YWJsaXNoZWRcIil9YXN5bmMgY3JlYXRlUHJvdmlkZXIoKXtjb25zdCBlPWF3YWl0IHRoaXMuY29yZS5jcnlwdG8uc2lnbkpXVCh0aGlzLnJlbGF5VXJsKTt0aGlzLnByb3ZpZGVyPW5ldyBtaShuZXcgdmkodGkoe3Nka1ZlcnNpb246aXQscHJvdG9jb2w6dGhpcy5wcm90b2NvbCx2ZXJzaW9uOnRoaXMudmVyc2lvbixyZWxheVVybDp0aGlzLnJlbGF5VXJsLHByb2plY3RJZDp0aGlzLnByb2plY3RJZCxhdXRoOmUsdXNlT25DbG9zZUV2ZW50OiEwfSkpKSx0aGlzLnJlZ2lzdGVyUHJvdmlkZXJMaXN0ZW5lcnMoKX1hc3luYyByZWNvcmRNZXNzYWdlRXZlbnQoZSl7Y29uc3R7dG9waWM6dCxtZXNzYWdlOml9PWU7YXdhaXQgdGhpcy5tZXNzYWdlcy5zZXQodCxpKX1hc3luYyBzaG91bGRJZ25vcmVNZXNzYWdlRXZlbnQoZSl7Y29uc3R7dG9waWM6dCxtZXNzYWdlOml9PWU7cmV0dXJuIGF3YWl0IHRoaXMuc3Vic2NyaWJlci5pc1N1YnNjcmliZWQodCk/dGhpcy5tZXNzYWdlcy5oYXModCxpKTohMH1hc3luYyBvblByb3ZpZGVyUGF5bG9hZChlKXtpZih0aGlzLmxvZ2dlci5kZWJ1ZyhcIkluY29taW5nIFJlbGF5IFBheWxvYWRcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJwYXlsb2FkXCIsZGlyZWN0aW9uOlwiaW5jb21pbmdcIixwYXlsb2FkOmV9KSxmZShlKSl7aWYoIWUubWV0aG9kLmVuZHNXaXRoKGV0KSlyZXR1cm47Y29uc3QgdD1lLnBhcmFtcyx7dG9waWM6aSxtZXNzYWdlOnMscHVibGlzaGVkQXQ6bn09dC5kYXRhLGE9e3RvcGljOmksbWVzc2FnZTpzLHB1Ymxpc2hlZEF0Om59O3RoaXMubG9nZ2VyLmRlYnVnKFwiRW1pdHRpbmcgUmVsYXllciBQYXlsb2FkXCIpLHRoaXMubG9nZ2VyLnRyYWNlKGhyKHt0eXBlOlwiZXZlbnRcIixldmVudDp0LmlkfSxhKSksdGhpcy5ldmVudHMuZW1pdCh0LmlkLGEpLGF3YWl0IHRoaXMuYWNrbm93bGVkZ2VQYXlsb2FkKGUpLGF3YWl0IHRoaXMub25NZXNzYWdlRXZlbnQoYSl9fWFzeW5jIG9uTWVzc2FnZUV2ZW50KGUpe2F3YWl0IHRoaXMuc2hvdWxkSWdub3JlTWVzc2FnZUV2ZW50KGUpfHwodGhpcy5ldmVudHMuZW1pdChELm1lc3NhZ2UsZSksYXdhaXQgdGhpcy5yZWNvcmRNZXNzYWdlRXZlbnQoZSkpfWFzeW5jIGFja25vd2xlZGdlUGF5bG9hZChlKXtjb25zdCB0PXdlKGUuaWQsITApO2F3YWl0IHRoaXMucHJvdmlkZXIuY29ubmVjdGlvbi5zZW5kKHQpfXJlZ2lzdGVyUHJvdmlkZXJMaXN0ZW5lcnMoKXt0aGlzLnByb3ZpZGVyLm9uKE0ucGF5bG9hZCxlPT50aGlzLm9uUHJvdmlkZXJQYXlsb2FkKGUpKSx0aGlzLnByb3ZpZGVyLm9uKE0uY29ubmVjdCwoKT0+e3RoaXMuZXZlbnRzLmVtaXQoRC5jb25uZWN0KX0pLHRoaXMucHJvdmlkZXIub24oTS5kaXNjb25uZWN0LCgpPT57dGhpcy5vblByb3ZpZGVyRGlzY29ubmVjdCgpfSksdGhpcy5wcm92aWRlci5vbihNLmVycm9yLGU9Pnt0aGlzLmxvZ2dlci5lcnJvcihlKSx0aGlzLmV2ZW50cy5lbWl0KEQuZXJyb3IsZSl9KX1yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCl7dGhpcy5ldmVudHMub24oRC5jb25uZWN0aW9uX3N0YWxsZWQsYXN5bmMoKT0+e2F3YWl0IHRoaXMucmVzdGFydFRyYW5zcG9ydCgpfSl9b25Qcm92aWRlckRpc2Nvbm5lY3QoKXt0aGlzLmV2ZW50cy5lbWl0KEQuZGlzY29ubmVjdCksdGhpcy5hdHRlbXB0VG9SZWNvbm5lY3QoKX1hdHRlbXB0VG9SZWNvbm5lY3QoKXt0aGlzLnRyYW5zcG9ydEV4cGxpY2l0bHlDbG9zZWR8fHNldFRpbWVvdXQoYXN5bmMoKT0+e2F3YWl0IHRoaXMucmVzdGFydFRyYW5zcG9ydCgpfSxtZSh0dCkpfWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3IoZSl9fWFzeW5jIHRvRXN0YWJsaXNoQ29ubmVjdGlvbigpe2lmKCF0aGlzLmNvbm5lY3RlZCl7aWYodGhpcy5jb25uZWN0aW5nKXJldHVybiBhd2FpdCBuZXcgUHJvbWlzZShlPT57Y29uc3QgdD1zZXRJbnRlcnZhbCgoKT0+e3RoaXMuY29ubmVjdGVkJiYoY2xlYXJJbnRlcnZhbCh0KSxlKCkpfSx0aGlzLmNvbm5lY3Rpb25TdGF0dXNQb2xsaW5nSW50ZXJ2YWwpfSk7YXdhaXQgdGhpcy5yZXN0YXJ0VHJhbnNwb3J0KCl9fX12YXIgY3I9T2JqZWN0LmRlZmluZVByb3BlcnR5LHZ0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsdXI9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxscj1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLEl0PShyLGUsdCk9PmUgaW4gcj9jcihyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsQ3Q9KHIsZSk9Pntmb3IodmFyIHQgaW4gZXx8KGU9e30pKXVyLmNhbGwoZSx0KSYmSXQocix0LGVbdF0pO2lmKHZ0KWZvcih2YXIgdCBvZiB2dChlKSlsci5jYWxsKGUsdCkmJkl0KHIsdCxlW3RdKTtyZXR1cm4gcn07Y2xhc3MgX3QgZXh0ZW5kcyAkdHtjb25zdHJ1Y3RvcihlLHQsaSxzPVQsbj12b2lkIDApe3N1cGVyKGUsdCxpLHMpLHRoaXMuY29yZT1lLHRoaXMubG9nZ2VyPXQsdGhpcy5uYW1lPWksdGhpcy5tYXA9bmV3IE1hcCx0aGlzLnZlcnNpb249c3QsdGhpcy5jYWNoZWQ9W10sdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnN0b3JhZ2VQcmVmaXg9VCx0aGlzLmluaXQ9YXN5bmMoKT0+e3RoaXMuaW5pdGlhbGl6ZWR8fCh0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpLGF3YWl0IHRoaXMucmVzdG9yZSgpLHRoaXMuY2FjaGVkLmZvckVhY2goYT0+e3RoaXMuZ2V0S2V5JiZhIT09bnVsbCYmIVooYSk/dGhpcy5tYXAuc2V0KHRoaXMuZ2V0S2V5KGEpLGEpOmlpKGEpP3RoaXMubWFwLnNldChhLmlkLGEpOnNpKGEpJiZ0aGlzLm1hcC5zZXQoYS50b3BpYyxhKX0pLHRoaXMuY2FjaGVkPVtdLHRoaXMuaW5pdGlhbGl6ZWQ9ITApfSx0aGlzLnNldD1hc3luYyhhLG8pPT57dGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5tYXAuaGFzKGEpP2F3YWl0IHRoaXMudXBkYXRlKGEsbyk6KHRoaXMubG9nZ2VyLmRlYnVnKFwiU2V0dGluZyB2YWx1ZVwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcInNldFwiLGtleTphLHZhbHVlOm99KSx0aGlzLm1hcC5zZXQoYSxvKSxhd2FpdCB0aGlzLnBlcnNpc3QoKSl9LHRoaXMuZ2V0PWE9Pih0aGlzLmlzSW5pdGlhbGl6ZWQoKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIkdldHRpbmcgdmFsdWVcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJnZXRcIixrZXk6YX0pLHRoaXMuZ2V0RGF0YShhKSksdGhpcy5nZXRBbGw9YT0+KHRoaXMuaXNJbml0aWFsaXplZCgpLGE/dGhpcy52YWx1ZXMuZmlsdGVyKG89Pk9iamVjdC5rZXlzKGEpLmV2ZXJ5KGg9PklpKG9baF0sYVtoXSkpKTp0aGlzLnZhbHVlcyksdGhpcy51cGRhdGU9YXN5bmMoYSxvKT0+e3RoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMubG9nZ2VyLmRlYnVnKFwiVXBkYXRpbmcgdmFsdWVcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJ1cGRhdGVcIixrZXk6YSx1cGRhdGU6b30pO2NvbnN0IGg9Q3QoQ3Qoe30sdGhpcy5nZXREYXRhKGEpKSxvKTt0aGlzLm1hcC5zZXQoYSxoKSxhd2FpdCB0aGlzLnBlcnNpc3QoKX0sdGhpcy5kZWxldGU9YXN5bmMoYSxvKT0+e3RoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMubWFwLmhhcyhhKSYmKHRoaXMubG9nZ2VyLmRlYnVnKFwiRGVsZXRpbmcgdmFsdWVcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJkZWxldGVcIixrZXk6YSxyZWFzb246b30pLHRoaXMubWFwLmRlbGV0ZShhKSxhd2FpdCB0aGlzLnBlcnNpc3QoKSl9LHRoaXMubG9nZ2VyPXcodCx0aGlzLm5hbWUpLHRoaXMuc3RvcmFnZVByZWZpeD1zLHRoaXMuZ2V0S2V5PW59Z2V0IGNvbnRleHQoKXtyZXR1cm4gdih0aGlzLmxvZ2dlcil9Z2V0IHN0b3JhZ2VLZXkoKXtyZXR1cm4gdGhpcy5zdG9yYWdlUHJlZml4K3RoaXMudmVyc2lvbitcIi8vXCIrdGhpcy5uYW1lfWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5tYXAuc2l6ZX1nZXQga2V5cygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMubWFwLmtleXMoKSl9Z2V0IHZhbHVlcygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMubWFwLnZhbHVlcygpKX1hc3luYyBzZXREYXRhU3RvcmUoZSl7YXdhaXQgdGhpcy5jb3JlLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXksZSl9YXN5bmMgZ2V0RGF0YVN0b3JlKCl7cmV0dXJuIGF3YWl0IHRoaXMuY29yZS5zdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yYWdlS2V5KX1nZXREYXRhKGUpe2NvbnN0IHQ9dGhpcy5tYXAuZ2V0KGUpO2lmKCF0KXtjb25zdHttZXNzYWdlOml9PWMoXCJOT19NQVRDSElOR19LRVlcIixgJHt0aGlzLm5hbWV9OiAke2V9YCk7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IoaSksbmV3IEVycm9yKGkpfXJldHVybiB0fWFzeW5jIHBlcnNpc3QoKXthd2FpdCB0aGlzLnNldERhdGFTdG9yZSh0aGlzLnZhbHVlcyl9YXN5bmMgcmVzdG9yZSgpe3RyeXtjb25zdCBlPWF3YWl0IHRoaXMuZ2V0RGF0YVN0b3JlKCk7aWYodHlwZW9mIGU+XCJ1XCJ8fCFlLmxlbmd0aClyZXR1cm47aWYodGhpcy5tYXAuc2l6ZSl7Y29uc3R7bWVzc2FnZTp0fT1jKFwiUkVTVE9SRV9XSUxMX09WRVJSSURFXCIsdGhpcy5uYW1lKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcih0KSxuZXcgRXJyb3IodCl9dGhpcy5jYWNoZWQ9ZSx0aGlzLmxvZ2dlci5kZWJ1ZyhgU3VjY2Vzc2Z1bGx5IFJlc3RvcmVkIHZhbHVlIGZvciAke3RoaXMubmFtZX1gKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcInJlc3RvcmVcIix2YWx1ZTp0aGlzLnZhbHVlc30pfWNhdGNoKGUpe3RoaXMubG9nZ2VyLmRlYnVnKGBGYWlsZWQgdG8gUmVzdG9yZSB2YWx1ZSBmb3IgJHt0aGlzLm5hbWV9YCksdGhpcy5sb2dnZXIuZXJyb3IoZSl9fWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3IoZSl9fX1jbGFzcyBSdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuY29yZT1lLHRoaXMubG9nZ2VyPXQsdGhpcy5uYW1lPW90LHRoaXMudmVyc2lvbj1odCx0aGlzLmV2ZW50cz1uZXcgQXQsdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnN0b3JhZ2VQcmVmaXg9VCx0aGlzLmlnbm9yZWRQYXlsb2FkVHlwZXM9W3JpXSx0aGlzLnJlZ2lzdGVyZWRNZXRob2RzPVtdLHRoaXMuaW5pdD1hc3luYygpPT57dGhpcy5pbml0aWFsaXplZHx8KGF3YWl0IHRoaXMucGFpcmluZ3MuaW5pdCgpLGF3YWl0IHRoaXMuY2xlYW51cCgpLHRoaXMucmVnaXN0ZXJSZWxheWVyRXZlbnRzKCksdGhpcy5yZWdpc3RlckV4cGlyZXJFdmVudHMoKSx0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMubG9nZ2VyLnRyYWNlKFwiSW5pdGlhbGl6ZWRcIikpfSx0aGlzLnJlZ2lzdGVyPSh7bWV0aG9kczppfSk9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKSx0aGlzLnJlZ2lzdGVyZWRNZXRob2RzPVsuLi5uZXcgU2V0KFsuLi50aGlzLnJlZ2lzdGVyZWRNZXRob2RzLC4uLmldKV19LHRoaXMuY3JlYXRlPWFzeW5jKCk9Pnt0aGlzLmlzSW5pdGlhbGl6ZWQoKTtjb25zdCBpPVgoKSxzPWF3YWl0IHRoaXMuY29yZS5jcnlwdG8uc2V0U3ltS2V5KGkpLG49UShFZSksYT17cHJvdG9jb2w6V2V9LG89e3RvcGljOnMsZXhwaXJ5Om4scmVsYXk6YSxhY3RpdmU6ITF9LGg9bmkoe3Byb3RvY29sOnRoaXMuY29yZS5wcm90b2NvbCx2ZXJzaW9uOnRoaXMuY29yZS52ZXJzaW9uLHRvcGljOnMsc3ltS2V5OmkscmVsYXk6YX0pO3JldHVybiBhd2FpdCB0aGlzLnBhaXJpbmdzLnNldChzLG8pLGF3YWl0IHRoaXMuY29yZS5yZWxheWVyLnN1YnNjcmliZShzKSx0aGlzLmNvcmUuZXhwaXJlci5zZXQocyxuKSx7dG9waWM6cyx1cmk6aH19LHRoaXMucGFpcj1hc3luYyBpPT57dGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5pc1ZhbGlkUGFpcihpKTtjb25zdHt0b3BpYzpzLHN5bUtleTpuLHJlbGF5OmF9PWFpKGkudXJpKTtpZih0aGlzLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMocykpdGhyb3cgbmV3IEVycm9yKGBQYWlyaW5nIGFscmVhZHkgZXhpc3RzOiAke3N9YCk7aWYodGhpcy5jb3JlLmNyeXB0by5oYXNLZXlzKHMpKXRocm93IG5ldyBFcnJvcihgS2V5Y2hhaW4gYWxyZWFkeSBleGlzdHM6ICR7c31gKTtjb25zdCBvPVEoRWUpLGg9e3RvcGljOnMscmVsYXk6YSxleHBpcnk6byxhY3RpdmU6ITF9O3JldHVybiBhd2FpdCB0aGlzLnBhaXJpbmdzLnNldChzLGgpLGF3YWl0IHRoaXMuY29yZS5jcnlwdG8uc2V0U3ltS2V5KG4scyksYXdhaXQgdGhpcy5jb3JlLnJlbGF5ZXIuc3Vic2NyaWJlKHMse3JlbGF5OmF9KSx0aGlzLmNvcmUuZXhwaXJlci5zZXQocyxvKSxpLmFjdGl2YXRlUGFpcmluZyYmYXdhaXQgdGhpcy5hY3RpdmF0ZSh7dG9waWM6c30pLGh9LHRoaXMuYWN0aXZhdGU9YXN5bmMoe3RvcGljOml9KT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IHM9UShpZSk7YXdhaXQgdGhpcy5wYWlyaW5ncy51cGRhdGUoaSx7YWN0aXZlOiEwLGV4cGlyeTpzfSksdGhpcy5jb3JlLmV4cGlyZXIuc2V0KGkscyl9LHRoaXMucGluZz1hc3luYyBpPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5pc1ZhbGlkUGluZyhpKTtjb25zdHt0b3BpYzpzfT1pO2lmKHRoaXMucGFpcmluZ3Mua2V5cy5pbmNsdWRlcyhzKSl7Y29uc3Qgbj1hd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHMsXCJ3Y19wYWlyaW5nUGluZ1wiLHt9KSx7ZG9uZTphLHJlc29sdmU6byxyZWplY3Q6aH09b2koKTt0aGlzLmV2ZW50cy5vbmNlKGVlKFwicGFpcmluZ19waW5nXCIsbiksKHtlcnJvcjpkfSk9PntkP2goZCk6bygpfSksYXdhaXQgYSgpfX0sdGhpcy51cGRhdGVFeHBpcnk9YXN5bmMoe3RvcGljOmksZXhwaXJ5OnN9KT0+e3RoaXMuaXNJbml0aWFsaXplZCgpLGF3YWl0IHRoaXMucGFpcmluZ3MudXBkYXRlKGkse2V4cGlyeTpzfSl9LHRoaXMudXBkYXRlTWV0YWRhdGE9YXN5bmMoe3RvcGljOmksbWV0YWRhdGE6c30pPT57dGhpcy5pc0luaXRpYWxpemVkKCksYXdhaXQgdGhpcy5wYWlyaW5ncy51cGRhdGUoaSx7cGVlck1ldGFkYXRhOnN9KX0sdGhpcy5nZXRQYWlyaW5ncz0oKT0+KHRoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMucGFpcmluZ3MudmFsdWVzKSx0aGlzLmRpc2Nvbm5lY3Q9YXN5bmMgaT0+e3RoaXMuaXNJbml0aWFsaXplZCgpLGF3YWl0IHRoaXMuaXNWYWxpZERpc2Nvbm5lY3QoaSk7Y29uc3R7dG9waWM6c309aTt0aGlzLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMocykmJihhd2FpdCB0aGlzLnNlbmRSZXF1ZXN0KHMsXCJ3Y19wYWlyaW5nRGVsZXRlXCIsTChcIlVTRVJfRElTQ09OTkVDVEVEXCIpKSxhd2FpdCB0aGlzLmRlbGV0ZVBhaXJpbmcocykpfSx0aGlzLnNlbmRSZXF1ZXN0PWFzeW5jKGkscyxuKT0+e2NvbnN0IGE9dmUocyxuKSxvPWF3YWl0IHRoaXMuY29yZS5jcnlwdG8uZW5jb2RlKGksYSksaD1OW3NdLnJlcTtyZXR1cm4gdGhpcy5jb3JlLmhpc3Rvcnkuc2V0KGksYSksYXdhaXQgdGhpcy5jb3JlLnJlbGF5ZXIucHVibGlzaChpLG8saCksYS5pZH0sdGhpcy5zZW5kUmVzdWx0PWFzeW5jKGkscyxuKT0+e2NvbnN0IGE9d2UoaSxuKSxvPWF3YWl0IHRoaXMuY29yZS5jcnlwdG8uZW5jb2RlKHMsYSksaD1hd2FpdCB0aGlzLmNvcmUuaGlzdG9yeS5nZXQocyxpKSxkPU5baC5yZXF1ZXN0Lm1ldGhvZF0ucmVzO2F3YWl0IHRoaXMuY29yZS5yZWxheWVyLnB1Ymxpc2gocyxvLGQpLGF3YWl0IHRoaXMuY29yZS5oaXN0b3J5LnJlc29sdmUoYSl9LHRoaXMuc2VuZEVycm9yPWFzeW5jKGkscyxuKT0+e2NvbnN0IGE9RWkoaSxuKSxvPWF3YWl0IHRoaXMuY29yZS5jcnlwdG8uZW5jb2RlKHMsYSksaD1hd2FpdCB0aGlzLmNvcmUuaGlzdG9yeS5nZXQocyxpKSxkPU5baC5yZXF1ZXN0Lm1ldGhvZF0/TltoLnJlcXVlc3QubWV0aG9kXS5yZXM6Ti51bnJlZ2lzdGVyZWRfbWV0aG9kLnJlczthd2FpdCB0aGlzLmNvcmUucmVsYXllci5wdWJsaXNoKHMsbyxkKSxhd2FpdCB0aGlzLmNvcmUuaGlzdG9yeS5yZXNvbHZlKGEpfSx0aGlzLmRlbGV0ZVBhaXJpbmc9YXN5bmMoaSxzKT0+e2F3YWl0IHRoaXMuY29yZS5yZWxheWVyLnVuc3Vic2NyaWJlKGkpLGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnBhaXJpbmdzLmRlbGV0ZShpLEwoXCJVU0VSX0RJU0NPTk5FQ1RFRFwiKSksdGhpcy5jb3JlLmNyeXB0by5kZWxldGVTeW1LZXkoaSkscz9Qcm9taXNlLnJlc29sdmUoKTp0aGlzLmNvcmUuZXhwaXJlci5kZWwoaSldKX0sdGhpcy5jbGVhbnVwPWFzeW5jKCk9Pntjb25zdCBpPXRoaXMucGFpcmluZ3MuZ2V0QWxsKCkuZmlsdGVyKHM9PnllKHMuZXhwaXJ5KSk7YXdhaXQgUHJvbWlzZS5hbGwoaS5tYXAocz0+dGhpcy5kZWxldGVQYWlyaW5nKHMudG9waWMpKSl9LHRoaXMub25SZWxheUV2ZW50UmVxdWVzdD1pPT57Y29uc3R7dG9waWM6cyxwYXlsb2FkOm59PWksYT1uLm1ldGhvZDtpZih0aGlzLnBhaXJpbmdzLmtleXMuaW5jbHVkZXMocykpc3dpdGNoKGEpe2Nhc2VcIndjX3BhaXJpbmdQaW5nXCI6cmV0dXJuIHRoaXMub25QYWlyaW5nUGluZ1JlcXVlc3QocyxuKTtjYXNlXCJ3Y19wYWlyaW5nRGVsZXRlXCI6cmV0dXJuIHRoaXMub25QYWlyaW5nRGVsZXRlUmVxdWVzdChzLG4pO2RlZmF1bHQ6cmV0dXJuIHRoaXMub25Vbmtub3duUnBjTWV0aG9kUmVxdWVzdChzLG4pfX0sdGhpcy5vblJlbGF5RXZlbnRSZXNwb25zZT1hc3luYyBpPT57Y29uc3R7dG9waWM6cyxwYXlsb2FkOm59PWksYT0oYXdhaXQgdGhpcy5jb3JlLmhpc3RvcnkuZ2V0KHMsbi5pZCkpLnJlcXVlc3QubWV0aG9kO2lmKHRoaXMucGFpcmluZ3Mua2V5cy5pbmNsdWRlcyhzKSlzd2l0Y2goYSl7Y2FzZVwid2NfcGFpcmluZ1BpbmdcIjpyZXR1cm4gdGhpcy5vblBhaXJpbmdQaW5nUmVzcG9uc2UocyxuKTtkZWZhdWx0OnJldHVybiB0aGlzLm9uVW5rbm93blJwY01ldGhvZFJlc3BvbnNlKGEpfX0sdGhpcy5vblBhaXJpbmdQaW5nUmVxdWVzdD1hc3luYyhpLHMpPT57Y29uc3R7aWQ6bn09czt0cnl7dGhpcy5pc1ZhbGlkUGluZyh7dG9waWM6aX0pLGF3YWl0IHRoaXMuc2VuZFJlc3VsdChuLGksITApLHRoaXMuZXZlbnRzLmVtaXQoXCJwYWlyaW5nX3BpbmdcIix7aWQ6bix0b3BpYzppfSl9Y2F0Y2goYSl7YXdhaXQgdGhpcy5zZW5kRXJyb3IobixpLGEpLHRoaXMubG9nZ2VyLmVycm9yKGEpfX0sdGhpcy5vblBhaXJpbmdQaW5nUmVzcG9uc2U9KGkscyk9Pntjb25zdHtpZDpufT1zO3NldFRpbWVvdXQoKCk9PntmaShzKT90aGlzLmV2ZW50cy5lbWl0KGVlKFwicGFpcmluZ19waW5nXCIsbikse30pOkllKHMpJiZ0aGlzLmV2ZW50cy5lbWl0KGVlKFwicGFpcmluZ19waW5nXCIsbikse2Vycm9yOnMuZXJyb3J9KX0sNTAwKX0sdGhpcy5vblBhaXJpbmdEZWxldGVSZXF1ZXN0PWFzeW5jKGkscyk9Pntjb25zdHtpZDpufT1zO3RyeXt0aGlzLmlzVmFsaWREaXNjb25uZWN0KHt0b3BpYzppfSksYXdhaXQgdGhpcy5kZWxldGVQYWlyaW5nKGkpLHRoaXMuZXZlbnRzLmVtaXQoXCJwYWlyaW5nX2RlbGV0ZVwiLHtpZDpuLHRvcGljOml9KX1jYXRjaChhKXthd2FpdCB0aGlzLnNlbmRFcnJvcihuLGksYSksdGhpcy5sb2dnZXIuZXJyb3IoYSl9fSx0aGlzLm9uVW5rbm93blJwY01ldGhvZFJlcXVlc3Q9YXN5bmMoaSxzKT0+e2NvbnN0e2lkOm4sbWV0aG9kOmF9PXM7dHJ5e2lmKHRoaXMucmVnaXN0ZXJlZE1ldGhvZHMuaW5jbHVkZXMoYSkpcmV0dXJuO2NvbnN0IG89TChcIldDX01FVEhPRF9VTlNVUFBPUlRFRFwiLGEpO2F3YWl0IHRoaXMuc2VuZEVycm9yKG4saSxvKSx0aGlzLmxvZ2dlci5lcnJvcihvKX1jYXRjaChvKXthd2FpdCB0aGlzLnNlbmRFcnJvcihuLGksbyksdGhpcy5sb2dnZXIuZXJyb3Iobyl9fSx0aGlzLm9uVW5rbm93blJwY01ldGhvZFJlc3BvbnNlPWk9Pnt0aGlzLnJlZ2lzdGVyZWRNZXRob2RzLmluY2x1ZGVzKGkpfHx0aGlzLmxvZ2dlci5lcnJvcihMKFwiV0NfTUVUSE9EX1VOU1VQUE9SVEVEXCIsaSkpfSx0aGlzLmlzVmFsaWRQYWlyPWk9PntpZighdGUoaSkpe2NvbnN0e21lc3NhZ2U6c309YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBwYWlyKCkgcGFyYW1zOiAke2l9YCk7dGhyb3cgbmV3IEVycm9yKHMpfWlmKCFoaShpLnVyaSkpe2NvbnN0e21lc3NhZ2U6c309YyhcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGBwYWlyKCkgdXJpOiAke2kudXJpfWApO3Rocm93IG5ldyBFcnJvcihzKX19LHRoaXMuaXNWYWxpZFBpbmc9YXN5bmMgaT0+e2lmKCF0ZShpKSl7Y29uc3R7bWVzc2FnZTpufT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYHBpbmcoKSBwYXJhbXM6ICR7aX1gKTt0aHJvdyBuZXcgRXJyb3Iobil9Y29uc3R7dG9waWM6c309aTthd2FpdCB0aGlzLmlzVmFsaWRQYWlyaW5nVG9waWMocyl9LHRoaXMuaXNWYWxpZERpc2Nvbm5lY3Q9YXN5bmMgaT0+e2lmKCF0ZShpKSl7Y29uc3R7bWVzc2FnZTpufT1jKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYGRpc2Nvbm5lY3QoKSBwYXJhbXM6ICR7aX1gKTt0aHJvdyBuZXcgRXJyb3Iobil9Y29uc3R7dG9waWM6c309aTthd2FpdCB0aGlzLmlzVmFsaWRQYWlyaW5nVG9waWMocyl9LHRoaXMuaXNWYWxpZFBhaXJpbmdUb3BpYz1hc3luYyBpPT57aWYoIWNpKGksITEpKXtjb25zdHttZXNzYWdlOnN9PWMoXCJNSVNTSU5HX09SX0lOVkFMSURcIixgcGFpcmluZyB0b3BpYyBzaG91bGQgYmUgYSBzdHJpbmc6ICR7aX1gKTt0aHJvdyBuZXcgRXJyb3Iocyl9aWYoIXRoaXMucGFpcmluZ3Mua2V5cy5pbmNsdWRlcyhpKSl7Y29uc3R7bWVzc2FnZTpzfT1jKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYHBhaXJpbmcgdG9waWMgZG9lc24ndCBleGlzdDogJHtpfWApO3Rocm93IG5ldyBFcnJvcihzKX1pZih5ZSh0aGlzLnBhaXJpbmdzLmdldChpKS5leHBpcnkpKXthd2FpdCB0aGlzLmRlbGV0ZVBhaXJpbmcoaSk7Y29uc3R7bWVzc2FnZTpzfT1jKFwiRVhQSVJFRFwiLGBwYWlyaW5nIHRvcGljOiAke2l9YCk7dGhyb3cgbmV3IEVycm9yKHMpfX0sdGhpcy5jb3JlPWUsdGhpcy5sb2dnZXI9dyh0LHRoaXMubmFtZSksdGhpcy5wYWlyaW5ncz1uZXcgX3QodGhpcy5jb3JlLHRoaXMubG9nZ2VyLHRoaXMubmFtZSx0aGlzLnN0b3JhZ2VQcmVmaXgpfWdldCBjb250ZXh0KCl7cmV0dXJuIHYodGhpcy5sb2dnZXIpfWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3IoZSl9fXJlZ2lzdGVyUmVsYXllckV2ZW50cygpe3RoaXMuY29yZS5yZWxheWVyLm9uKEQubWVzc2FnZSxhc3luYyBlPT57Y29uc3R7dG9waWM6dCxtZXNzYWdlOml9PWU7aWYodGhpcy5pZ25vcmVkUGF5bG9hZFR5cGVzLmluY2x1ZGVzKHRoaXMuY29yZS5jcnlwdG8uZ2V0UGF5bG9hZFR5cGUoaSkpKXJldHVybjtjb25zdCBzPWF3YWl0IHRoaXMuY29yZS5jcnlwdG8uZGVjb2RlKHQsaSk7ZmUocyk/KHRoaXMuY29yZS5oaXN0b3J5LnNldCh0LHMpLHRoaXMub25SZWxheUV2ZW50UmVxdWVzdCh7dG9waWM6dCxwYXlsb2FkOnN9KSk6d2kocykmJihhd2FpdCB0aGlzLmNvcmUuaGlzdG9yeS5yZXNvbHZlKHMpLHRoaXMub25SZWxheUV2ZW50UmVzcG9uc2Uoe3RvcGljOnQscGF5bG9hZDpzfSkpfSl9cmVnaXN0ZXJFeHBpcmVyRXZlbnRzKCl7dGhpcy5jb3JlLmV4cGlyZXIub24obS5leHBpcmVkLGFzeW5jIGU9Pntjb25zdHt0b3BpYzp0fT11aShlLnRhcmdldCk7dCYmdGhpcy5wYWlyaW5ncy5rZXlzLmluY2x1ZGVzKHQpJiYoYXdhaXQgdGhpcy5kZWxldGVQYWlyaW5nKHQsITApLHRoaXMuZXZlbnRzLmVtaXQoXCJwYWlyaW5nX2V4cGlyZVwiLHt0b3BpYzp0fSkpfSl9fWNsYXNzIFN0IGV4dGVuZHMgS3R7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQpLHRoaXMuY29yZT1lLHRoaXMubG9nZ2VyPXQsdGhpcy5yZWNvcmRzPW5ldyBNYXAsdGhpcy5ldmVudHM9bmV3IEEsdGhpcy5uYW1lPWN0LHRoaXMudmVyc2lvbj11dCx0aGlzLmNhY2hlZD1bXSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMuc3RvcmFnZVByZWZpeD1ULHRoaXMuaW5pdD1hc3luYygpPT57dGhpcy5pbml0aWFsaXplZHx8KHRoaXMubG9nZ2VyLnRyYWNlKFwiSW5pdGlhbGl6ZWRcIiksYXdhaXQgdGhpcy5yZXN0b3JlKCksdGhpcy5jYWNoZWQuZm9yRWFjaChpPT50aGlzLnJlY29yZHMuc2V0KGkuaWQsaSkpLHRoaXMuY2FjaGVkPVtdLHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVycygpLHRoaXMuaW5pdGlhbGl6ZWQ9ITApfSx0aGlzLnNldD0oaSxzLG4pPT57aWYodGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5sb2dnZXIuZGVidWcoXCJTZXR0aW5nIEpTT04tUlBDIHJlcXVlc3QgaGlzdG9yeSByZWNvcmRcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJzZXRcIix0b3BpYzppLHJlcXVlc3Q6cyxjaGFpbklkOm59KSx0aGlzLnJlY29yZHMuaGFzKHMuaWQpKXJldHVybjtjb25zdCBhPXtpZDpzLmlkLHRvcGljOmkscmVxdWVzdDp7bWV0aG9kOnMubWV0aG9kLHBhcmFtczpzLnBhcmFtc3x8bnVsbH0sY2hhaW5JZDpufTt0aGlzLnJlY29yZHMuc2V0KGEuaWQsYSksdGhpcy5ldmVudHMuZW1pdChDLmNyZWF0ZWQsYSl9LHRoaXMucmVzb2x2ZT1hc3luYyBpPT57aWYodGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5sb2dnZXIuZGVidWcoXCJVcGRhdGluZyBKU09OLVJQQyByZXNwb25zZSBoaXN0b3J5IHJlY29yZFwiKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcInVwZGF0ZVwiLHJlc3BvbnNlOml9KSwhdGhpcy5yZWNvcmRzLmhhcyhpLmlkKSlyZXR1cm47Y29uc3Qgcz1hd2FpdCB0aGlzLmdldFJlY29yZChpLmlkKTt0eXBlb2Ygcy5yZXNwb25zZT5cInVcIiYmKHMucmVzcG9uc2U9SWUoaSk/e2Vycm9yOmkuZXJyb3J9OntyZXN1bHQ6aS5yZXN1bHR9LHRoaXMucmVjb3Jkcy5zZXQocy5pZCxzKSx0aGlzLmV2ZW50cy5lbWl0KEMudXBkYXRlZCxzKSl9LHRoaXMuZ2V0PWFzeW5jKGkscyk9Pih0aGlzLmlzSW5pdGlhbGl6ZWQoKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIkdldHRpbmcgcmVjb3JkXCIpLHRoaXMubG9nZ2VyLnRyYWNlKHt0eXBlOlwibWV0aG9kXCIsbWV0aG9kOlwiZ2V0XCIsdG9waWM6aSxpZDpzfSksYXdhaXQgdGhpcy5nZXRSZWNvcmQocykpLHRoaXMuZGVsZXRlPShpLHMpPT57dGhpcy5pc0luaXRpYWxpemVkKCksdGhpcy5sb2dnZXIuZGVidWcoXCJEZWxldGluZyByZWNvcmRcIiksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJkZWxldGVcIixpZDpzfSksdGhpcy52YWx1ZXMuZm9yRWFjaChuPT57aWYobi50b3BpYz09PWkpe2lmKHR5cGVvZiBzPFwidVwiJiZuLmlkIT09cylyZXR1cm47dGhpcy5yZWNvcmRzLmRlbGV0ZShuLmlkKSx0aGlzLmV2ZW50cy5lbWl0KEMuZGVsZXRlZCxuKX19KX0sdGhpcy5leGlzdHM9YXN5bmMoaSxzKT0+KHRoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMucmVjb3Jkcy5oYXMocyk/KGF3YWl0IHRoaXMuZ2V0UmVjb3JkKHMpKS50b3BpYz09PWk6ITEpLHRoaXMub249KGkscyk9Pnt0aGlzLmV2ZW50cy5vbihpLHMpfSx0aGlzLm9uY2U9KGkscyk9Pnt0aGlzLmV2ZW50cy5vbmNlKGkscyl9LHRoaXMub2ZmPShpLHMpPT57dGhpcy5ldmVudHMub2ZmKGkscyl9LHRoaXMucmVtb3ZlTGlzdGVuZXI9KGkscyk9Pnt0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihpLHMpfSx0aGlzLmxvZ2dlcj13KHQsdGhpcy5uYW1lKX1nZXQgY29udGV4dCgpe3JldHVybiB2KHRoaXMubG9nZ2VyKX1nZXQgc3RvcmFnZUtleSgpe3JldHVybiB0aGlzLnN0b3JhZ2VQcmVmaXgrdGhpcy52ZXJzaW9uK1wiLy9cIit0aGlzLm5hbWV9Z2V0IHNpemUoKXtyZXR1cm4gdGhpcy5yZWNvcmRzLnNpemV9Z2V0IGtleXMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnJlY29yZHMua2V5cygpKX1nZXQgdmFsdWVzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5yZWNvcmRzLnZhbHVlcygpKX1nZXQgcGVuZGluZygpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMudmFsdWVzLmZvckVhY2godD0+e2lmKHR5cGVvZiB0LnJlc3BvbnNlPFwidVwiKXJldHVybjtjb25zdCBpPXt0b3BpYzp0LnRvcGljLHJlcXVlc3Q6dmUodC5yZXF1ZXN0Lm1ldGhvZCx0LnJlcXVlc3QucGFyYW1zLHQuaWQpLGNoYWluSWQ6dC5jaGFpbklkfTtyZXR1cm4gZS5wdXNoKGkpfSksZX1hc3luYyBzZXRKc29uUnBjUmVjb3JkcyhlKXthd2FpdCB0aGlzLmNvcmUuc3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZUtleSxlKX1hc3luYyBnZXRKc29uUnBjUmVjb3Jkcygpe3JldHVybiBhd2FpdCB0aGlzLmNvcmUuc3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmFnZUtleSl9Z2V0UmVjb3JkKGUpe3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IHQ9dGhpcy5yZWNvcmRzLmdldChlKTtpZighdCl7Y29uc3R7bWVzc2FnZTppfT1jKFwiTk9fTUFUQ0hJTkdfS0VZXCIsYCR7dGhpcy5uYW1lfTogJHtlfWApO3Rocm93IG5ldyBFcnJvcihpKX1yZXR1cm4gdH1hc3luYyBwZXJzaXN0KCl7YXdhaXQgdGhpcy5zZXRKc29uUnBjUmVjb3Jkcyh0aGlzLnZhbHVlcyksdGhpcy5ldmVudHMuZW1pdChDLnN5bmMpfWFzeW5jIHJlc3RvcmUoKXt0cnl7Y29uc3QgZT1hd2FpdCB0aGlzLmdldEpzb25ScGNSZWNvcmRzKCk7aWYodHlwZW9mIGU+XCJ1XCJ8fCFlLmxlbmd0aClyZXR1cm47aWYodGhpcy5yZWNvcmRzLnNpemUpe2NvbnN0e21lc3NhZ2U6dH09YyhcIlJFU1RPUkVfV0lMTF9PVkVSUklERVwiLHRoaXMubmFtZSk7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IodCksbmV3IEVycm9yKHQpfXRoaXMuY2FjaGVkPWUsdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSBSZXN0b3JlZCByZWNvcmRzIGZvciAke3RoaXMubmFtZX1gKSx0aGlzLmxvZ2dlci50cmFjZSh7dHlwZTpcIm1ldGhvZFwiLG1ldGhvZDpcInJlc3RvcmVcIixyZWNvcmRzOnRoaXMudmFsdWVzfSl9Y2F0Y2goZSl7dGhpcy5sb2dnZXIuZGVidWcoYEZhaWxlZCB0byBSZXN0b3JlIHJlY29yZHMgZm9yICR7dGhpcy5uYW1lfWApLHRoaXMubG9nZ2VyLmVycm9yKGUpfX1yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCl7dGhpcy5ldmVudHMub24oQy5jcmVhdGVkLGU9Pntjb25zdCB0PUMuY3JlYXRlZDt0aGlzLmxvZ2dlci5pbmZvKGBFbWl0dGluZyAke3R9YCksdGhpcy5sb2dnZXIuZGVidWcoe3R5cGU6XCJldmVudFwiLGV2ZW50OnQscmVjb3JkOmV9KSx0aGlzLnBlcnNpc3QoKX0pLHRoaXMuZXZlbnRzLm9uKEMudXBkYXRlZCxlPT57Y29uc3QgdD1DLnVwZGF0ZWQ7dGhpcy5sb2dnZXIuaW5mbyhgRW1pdHRpbmcgJHt0fWApLHRoaXMubG9nZ2VyLmRlYnVnKHt0eXBlOlwiZXZlbnRcIixldmVudDp0LHJlY29yZDplfSksdGhpcy5wZXJzaXN0KCl9KSx0aGlzLmV2ZW50cy5vbihDLmRlbGV0ZWQsZT0+e2NvbnN0IHQ9Qy5kZWxldGVkO3RoaXMubG9nZ2VyLmluZm8oYEVtaXR0aW5nICR7dH1gKSx0aGlzLmxvZ2dlci5kZWJ1Zyh7dHlwZTpcImV2ZW50XCIsZXZlbnQ6dCxyZWNvcmQ6ZX0pLHRoaXMucGVyc2lzdCgpfSl9aXNJbml0aWFsaXplZCgpe2lmKCF0aGlzLmluaXRpYWxpemVkKXtjb25zdHttZXNzYWdlOmV9PWMoXCJOT1RfSU5JVElBTElaRURcIix0aGlzLm5hbWUpO3Rocm93IG5ldyBFcnJvcihlKX19fWNsYXNzIFB0IGV4dGVuZHMga3R7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQpLHRoaXMuY29yZT1lLHRoaXMubG9nZ2VyPXQsdGhpcy5leHBpcmF0aW9ucz1uZXcgTWFwLHRoaXMuZXZlbnRzPW5ldyBBLHRoaXMubmFtZT1sdCx0aGlzLnZlcnNpb249ZHQsdGhpcy5jYWNoZWQ9W10sdGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnN0b3JhZ2VQcmVmaXg9VCx0aGlzLmluaXQ9YXN5bmMoKT0+e3RoaXMuaW5pdGlhbGl6ZWR8fCh0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpLGF3YWl0IHRoaXMucmVzdG9yZSgpLHRoaXMuY2FjaGVkLmZvckVhY2goaT0+dGhpcy5leHBpcmF0aW9ucy5zZXQoaS50YXJnZXQsaSkpLHRoaXMuY2FjaGVkPVtdLHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVycygpLHRoaXMuaW5pdGlhbGl6ZWQ9ITApfSx0aGlzLmhhcz1pPT57dHJ5e2NvbnN0IHM9dGhpcy5mb3JtYXRUYXJnZXQoaSk7cmV0dXJuIHR5cGVvZiB0aGlzLmdldEV4cGlyYXRpb24ocyk8XCJ1XCJ9Y2F0Y2h7cmV0dXJuITF9fSx0aGlzLnNldD0oaSxzKT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IG49dGhpcy5mb3JtYXRUYXJnZXQoaSksYT17dGFyZ2V0Om4sZXhwaXJ5OnN9O3RoaXMuZXhwaXJhdGlvbnMuc2V0KG4sYSksdGhpcy5jaGVja0V4cGlyeShuLGEpLHRoaXMuZXZlbnRzLmVtaXQobS5jcmVhdGVkLHt0YXJnZXQ6bixleHBpcmF0aW9uOmF9KX0sdGhpcy5nZXQ9aT0+e3RoaXMuaXNJbml0aWFsaXplZCgpO2NvbnN0IHM9dGhpcy5mb3JtYXRUYXJnZXQoaSk7cmV0dXJuIHRoaXMuZ2V0RXhwaXJhdGlvbihzKX0sdGhpcy5kZWw9aT0+e2lmKHRoaXMuaXNJbml0aWFsaXplZCgpLHRoaXMuaGFzKGkpKXtjb25zdCBzPXRoaXMuZm9ybWF0VGFyZ2V0KGkpLG49dGhpcy5nZXRFeHBpcmF0aW9uKHMpO3RoaXMuZXhwaXJhdGlvbnMuZGVsZXRlKHMpLHRoaXMuZXZlbnRzLmVtaXQobS5kZWxldGVkLHt0YXJnZXQ6cyxleHBpcmF0aW9uOm59KX19LHRoaXMub249KGkscyk9Pnt0aGlzLmV2ZW50cy5vbihpLHMpfSx0aGlzLm9uY2U9KGkscyk9Pnt0aGlzLmV2ZW50cy5vbmNlKGkscyl9LHRoaXMub2ZmPShpLHMpPT57dGhpcy5ldmVudHMub2ZmKGkscyl9LHRoaXMucmVtb3ZlTGlzdGVuZXI9KGkscyk9Pnt0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihpLHMpfSx0aGlzLmxvZ2dlcj13KHQsdGhpcy5uYW1lKX1nZXQgY29udGV4dCgpe3JldHVybiB2KHRoaXMubG9nZ2VyKX1nZXQgc3RvcmFnZUtleSgpe3JldHVybiB0aGlzLnN0b3JhZ2VQcmVmaXgrdGhpcy52ZXJzaW9uK1wiLy9cIit0aGlzLm5hbWV9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLmV4cGlyYXRpb25zLnNpemV9Z2V0IGtleXMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmV4cGlyYXRpb25zLmtleXMoKSl9Z2V0IHZhbHVlcygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuZXhwaXJhdGlvbnMudmFsdWVzKCkpfWZvcm1hdFRhcmdldChlKXtpZih0eXBlb2YgZT09XCJzdHJpbmdcIilyZXR1cm4gbGkoZSk7aWYodHlwZW9mIGU9PVwibnVtYmVyXCIpcmV0dXJuIGRpKGUpO2NvbnN0e21lc3NhZ2U6dH09YyhcIlVOS05PV05fVFlQRVwiLGBUYXJnZXQgdHlwZTogJHt0eXBlb2YgZX1gKTt0aHJvdyBuZXcgRXJyb3IodCl9YXN5bmMgc2V0RXhwaXJhdGlvbnMoZSl7YXdhaXQgdGhpcy5jb3JlLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXksZSl9YXN5bmMgZ2V0RXhwaXJhdGlvbnMoKXtyZXR1cm4gYXdhaXQgdGhpcy5jb3JlLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXkpfWFzeW5jIHBlcnNpc3QoKXthd2FpdCB0aGlzLnNldEV4cGlyYXRpb25zKHRoaXMudmFsdWVzKSx0aGlzLmV2ZW50cy5lbWl0KG0uc3luYyl9YXN5bmMgcmVzdG9yZSgpe3RyeXtjb25zdCBlPWF3YWl0IHRoaXMuZ2V0RXhwaXJhdGlvbnMoKTtpZih0eXBlb2YgZT5cInVcInx8IWUubGVuZ3RoKXJldHVybjtpZih0aGlzLmV4cGlyYXRpb25zLnNpemUpe2NvbnN0e21lc3NhZ2U6dH09YyhcIlJFU1RPUkVfV0lMTF9PVkVSUklERVwiLHRoaXMubmFtZSk7dGhyb3cgdGhpcy5sb2dnZXIuZXJyb3IodCksbmV3IEVycm9yKHQpfXRoaXMuY2FjaGVkPWUsdGhpcy5sb2dnZXIuZGVidWcoYFN1Y2Nlc3NmdWxseSBSZXN0b3JlZCBleHBpcmF0aW9ucyBmb3IgJHt0aGlzLm5hbWV9YCksdGhpcy5sb2dnZXIudHJhY2Uoe3R5cGU6XCJtZXRob2RcIixtZXRob2Q6XCJyZXN0b3JlXCIsZXhwaXJhdGlvbnM6dGhpcy52YWx1ZXN9KX1jYXRjaChlKXt0aGlzLmxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIFJlc3RvcmUgZXhwaXJhdGlvbnMgZm9yICR7dGhpcy5uYW1lfWApLHRoaXMubG9nZ2VyLmVycm9yKGUpfX1nZXRFeHBpcmF0aW9uKGUpe2NvbnN0IHQ9dGhpcy5leHBpcmF0aW9ucy5nZXQoZSk7aWYoIXQpe2NvbnN0e21lc3NhZ2U6aX09YyhcIk5PX01BVENISU5HX0tFWVwiLGAke3RoaXMubmFtZX06ICR7ZX1gKTt0aHJvdyB0aGlzLmxvZ2dlci5lcnJvcihpKSxuZXcgRXJyb3IoaSl9cmV0dXJuIHR9Y2hlY2tFeHBpcnkoZSx0KXtjb25zdHtleHBpcnk6aX09dDttZShpKS1EYXRlLm5vdygpPD0wJiZ0aGlzLmV4cGlyZShlLHQpfWV4cGlyZShlLHQpe3RoaXMuZXhwaXJhdGlvbnMuZGVsZXRlKGUpLHRoaXMuZXZlbnRzLmVtaXQobS5leHBpcmVkLHt0YXJnZXQ6ZSxleHBpcmF0aW9uOnR9KX1jaGVja0V4cGlyYXRpb25zKCl7dGhpcy5jb3JlLnJlbGF5ZXIuY29ubmVjdGVkJiZ0aGlzLmV4cGlyYXRpb25zLmZvckVhY2goKGUsdCk9PnRoaXMuY2hlY2tFeHBpcnkodCxlKSl9cmVnaXN0ZXJFdmVudExpc3RlbmVycygpe3RoaXMuY29yZS5oZWFydGJlYXQub24oSC5wdWxzZSwoKT0+dGhpcy5jaGVja0V4cGlyYXRpb25zKCkpLHRoaXMuZXZlbnRzLm9uKG0uY3JlYXRlZCxlPT57Y29uc3QgdD1tLmNyZWF0ZWQ7dGhpcy5sb2dnZXIuaW5mbyhgRW1pdHRpbmcgJHt0fWApLHRoaXMubG9nZ2VyLmRlYnVnKHt0eXBlOlwiZXZlbnRcIixldmVudDp0LGRhdGE6ZX0pLHRoaXMucGVyc2lzdCgpfSksdGhpcy5ldmVudHMub24obS5leHBpcmVkLGU9Pntjb25zdCB0PW0uZXhwaXJlZDt0aGlzLmxvZ2dlci5pbmZvKGBFbWl0dGluZyAke3R9YCksdGhpcy5sb2dnZXIuZGVidWcoe3R5cGU6XCJldmVudFwiLGV2ZW50OnQsZGF0YTplfSksdGhpcy5wZXJzaXN0KCl9KSx0aGlzLmV2ZW50cy5vbihtLmRlbGV0ZWQsZT0+e2NvbnN0IHQ9bS5kZWxldGVkO3RoaXMubG9nZ2VyLmluZm8oYEVtaXR0aW5nICR7dH1gKSx0aGlzLmxvZ2dlci5kZWJ1Zyh7dHlwZTpcImV2ZW50XCIsZXZlbnQ6dCxkYXRhOmV9KSx0aGlzLnBlcnNpc3QoKX0pfWlzSW5pdGlhbGl6ZWQoKXtpZighdGhpcy5pbml0aWFsaXplZCl7Y29uc3R7bWVzc2FnZTplfT1jKFwiTk9UX0lOSVRJQUxJWkVEXCIsdGhpcy5uYW1lKTt0aHJvdyBuZXcgRXJyb3IoZSl9fX12YXIgZHI9T2JqZWN0LmRlZmluZVByb3BlcnR5LFR0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsZ3I9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxwcj1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLHh0PShyLGUsdCk9PmUgaW4gcj9kcihyLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTpyW2VdPXQsT3Q9KHIsZSk9Pntmb3IodmFyIHQgaW4gZXx8KGU9e30pKWdyLmNhbGwoZSx0KSYmeHQocix0LGVbdF0pO2lmKFR0KWZvcih2YXIgdCBvZiBUdChlKSlwci5jYWxsKGUsdCkmJnh0KHIsdCxlW3RdKTtyZXR1cm4gcn07Y2xhc3MgWSBleHRlbmRzIEJ0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMucHJvdG9jb2w9YWUsdGhpcy52ZXJzaW9uPUtlLHRoaXMubmFtZT1HLHRoaXMuZXZlbnRzPW5ldyBBLHRoaXMuaW5pdGlhbGl6ZWQ9ITEsdGhpcy5vbj0oaSxzKT0+dGhpcy5ldmVudHMub24oaSxzKSx0aGlzLm9uY2U9KGkscyk9PnRoaXMuZXZlbnRzLm9uY2UoaSxzKSx0aGlzLm9mZj0oaSxzKT0+dGhpcy5ldmVudHMub2ZmKGkscyksdGhpcy5yZW1vdmVMaXN0ZW5lcj0oaSxzKT0+dGhpcy5ldmVudHMucmVtb3ZlTGlzdGVuZXIoaSxzKSx0aGlzLnByb2plY3RJZD1lPy5wcm9qZWN0SWQsdGhpcy5yZWxheVVybD1lPy5yZWxheVVybHx8aGU7Y29uc3QgdD10eXBlb2YgZT8ubG9nZ2VyPFwidVwiJiZ0eXBlb2YgZT8ubG9nZ2VyIT1cInN0cmluZ1wiP2UubG9nZ2VyOnVlKGxlKHtsZXZlbDplPy5sb2dnZXJ8fGtlLmxvZ2dlcn0pKTt0aGlzLmxvZ2dlcj13KHQsdGhpcy5uYW1lKSx0aGlzLmhlYXJ0YmVhdD1uZXcgTnQsdGhpcy5jcnlwdG89bmV3IHB0KHRoaXMsdGhpcy5sb2dnZXIsZT8ua2V5Y2hhaW4pLHRoaXMuaGlzdG9yeT1uZXcgU3QodGhpcyx0aGlzLmxvZ2dlciksdGhpcy5leHBpcmVyPW5ldyBQdCh0aGlzLHRoaXMubG9nZ2VyKSx0aGlzLnN0b3JhZ2U9ZSE9bnVsbCYmZS5zdG9yYWdlP2Uuc3RvcmFnZTpuZXcgenQoT3QoT3Qoe30sQmUpLGU/LnN0b3JhZ2VPcHRpb25zKSksdGhpcy5yZWxheWVyPW5ldyB3dCh7Y29yZTp0aGlzLGxvZ2dlcjp0aGlzLmxvZ2dlcixyZWxheVVybDp0aGlzLnJlbGF5VXJsLHByb2plY3RJZDp0aGlzLnByb2plY3RJZH0pLHRoaXMucGFpcmluZz1uZXcgUnQodGhpcyx0aGlzLmxvZ2dlcil9c3RhdGljIGFzeW5jIGluaXQoZSl7Y29uc3QgdD1uZXcgWShlKTtyZXR1cm4gYXdhaXQgdC5pbml0aWFsaXplKCksdH1nZXQgY29udGV4dCgpe3JldHVybiB2KHRoaXMubG9nZ2VyKX1hc3luYyBzdGFydCgpe3RoaXMuaW5pdGlhbGl6ZWR8fGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpfWFzeW5jIGluaXRpYWxpemUoKXt0aGlzLmxvZ2dlci50cmFjZShcIkluaXRpYWxpemVkXCIpO3RyeXthd2FpdCB0aGlzLmNyeXB0by5pbml0KCksYXdhaXQgdGhpcy5oaXN0b3J5LmluaXQoKSxhd2FpdCB0aGlzLmV4cGlyZXIuaW5pdCgpLGF3YWl0IHRoaXMucmVsYXllci5pbml0KCksYXdhaXQgdGhpcy5oZWFydGJlYXQuaW5pdCgpLGF3YWl0IHRoaXMucGFpcmluZy5pbml0KCksdGhpcy5pbml0aWFsaXplZD0hMCx0aGlzLmxvZ2dlci5pbmZvKFwiQ29yZSBJbml0aWFsaXphdGlvbiBTdWNjZXNzXCIpfWNhdGNoKGUpe3Rocm93IHRoaXMubG9nZ2VyLndhcm4oYENvcmUgSW5pdGlhbGl6YXRpb24gRmFpbHVyZSBhdCBlcG9jaCAke0RhdGUubm93KCl9YCxlKSx0aGlzLmxvZ2dlci5lcnJvcihlLm1lc3NhZ2UpLGV9fX1jb25zdCBEcj1ZO2V4cG9ydHtHIGFzIENPUkVfQ09OVEVYVCxrZSBhcyBDT1JFX0RFRkFVTFQsYWUgYXMgQ09SRV9QUk9UT0NPTCxCZSBhcyBDT1JFX1NUT1JBR0VfT1BUSU9OUyxUIGFzIENPUkVfU1RPUkFHRV9QUkVGSVgsS2UgYXMgQ09SRV9WRVJTSU9OLG9lIGFzIENSWVBUT19DTElFTlRfU0VFRCxqZSBhcyBDUllQVE9fQ09OVEVYVCxWZSBhcyBDUllQVE9fSldUX1RUTCxEciBhcyBDb3JlLHB0IGFzIENyeXB0byxsdCBhcyBFWFBJUkVSX0NPTlRFWFQsV3MgYXMgRVhQSVJFUl9ERUZBVUxUX1RUTCxtIGFzIEVYUElSRVJfRVZFTlRTLGR0IGFzIEVYUElSRVJfU1RPUkFHRV9WRVJTSU9OLFB0IGFzIEV4cGlyZXIsY3QgYXMgSElTVE9SWV9DT05URVhULEMgYXMgSElTVE9SWV9FVkVOVFMsdXQgYXMgSElTVE9SWV9TVE9SQUdFX1ZFUlNJT04sU3QgYXMgSnNvblJwY0hpc3RvcnkscWUgYXMgS0VZQ0hBSU5fQ09OVEVYVCxHZSBhcyBLRVlDSEFJTl9TVE9SQUdFX1ZFUlNJT04sZ3QgYXMgS2V5Q2hhaW4sWWUgYXMgTUVTU0FHRVNfQ09OVEVYVCxKZSBhcyBNRVNTQUdFU19TVE9SQUdFX1ZFUlNJT04sRHQgYXMgTWVzc2FnZVRyYWNrZXIsb3QgYXMgUEFJUklOR19DT05URVhULFhzIGFzIFBBSVJJTkdfREVGQVVMVF9UVEwsTiBhcyBQQUlSSU5HX1JQQ19PUFRTLGh0IGFzIFBBSVJJTkdfU1RPUkFHRV9WRVJTSU9OLGF0IGFzIFBFTkRJTkdfU1VCX1JFU09MVVRJT05fVElNRU9VVCxYZSBhcyBQVUJMSVNIRVJfQ09OVEVYVCxIZSBhcyBQVUJMSVNIRVJfREVGQVVMVF9UVEwsUnQgYXMgUGFpcmluZyxRZSBhcyBSRUxBWUVSX0NPTlRFWFQsWmUgYXMgUkVMQVlFUl9ERUZBVUxUX0xPR0dFUixXZSBhcyBSRUxBWUVSX0RFRkFVTFRfUFJPVE9DT0wsaGUgYXMgUkVMQVlFUl9ERUZBVUxUX1JFTEFZX1VSTCxEIGFzIFJFTEFZRVJfRVZFTlRTLE0gYXMgUkVMQVlFUl9QUk9WSURFUl9FVkVOVFMsdHQgYXMgUkVMQVlFUl9SRUNPTk5FQ1RfVElNRU9VVCxpdCBhcyBSRUxBWUVSX1NES19WRVJTSU9OLEpzIGFzIFJFTEFZRVJfU1RPUkFHRV9PUFRJT05TLGV0IGFzIFJFTEFZRVJfU1VCU0NSSUJFUl9TVUZGSVgsd3QgYXMgUmVsYXllcixzdCBhcyBTVE9SRV9TVE9SQUdFX1ZFUlNJT04scnQgYXMgU1VCU0NSSUJFUl9DT05URVhULEhzIGFzIFNVQlNDUklCRVJfREVGQVVMVF9UVEwsSSBhcyBTVUJTQ1JJQkVSX0VWRU5UUyxudCBhcyBTVUJTQ1JJQkVSX1NUT1JBR0VfVkVSU0lPTixfdCBhcyBTdG9yZSxtdCBhcyBTdWJzY3JpYmVyLFkgYXMgZGVmYXVsdH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IRUFSVEJFQVRfRVZFTlRTID0gZXhwb3J0cy5IRUFSVEJFQVRfSU5URVJWQUwgPSB2b2lkIDA7XG5jb25zdCB0aW1lXzEgPSByZXF1aXJlKFwiQHdhbGxldGNvbm5lY3QvdGltZVwiKTtcbmV4cG9ydHMuSEVBUlRCRUFUX0lOVEVSVkFMID0gdGltZV8xLkZJVkVfU0VDT05EUztcbmV4cG9ydHMuSEVBUlRCRUFUX0VWRU5UUyA9IHtcbiAgICBwdWxzZTogXCJoZWFydGJlYXRfcHVsc2VcIixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWFydGJlYXQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaGVhcnRiZWF0XCIpLCBleHBvcnRzKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IZWFydEJlYXQgPSB2b2lkIDA7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY29uc3QgdGltZV8xID0gcmVxdWlyZShcIkB3YWxsZXRjb25uZWN0L3RpbWVcIik7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCBjb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKTtcbmNsYXNzIEhlYXJ0QmVhdCBleHRlbmRzIHR5cGVzXzEuSUhlYXJ0QmVhdCB7XG4gICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICBzdXBlcihvcHRzKTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgZXZlbnRzXzEuRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBjb25zdGFudHNfMS5IRUFSVEJFQVRfSU5URVJWQUw7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSAob3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmludGVydmFsKSB8fCBjb25zdGFudHNfMS5IRUFSVEJFQVRfSU5URVJWQUw7XG4gICAgfVxuICAgIHN0YXRpYyBpbml0KG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgaGVhcnRiZWF0ID0gbmV3IEhlYXJ0QmVhdChvcHRzKTtcbiAgICAgICAgICAgIHlpZWxkIGhlYXJ0YmVhdC5pbml0KCk7XG4gICAgICAgICAgICByZXR1cm4gaGVhcnRiZWF0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxSZWYpO1xuICAgIH1cbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgb25jZShldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMub25jZShldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbFJlZiA9IHNldEludGVydmFsKCgpID0+IHRoaXMucHVsc2UoKSwgdGltZV8xLnRvTWlsaXNlY29uZHModGhpcy5pbnRlcnZhbCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVsc2UoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoY29uc3RhbnRzXzEuSEVBUlRCRUFUX0VWRU5UUy5wdWxzZSk7XG4gICAgfVxufVxuZXhwb3J0cy5IZWFydEJlYXQgPSBIZWFydEJlYXQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oZWFydGJlYXQuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jb25zdCB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xudHNsaWJfMS5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaGVhcnRiZWF0XCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzXCIpLCBleHBvcnRzKTtcbnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50c1wiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSUhlYXJ0QmVhdCA9IHZvaWQgMDtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcIkB3YWxsZXRjb25uZWN0L2V2ZW50c1wiKTtcbmNsYXNzIElIZWFydEJlYXQgZXh0ZW5kcyBldmVudHNfMS5JRXZlbnRzIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxufVxuZXhwb3J0cy5JSGVhcnRCZWF0ID0gSUhlYXJ0QmVhdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlYXJ0YmVhdC5qcy5tYXAiLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG50c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9oZWFydGJlYXRcIiksIGV4cG9ydHMpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IFByb3ZpZGVyIGZyb20gXCIuL3Byb3ZpZGVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wcm92aWRlclwiO1xuZXhwb3J0IGRlZmF1bHQgUHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tIFwiZXZlbnRzXCI7XG5pbXBvcnQgeyBJSnNvblJwY1Byb3ZpZGVyLCBpc0pzb25ScGNSZXNwb25zZSwgZm9ybWF0SnNvblJwY1JlcXVlc3QsIGlzSnNvblJwY0Vycm9yLCB9IGZyb20gXCJAd2FsbGV0Y29ubmVjdC9qc29ucnBjLXV0aWxzXCI7XG5leHBvcnQgY2xhc3MgSnNvblJwY1Byb3ZpZGVyIGV4dGVuZHMgSUpzb25ScGNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbikge1xuICAgICAgICBzdXBlcihjb25uZWN0aW9uKTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuaGFzUmVnaXN0ZXJlZEV2ZW50TGlzdGVuZXJzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IHRoaXMuc2V0Q29ubmVjdGlvbihjb25uZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3QoY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbikge1xuICAgICAgICBhd2FpdCB0aGlzLm9wZW4oY29ubmVjdGlvbik7XG4gICAgfVxuICAgIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIG9uY2UoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9uY2UoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgcmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIGFzeW5jIHJlcXVlc3QocmVxdWVzdCwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0U3RyaWN0KGZvcm1hdEpzb25ScGNSZXF1ZXN0KHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnBhcmFtcyB8fCBbXSksIGNvbnRleHQpO1xuICAgIH1cbiAgICBhc3luYyByZXF1ZXN0U3RyaWN0KHJlcXVlc3QsIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb25uZWN0aW9uLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oYCR7cmVxdWVzdC5pZH1gLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzSnNvblJwY0Vycm9yKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uc2VuZChyZXF1ZXN0LCBjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0Q29ubmVjdGlvbihjb25uZWN0aW9uID0gdGhpcy5jb25uZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb25uZWN0aW9uO1xuICAgIH1cbiAgICBvblBheWxvYWQocGF5bG9hZCkge1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwicGF5bG9hZFwiLCBwYXlsb2FkKTtcbiAgICAgICAgaWYgKGlzSnNvblJwY1Jlc3BvbnNlKHBheWxvYWQpKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KGAke3BheWxvYWQuaWR9YCwgcGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwibWVzc2FnZVwiLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogcGF5bG9hZC5tZXRob2QsXG4gICAgICAgICAgICAgICAgZGF0YTogcGF5bG9hZC5wYXJhbXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkNsb3NlKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudCAmJiBldmVudC5jb2RlID09PSAzMDAwKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiZXJyb3JcIiwgbmV3IEVycm9yKGBXZWJTb2NrZXQgY29ubmVjdGlvbiBjbG9zZWQgYWJub3JtYWxseSB3aXRoIGNvZGU6ICR7ZXZlbnQuY29kZX0gJHtldmVudC5yZWFzb24gPyBgKCR7ZXZlbnQucmVhc29ufSlgIDogXCJcIn1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcImRpc2Nvbm5lY3RcIik7XG4gICAgfVxuICAgIGFzeW5jIG9wZW4oY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbikge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uID09PSBjb25uZWN0aW9uICYmIHRoaXMuY29ubmVjdGlvbi5jb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGVkKVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbm5lY3Rpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5vcGVuKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSB0aGlzLnNldENvbm5lY3Rpb24oY29ubmVjdGlvbik7XG4gICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5vcGVuKCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiY29ubmVjdFwiKTtcbiAgICB9XG4gICAgYXN5bmMgY2xvc2UoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgIH1cbiAgICByZWdpc3RlckV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNSZWdpc3RlcmVkRXZlbnRMaXN0ZW5lcnMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbihcInBheWxvYWRcIiwgKHBheWxvYWQpID0+IHRoaXMub25QYXlsb2FkKHBheWxvYWQpKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uKFwiY2xvc2VcIiwgKGV2ZW50KSA9PiB0aGlzLm9uQ2xvc2UoZXZlbnQpKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB0aGlzLmV2ZW50cy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uKFwicmVnaXN0ZXJfZXJyb3JcIiwgKGVycm9yKSA9PiB0aGlzLm9uQ2xvc2UoKSk7XG4gICAgICAgIHRoaXMuaGFzUmVnaXN0ZXJlZEV2ZW50TGlzdGVuZXJzID0gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBKc29uUnBjUHJvdmlkZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5qcy5tYXAiLCJpbXBvcnQgV3NDb25uZWN0aW9uIGZyb20gXCIuL3dzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi93c1wiO1xuZXhwb3J0IGRlZmF1bHQgV3NDb25uZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSBcImV2ZW50c1wiO1xuaW1wb3J0IHsgc2FmZUpzb25QYXJzZSwgc2FmZUpzb25TdHJpbmdpZnkgfSBmcm9tIFwiQHdhbGxldGNvbm5lY3Qvc2FmZS1qc29uXCI7XG5pbXBvcnQgeyBmb3JtYXRKc29uUnBjRXJyb3IsIGlzUmVhY3ROYXRpdmUsIGlzV3NVcmwsIGlzTG9jYWxob3N0VXJsLCBwYXJzZUNvbm5lY3Rpb25FcnJvciwgfSBmcm9tIFwiQHdhbGxldGNvbm5lY3QvanNvbnJwYy11dGlsc1wiO1xuY29uc3QgRVZFTlRfRU1JVFRFUl9NQVhfTElTVEVORVJTX0RFRkFVTFQgPSAxMDtcbmNvbnN0IHJlc29sdmVXZWJTb2NrZXRJbXBsZW1lbnRhdGlvbiA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZ2xvYmFsLldlYlNvY2tldCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICByZXR1cm4gZ2xvYmFsLldlYlNvY2tldDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5XZWJTb2NrZXQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5XZWJTb2NrZXQ7XG4gICAgfVxuICAgIHJldHVybiByZXF1aXJlKFwid3NcIik7XG59O1xuY29uc3QgaXNCcm93c2VyID0gKCkgPT4gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIjtcbmNvbnN0IFdTID0gcmVzb2x2ZVdlYlNvY2tldEltcGxlbWVudGF0aW9uKCk7XG5leHBvcnQgY2xhc3MgV3NDb25uZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih1cmwpIHtcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyaW5nID0gZmFsc2U7XG4gICAgICAgIGlmICghaXNXc1VybCh1cmwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb3ZpZGVkIFVSTCBpcyBub3QgY29tcGF0aWJsZSB3aXRoIFdlYlNvY2tldCBjb25uZWN0aW9uOiAke3VybH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnNvY2tldCAhPT0gXCJ1bmRlZmluZWRcIjtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyaW5nO1xuICAgIH1cbiAgICBvbihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMub24oZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgb25jZShldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMub25jZShldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgYXN5bmMgb3Blbih1cmwgPSB0aGlzLnVybCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdGVyKHVybCk7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNvY2tldCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJDb25uZWN0aW9uIGFscmVhZHkgY2xvc2VkXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZShldmVudCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZW5kKHBheWxvYWQsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnNvY2tldCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdGhpcy5zb2NrZXQgPSBhd2FpdCB0aGlzLnJlZ2lzdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc29ja2V0LnNlbmQoc2FmZUpzb25TdHJpbmdpZnkocGF5bG9hZCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IocGF5bG9hZC5pZCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVnaXN0ZXIodXJsID0gdGhpcy51cmwpIHtcbiAgICAgICAgaWYgKCFpc1dzVXJsKHVybCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvdmlkZWQgVVJMIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggV2ViU29ja2V0IGNvbm5lY3Rpb246ICR7dXJsfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlZ2lzdGVyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TWF4TGlzdGVuZXJzID0gdGhpcy5ldmVudHMuZ2V0TWF4TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5ldmVudHMubGlzdGVuZXJDb3VudChcInJlZ2lzdGVyX2Vycm9yXCIpID49IGN1cnJlbnRNYXhMaXN0ZW5lcnMgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5saXN0ZW5lckNvdW50KFwib3BlblwiKSA+PSBjdXJyZW50TWF4TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuc2V0TWF4TGlzdGVuZXJzKGN1cnJlbnRNYXhMaXN0ZW5lcnMgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMub25jZShcInJlZ2lzdGVyX2Vycm9yXCIsIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldE1heExpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uY2UoXCJvcGVuXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldE1heExpc3RlbmVycygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc29ja2V0ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcIldlYlNvY2tldCBjb25uZWN0aW9uIGlzIG1pc3Npbmcgb3IgaW52YWxpZFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnNvY2tldCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmluZyA9IHRydWU7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRzID0gIWlzUmVhY3ROYXRpdmUoKSA/IHsgcmVqZWN0VW5hdXRob3JpemVkOiAhaXNMb2NhbGhvc3RVcmwodXJsKSB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IFdTKHVybCwgW10sIG9wdHMpO1xuICAgICAgICAgICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgICAgICAgICAgc29ja2V0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgICAgICAgICByZWplY3QodGhpcy5lbWl0RXJyb3IoZXJyb3JFdmVudC5lcnJvcikpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb2NrZXQub24oXCJlcnJvclwiLCAoZXJyb3JFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QodGhpcy5lbWl0RXJyb3IoZXJyb3JFdmVudCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc29ja2V0Lm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3Blbihzb2NrZXQpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoc29ja2V0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbk9wZW4oc29ja2V0KSB7XG4gICAgICAgIHNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHRoaXMub25QYXlsb2FkKGV2ZW50KTtcbiAgICAgICAgc29ja2V0Lm9uY2xvc2UgPSBldmVudCA9PiB0aGlzLm9uQ2xvc2UoZXZlbnQpO1xuICAgICAgICB0aGlzLnNvY2tldCA9IHNvY2tldDtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwib3BlblwiKTtcbiAgICB9XG4gICAgb25DbG9zZShldmVudCkge1xuICAgICAgICB0aGlzLnNvY2tldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50cy5lbWl0KFwiY2xvc2VcIiwgZXZlbnQpO1xuICAgIH1cbiAgICBvblBheWxvYWQoZSkge1xuICAgICAgICBpZiAodHlwZW9mIGUuZGF0YSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHR5cGVvZiBlLmRhdGEgPT09IFwic3RyaW5nXCIgPyBzYWZlSnNvblBhcnNlKGUuZGF0YSkgOiBlLmRhdGE7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJwYXlsb2FkXCIsIHBheWxvYWQpO1xuICAgIH1cbiAgICBvbkVycm9yKGlkLCBlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5wYXJzZUVycm9yKGUpO1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCBlcnJvci50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0gZm9ybWF0SnNvblJwY0Vycm9yKGlkLCBtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdChcInBheWxvYWRcIiwgcGF5bG9hZCk7XG4gICAgfVxuICAgIHBhcnNlRXJyb3IoZSwgdXJsID0gdGhpcy51cmwpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlQ29ubmVjdGlvbkVycm9yKGUsIHVybCwgXCJXU1wiKTtcbiAgICB9XG4gICAgcmVzZXRNYXhMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50cy5nZXRNYXhMaXN0ZW5lcnMoKSA+IEVWRU5UX0VNSVRURVJfTUFYX0xJU1RFTkVSU19ERUZBVUxUKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5zZXRNYXhMaXN0ZW5lcnMoRVZFTlRfRU1JVFRFUl9NQVhfTElTVEVORVJTX0RFRkFVTFQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVtaXRFcnJvcihlcnJvckV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5wYXJzZUVycm9yKG5ldyBFcnJvcigoZXJyb3JFdmVudCA9PT0gbnVsbCB8fCBlcnJvckV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvckV2ZW50Lm1lc3NhZ2UpIHx8IGBXZWJTb2NrZXQgY29ubmVjdGlvbiBmYWlsZWQgZm9yIFVSTDogJHt0aGlzLnVybH1gKSk7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoXCJyZWdpc3Rlcl9lcnJvclwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBXc0Nvbm5lY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD13cy5qcy5tYXAiLCJpbXBvcnR7SUV2ZW50cyBhcyBlfWZyb21cIkB3YWxsZXRjb25uZWN0L2V2ZW50c1wiO2ltcG9ydCBjLHtFdmVudEVtaXR0ZXIgYXMgaX1mcm9tXCJldmVudHNcIjtjbGFzcyBuIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihzKXtzdXBlcigpLHRoaXMub3B0cz1zLHRoaXMucHJvdG9jb2w9XCJ3Y1wiLHRoaXMudmVyc2lvbj0yfX1jbGFzcyBse2NvbnN0cnVjdG9yKHMsdCxvKXt0aGlzLmNvcmU9cyx0aGlzLmxvZ2dlcj10fX1jbGFzcyBoIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihzLHQpe3N1cGVyKCksdGhpcy5jb3JlPXMsdGhpcy5sb2dnZXI9dCx0aGlzLnJlY29yZHM9bmV3IE1hcH19Y2xhc3MgYXtjb25zdHJ1Y3RvcihzLHQpe3RoaXMubG9nZ2VyPXMsdGhpcy5jb3JlPXR9fWNsYXNzIHUgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHMsdCl7c3VwZXIoKSx0aGlzLnJlbGF5ZXI9cyx0aGlzLmxvZ2dlcj10fX1jbGFzcyBnIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihzKXtzdXBlcigpfX1jbGFzcyBwe2NvbnN0cnVjdG9yKHMsdCxvLFMpe3RoaXMuY29yZT1zLHRoaXMubG9nZ2VyPXQsdGhpcy5uYW1lPW99fWNsYXNzIEl7Y29uc3RydWN0b3IoKXt0aGlzLm1hcD1uZXcgTWFwfX1jbGFzcyB4IGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihzLHQpe3N1cGVyKCksdGhpcy5yZWxheWVyPXMsdGhpcy5sb2dnZXI9dH19Y2xhc3MgZHtjb25zdHJ1Y3RvcihzLHQpe3RoaXMuY29yZT1zLHRoaXMubG9nZ2VyPXR9fWNsYXNzIEUgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHMsdCl7c3VwZXIoKSx0aGlzLmNvcmU9cyx0aGlzLmxvZ2dlcj10fX1jbGFzcyBte2NvbnN0cnVjdG9yKHMsdCl7dGhpcy5sb2dnZXI9cyx0aGlzLmNvcmU9dH19Y2xhc3MgdiBleHRlbmRzIGN7Y29uc3RydWN0b3IoKXtzdXBlcigpfX1jbGFzcyB5e2NvbnN0cnVjdG9yKHMpe3RoaXMub3B0cz1zLHRoaXMucHJvdG9jb2w9XCJ3Y1wiLHRoaXMudmVyc2lvbj0yfX1jbGFzcyBiIGV4dGVuZHMgaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKCl9fWNsYXNzIEN7Y29uc3RydWN0b3Iocyl7dGhpcy5jbGllbnQ9c319ZXhwb3J0e24gYXMgSUNvcmUsbCBhcyBJQ3J5cHRvLEMgYXMgSUVuZ2luZSxiIGFzIElFbmdpbmVFdmVudHMsRSBhcyBJRXhwaXJlcixoIGFzIElKc29uUnBjSGlzdG9yeSxkIGFzIElLZXlDaGFpbixhIGFzIElNZXNzYWdlVHJhY2tlcixtIGFzIElQYWlyaW5nLHUgYXMgSVB1Ymxpc2hlcixnIGFzIElSZWxheWVyLHkgYXMgSVNpZ25DbGllbnQsdiBhcyBJU2lnbkNsaWVudEV2ZW50cyxwIGFzIElTdG9yZSx4IGFzIElTdWJzY3JpYmVyLEkgYXMgSVN1YnNjcmliZXJUb3BpY01hcH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5qcy5tYXBcbiIsImltcG9ydHtDaGFDaGEyMFBvbHkxMzA1IGFzIGllfWZyb21cIkBzdGFibGVsaWIvY2hhY2hhMjBwb2x5MTMwNVwiO2ltcG9ydHtIS0RGIGFzIGZufWZyb21cIkBzdGFibGVsaWIvaGtkZlwiO2ltcG9ydHtyYW5kb21CeXRlcyBhcyBjZX1mcm9tXCJAc3RhYmxlbGliL3JhbmRvbVwiO2ltcG9ydHtTSEEyNTYgYXMgcG4saGFzaCBhcyBhZX1mcm9tXCJAc3RhYmxlbGliL3NoYTI1NlwiO2ltcG9ydCphcyB1ZSBmcm9tXCJAc3RhYmxlbGliL3gyNTUxOVwiO2ltcG9ydHt0b1N0cmluZyBhcyBFLGZyb21TdHJpbmcgYXMgaCxjb25jYXQgYXMgZGV9ZnJvbVwidWludDhhcnJheXNcIjtpbXBvcnR7ZGV0ZWN0IGFzIG1ufWZyb21cImRldGVjdC1icm93c2VyXCI7aW1wb3J0e3RvTWlsaXNlY29uZHMgYXMgcSxGSVZFX01JTlVURVMgYXMgbGUsZnJvbU1pbGlzZWNvbmRzIGFzIHlufWZyb21cIkB3YWxsZXRjb25uZWN0L3RpbWVcIjtpbXBvcnR7Z2V0RG9jdW1lbnQgYXMgRW4sZ2V0TmF2aWdhdG9yIGFzIGZlLGdldExvY2F0aW9uIGFzIHBlfWZyb21cIkB3YWxsZXRjb25uZWN0L3dpbmRvdy1nZXR0ZXJzXCI7aW1wb3J0e2dldFdpbmRvd01ldGFkYXRhIGFzIGhufWZyb21cIkB3YWxsZXRjb25uZWN0L3dpbmRvdy1tZXRhZGF0YVwiO2ltcG9ydCphcyAkIGZyb21cInF1ZXJ5LXN0cmluZ1wiO2ltcG9ydHtSRUxBWV9KU09OUlBDIGFzIHZufWZyb21cIkB3YWxsZXRjb25uZWN0L3JlbGF5LWFwaVwiO2NvbnN0IEQ9XCI6XCI7ZnVuY3Rpb24gbWUoZSl7Y29uc3Rbbix0XT1lLnNwbGl0KEQpO3JldHVybntuYW1lc3BhY2U6bixyZWZlcmVuY2U6dH19ZnVuY3Rpb24geWUoZSl7Y29uc3R7bmFtZXNwYWNlOm4scmVmZXJlbmNlOnR9PWU7cmV0dXJuW24sdF0uam9pbihEKX1mdW5jdGlvbiB6KGUpe2NvbnN0W24sdCxyXT1lLnNwbGl0KEQpO3JldHVybntuYW1lc3BhY2U6bixyZWZlcmVuY2U6dCxhZGRyZXNzOnJ9fWZ1bmN0aW9uIEVlKGUpe2NvbnN0e25hbWVzcGFjZTpuLHJlZmVyZW5jZTp0LGFkZHJlc3M6cn09ZTtyZXR1cm5bbix0LHJdLmpvaW4oRCl9ZnVuY3Rpb24gQihlLG4pe2NvbnN0IHQ9W107cmV0dXJuIGUuZm9yRWFjaChyPT57Y29uc3Qgbz1uKHIpO3QuaW5jbHVkZXMobyl8fHQucHVzaChvKX0pLHR9ZnVuY3Rpb24gaGUoZSl7Y29uc3R7YWRkcmVzczpufT16KGUpO3JldHVybiBufWZ1bmN0aW9uIHZlKGUpe2NvbnN0e25hbWVzcGFjZTpuLHJlZmVyZW5jZTp0fT16KGUpO3JldHVybiB5ZSh7bmFtZXNwYWNlOm4scmVmZXJlbmNlOnR9KX1mdW5jdGlvbiBnbihlLG4pe2NvbnN0e25hbWVzcGFjZTp0LHJlZmVyZW5jZTpyfT1tZShuKTtyZXR1cm4gRWUoe25hbWVzcGFjZTp0LHJlZmVyZW5jZTpyLGFkZHJlc3M6ZX0pfWZ1bmN0aW9uIE5uKGUpe3JldHVybiBCKGUsaGUpfWZ1bmN0aW9uIGdlKGUpe3JldHVybiBCKGUsdmUpfWZ1bmN0aW9uIGJuKGUsbj1bXSl7Y29uc3QgdD1bXTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChyPT57aWYobi5sZW5ndGgmJiFuLmluY2x1ZGVzKHIpKXJldHVybjtjb25zdCBvPWVbcl07dC5wdXNoKC4uLm8uYWNjb3VudHMpfSksdH1mdW5jdGlvbiBPbihlLG49W10pe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e2lmKG4ubGVuZ3RoJiYhbi5pbmNsdWRlcyhyKSlyZXR1cm47Y29uc3Qgbz1lW3JdO3QucHVzaCguLi5nZShvLmFjY291bnRzKSl9KSx0fWZ1bmN0aW9uIFNuKGUsbj1bXSl7Y29uc3QgdD1bXTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChyPT57aWYobi5sZW5ndGgmJiFuLmluY2x1ZGVzKHIpKXJldHVybjtjb25zdCBvPWVbcl07dC5wdXNoKC4uLlYocixvKSl9KSx0fWZ1bmN0aW9uIFYoZSxuKXtyZXR1cm4gZS5pbmNsdWRlcyhcIjpcIik/W2VdOm4uY2hhaW5zfHxbXX1jb25zdCBNPWU9PmU/LnNwbGl0KFwiOlwiKSxOZT1lPT57Y29uc3Qgbj1lJiZNKGUpO2lmKG4pcmV0dXJuIG5bM119LEluPWU9Pntjb25zdCBuPWUmJk0oZSk7aWYobilyZXR1cm4gblsyXStcIjpcIituWzNdfSxiZT1lPT57Y29uc3Qgbj1lJiZNKGUpO2lmKG4pcmV0dXJuIG4ucG9wKCl9LFBuPShlLG4pPT57Y29uc3QgdD1gJHtlLmRvbWFpbn0gd2FudHMgeW91IHRvIHNpZ24gaW4gd2l0aCB5b3VyIEV0aGVyZXVtIGFjY291bnQ6YCxyPWJlKG4pLG89ZS5zdGF0ZW1lbnQscz1gVVJJOiAke2UuYXVkfWAsYz1gVmVyc2lvbjogJHtlLnZlcnNpb259YCxkPWBDaGFpbiBJRDogJHtOZShuKX1gLGw9YE5vbmNlOiAke2Uubm9uY2V9YCxpPWBJc3N1ZWQgQXQ6ICR7ZS5pYXR9YCx1PWUucmVzb3VyY2VzJiZlLnJlc291cmNlcy5sZW5ndGg+MD9gUmVzb3VyY2VzOlxuJHtlLnJlc291cmNlcy5tYXAoYT0+YC0gJHthfWApLmpvaW4oYFxuYCl9YDp2b2lkIDA7cmV0dXJuW3QscixcIlwiLG8sXCJcIixzLGMsZCxsLGksdV0uZmlsdGVyKGE9PmEhPW51bGwpLmpvaW4oYFxuYCl9LEc9XCJiYXNlMTBcIixmPVwiYmFzZTE2XCIsSz1cImJhc2U2NHBhZFwiLGs9XCJ1dGY4XCIsWT0wLFU9MSxUbj0wLE9lPTEsVz0xMixKPTMyO2Z1bmN0aW9uIFJuKCl7Y29uc3QgZT11ZS5nZW5lcmF0ZUtleVBhaXIoKTtyZXR1cm57cHJpdmF0ZUtleTpFKGUuc2VjcmV0S2V5LGYpLHB1YmxpY0tleTpFKGUucHVibGljS2V5LGYpfX1mdW5jdGlvbiBBbigpe2NvbnN0IGU9Y2UoSik7cmV0dXJuIEUoZSxmKX1mdW5jdGlvbiBVbihlLG4pe2NvbnN0IHQ9dWUuc2hhcmVkS2V5KGgoZSxmKSxoKG4sZikpLHI9bmV3IGZuKHBuLHQpLmV4cGFuZChKKTtyZXR1cm4gRShyLGYpfWZ1bmN0aW9uIF9uKGUpe2NvbnN0IG49YWUoaChlLGYpKTtyZXR1cm4gRShuLGYpfWZ1bmN0aW9uIHduKGUpe2NvbnN0IG49YWUoaChlLGspKTtyZXR1cm4gRShuLGYpfWZ1bmN0aW9uIFNlKGUpe3JldHVybiBoKGAke2V9YCxHKX1mdW5jdGlvbiBqKGUpe3JldHVybiBOdW1iZXIoRShlLEcpKX1mdW5jdGlvbiBqbihlKXtjb25zdCBuPVNlKHR5cGVvZiBlLnR5cGU8XCJ1XCI/ZS50eXBlOlkpO2lmKGoobik9PT1VJiZ0eXBlb2YgZS5zZW5kZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBzZW5kZXIgcHVibGljIGtleSBmb3IgdHlwZSAxIGVudmVsb3BlXCIpO2NvbnN0IHQ9dHlwZW9mIGUuc2VuZGVyUHVibGljS2V5PFwidVwiP2goZS5zZW5kZXJQdWJsaWNLZXksZik6dm9pZCAwLHI9dHlwZW9mIGUuaXY8XCJ1XCI/aChlLml2LGYpOmNlKFcpLG89bmV3IGllKGgoZS5zeW1LZXksZikpLnNlYWwocixoKGUubWVzc2FnZSxrKSk7cmV0dXJuIEllKHt0eXBlOm4sc2VhbGVkOm8saXY6cixzZW5kZXJQdWJsaWNLZXk6dH0pfWZ1bmN0aW9uIENuKGUpe2NvbnN0IG49bmV3IGllKGgoZS5zeW1LZXksZikpLHtzZWFsZWQ6dCxpdjpyfT1RKGUuZW5jb2RlZCksbz1uLm9wZW4ocix0KTtpZihvPT09bnVsbCl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZGVjcnlwdFwiKTtyZXR1cm4gRShvLGspfWZ1bmN0aW9uIEllKGUpe2lmKGooZS50eXBlKT09PVUpe2lmKHR5cGVvZiBlLnNlbmRlclB1YmxpY0tleT5cInVcIil0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHNlbmRlciBwdWJsaWMga2V5IGZvciB0eXBlIDEgZW52ZWxvcGVcIik7cmV0dXJuIEUoZGUoW2UudHlwZSxlLnNlbmRlclB1YmxpY0tleSxlLml2LGUuc2VhbGVkXSksSyl9cmV0dXJuIEUoZGUoW2UudHlwZSxlLml2LGUuc2VhbGVkXSksSyl9ZnVuY3Rpb24gUShlKXtjb25zdCBuPWgoZSxLKSx0PW4uc2xpY2UoVG4sT2UpLHI9T2U7aWYoaih0KT09PVUpe2NvbnN0IGQ9citKLGw9ZCtXLGk9bi5zbGljZShyLGQpLHU9bi5zbGljZShkLGwpLGE9bi5zbGljZShsKTtyZXR1cm57dHlwZTp0LHNlYWxlZDphLGl2OnUsc2VuZGVyUHVibGljS2V5Oml9fWNvbnN0IG89citXLHM9bi5zbGljZShyLG8pLGM9bi5zbGljZShvKTtyZXR1cm57dHlwZTp0LHNlYWxlZDpjLGl2OnN9fWZ1bmN0aW9uICRuKGUsbil7Y29uc3QgdD1RKGUpO3JldHVybiBQZSh7dHlwZTpqKHQudHlwZSksc2VuZGVyUHVibGljS2V5OnR5cGVvZiB0LnNlbmRlclB1YmxpY0tleTxcInVcIj9FKHQuc2VuZGVyUHVibGljS2V5LGYpOnZvaWQgMCxyZWNlaXZlclB1YmxpY0tleTpuPy5yZWNlaXZlclB1YmxpY0tleX0pfWZ1bmN0aW9uIFBlKGUpe2NvbnN0IG49ZT8udHlwZXx8WTtpZihuPT09VSl7aWYodHlwZW9mIGU/LnNlbmRlclB1YmxpY0tleT5cInVcIil0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIHNlbmRlciBwdWJsaWMga2V5XCIpO2lmKHR5cGVvZiBlPy5yZWNlaXZlclB1YmxpY0tleT5cInVcIil0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIHJlY2VpdmVyIHB1YmxpYyBrZXlcIil9cmV0dXJue3R5cGU6bixzZW5kZXJQdWJsaWNLZXk6ZT8uc2VuZGVyUHVibGljS2V5LHJlY2VpdmVyUHVibGljS2V5OmU/LnJlY2VpdmVyUHVibGljS2V5fX1mdW5jdGlvbiBEbihlKXtyZXR1cm4gZS50eXBlPT09VSYmdHlwZW9mIGUuc2VuZGVyUHVibGljS2V5PT1cInN0cmluZ1wiJiZ0eXBlb2YgZS5yZWNlaXZlclB1YmxpY0tleT09XCJzdHJpbmdcIn12YXIgVm49T2JqZWN0LmRlZmluZVByb3BlcnR5LFRlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsTW49T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxLbj1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLFJlPShlLG4sdCk9Pm4gaW4gZT9WbihlLG4se2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTplW25dPXQsQWU9KGUsbik9Pntmb3IodmFyIHQgaW4gbnx8KG49e30pKU1uLmNhbGwobix0KSYmUmUoZSx0LG5bdF0pO2lmKFRlKWZvcih2YXIgdCBvZiBUZShuKSlLbi5jYWxsKG4sdCkmJlJlKGUsdCxuW3RdKTtyZXR1cm4gZX07Y29uc3QgVWU9XCJSZWFjdE5hdGl2ZVwiLF89e3JlYWN0TmF0aXZlOlwicmVhY3QtbmF0aXZlXCIsbm9kZTpcIm5vZGVcIixicm93c2VyOlwiYnJvd3NlclwiLHVua25vd246XCJ1bmtub3duXCJ9LEw9XCIgXCIsa249XCI6XCIsX2U9XCIvXCIsWj0yLExuPTFlMyx3ZT1cImpzXCI7ZnVuY3Rpb24gWCgpe3JldHVybiB0eXBlb2YgcHJvY2VzczxcInVcIiYmdHlwZW9mIHByb2Nlc3MudmVyc2lvbnM8XCJ1XCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGU8XCJ1XCJ9ZnVuY3Rpb24gamUoKXtyZXR1cm4hRW4oKSYmISFmZSgpJiZuYXZpZ2F0b3IucHJvZHVjdD09PVVlfWZ1bmN0aW9uIENlKCl7cmV0dXJuIVgoKSYmISFmZSgpfWZ1bmN0aW9uIGVlKCl7cmV0dXJuIGplKCk/Xy5yZWFjdE5hdGl2ZTpYKCk/Xy5ub2RlOkNlKCk/Xy5icm93c2VyOl8udW5rbm93bn1mdW5jdGlvbiAkZShlLG4pe2xldCB0PSQucGFyc2UoZSk7cmV0dXJuIHQ9QWUoQWUoe30sdCksbiksZT0kLnN0cmluZ2lmeSh0KSxlfWZ1bmN0aW9uIHhuKCl7cmV0dXJuIGhuKCl8fHtuYW1lOlwiXCIsZGVzY3JpcHRpb246XCJcIix1cmw6XCJcIixpY29uczpbXCJcIl19fWZ1bmN0aW9uIEZuKGUsbil7dmFyIHQ7Y29uc3Qgcj1lZSgpLG89e3Byb3RvY29sOmUsdmVyc2lvbjpuLGVudjpyfTtyZXR1cm4gcj09PVwiYnJvd3NlclwiJiYoby5ob3N0PSgodD1wZSgpKT09bnVsbD92b2lkIDA6dC5ob3N0KXx8XCJ1bmtub3duXCIpLG99ZnVuY3Rpb24gRGUoKXtjb25zdCBlPW1uKCk7aWYoZT09PW51bGwpcmV0dXJuXCJ1bmtub3duXCI7Y29uc3Qgbj1lLm9zP2Uub3MucmVwbGFjZShcIiBcIixcIlwiKS50b0xvd2VyQ2FzZSgpOlwidW5rbm93blwiO3JldHVybiBlLnR5cGU9PT1cImJyb3dzZXJcIj9bbixlLm5hbWUsZS52ZXJzaW9uXS5qb2luKFwiLVwiKTpbbixlLnZlcnNpb25dLmpvaW4oXCItXCIpfWZ1bmN0aW9uIFZlKCl7dmFyIGU7Y29uc3Qgbj1lZSgpO3JldHVybiBuPT09Xy5icm93c2VyP1tuLCgoZT1wZSgpKT09bnVsbD92b2lkIDA6ZS5ob3N0KXx8XCJ1bmtub3duXCJdLmpvaW4oXCI6XCIpOm59ZnVuY3Rpb24gTWUoZSxuLHQpe2NvbnN0IHI9RGUoKSxvPVZlKCk7cmV0dXJuW1tlLG5dLmpvaW4oXCItXCIpLFt3ZSx0XS5qb2luKFwiLVwiKSxyLG9dLmpvaW4oXCIvXCIpfWZ1bmN0aW9uIEhuKHtwcm90b2NvbDplLHZlcnNpb246bixyZWxheVVybDp0LHNka1ZlcnNpb246cixhdXRoOm8scHJvamVjdElkOnMsdXNlT25DbG9zZUV2ZW50OmN9KXtjb25zdCBkPXQuc3BsaXQoXCI/XCIpLGw9TWUoZSxuLHIpLGk9e2F1dGg6byx1YTpsLHByb2plY3RJZDpzLHVzZU9uQ2xvc2VFdmVudDpjfHx2b2lkIDB9LHU9JGUoZFsxXXx8XCJcIixpKTtyZXR1cm4gZFswXStcIj9cIit1fWZ1bmN0aW9uIHFuKGUpe2xldCBuPShlLm1hdGNoKC9eW146XSsoPz06XFwvXFwvKS9naSl8fFtdKVswXTtjb25zdCB0PXR5cGVvZiBuPFwidVwiP2Uuc3BsaXQoXCI6Ly9cIilbMV06ZTtyZXR1cm4gbj1uPT09XCJ3c3NcIj9cImh0dHBzXCI6XCJodHRwXCIsW24sdF0uam9pbihcIjovL1wiKX1mdW5jdGlvbiB6bihlLG4sdCl7aWYoIWVbbl18fHR5cGVvZiBlW25dIT09dCl0aHJvdyBuZXcgRXJyb3IoYE1pc3Npbmcgb3IgaW52YWxpZCBcIiR7bn1cIiBwYXJhbWApfWZ1bmN0aW9uIEtlKGUsbj1aKXtyZXR1cm4ga2UoZS5zcGxpdChfZSksbil9ZnVuY3Rpb24gQm4oZSl7cmV0dXJuIEtlKGUpLmpvaW4oTCl9ZnVuY3Rpb24gYihlLG4pe3JldHVybiBlLmZpbHRlcih0PT5uLmluY2x1ZGVzKHQpKS5sZW5ndGg9PT1lLmxlbmd0aH1mdW5jdGlvbiBrZShlLG49Wil7cmV0dXJuIGUuc2xpY2UoTWF0aC5tYXgoZS5sZW5ndGgtbiwwKSl9ZnVuY3Rpb24gR24oZSl7cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhlLmVudHJpZXMoKSl9ZnVuY3Rpb24gWW4oZSl7cmV0dXJuIG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZSkpfWZ1bmN0aW9uIFduKGUsbil7Y29uc3QgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChyPT57dFtyXT1uKGVbcl0pfSksdH1jb25zdCBKbj1lPT5lO2Z1bmN0aW9uIExlKGUpe3JldHVybiBlLnRyaW0oKS5yZXBsYWNlKC9eXFx3LyxuPT5uLnRvVXBwZXJDYXNlKCkpfWZ1bmN0aW9uIFFuKGUpe3JldHVybiBlLnNwbGl0KEwpLm1hcChuPT5MZShuKSkuam9pbihMKX1mdW5jdGlvbiBabihlPWxlLG4pe2NvbnN0IHQ9cShlfHxsZSk7bGV0IHIsbyxzO3JldHVybntyZXNvbHZlOmM9PntzJiZyJiYoY2xlYXJUaW1lb3V0KHMpLHIoYykpfSxyZWplY3Q6Yz0+e3MmJm8mJihjbGVhclRpbWVvdXQocyksbyhjKSl9LGRvbmU6KCk9Pm5ldyBQcm9taXNlKChjLGQpPT57cz1zZXRUaW1lb3V0KCgpPT57ZChuZXcgRXJyb3IobikpfSx0KSxyPWMsbz1kfSl9fWZ1bmN0aW9uIFhuKGUsbix0KXtyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMocixvKT0+e2NvbnN0IHM9c2V0VGltZW91dCgoKT0+byhuZXcgRXJyb3IodCkpLG4pO3RyeXtjb25zdCBjPWF3YWl0IGU7cihjKX1jYXRjaChjKXtvKGMpfWNsZWFyVGltZW91dChzKX0pfWZ1bmN0aW9uIG5lKGUsbil7aWYodHlwZW9mIG49PVwic3RyaW5nXCImJm4uc3RhcnRzV2l0aChgJHtlfTpgKSlyZXR1cm4gbjtpZihlLnRvTG93ZXJDYXNlKCk9PT1cInRvcGljXCIpe2lmKHR5cGVvZiBuIT1cInN0cmluZ1wiKXRocm93IG5ldyBFcnJvcignVmFsdWUgbXVzdCBiZSBcInN0cmluZ1wiIGZvciBleHBpcmVyIHRhcmdldCB0eXBlOiB0b3BpYycpO3JldHVybmB0b3BpYzoke259YH1lbHNlIGlmKGUudG9Mb3dlckNhc2UoKT09PVwiaWRcIil7aWYodHlwZW9mIG4hPVwibnVtYmVyXCIpdGhyb3cgbmV3IEVycm9yKCdWYWx1ZSBtdXN0IGJlIFwibnVtYmVyXCIgZm9yIGV4cGlyZXIgdGFyZ2V0IHR5cGU6IGlkJyk7cmV0dXJuYGlkOiR7bn1gfXRocm93IG5ldyBFcnJvcihgVW5rbm93biBleHBpcmVyIHRhcmdldCB0eXBlOiAke2V9YCl9ZnVuY3Rpb24gZXQoZSl7cmV0dXJuIG5lKFwidG9waWNcIixlKX1mdW5jdGlvbiBudChlKXtyZXR1cm4gbmUoXCJpZFwiLGUpfWZ1bmN0aW9uIHR0KGUpe2NvbnN0W24sdF09ZS5zcGxpdChcIjpcIikscj17aWQ6dm9pZCAwLHRvcGljOnZvaWQgMH07aWYobj09PVwidG9waWNcIiYmdHlwZW9mIHQ9PVwic3RyaW5nXCIpci50b3BpYz10O2Vsc2UgaWYobj09PVwiaWRcIiYmTnVtYmVyLmlzSW50ZWdlcihOdW1iZXIodCkpKXIuaWQ9TnVtYmVyKHQpO2Vsc2UgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRhcmdldCwgZXhwZWN0ZWQgaWQ6bnVtYmVyIG9yIHRvcGljOnN0cmluZywgZ290ICR7bn06JHt0fWApO3JldHVybiByfWZ1bmN0aW9uIHJ0KGUsbil7cmV0dXJuIHluKChufHxEYXRlLm5vdygpKStxKGUpKX1mdW5jdGlvbiBvdChlKXtyZXR1cm4gRGF0ZS5ub3coKT49cShlKX1mdW5jdGlvbiBzdChlLG4pe3JldHVybmAke2V9JHtuP2A6JHtufWA6XCJcIn1gfWZ1bmN0aW9uIE8oZT1bXSxuPVtdKXtyZXR1cm5bLi4ubmV3IFNldChbLi4uZSwuLi5uXSldfWNvbnN0IHhlPVwiaXJuXCI7ZnVuY3Rpb24gaXQoZSl7cmV0dXJuIGU/LnJlbGF5fHx7cHJvdG9jb2w6eGV9fWZ1bmN0aW9uIGN0KGUpe2NvbnN0IG49dm5bZV07aWYodHlwZW9mIG4+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKGBSZWxheSBQcm90b2NvbCBub3Qgc3VwcG9ydGVkOiAke2V9YCk7cmV0dXJuIG59dmFyIGF0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxGZT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLHV0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksZHQ9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxIZT0oZSxuLHQpPT5uIGluIGU/YXQoZSxuLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6ZVtuXT10LGx0PShlLG4pPT57Zm9yKHZhciB0IGluIG58fChuPXt9KSl1dC5jYWxsKG4sdCkmJkhlKGUsdCxuW3RdKTtpZihGZSlmb3IodmFyIHQgb2YgRmUobikpZHQuY2FsbChuLHQpJiZIZShlLHQsblt0XSk7cmV0dXJuIGV9O2Z1bmN0aW9uIHFlKGUsbj1cIi1cIil7Y29uc3QgdD17fSxyPVwicmVsYXlcIituO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKG89PntpZihvLnN0YXJ0c1dpdGgocikpe2NvbnN0IHM9by5yZXBsYWNlKHIsXCJcIiksYz1lW29dO3Rbc109Y319KSx0fWZ1bmN0aW9uIGZ0KGUpe2NvbnN0IG49ZS5pbmRleE9mKFwiOlwiKSx0PWUuaW5kZXhPZihcIj9cIikhPT0tMT9lLmluZGV4T2YoXCI/XCIpOnZvaWQgMCxyPWUuc3Vic3RyaW5nKDAsbiksbz1lLnN1YnN0cmluZyhuKzEsdCkuc3BsaXQoXCJAXCIpLHM9dHlwZW9mIHQ8XCJ1XCI/ZS5zdWJzdHJpbmcodCk6XCJcIixjPSQucGFyc2Uocyk7cmV0dXJue3Byb3RvY29sOnIsdG9waWM6b1swXSx2ZXJzaW9uOnBhcnNlSW50KG9bMV0sMTApLHN5bUtleTpjLnN5bUtleSxyZWxheTpxZShjKX19ZnVuY3Rpb24gemUoZSxuPVwiLVwiKXtjb25zdCB0PVwicmVsYXlcIixyPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKG89Pntjb25zdCBzPXQrbitvO2Vbb10mJihyW3NdPWVbb10pfSkscn1mdW5jdGlvbiBwdChlKXtyZXR1cm5gJHtlLnByb3RvY29sfToke2UudG9waWN9QCR7ZS52ZXJzaW9ufT9gKyQuc3RyaW5naWZ5KGx0KHtzeW1LZXk6ZS5zeW1LZXl9LHplKGUucmVsYXkpKSl9dmFyIG10PU9iamVjdC5kZWZpbmVQcm9wZXJ0eSx5dD1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxFdD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxCZT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLGh0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdnQ9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxHZT0oZSxuLHQpPT5uIGluIGU/bXQoZSxuLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6ZVtuXT10LGd0PShlLG4pPT57Zm9yKHZhciB0IGluIG58fChuPXt9KSlodC5jYWxsKG4sdCkmJkdlKGUsdCxuW3RdKTtpZihCZSlmb3IodmFyIHQgb2YgQmUobikpdnQuY2FsbChuLHQpJiZHZShlLHQsblt0XSk7cmV0dXJuIGV9LE50PShlLG4pPT55dChlLEV0KG4pKTtmdW5jdGlvbiBUKGUpe2NvbnN0IG49W107cmV0dXJuIGUuZm9yRWFjaCh0PT57Y29uc3RbcixvXT10LnNwbGl0KFwiOlwiKTtuLnB1c2goYCR7cn06JHtvfWApfSksbn1mdW5jdGlvbiBZZShlKXtjb25zdCBuPVtdO3JldHVybiBPYmplY3QudmFsdWVzKGUpLmZvckVhY2godD0+e24ucHVzaCguLi5UKHQuYWNjb3VudHMpKX0pLG59ZnVuY3Rpb24gV2UoZSxuKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3QudmFsdWVzKGUpLmZvckVhY2gocj0+e1Qoci5hY2NvdW50cykuaW5jbHVkZXMobikmJnQucHVzaCguLi5yLm1ldGhvZHMpfSksdH1mdW5jdGlvbiBKZShlLG4pe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC52YWx1ZXMoZSkuZm9yRWFjaChyPT57VChyLmFjY291bnRzKS5pbmNsdWRlcyhuKSYmdC5wdXNoKC4uLnIuZXZlbnRzKX0pLHR9ZnVuY3Rpb24gYnQoZSxuKXtjb25zdCB0PW9uKGUsbik7aWYodCl0aHJvdyBuZXcgRXJyb3IodC5tZXNzYWdlKTtjb25zdCByPXt9O2Zvcihjb25zdFtvLHNdb2YgT2JqZWN0LmVudHJpZXMoZSkpcltvXT17bWV0aG9kczpzLm1ldGhvZHMsZXZlbnRzOnMuZXZlbnRzLGNoYWluczpzLmFjY291bnRzLm1hcChjPT5gJHtjLnNwbGl0KFwiOlwiKVswXX06JHtjLnNwbGl0KFwiOlwiKVsxXX1gKX07cmV0dXJuIHJ9ZnVuY3Rpb24gT3QoZSl7Y29uc3R7cmVxdWlyZWROYW1lc3BhY2VzOm4sb3B0aW9uYWxOYW1lc3BhY2VzOnQ9e30sc3VwcG9ydGVkTmFtZXNwYWNlczpyfT1lLG89cmUobikscz1yZSh0KSxjPXt9O09iamVjdC5rZXlzKHIpLmZvckVhY2goaT0+e2NvbnN0IHU9cltpXS5jaGFpbnMsYT1yW2ldLm1ldGhvZHMsZz1yW2ldLmV2ZW50cyxBPXJbaV0uYWNjb3VudHM7Y1tpXT17Y2hhaW5zOnUsbWV0aG9kczphLGV2ZW50czpnLGFjY291bnRzOkF9fSk7Y29uc3QgZD1jbihuLGMsXCJhcHByb3ZlKClcIik7aWYoZCl0aHJvdyBuZXcgRXJyb3IoZC5tZXNzYWdlKTtjb25zdCBsPXt9O3JldHVybiBPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGk9Pntjb25zdCB1PXJbaV0uY2hhaW5zLmZpbHRlcih2PT57dmFyIHAseTtyZXR1cm4oeT0ocD1vW2ldKT09bnVsbD92b2lkIDA6cC5jaGFpbnMpPT1udWxsP3ZvaWQgMDp5LmluY2x1ZGVzKHYpfSksYT1yW2ldLm1ldGhvZHMuZmlsdGVyKHY9Pnt2YXIgcCx5O3JldHVybih5PShwPW9baV0pPT1udWxsP3ZvaWQgMDpwLm1ldGhvZHMpPT1udWxsP3ZvaWQgMDp5LmluY2x1ZGVzKHYpfSksZz1yW2ldLmV2ZW50cy5maWx0ZXIodj0+e3ZhciBwLHk7cmV0dXJuKHk9KHA9b1tpXSk9PW51bGw/dm9pZCAwOnAuZXZlbnRzKT09bnVsbD92b2lkIDA6eS5pbmNsdWRlcyh2KX0pLEE9dS5tYXAodj0+cltpXS5hY2NvdW50cy5maWx0ZXIocD0+cC5pbmNsdWRlcyh2KSkpLmZsYXQoKTtsW2ldPXtjaGFpbnM6dSxtZXRob2RzOmEsZXZlbnRzOmcsYWNjb3VudHM6QX19KSxPYmplY3Qua2V5cyhzKS5mb3JFYWNoKGk9Pnt2YXIgdSxhLGcsQSx2LHA7aWYoIXJbaV0pcmV0dXJuO2NvbnN0IHk9KGE9KHU9c1tpXSk9PW51bGw/dm9pZCAwOnUuY2hhaW5zKT09bnVsbD92b2lkIDA6YS5maWx0ZXIoST0+cltpXS5jaGFpbnMuaW5jbHVkZXMoSSkpLHVuPXJbaV0ubWV0aG9kcy5maWx0ZXIoST0+e3ZhciBQLHc7cmV0dXJuKHc9KFA9c1tpXSk9PW51bGw/dm9pZCAwOlAubWV0aG9kcyk9PW51bGw/dm9pZCAwOncuaW5jbHVkZXMoSSl9KSxkbj1yW2ldLmV2ZW50cy5maWx0ZXIoST0+e3ZhciBQLHc7cmV0dXJuKHc9KFA9c1tpXSk9PW51bGw/dm9pZCAwOlAuZXZlbnRzKT09bnVsbD92b2lkIDA6dy5pbmNsdWRlcyhJKX0pLGxuPXk/Lm1hcChJPT5yW2ldLmFjY291bnRzLmZpbHRlcihQPT5QLmluY2x1ZGVzKEkpKSkuZmxhdCgpO2xbaV09e2NoYWluczpPKChnPWxbaV0pPT1udWxsP3ZvaWQgMDpnLmNoYWlucyx5KSxtZXRob2RzOk8oKEE9bFtpXSk9PW51bGw/dm9pZCAwOkEubWV0aG9kcyx1biksZXZlbnRzOk8oKHY9bFtpXSk9PW51bGw/dm9pZCAwOnYuZXZlbnRzLGRuKSxhY2NvdW50czpPKChwPWxbaV0pPT1udWxsP3ZvaWQgMDpwLmFjY291bnRzLGxuKX19KSxsfWZ1bmN0aW9uIHRlKGUpe3JldHVybiBlLmluY2x1ZGVzKFwiOlwiKX1mdW5jdGlvbiBRZShlKXtyZXR1cm4gdGUoZSk/ZS5zcGxpdChcIjpcIilbMF06ZX1mdW5jdGlvbiByZShlKXt2YXIgbix0LHI7Y29uc3Qgbz17fTtpZigheChlKSlyZXR1cm4gbztmb3IoY29uc3RbcyxjXW9mIE9iamVjdC5lbnRyaWVzKGUpKXtjb25zdCBkPXRlKHMpP1tzXTpjLmNoYWlucyxsPWMubWV0aG9kc3x8W10saT1jLmV2ZW50c3x8W10sdT1RZShzKTtvW3VdPU50KGd0KHt9LG9bdV0pLHtjaGFpbnM6TyhkLChuPW9bdV0pPT1udWxsP3ZvaWQgMDpuLmNoYWlucyksbWV0aG9kczpPKGwsKHQ9b1t1XSk9PW51bGw/dm9pZCAwOnQubWV0aG9kcyksZXZlbnRzOk8oaSwocj1vW3VdKT09bnVsbD92b2lkIDA6ci5ldmVudHMpfSl9cmV0dXJuIG99Y29uc3QgU3Q9e0lOVkFMSURfTUVUSE9EOnttZXNzYWdlOlwiSW52YWxpZCBtZXRob2QuXCIsY29kZToxMDAxfSxJTlZBTElEX0VWRU5UOnttZXNzYWdlOlwiSW52YWxpZCBldmVudC5cIixjb2RlOjEwMDJ9LElOVkFMSURfVVBEQVRFX1JFUVVFU1Q6e21lc3NhZ2U6XCJJbnZhbGlkIHVwZGF0ZSByZXF1ZXN0LlwiLGNvZGU6MTAwM30sSU5WQUxJRF9FWFRFTkRfUkVRVUVTVDp7bWVzc2FnZTpcIkludmFsaWQgZXh0ZW5kIHJlcXVlc3QuXCIsY29kZToxMDA0fSxJTlZBTElEX1NFU1NJT05fU0VUVExFX1JFUVVFU1Q6e21lc3NhZ2U6XCJJbnZhbGlkIHNlc3Npb24gc2V0dGxlIHJlcXVlc3QuXCIsY29kZToxMDA1fSxVTkFVVEhPUklaRURfTUVUSE9EOnttZXNzYWdlOlwiVW5hdXRob3JpemVkIG1ldGhvZC5cIixjb2RlOjMwMDF9LFVOQVVUSE9SSVpFRF9FVkVOVDp7bWVzc2FnZTpcIlVuYXV0aG9yaXplZCBldmVudC5cIixjb2RlOjMwMDJ9LFVOQVVUSE9SSVpFRF9VUERBVEVfUkVRVUVTVDp7bWVzc2FnZTpcIlVuYXV0aG9yaXplZCB1cGRhdGUgcmVxdWVzdC5cIixjb2RlOjMwMDN9LFVOQVVUSE9SSVpFRF9FWFRFTkRfUkVRVUVTVDp7bWVzc2FnZTpcIlVuYXV0aG9yaXplZCBleHRlbmQgcmVxdWVzdC5cIixjb2RlOjMwMDR9LFVTRVJfUkVKRUNURUQ6e21lc3NhZ2U6XCJVc2VyIHJlamVjdGVkLlwiLGNvZGU6NWUzfSxVU0VSX1JFSkVDVEVEX0NIQUlOUzp7bWVzc2FnZTpcIlVzZXIgcmVqZWN0ZWQgY2hhaW5zLlwiLGNvZGU6NTAwMX0sVVNFUl9SRUpFQ1RFRF9NRVRIT0RTOnttZXNzYWdlOlwiVXNlciByZWplY3RlZCBtZXRob2RzLlwiLGNvZGU6NTAwMn0sVVNFUl9SRUpFQ1RFRF9FVkVOVFM6e21lc3NhZ2U6XCJVc2VyIHJlamVjdGVkIGV2ZW50cy5cIixjb2RlOjUwMDN9LFVOU1VQUE9SVEVEX0NIQUlOUzp7bWVzc2FnZTpcIlVuc3VwcG9ydGVkIGNoYWlucy5cIixjb2RlOjUxMDB9LFVOU1VQUE9SVEVEX01FVEhPRFM6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCBtZXRob2RzLlwiLGNvZGU6NTEwMX0sVU5TVVBQT1JURURfRVZFTlRTOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgZXZlbnRzLlwiLGNvZGU6NTEwMn0sVU5TVVBQT1JURURfQUNDT1VOVFM6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCBhY2NvdW50cy5cIixjb2RlOjUxMDN9LFVOU1VQUE9SVEVEX05BTUVTUEFDRV9LRVk6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCBuYW1lc3BhY2Uga2V5LlwiLGNvZGU6NTEwNH0sVVNFUl9ESVNDT05ORUNURUQ6e21lc3NhZ2U6XCJVc2VyIGRpc2Nvbm5lY3RlZC5cIixjb2RlOjZlM30sU0VTU0lPTl9TRVRUTEVNRU5UX0ZBSUxFRDp7bWVzc2FnZTpcIlNlc3Npb24gc2V0dGxlbWVudCBmYWlsZWQuXCIsY29kZTo3ZTN9LFdDX01FVEhPRF9VTlNVUFBPUlRFRDp7bWVzc2FnZTpcIlVuc3VwcG9ydGVkIHdjXyBtZXRob2QuXCIsY29kZToxMDAwMX19LEl0PXtOT1RfSU5JVElBTElaRUQ6e21lc3NhZ2U6XCJOb3QgaW5pdGlhbGl6ZWQuXCIsY29kZToxfSxOT19NQVRDSElOR19LRVk6e21lc3NhZ2U6XCJObyBtYXRjaGluZyBrZXkuXCIsY29kZToyfSxSRVNUT1JFX1dJTExfT1ZFUlJJREU6e21lc3NhZ2U6XCJSZXN0b3JlIHdpbGwgb3ZlcnJpZGUuXCIsY29kZTozfSxSRVNVQlNDUklCRUQ6e21lc3NhZ2U6XCJSZXN1YnNjcmliZWQuXCIsY29kZTo0fSxNSVNTSU5HX09SX0lOVkFMSUQ6e21lc3NhZ2U6XCJNaXNzaW5nIG9yIGludmFsaWQuXCIsY29kZTo1fSxFWFBJUkVEOnttZXNzYWdlOlwiRXhwaXJlZC5cIixjb2RlOjZ9LFVOS05PV05fVFlQRTp7bWVzc2FnZTpcIlVua25vd24gdHlwZS5cIixjb2RlOjd9LE1JU01BVENIRURfVE9QSUM6e21lc3NhZ2U6XCJNaXNtYXRjaGVkIHRvcGljLlwiLGNvZGU6OH0sTk9OX0NPTkZPUk1JTkdfTkFNRVNQQUNFUzp7bWVzc2FnZTpcIk5vbiBjb25mb3JtaW5nIG5hbWVzcGFjZXMuXCIsY29kZTo5fX07ZnVuY3Rpb24gTihlLG4pe2NvbnN0e21lc3NhZ2U6dCxjb2RlOnJ9PUl0W2VdO3JldHVybnttZXNzYWdlOm4/YCR7dH0gJHtufWA6dCxjb2RlOnJ9fWZ1bmN0aW9uIFIoZSxuKXtjb25zdHttZXNzYWdlOnQsY29kZTpyfT1TdFtlXTtyZXR1cm57bWVzc2FnZTpuP2Ake3R9ICR7bn1gOnQsY29kZTpyfX1mdW5jdGlvbiBDKGUsbil7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/dHlwZW9mIG48XCJ1XCImJmUubGVuZ3RoP2UuZXZlcnkobik6ITA6ITF9ZnVuY3Rpb24geChlKXtyZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpPT09T2JqZWN0LnByb3RvdHlwZSYmT2JqZWN0LmtleXMoZSkubGVuZ3RofWZ1bmN0aW9uIFMoZSl7cmV0dXJuIHR5cGVvZiBlPlwidVwifWZ1bmN0aW9uIG0oZSxuKXtyZXR1cm4gbiYmUyhlKT8hMDp0eXBlb2YgZT09XCJzdHJpbmdcIiYmQm9vbGVhbihlLnRyaW0oKS5sZW5ndGgpfWZ1bmN0aW9uIEYoZSxuKXtyZXR1cm4gbiYmUyhlKT8hMDp0eXBlb2YgZT09XCJudW1iZXJcIiYmIWlzTmFOKGUpfWZ1bmN0aW9uIFB0KGUsbil7Y29uc3R7cmVxdWlyZWROYW1lc3BhY2VzOnR9PW4scj1PYmplY3Qua2V5cyhlLm5hbWVzcGFjZXMpLG89T2JqZWN0LmtleXModCk7bGV0IHM9ITA7cmV0dXJuIGIobyxyKT8oci5mb3JFYWNoKGM9Pntjb25zdHthY2NvdW50czpkLG1ldGhvZHM6bCxldmVudHM6aX09ZS5uYW1lc3BhY2VzW2NdLHU9VChkKSxhPXRbY107KCFiKFYoYyxhKSx1KXx8IWIoYS5tZXRob2RzLGwpfHwhYihhLmV2ZW50cyxpKSkmJihzPSExKX0pLHMpOiExfWZ1bmN0aW9uIEgoZSl7cmV0dXJuIG0oZSwhMSkmJmUuaW5jbHVkZXMoXCI6XCIpP2Uuc3BsaXQoXCI6XCIpLmxlbmd0aD09PTI6ITF9ZnVuY3Rpb24gWmUoZSl7aWYobShlLCExKSYmZS5pbmNsdWRlcyhcIjpcIikpe2NvbnN0IG49ZS5zcGxpdChcIjpcIik7aWYobi5sZW5ndGg9PT0zKXtjb25zdCB0PW5bMF0rXCI6XCIrblsxXTtyZXR1cm4hIW5bMl0mJkgodCl9fXJldHVybiExfWZ1bmN0aW9uIFR0KGUpe2lmKG0oZSwhMSkpdHJ5e3JldHVybiB0eXBlb2YgbmV3IFVSTChlKTxcInVcIn1jYXRjaHtyZXR1cm4hMX1yZXR1cm4hMX1mdW5jdGlvbiBSdChlKXt2YXIgbjtyZXR1cm4obj1lPy5wcm9wb3Nlcik9PW51bGw/dm9pZCAwOm4ucHVibGljS2V5fWZ1bmN0aW9uIEF0KGUpe3JldHVybiBlPy50b3BpY31mdW5jdGlvbiBVdChlLG4pe2xldCB0PW51bGw7cmV0dXJuIG0oZT8ucHVibGljS2V5LCExKXx8KHQ9TihcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGAke259IGNvbnRyb2xsZXIgcHVibGljIGtleSBzaG91bGQgYmUgYSBzdHJpbmdgKSksdH1mdW5jdGlvbiBvZShlKXtsZXQgbj0hMDtyZXR1cm4gQyhlKT9lLmxlbmd0aCYmKG49ZS5ldmVyeSh0PT5tKHQsITEpKSk6bj0hMSxufWZ1bmN0aW9uIFhlKGUsbix0KXtsZXQgcj1udWxsO3JldHVybiBDKG4pP24uZm9yRWFjaChvPT57cnx8KCFIKG8pfHwhby5pbmNsdWRlcyhlKSkmJihyPVIoXCJVTlNVUFBPUlRFRF9DSEFJTlNcIixgJHt0fSwgY2hhaW4gJHtvfSBzaG91bGQgYmUgYSBzdHJpbmcgYW5kIGNvbmZvcm0gdG8gXCJuYW1lc3BhY2U6Y2hhaW5JZFwiIGZvcm1hdGApKX0pOnI9UihcIlVOU1VQUE9SVEVEX0NIQUlOU1wiLGAke3R9LCBjaGFpbnMgJHtufSBzaG91bGQgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb25mb3JtaW5nIHRvIFwibmFtZXNwYWNlOmNoYWluSWRcIiBmb3JtYXRgKSxyfWZ1bmN0aW9uIGVuKGUsbil7bGV0IHQ9bnVsbDtyZXR1cm4gT2JqZWN0LmVudHJpZXMoZSkuZm9yRWFjaCgoW3Isb10pPT57aWYodClyZXR1cm47Y29uc3Qgcz1YZShyLFYocixvKSxgJHtufSByZXF1aXJlZE5hbWVzcGFjZWApO3MmJih0PXMpfSksdH1mdW5jdGlvbiBubihlLG4pe2xldCB0PW51bGw7cmV0dXJuIEMoZSk/ZS5mb3JFYWNoKHI9Pnt0fHxaZShyKXx8KHQ9UihcIlVOU1VQUE9SVEVEX0FDQ09VTlRTXCIsYCR7bn0sIGFjY291bnQgJHtyfSBzaG91bGQgYmUgYSBzdHJpbmcgYW5kIGNvbmZvcm0gdG8gXCJuYW1lc3BhY2U6Y2hhaW5JZDphZGRyZXNzXCIgZm9ybWF0YCkpfSk6dD1SKFwiVU5TVVBQT1JURURfQUNDT1VOVFNcIixgJHtufSwgYWNjb3VudHMgc2hvdWxkIGJlIGFuIGFycmF5IG9mIHN0cmluZ3MgY29uZm9ybWluZyB0byBcIm5hbWVzcGFjZTpjaGFpbklkOmFkZHJlc3NcIiBmb3JtYXRgKSx0fWZ1bmN0aW9uIHRuKGUsbil7bGV0IHQ9bnVsbDtyZXR1cm4gT2JqZWN0LnZhbHVlcyhlKS5mb3JFYWNoKHI9PntpZih0KXJldHVybjtjb25zdCBvPW5uKHI/LmFjY291bnRzLGAke259IG5hbWVzcGFjZWApO28mJih0PW8pfSksdH1mdW5jdGlvbiBybihlLG4pe2xldCB0PW51bGw7cmV0dXJuIG9lKGU/Lm1ldGhvZHMpP29lKGU/LmV2ZW50cyl8fCh0PVIoXCJVTlNVUFBPUlRFRF9FVkVOVFNcIixgJHtufSwgZXZlbnRzIHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIG9yIGVtcHR5IGFycmF5IGZvciBubyBldmVudHNgKSk6dD1SKFwiVU5TVVBQT1JURURfTUVUSE9EU1wiLGAke259LCBtZXRob2RzIHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIG9yIGVtcHR5IGFycmF5IGZvciBubyBtZXRob2RzYCksdH1mdW5jdGlvbiBzZShlLG4pe2xldCB0PW51bGw7cmV0dXJuIE9iamVjdC52YWx1ZXMoZSkuZm9yRWFjaChyPT57aWYodClyZXR1cm47Y29uc3Qgbz1ybihyLGAke259LCBuYW1lc3BhY2VgKTtvJiYodD1vKX0pLHR9ZnVuY3Rpb24gX3QoZSxuLHQpe2xldCByPW51bGw7aWYoZSYmeChlKSl7Y29uc3Qgbz1zZShlLG4pO28mJihyPW8pO2NvbnN0IHM9ZW4oZSxuKTtzJiYocj1zKX1lbHNlIHI9TihcIk1JU1NJTkdfT1JfSU5WQUxJRFwiLGAke259LCAke3R9IHNob3VsZCBiZSBhbiBvYmplY3Qgd2l0aCBkYXRhYCk7cmV0dXJuIHJ9ZnVuY3Rpb24gb24oZSxuKXtsZXQgdD1udWxsO2lmKGUmJngoZSkpe2NvbnN0IHI9c2UoZSxuKTtyJiYodD1yKTtjb25zdCBvPXRuKGUsbik7byYmKHQ9byl9ZWxzZSB0PU4oXCJNSVNTSU5HX09SX0lOVkFMSURcIixgJHtufSwgbmFtZXNwYWNlcyBzaG91bGQgYmUgYW4gb2JqZWN0IHdpdGggZGF0YWApO3JldHVybiB0fWZ1bmN0aW9uIHNuKGUpe3JldHVybiBtKGUucHJvdG9jb2wsITApfWZ1bmN0aW9uIHd0KGUsbil7bGV0IHQ9ITE7cmV0dXJuIG4mJiFlP3Q9ITA6ZSYmQyhlKSYmZS5sZW5ndGgmJmUuZm9yRWFjaChyPT57dD1zbihyKX0pLHR9ZnVuY3Rpb24ganQoZSl7cmV0dXJuIHR5cGVvZiBlPT1cIm51bWJlclwifWZ1bmN0aW9uIEN0KGUpe3JldHVybiB0eXBlb2YgZTxcInVcIiYmdHlwZW9mIGUhPT1udWxsfWZ1bmN0aW9uICR0KGUpe3JldHVybiEoIWV8fHR5cGVvZiBlIT1cIm9iamVjdFwifHwhZS5jb2RlfHwhRihlLmNvZGUsITEpfHwhZS5tZXNzYWdlfHwhbShlLm1lc3NhZ2UsITEpKX1mdW5jdGlvbiBEdChlKXtyZXR1cm4hKFMoZSl8fCFtKGUubWV0aG9kLCExKSl9ZnVuY3Rpb24gVnQoZSl7cmV0dXJuIShTKGUpfHxTKGUucmVzdWx0KSYmUyhlLmVycm9yKXx8IUYoZS5pZCwhMSl8fCFtKGUuanNvbnJwYywhMSkpfWZ1bmN0aW9uIE10KGUpe3JldHVybiEoUyhlKXx8IW0oZS5uYW1lLCExKSl9ZnVuY3Rpb24gS3QoZSxuKXtyZXR1cm4hKCFIKG4pfHwhWWUoZSkuaW5jbHVkZXMobikpfWZ1bmN0aW9uIGt0KGUsbix0KXtyZXR1cm4gbSh0LCExKT9XZShlLG4pLmluY2x1ZGVzKHQpOiExfWZ1bmN0aW9uIEx0KGUsbix0KXtyZXR1cm4gbSh0LCExKT9KZShlLG4pLmluY2x1ZGVzKHQpOiExfWZ1bmN0aW9uIGNuKGUsbix0KXtsZXQgcj1udWxsO2NvbnN0IG89eHQoZSkscz1GdChuKSxjPU9iamVjdC5rZXlzKG8pLGQ9T2JqZWN0LmtleXMocyksbD1hbihPYmplY3Qua2V5cyhlKSksaT1hbihPYmplY3Qua2V5cyhuKSksdT1sLmZpbHRlcihhPT4haS5pbmNsdWRlcyhhKSk7cmV0dXJuIHUubGVuZ3RoJiYocj1OKFwiTk9OX0NPTkZPUk1JTkdfTkFNRVNQQUNFU1wiLGAke3R9IG5hbWVzcGFjZXMga2V5cyBkb24ndCBzYXRpc2Z5IHJlcXVpcmVkTmFtZXNwYWNlcy5cbiAgICAgIFJlcXVpcmVkOiAke3UudG9TdHJpbmcoKX1cbiAgICAgIFJlY2VpdmVkOiAke09iamVjdC5rZXlzKG4pLnRvU3RyaW5nKCl9YCkpLGIoYyxkKXx8KHI9TihcIk5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVNcIixgJHt0fSBuYW1lc3BhY2VzIGNoYWlucyBkb24ndCBzYXRpc2Z5IHJlcXVpcmVkIG5hbWVzcGFjZXMuXG4gICAgICBSZXF1aXJlZDogJHtjLnRvU3RyaW5nKCl9XG4gICAgICBBcHByb3ZlZDogJHtkLnRvU3RyaW5nKCl9YCkpLE9iamVjdC5rZXlzKG4pLmZvckVhY2goYT0+e2lmKCFhLmluY2x1ZGVzKFwiOlwiKXx8cilyZXR1cm47Y29uc3QgZz1UKG5bYV0uYWNjb3VudHMpO2cuaW5jbHVkZXMoYSl8fChyPU4oXCJOT05fQ09ORk9STUlOR19OQU1FU1BBQ0VTXCIsYCR7dH0gbmFtZXNwYWNlcyBhY2NvdW50cyBkb24ndCBzYXRpc2Z5IG5hbWVzcGFjZSBhY2NvdW50cyBmb3IgJHthfVxuICAgICAgICBSZXF1aXJlZDogJHthfVxuICAgICAgICBBcHByb3ZlZDogJHtnLnRvU3RyaW5nKCl9YCkpfSksYy5mb3JFYWNoKGE9PntyfHwoYihvW2FdLm1ldGhvZHMsc1thXS5tZXRob2RzKT9iKG9bYV0uZXZlbnRzLHNbYV0uZXZlbnRzKXx8KHI9TihcIk5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVNcIixgJHt0fSBuYW1lc3BhY2VzIGV2ZW50cyBkb24ndCBzYXRpc2Z5IG5hbWVzcGFjZSBldmVudHMgZm9yICR7YX1gKSk6cj1OKFwiTk9OX0NPTkZPUk1JTkdfTkFNRVNQQUNFU1wiLGAke3R9IG5hbWVzcGFjZXMgbWV0aG9kcyBkb24ndCBzYXRpc2Z5IG5hbWVzcGFjZSBtZXRob2RzIGZvciAke2F9YCkpfSkscn1mdW5jdGlvbiB4dChlKXtjb25zdCBuPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHQ9Pnt2YXIgcjt0LmluY2x1ZGVzKFwiOlwiKT9uW3RdPWVbdF06KHI9ZVt0XS5jaGFpbnMpPT1udWxsfHxyLmZvckVhY2gobz0+e25bb109e21ldGhvZHM6ZVt0XS5tZXRob2RzLGV2ZW50czplW3RdLmV2ZW50c319KX0pLG59ZnVuY3Rpb24gYW4oZSl7cmV0dXJuWy4uLm5ldyBTZXQoZS5tYXAobj0+bi5pbmNsdWRlcyhcIjpcIik/bi5zcGxpdChcIjpcIilbMF06bikpXX1mdW5jdGlvbiBGdChlKXtjb25zdCBuPXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHQ9PntpZih0LmluY2x1ZGVzKFwiOlwiKSluW3RdPWVbdF07ZWxzZXtjb25zdCByPVQoZVt0XS5hY2NvdW50cyk7cj8uZm9yRWFjaChvPT57bltvXT17YWNjb3VudHM6ZVt0XS5hY2NvdW50cy5maWx0ZXIocz0+cy5pbmNsdWRlcyhgJHtvfTpgKSksbWV0aG9kczplW3RdLm1ldGhvZHMsZXZlbnRzOmVbdF0uZXZlbnRzfX0pfX0pLG59ZnVuY3Rpb24gSHQoZSxuKXtyZXR1cm4gRihlLCExKSYmZTw9bi5tYXgmJmU+PW4ubWlufWV4cG9ydHtHIGFzIEJBU0UxMCxmIGFzIEJBU0UxNixLIGFzIEJBU0U2NCxrbiBhcyBDT0xPTixaIGFzIERFRkFVTFRfREVQVEgsTCBhcyBFTVBUWV9TUEFDRSxfIGFzIEVOVl9NQVAsTG4gYXMgT05FX1RIT1VTQU5ELFVlIGFzIFJFQUNUX05BVElWRV9QUk9EVUNULHhlIGFzIFJFTEFZRVJfREVGQVVMVF9QUk9UT0NPTCx3ZSBhcyBTREtfVFlQRSxfZSBhcyBTTEFTSCxZIGFzIFRZUEVfMCxVIGFzIFRZUEVfMSxrIGFzIFVURjgsJGUgYXMgYXBwZW5kVG9RdWVyeVN0cmluZyx6biBhcyBhc3NlcnRUeXBlLE90IGFzIGJ1aWxkQXBwcm92ZWROYW1lc3BhY2VzLHJ0IGFzIGNhbGNFeHBpcnksUW4gYXMgY2FwaXRhbGl6ZSxMZSBhcyBjYXBpdGFsaXplV29yZCxabiBhcyBjcmVhdGVEZWxheWVkUHJvbWlzZSxYbiBhcyBjcmVhdGVFeHBpcmluZ1Byb21pc2UsaiBhcyBkZWNvZGVUeXBlQnl0ZSxDbiBhcyBkZWNyeXB0LFVuIGFzIGRlcml2ZVN5bUtleSxRIGFzIGRlc2VyaWFsaXplLFNlIGFzIGVuY29kZVR5cGVCeXRlLGpuIGFzIGVuY3J5cHQsc3QgYXMgZW5naW5lRXZlbnQsSm4gYXMgZW51bWlmeSxFZSBhcyBmb3JtYXRBY2NvdW50SWQsZ24gYXMgZm9ybWF0QWNjb3VudFdpdGhDaGFpbix5ZSBhcyBmb3JtYXRDaGFpbklkLG5lIGFzIGZvcm1hdEV4cGlyZXJUYXJnZXQsbnQgYXMgZm9ybWF0SWRUYXJnZXQsUG4gYXMgZm9ybWF0TWVzc2FnZSxCbiBhcyBmb3JtYXRNZXNzYWdlQ29udGV4dCx6ZSBhcyBmb3JtYXRSZWxheVBhcmFtcyxIbiBhcyBmb3JtYXRSZWxheVJwY1VybCxldCBhcyBmb3JtYXRUb3BpY1RhcmdldCxNZSBhcyBmb3JtYXRVQSxwdCBhcyBmb3JtYXRVcmksUm4gYXMgZ2VuZXJhdGVLZXlQYWlyLEFuIGFzIGdlbmVyYXRlUmFuZG9tQnl0ZXMzMixUIGFzIGdldEFjY291bnRzQ2hhaW5zLGJuIGFzIGdldEFjY291bnRzRnJvbU5hbWVzcGFjZXMsaGUgYXMgZ2V0QWRkcmVzc0Zyb21BY2NvdW50LE5uIGFzIGdldEFkZHJlc3Nlc0Zyb21BY2NvdW50cyx4biBhcyBnZXRBcHBNZXRhZGF0YSx2ZSBhcyBnZXRDaGFpbkZyb21BY2NvdW50LGdlIGFzIGdldENoYWluc0Zyb21BY2NvdW50cyxWIGFzIGdldENoYWluc0Zyb21OYW1lc3BhY2UsT24gYXMgZ2V0Q2hhaW5zRnJvbU5hbWVzcGFjZXMsU24gYXMgZ2V0Q2hhaW5zRnJvbVJlcXVpcmVkTmFtZXNwYWNlcyxiZSBhcyBnZXREaWRBZGRyZXNzLE0gYXMgZ2V0RGlkQWRkcmVzc1NlZ21lbnRzLE5lIGFzIGdldERpZENoYWluSWQsZWUgYXMgZ2V0RW52aXJvbm1lbnQscW4gYXMgZ2V0SHR0cFVybCxOIGFzIGdldEludGVybmFsRXJyb3IsVmUgYXMgZ2V0SmF2YXNjcmlwdElELERlIGFzIGdldEphdmFzY3JpcHRPUyxrZSBhcyBnZXRMYXN0SXRlbXMsSW4gYXMgZ2V0TmFtZXNwYWNlZERpZENoYWluSWQsWWUgYXMgZ2V0TmFtZXNwYWNlc0NoYWlucyxKZSBhcyBnZXROYW1lc3BhY2VzRXZlbnRzRm9yQ2hhaW5JZCxXZSBhcyBnZXROYW1lc3BhY2VzTWV0aG9kc0ZvckNoYWluSWQsRm4gYXMgZ2V0UmVsYXlDbGllbnRNZXRhZGF0YSxjdCBhcyBnZXRSZWxheVByb3RvY29sQXBpLGl0IGFzIGdldFJlbGF5UHJvdG9jb2xOYW1lLGJ0IGFzIGdldFJlcXVpcmVkTmFtZXNwYWNlc0Zyb21OYW1lc3BhY2VzLFIgYXMgZ2V0U2RrRXJyb3IsQiBhcyBnZXRVbmlxdWVWYWx1ZXMsYiBhcyBoYXNPdmVybGFwLF9uIGFzIGhhc2hLZXksd24gYXMgaGFzaE1lc3NhZ2UsQ2UgYXMgaXNCcm93c2VyLHRlIGFzIGlzQ2FpcE5hbWVzcGFjZSxjbiBhcyBpc0NvbmZvcm1pbmdOYW1lc3BhY2VzLG90IGFzIGlzRXhwaXJlZCxYIGFzIGlzTm9kZSxSdCBhcyBpc1Byb3Bvc2FsU3RydWN0LGplIGFzIGlzUmVhY3ROYXRpdmUsUHQgYXMgaXNTZXNzaW9uQ29tcGF0aWJsZSxBdCBhcyBpc1Nlc3Npb25TdHJ1Y3QsRG4gYXMgaXNUeXBlT25lRW52ZWxvcGUsUyBhcyBpc1VuZGVmaW5lZCxaZSBhcyBpc1ZhbGlkQWNjb3VudElkLG5uIGFzIGlzVmFsaWRBY2NvdW50cyxybiBhcyBpc1ZhbGlkQWN0aW9ucyxDIGFzIGlzVmFsaWRBcnJheSxIIGFzIGlzVmFsaWRDaGFpbklkLFhlIGFzIGlzVmFsaWRDaGFpbnMsVXQgYXMgaXNWYWxpZENvbnRyb2xsZXIsJHQgYXMgaXNWYWxpZEVycm9yUmVhc29uLE10IGFzIGlzVmFsaWRFdmVudCxqdCBhcyBpc1ZhbGlkSWQsdG4gYXMgaXNWYWxpZE5hbWVzcGFjZUFjY291bnRzLHNlIGFzIGlzVmFsaWROYW1lc3BhY2VBY3Rpb25zLGVuIGFzIGlzVmFsaWROYW1lc3BhY2VDaGFpbnMsb2UgYXMgaXNWYWxpZE5hbWVzcGFjZU1ldGhvZHNPckV2ZW50cyxvbiBhcyBpc1ZhbGlkTmFtZXNwYWNlcyxLdCBhcyBpc1ZhbGlkTmFtZXNwYWNlc0NoYWluSWQsTHQgYXMgaXNWYWxpZE5hbWVzcGFjZXNFdmVudCxrdCBhcyBpc1ZhbGlkTmFtZXNwYWNlc1JlcXVlc3QsRiBhcyBpc1ZhbGlkTnVtYmVyLHggYXMgaXNWYWxpZE9iamVjdCxDdCBhcyBpc1ZhbGlkUGFyYW1zLHNuIGFzIGlzVmFsaWRSZWxheSx3dCBhcyBpc1ZhbGlkUmVsYXlzLER0IGFzIGlzVmFsaWRSZXF1ZXN0LEh0IGFzIGlzVmFsaWRSZXF1ZXN0RXhwaXJ5LF90IGFzIGlzVmFsaWRSZXF1aXJlZE5hbWVzcGFjZXMsVnQgYXMgaXNWYWxpZFJlc3BvbnNlLG0gYXMgaXNWYWxpZFN0cmluZyxUdCBhcyBpc1ZhbGlkVXJsLFduIGFzIG1hcEVudHJpZXMsR24gYXMgbWFwVG9PYmosTyBhcyBtZXJnZUFycmF5cyxyZSBhcyBub3JtYWxpemVOYW1lc3BhY2VzLFluIGFzIG9ialRvTWFwLHogYXMgcGFyc2VBY2NvdW50SWQsbWUgYXMgcGFyc2VDaGFpbklkLEtlIGFzIHBhcnNlQ29udGV4dE5hbWVzLHR0IGFzIHBhcnNlRXhwaXJlclRhcmdldCxRZSBhcyBwYXJzZU5hbWVzcGFjZUtleSxxZSBhcyBwYXJzZVJlbGF5UGFyYW1zLGZ0IGFzIHBhcnNlVXJpLEllIGFzIHNlcmlhbGl6ZSwkbiBhcyB2YWxpZGF0ZURlY29kaW5nLFBlIGFzIHZhbGlkYXRlRW5jb2Rpbmd9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iLCIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmosIHByZWRpY2F0ZSkge1xuXHR2YXIgcmV0ID0ge307XG5cdHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblx0dmFyIGlzQXJyID0gQXJyYXkuaXNBcnJheShwcmVkaWNhdGUpO1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBrZXkgPSBrZXlzW2ldO1xuXHRcdHZhciB2YWwgPSBvYmpba2V5XTtcblxuXHRcdGlmIChpc0FyciA/IHByZWRpY2F0ZS5pbmRleE9mKGtleSkgIT09IC0xIDogcHJlZGljYXRlKGtleSwgdmFsLCBvYmopKSB7XG5cdFx0XHRyZXRba2V5XSA9IHZhbDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IHN0cmljdFVyaUVuY29kZSA9IHJlcXVpcmUoJ3N0cmljdC11cmktZW5jb2RlJyk7XG5jb25zdCBkZWNvZGVDb21wb25lbnQgPSByZXF1aXJlKCdkZWNvZGUtdXJpLWNvbXBvbmVudCcpO1xuY29uc3Qgc3BsaXRPbkZpcnN0ID0gcmVxdWlyZSgnc3BsaXQtb24tZmlyc3QnKTtcbmNvbnN0IGZpbHRlck9iamVjdCA9IHJlcXVpcmUoJ2ZpbHRlci1vYmonKTtcblxuY29uc3QgaXNOdWxsT3JVbmRlZmluZWQgPSB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkO1xuXG5jb25zdCBlbmNvZGVGcmFnbWVudElkZW50aWZpZXIgPSBTeW1ib2woJ2VuY29kZUZyYWdtZW50SWRlbnRpZmllcicpO1xuXG5mdW5jdGlvbiBlbmNvZGVyRm9yQXJyYXlGb3JtYXQob3B0aW9ucykge1xuXHRzd2l0Y2ggKG9wdGlvbnMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4ga2V5ID0+IChyZXN1bHQsIHZhbHVlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGluZGV4ID0gcmVzdWx0Lmxlbmd0aDtcblxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnWycsIGluZGV4LCAnXSddLmpvaW4oJycpXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0Li4ucmVzdWx0LFxuXHRcdFx0XHRcdFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1snLCBlbmNvZGUoaW5kZXgsIG9wdGlvbnMpLCAnXT0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKVxuXHRcdFx0XHRdO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2JyYWNrZXQnOlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnW10nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnW109JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJyldO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2NvbG9uLWxpc3Qtc2VwYXJhdG9yJzpcblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJzpsaXN0PSddLmpvaW4oJycpXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBbLi4ucmVzdWx0LCBbZW5jb2RlKGtleSwgb3B0aW9ucyksICc6bGlzdD0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29tbWEnOlxuXHRcdGNhc2UgJ3NlcGFyYXRvcic6XG5cdFx0Y2FzZSAnYnJhY2tldC1zZXBhcmF0b3InOiB7XG5cdFx0XHRjb25zdCBrZXlWYWx1ZVNlcCA9IG9wdGlvbnMuYXJyYXlGb3JtYXQgPT09ICdicmFja2V0LXNlcGFyYXRvcicgP1xuXHRcdFx0XHQnW109JyA6XG5cdFx0XHRcdCc9JztcblxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUcmFuc2xhdGUgbnVsbCB0byBhbiBlbXB0eSBzdHJpbmcgc28gdGhhdCBpdCBkb2Vzbid0IHNlcmlhbGl6ZSBhcyAnbnVsbCdcblx0XHRcdFx0dmFsdWUgPSB2YWx1ZSA9PT0gbnVsbCA/ICcnIDogdmFsdWU7XG5cblx0XHRcdFx0aWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRyZXR1cm4gW1tlbmNvZGUoa2V5LCBvcHRpb25zKSwga2V5VmFsdWVTZXAsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4oJycpXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBbW3Jlc3VsdCwgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbihvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKV07XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4ga2V5ID0+IChyZXN1bHQsIHZhbHVlKSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHR2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0KG9wdGlvbnMuc2tpcE51bGwgJiYgdmFsdWUgPT09IG51bGwpIHx8XG5cdFx0XHRcdFx0KG9wdGlvbnMuc2tpcEVtcHR5U3RyaW5nICYmIHZhbHVlID09PSAnJylcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBbLi4ucmVzdWx0LCBlbmNvZGUoa2V5LCBvcHRpb25zKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnPScsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4oJycpXTtcblx0XHRcdH07XG5cdH1cbn1cblxuZnVuY3Rpb24gcGFyc2VyRm9yQXJyYXlGb3JtYXQob3B0aW9ucykge1xuXHRsZXQgcmVzdWx0O1xuXG5cdHN3aXRjaCAob3B0aW9ucy5hcnJheUZvcm1hdCkge1xuXHRcdGNhc2UgJ2luZGV4Jzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0cmVzdWx0ID0gL1xcWyhcXGQqKVxcXSQvLmV4ZWMoa2V5KTtcblxuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvXFxbXFxkKlxcXSQvLCAnJyk7XG5cblx0XHRcdFx0aWYgKCFyZXN1bHQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGFjY3VtdWxhdG9yW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB7fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV1bcmVzdWx0WzFdXSA9IHZhbHVlO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2JyYWNrZXQnOlxuXHRcdFx0cmV0dXJuIChrZXksIHZhbHVlLCBhY2N1bXVsYXRvcikgPT4ge1xuXHRcdFx0XHRyZXN1bHQgPSAvKFxcW1xcXSkkLy5leGVjKGtleSk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9cXFtcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW3ZhbHVlXTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIHZhbHVlKTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdjb2xvbi1saXN0LXNlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdHJlc3VsdCA9IC8oOmxpc3QpJC8uZXhlYyhrZXkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvOmxpc3QkLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW3ZhbHVlXTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIHZhbHVlKTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdjb21tYSc6XG5cdFx0Y2FzZSAnc2VwYXJhdG9yJzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0Y29uc3QgaXNBcnJheSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcik7XG5cdFx0XHRcdGNvbnN0IGlzRW5jb2RlZEFycmF5ID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgIWlzQXJyYXkgJiYgZGVjb2RlKHZhbHVlLCBvcHRpb25zKS5pbmNsdWRlcyhvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKSk7XG5cdFx0XHRcdHZhbHVlID0gaXNFbmNvZGVkQXJyYXkgPyBkZWNvZGUodmFsdWUsIG9wdGlvbnMpIDogdmFsdWU7XG5cdFx0XHRcdGNvbnN0IG5ld1ZhbHVlID0gaXNBcnJheSB8fCBpc0VuY29kZWRBcnJheSA/IHZhbHVlLnNwbGl0KG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpLm1hcChpdGVtID0+IGRlY29kZShpdGVtLCBvcHRpb25zKSkgOiB2YWx1ZSA9PT0gbnVsbCA/IHZhbHVlIDogZGVjb2RlKHZhbHVlLCBvcHRpb25zKTtcblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IG5ld1ZhbHVlO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2JyYWNrZXQtc2VwYXJhdG9yJzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0Y29uc3QgaXNBcnJheSA9IC8oXFxbXFxdKSQvLnRlc3Qoa2V5KTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcXSQvLCAnJyk7XG5cblx0XHRcdFx0aWYgKCFpc0FycmF5KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlID8gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSA6IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGFycmF5VmFsdWUgPSB2YWx1ZSA9PT0gbnVsbCA/XG5cdFx0XHRcdFx0W10gOlxuXHRcdFx0XHRcdHZhbHVlLnNwbGl0KG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpLm1hcChpdGVtID0+IGRlY29kZShpdGVtLCBvcHRpb25zKSk7XG5cblx0XHRcdFx0aWYgKGFjY3VtdWxhdG9yW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBhcnJheVZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBbXS5jb25jYXQoYWNjdW11bGF0b3Jba2V5XSwgYXJyYXlWYWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0aWYgKGFjY3VtdWxhdG9yW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIHZhbHVlKTtcblx0XHRcdH07XG5cdH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUZvcm1hdFNlcGFyYXRvcih2YWx1ZSkge1xuXHRpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCB2YWx1ZS5sZW5ndGggIT09IDEpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdhcnJheUZvcm1hdFNlcGFyYXRvciBtdXN0IGJlIHNpbmdsZSBjaGFyYWN0ZXIgc3RyaW5nJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZW5jb2RlKHZhbHVlLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmVuY29kZSkge1xuXHRcdHJldHVybiBvcHRpb25zLnN0cmljdCA/IHN0cmljdFVyaUVuY29kZSh2YWx1ZSkgOiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXHR9XG5cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBkZWNvZGUodmFsdWUsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMuZGVjb2RlKSB7XG5cdFx0cmV0dXJuIGRlY29kZUNvbXBvbmVudCh2YWx1ZSk7XG5cdH1cblxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGtleXNTb3J0ZXIoaW5wdXQpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG5cdFx0cmV0dXJuIGlucHV0LnNvcnQoKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnKSB7XG5cdFx0cmV0dXJuIGtleXNTb3J0ZXIoT2JqZWN0LmtleXMoaW5wdXQpKVxuXHRcdFx0LnNvcnQoKGEsIGIpID0+IE51bWJlcihhKSAtIE51bWJlcihiKSlcblx0XHRcdC5tYXAoa2V5ID0+IGlucHV0W2tleV0pO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5mdW5jdGlvbiByZW1vdmVIYXNoKGlucHV0KSB7XG5cdGNvbnN0IGhhc2hTdGFydCA9IGlucHV0LmluZGV4T2YoJyMnKTtcblx0aWYgKGhhc2hTdGFydCAhPT0gLTEpIHtcblx0XHRpbnB1dCA9IGlucHV0LnNsaWNlKDAsIGhhc2hTdGFydCk7XG5cdH1cblxuXHRyZXR1cm4gaW5wdXQ7XG59XG5cbmZ1bmN0aW9uIGdldEhhc2godXJsKSB7XG5cdGxldCBoYXNoID0gJyc7XG5cdGNvbnN0IGhhc2hTdGFydCA9IHVybC5pbmRleE9mKCcjJyk7XG5cdGlmIChoYXNoU3RhcnQgIT09IC0xKSB7XG5cdFx0aGFzaCA9IHVybC5zbGljZShoYXNoU3RhcnQpO1xuXHR9XG5cblx0cmV0dXJuIGhhc2g7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3QoaW5wdXQpIHtcblx0aW5wdXQgPSByZW1vdmVIYXNoKGlucHV0KTtcblx0Y29uc3QgcXVlcnlTdGFydCA9IGlucHV0LmluZGV4T2YoJz8nKTtcblx0aWYgKHF1ZXJ5U3RhcnQgPT09IC0xKSB7XG5cdFx0cmV0dXJuICcnO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0LnNsaWNlKHF1ZXJ5U3RhcnQgKyAxKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VWYWx1ZSh2YWx1ZSwgb3B0aW9ucykge1xuXHRpZiAob3B0aW9ucy5wYXJzZU51bWJlcnMgJiYgIU51bWJlci5pc05hTihOdW1iZXIodmFsdWUpKSAmJiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50cmltKCkgIT09ICcnKSkge1xuXHRcdHZhbHVlID0gTnVtYmVyKHZhbHVlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLnBhcnNlQm9vbGVhbnMgJiYgdmFsdWUgIT09IG51bGwgJiYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyB8fCB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSkge1xuXHRcdHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xuXHR9XG5cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBwYXJzZShxdWVyeSwgb3B0aW9ucykge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZGVjb2RlOiB0cnVlLFxuXHRcdHNvcnQ6IHRydWUsXG5cdFx0YXJyYXlGb3JtYXQ6ICdub25lJyxcblx0XHRhcnJheUZvcm1hdFNlcGFyYXRvcjogJywnLFxuXHRcdHBhcnNlTnVtYmVyczogZmFsc2UsXG5cdFx0cGFyc2VCb29sZWFuczogZmFsc2Vcblx0fSwgb3B0aW9ucyk7XG5cblx0dmFsaWRhdGVBcnJheUZvcm1hdFNlcGFyYXRvcihvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKTtcblxuXHRjb25zdCBmb3JtYXR0ZXIgPSBwYXJzZXJGb3JBcnJheUZvcm1hdChvcHRpb25zKTtcblxuXHQvLyBDcmVhdGUgYW4gb2JqZWN0IHdpdGggbm8gcHJvdG90eXBlXG5cdGNvbnN0IHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cblx0aWYgKHR5cGVvZiBxdWVyeSAhPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0cXVlcnkgPSBxdWVyeS50cmltKCkucmVwbGFjZSgvXls/IyZdLywgJycpO1xuXG5cdGlmICghcXVlcnkpIHtcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0Zm9yIChjb25zdCBwYXJhbSBvZiBxdWVyeS5zcGxpdCgnJicpKSB7XG5cdFx0aWYgKHBhcmFtID09PSAnJykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0bGV0IFtrZXksIHZhbHVlXSA9IHNwbGl0T25GaXJzdChvcHRpb25zLmRlY29kZSA/IHBhcmFtLnJlcGxhY2UoL1xcKy9nLCAnICcpIDogcGFyYW0sICc9Jyk7XG5cblx0XHQvLyBNaXNzaW5nIGA9YCBzaG91bGQgYmUgYG51bGxgOlxuXHRcdC8vIGh0dHA6Ly93My5vcmcvVFIvMjAxMi9XRC11cmwtMjAxMjA1MjQvI2NvbGxlY3QtdXJsLXBhcmFtZXRlcnNcblx0XHR2YWx1ZSA9IHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogWydjb21tYScsICdzZXBhcmF0b3InLCAnYnJhY2tldC1zZXBhcmF0b3InXS5pbmNsdWRlcyhvcHRpb25zLmFycmF5Rm9ybWF0KSA/IHZhbHVlIDogZGVjb2RlKHZhbHVlLCBvcHRpb25zKTtcblx0XHRmb3JtYXR0ZXIoZGVjb2RlKGtleSwgb3B0aW9ucyksIHZhbHVlLCByZXQpO1xuXHR9XG5cblx0Zm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocmV0KSkge1xuXHRcdGNvbnN0IHZhbHVlID0gcmV0W2tleV07XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcblx0XHRcdGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyh2YWx1ZSkpIHtcblx0XHRcdFx0dmFsdWVba10gPSBwYXJzZVZhbHVlKHZhbHVlW2tdLCBvcHRpb25zKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0W2tleV0gPSBwYXJzZVZhbHVlKHZhbHVlLCBvcHRpb25zKTtcblx0XHR9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zb3J0ID09PSBmYWxzZSkge1xuXHRcdHJldHVybiByZXQ7XG5cdH1cblxuXHRyZXR1cm4gKG9wdGlvbnMuc29ydCA9PT0gdHJ1ZSA/IE9iamVjdC5rZXlzKHJldCkuc29ydCgpIDogT2JqZWN0LmtleXMocmV0KS5zb3J0KG9wdGlvbnMuc29ydCkpLnJlZHVjZSgocmVzdWx0LCBrZXkpID0+IHtcblx0XHRjb25zdCB2YWx1ZSA9IHJldFtrZXldO1xuXHRcdGlmIChCb29sZWFuKHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0Ly8gU29ydCBvYmplY3Qga2V5cywgbm90IHZhbHVlc1xuXHRcdFx0cmVzdWx0W2tleV0gPSBrZXlzU29ydGVyKHZhbHVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0W2tleV0gPSB2YWx1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LCBPYmplY3QuY3JlYXRlKG51bGwpKTtcbn1cblxuZXhwb3J0cy5leHRyYWN0ID0gZXh0cmFjdDtcbmV4cG9ydHMucGFyc2UgPSBwYXJzZTtcblxuZXhwb3J0cy5zdHJpbmdpZnkgPSAob2JqZWN0LCBvcHRpb25zKSA9PiB7XG5cdGlmICghb2JqZWN0KSB7XG5cdFx0cmV0dXJuICcnO1xuXHR9XG5cblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdGVuY29kZTogdHJ1ZSxcblx0XHRzdHJpY3Q6IHRydWUsXG5cdFx0YXJyYXlGb3JtYXQ6ICdub25lJyxcblx0XHRhcnJheUZvcm1hdFNlcGFyYXRvcjogJywnXG5cdH0sIG9wdGlvbnMpO1xuXG5cdHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3Iob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcik7XG5cblx0Y29uc3Qgc2hvdWxkRmlsdGVyID0ga2V5ID0+IChcblx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiBpc051bGxPclVuZGVmaW5lZChvYmplY3Rba2V5XSkpIHx8XG5cdFx0KG9wdGlvbnMuc2tpcEVtcHR5U3RyaW5nICYmIG9iamVjdFtrZXldID09PSAnJylcblx0KTtcblxuXHRjb25zdCBmb3JtYXR0ZXIgPSBlbmNvZGVyRm9yQXJyYXlGb3JtYXQob3B0aW9ucyk7XG5cblx0Y29uc3Qgb2JqZWN0Q29weSA9IHt9O1xuXG5cdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG9iamVjdCkpIHtcblx0XHRpZiAoIXNob3VsZEZpbHRlcihrZXkpKSB7XG5cdFx0XHRvYmplY3RDb3B5W2tleV0gPSBvYmplY3Rba2V5XTtcblx0XHR9XG5cdH1cblxuXHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0Q29weSk7XG5cblx0aWYgKG9wdGlvbnMuc29ydCAhPT0gZmFsc2UpIHtcblx0XHRrZXlzLnNvcnQob3B0aW9ucy5zb3J0KTtcblx0fVxuXG5cdHJldHVybiBrZXlzLm1hcChrZXkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0gb2JqZWN0W2tleV07XG5cblx0XHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0cmV0dXJuIGVuY29kZShrZXksIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0aWYgKHZhbHVlLmxlbmd0aCA9PT0gMCAmJiBvcHRpb25zLmFycmF5Rm9ybWF0ID09PSAnYnJhY2tldC1zZXBhcmF0b3InKSB7XG5cdFx0XHRcdHJldHVybiBlbmNvZGUoa2V5LCBvcHRpb25zKSArICdbXSc7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZVxuXHRcdFx0XHQucmVkdWNlKGZvcm1hdHRlcihrZXkpLCBbXSlcblx0XHRcdFx0LmpvaW4oJyYnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZW5jb2RlKGtleSwgb3B0aW9ucykgKyAnPScgKyBlbmNvZGUodmFsdWUsIG9wdGlvbnMpO1xuXHR9KS5maWx0ZXIoeCA9PiB4Lmxlbmd0aCA+IDApLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydHMucGFyc2VVcmwgPSAodXJsLCBvcHRpb25zKSA9PiB7XG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRkZWNvZGU6IHRydWVcblx0fSwgb3B0aW9ucyk7XG5cblx0Y29uc3QgW3VybF8sIGhhc2hdID0gc3BsaXRPbkZpcnN0KHVybCwgJyMnKTtcblxuXHRyZXR1cm4gT2JqZWN0LmFzc2lnbihcblx0XHR7XG5cdFx0XHR1cmw6IHVybF8uc3BsaXQoJz8nKVswXSB8fCAnJyxcblx0XHRcdHF1ZXJ5OiBwYXJzZShleHRyYWN0KHVybCksIG9wdGlvbnMpXG5cdFx0fSxcblx0XHRvcHRpb25zICYmIG9wdGlvbnMucGFyc2VGcmFnbWVudElkZW50aWZpZXIgJiYgaGFzaCA/IHtmcmFnbWVudElkZW50aWZpZXI6IGRlY29kZShoYXNoLCBvcHRpb25zKX0gOiB7fVxuXHQpO1xufTtcblxuZXhwb3J0cy5zdHJpbmdpZnlVcmwgPSAob2JqZWN0LCBvcHRpb25zKSA9PiB7XG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRlbmNvZGU6IHRydWUsXG5cdFx0c3RyaWN0OiB0cnVlLFxuXHRcdFtlbmNvZGVGcmFnbWVudElkZW50aWZpZXJdOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IHVybCA9IHJlbW92ZUhhc2gob2JqZWN0LnVybCkuc3BsaXQoJz8nKVswXSB8fCAnJztcblx0Y29uc3QgcXVlcnlGcm9tVXJsID0gZXhwb3J0cy5leHRyYWN0KG9iamVjdC51cmwpO1xuXHRjb25zdCBwYXJzZWRRdWVyeUZyb21VcmwgPSBleHBvcnRzLnBhcnNlKHF1ZXJ5RnJvbVVybCwge3NvcnQ6IGZhbHNlfSk7XG5cblx0Y29uc3QgcXVlcnkgPSBPYmplY3QuYXNzaWduKHBhcnNlZFF1ZXJ5RnJvbVVybCwgb2JqZWN0LnF1ZXJ5KTtcblx0bGV0IHF1ZXJ5U3RyaW5nID0gZXhwb3J0cy5zdHJpbmdpZnkocXVlcnksIG9wdGlvbnMpO1xuXHRpZiAocXVlcnlTdHJpbmcpIHtcblx0XHRxdWVyeVN0cmluZyA9IGA/JHtxdWVyeVN0cmluZ31gO1xuXHR9XG5cblx0bGV0IGhhc2ggPSBnZXRIYXNoKG9iamVjdC51cmwpO1xuXHRpZiAob2JqZWN0LmZyYWdtZW50SWRlbnRpZmllcikge1xuXHRcdGhhc2ggPSBgIyR7b3B0aW9uc1tlbmNvZGVGcmFnbWVudElkZW50aWZpZXJdID8gZW5jb2RlKG9iamVjdC5mcmFnbWVudElkZW50aWZpZXIsIG9wdGlvbnMpIDogb2JqZWN0LmZyYWdtZW50SWRlbnRpZmllcn1gO1xuXHR9XG5cblx0cmV0dXJuIGAke3VybH0ke3F1ZXJ5U3RyaW5nfSR7aGFzaH1gO1xufTtcblxuZXhwb3J0cy5waWNrID0gKGlucHV0LCBmaWx0ZXIsIG9wdGlvbnMpID0+IHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdHBhcnNlRnJhZ21lbnRJZGVudGlmaWVyOiB0cnVlLFxuXHRcdFtlbmNvZGVGcmFnbWVudElkZW50aWZpZXJdOiBmYWxzZVxuXHR9LCBvcHRpb25zKTtcblxuXHRjb25zdCB7dXJsLCBxdWVyeSwgZnJhZ21lbnRJZGVudGlmaWVyfSA9IGV4cG9ydHMucGFyc2VVcmwoaW5wdXQsIG9wdGlvbnMpO1xuXHRyZXR1cm4gZXhwb3J0cy5zdHJpbmdpZnlVcmwoe1xuXHRcdHVybCxcblx0XHRxdWVyeTogZmlsdGVyT2JqZWN0KHF1ZXJ5LCBmaWx0ZXIpLFxuXHRcdGZyYWdtZW50SWRlbnRpZmllclxuXHR9LCBvcHRpb25zKTtcbn07XG5cbmV4cG9ydHMuZXhjbHVkZSA9IChpbnB1dCwgZmlsdGVyLCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IGV4Y2x1c2lvbkZpbHRlciA9IEFycmF5LmlzQXJyYXkoZmlsdGVyKSA/IGtleSA9PiAhZmlsdGVyLmluY2x1ZGVzKGtleSkgOiAoa2V5LCB2YWx1ZSkgPT4gIWZpbHRlcihrZXksIHZhbHVlKTtcblxuXHRyZXR1cm4gZXhwb3J0cy5waWNrKGlucHV0LCBleGNsdXNpb25GaWx0ZXIsIG9wdGlvbnMpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnd3MgZG9lcyBub3Qgd29yayBpbiB0aGUgYnJvd3Nlci4gQnJvd3NlciBjbGllbnRzIG11c3QgdXNlIHRoZSBuYXRpdmUgJyArXG4gICAgICAnV2ViU29ja2V0IG9iamVjdCdcbiAgKTtcbn07XG4iLCJpbXBvcnQgXyBmcm9tXCJwaW5vXCI7aW1wb3J0IGose1BST1BPU0FMX0VYUElSWV9NRVNTQUdFIGFzIFJ9ZnJvbVwiQHdhbGxldGNvbm5lY3Qvc2lnbi1jbGllbnRcIjtpbXBvcnR7aXNWYWxpZE9iamVjdCBhcyBMLGdldFNka0Vycm9yIGFzIEMsaXNWYWxpZEFycmF5IGFzIGt9ZnJvbVwiQHdhbGxldGNvbm5lY3QvdXRpbHNcIjtpbXBvcnR7Z2V0RGVmYXVsdExvZ2dlck9wdGlvbnMgYXMgVX1mcm9tXCJAd2FsbGV0Y29ubmVjdC9sb2dnZXJcIjtpbXBvcnR7SnNvblJwY1Byb3ZpZGVyIGFzIGN9ZnJvbVwiQHdhbGxldGNvbm5lY3QvanNvbnJwYy1wcm92aWRlclwiO2ltcG9ydCBkLHtIdHRwQ29ubmVjdGlvbiBhcyBUfWZyb21cIkB3YWxsZXRjb25uZWN0L2pzb25ycGMtaHR0cC1jb25uZWN0aW9uXCI7aW1wb3J0IEYgZnJvbVwiZXZlbnRzXCI7Y29uc3QgST1cImVycm9yXCIsTT1cIndzczovL3JlbGF5LndhbGxldGNvbm5lY3QuY29tXCIsRz1cIndjXCIsej1cInVuaXZlcnNhbF9wcm92aWRlclwiLEU9YCR7R31AJHsyfToke3p9OmAseD1cImh0dHBzOi8vcnBjLndhbGxldGNvbm5lY3QuY29tL3YxXCIsbz17REVGQVVMVF9DSEFJTl9DSEFOR0VEOlwiZGVmYXVsdF9jaGFpbl9jaGFuZ2VkXCJ9O3ZhciBKPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSwkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsVj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFc9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxIPShpLGUsdCk9PmUgaW4gaT9KKGksZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOmlbZV09dCxmPShpLGUpPT57Zm9yKHZhciB0IGluIGV8fChlPXt9KSlWLmNhbGwoZSx0KSYmSChpLHQsZVt0XSk7aWYoJClmb3IodmFyIHQgb2YgJChlKSlXLmNhbGwoZSx0KSYmSChpLHQsZVt0XSk7cmV0dXJuIGl9O2Z1bmN0aW9uIGEoaSxlLHQpe2xldCBzO2NvbnN0IG49ZyhpKTtyZXR1cm4gZS5ycGNNYXAmJihzPWUucnBjTWFwW25dKSxzfHwocz1gJHt4fT9jaGFpbklkPWVpcDE1NToke259JnByb2plY3RJZD0ke3R9YCksc31mdW5jdGlvbiBnKGkpe3JldHVybiBpLmluY2x1ZGVzKFwiZWlwMTU1XCIpP051bWJlcihpLnNwbGl0KFwiOlwiKVsxXSk6TnVtYmVyKGkpfWZ1bmN0aW9uIEsoaSxlKXtpZighZS5pbmNsdWRlcyhpKSl0aHJvdyBuZXcgRXJyb3IoYENoYWluICcke2l9JyBub3QgYXBwcm92ZWQuIFBsZWFzZSB1c2Ugb25lIG9mIHRoZSBmb2xsb3dpbmc6ICR7ZS50b1N0cmluZygpfWApfWZ1bmN0aW9uIFgoaSl7cmV0dXJuIGkubWFwKGU9PmAke2Uuc3BsaXQoXCI6XCIpWzBdfToke2Uuc3BsaXQoXCI6XCIpWzFdfWApfWZ1bmN0aW9uIFkoaSxlKXtjb25zdCB0PU9iamVjdC5rZXlzKGUubmFtZXNwYWNlcykuZmlsdGVyKG49Pm4uaW5jbHVkZXMoaSkpO2lmKCF0Lmxlbmd0aClyZXR1cm5bXTtjb25zdCBzPVtdO3JldHVybiB0LmZvckVhY2gobj0+e2NvbnN0IHI9ZS5uYW1lc3BhY2VzW25dLmFjY291bnRzO3MucHVzaCguLi5yKX0pLHN9ZnVuY3Rpb24gQihpLGU9e30pe2NvbnN0IHQ9QShpKSxzPUEoZSk7cmV0dXJuIGYoe30sT2JqZWN0LmFzc2lnbih0LHMpKX1mdW5jdGlvbiBBKGkpe3ZhciBlLHQscyxuO2NvbnN0IHI9e307aWYoIUwoaSkpcmV0dXJuIHI7Zm9yKGNvbnN0W3YsbF1vZiBPYmplY3QuZW50cmllcyhpKSl7Y29uc3QgcT15KHYpP1t2XTpsLmNoYWlucyxTPWwubWV0aG9kc3x8W10sRD1sLmV2ZW50c3x8W10scD1OKHYpO3JbcF09e2NoYWluczpQKHEsKGU9cltwXSk9PW51bGw/dm9pZCAwOmUuY2hhaW5zKSxtZXRob2RzOlAoUywodD1yW3BdKT09bnVsbD92b2lkIDA6dC5tZXRob2RzKSxldmVudHM6UChELChzPXJbcF0pPT1udWxsP3ZvaWQgMDpzLmV2ZW50cykscnBjTWFwOmYoZih7fSwobj1yW3BdKT09bnVsbD92b2lkIDA6bi5ycGNNYXApLGwucnBjTWFwKX19cmV0dXJuIHJ9ZnVuY3Rpb24geShpKXtyZXR1cm4gaS5pbmNsdWRlcyhcIjpcIil9ZnVuY3Rpb24gTihpKXtyZXR1cm4geShpKT9pLnNwbGl0KFwiOlwiKVswXTppfWZ1bmN0aW9uIFAoaT1bXSxlPVtdKXtyZXR1cm5bLi4ubmV3IFNldChbLi4uaSwuLi5lXSldfWNvbnN0IGg9KGksZSk9Pntjb25zdCB0PXM9PntzLnJlcXVlc3QhPT1lLnJlcXVlc3R8fHMudG9waWMhPT1lLnRvcGljfHwoaS5ldmVudHMucmVtb3ZlTGlzdGVuZXIoXCJzZXNzaW9uX3JlcXVlc3Rfc2VudFwiLHQpLFEoZSkpfTtpLm9uKFwic2Vzc2lvbl9yZXF1ZXN0X3NlbnRcIix0KX07ZnVuY3Rpb24gUShpKXtpZih0eXBlb2Ygd2luZG93PFwidVwiKXRyeXtjb25zdCBlPXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIldBTExFVENPTk5FQ1RfREVFUExJTktfQ0hPSUNFXCIpO2lmKGUpe2NvbnN0IHQ9SlNPTi5wYXJzZShlKSxzPXQ/LmhyZWY7aWYodHlwZW9mIHM9PVwic3RyaW5nXCIpe3MuZW5kc1dpdGgoXCIvXCIpJiZzLnNsaWNlKDAsLTEpO2NvbnN0IG49YCR7c30vd2M/cmVxdWVzdElkPSR7aS5pZH0mc2Vzc2lvblRvcGljPSR7aS50b3BpY31gO3dpbmRvdy5vcGVuKG4sXCJfc2VsZlwiLFwibm9yZWZlcnJlciBub29wZW5lclwiKX19fWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9fWNsYXNzIFp7Y29uc3RydWN0b3IoZSl7dGhpcy5uYW1lPVwiZWlwMTU1XCIsdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5jbGllbnQ9ZS5jbGllbnQsdGhpcy5ldmVudHM9ZS5ldmVudHMsdGhpcy5odHRwUHJvdmlkZXJzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVycygpLHRoaXMuY2hhaW5JZD1wYXJzZUludCh0aGlzLmdldERlZmF1bHRDaGFpbigpKX1hc3luYyByZXF1ZXN0KGUpe3ZhciB0O3N3aXRjaChlLnJlcXVlc3QubWV0aG9kKXtjYXNlXCJldGhfcmVxdWVzdEFjY291bnRzXCI6cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKTtjYXNlXCJldGhfYWNjb3VudHNcIjpyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpO2Nhc2VcIndhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluXCI6cmV0dXJuIHRoaXMuaGFuZGxlU3dpdGNoQ2hhaW4oZS5yZXF1ZXN0LnBhcmFtcz8odD1lLnJlcXVlc3QucGFyYW1zWzBdKT09bnVsbD92b2lkIDA6dC5jaGFpbklkOlwiMHgwXCIpLG51bGw7Y2FzZVwiZXRoX2NoYWluSWRcIjpyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXREZWZhdWx0Q2hhaW4oKSl9cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/KGgodGhpcy5jbGllbnQsZSksYXdhaXQgdGhpcy5jbGllbnQucmVxdWVzdChlKSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9dXBkYXRlTmFtZXNwYWNlKGUpe3RoaXMubmFtZXNwYWNlPU9iamVjdC5hc3NpZ24odGhpcy5uYW1lc3BhY2UsZSl9c2V0RGVmYXVsdENoYWluKGUsdCl7Y29uc3Qgcz1nKGUpO2lmKCF0aGlzLmh0dHBQcm92aWRlcnNbc10pe2NvbnN0IG49dHx8YShgJHt0aGlzLm5hbWV9OiR7c31gLHRoaXMubmFtZXNwYWNlLHRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkKTtpZighbil0aHJvdyBuZXcgRXJyb3IoYE5vIFJQQyB1cmwgcHJvdmlkZWQgZm9yIGNoYWluSWQ6ICR7c31gKTt0aGlzLnNldEh0dHBQcm92aWRlcihzLG4pfXRoaXMuY2hhaW5JZD1zLHRoaXMuZXZlbnRzLmVtaXQoby5ERUZBVUxUX0NIQUlOX0NIQU5HRUQsYCR7dGhpcy5uYW1lfToke3N9YCl9cmVxdWVzdEFjY291bnRzKCl7cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKX1nZXREZWZhdWx0Q2hhaW4oKXtpZih0aGlzLmNoYWluSWQpcmV0dXJuIHRoaXMuY2hhaW5JZC50b1N0cmluZygpO2lmKHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbilyZXR1cm4gdGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluO2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuY2hhaW5zWzBdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNoYWluSWQgbm90IGZvdW5kXCIpO3JldHVybiBlLnNwbGl0KFwiOlwiKVsxXX1jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBzPXR8fGEoYCR7dGhpcy5uYW1lfToke2V9YCx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7cmV0dXJuIHR5cGVvZiBzPlwidVwiP3ZvaWQgMDpuZXcgYyhuZXcgVChzKSl9c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3Qgcz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO3MmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09cyl9Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9Pnt2YXIgcztjb25zdCBuPWcodCk7ZVtuXT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihuLChzPXRoaXMubmFtZXNwYWNlLnJwY01hcCk9PW51bGw/dm9pZCAwOnNbdF0pfSksZX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/Wy4uLm5ldyBTZXQoZS5maWx0ZXIodD0+dC5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHQ9PnQuc3BsaXQoXCI6XCIpWzJdKSldOltdfWdldEh0dHBQcm92aWRlcigpe2NvbnN0IGU9dGhpcy5jaGFpbklkLHQ9dGhpcy5odHRwUHJvdmlkZXJzW2VdO2lmKHR5cGVvZiB0PlwidVwiKXRocm93IG5ldyBFcnJvcihgSlNPTi1SUEMgcHJvdmlkZXIgZm9yICR7ZX0gbm90IGZvdW5kYCk7cmV0dXJuIHR9aGFuZGxlU3dpdGNoQ2hhaW4oZSl7Y29uc3QgdD1wYXJzZUludChlLDE2KSxzPWAke3RoaXMubmFtZX06JHt0fWA7SyhzLHRoaXMubmFtZXNwYWNlLmNoYWlucyksdGhpcy5zZXREZWZhdWx0Q2hhaW4oYCR7dH1gKX19Y2xhc3MgZWV7Y29uc3RydWN0b3IoZSl7dGhpcy5uYW1lPVwic29sYW5hXCIsdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9ZS5ldmVudHMsdGhpcy5jbGllbnQ9ZS5jbGllbnQsdGhpcy5jaGFpbklkPXRoaXMuZ2V0RGVmYXVsdENoYWluKCksdGhpcy5odHRwUHJvdmlkZXJzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVycygpfXVwZGF0ZU5hbWVzcGFjZShlKXt0aGlzLm5hbWVzcGFjZT1PYmplY3QuYXNzaWduKHRoaXMubmFtZXNwYWNlLGUpfXJlcXVlc3RBY2NvdW50cygpe3JldHVybiB0aGlzLmdldEFjY291bnRzKCl9cmVxdWVzdChlKXtyZXR1cm4gdGhpcy5uYW1lc3BhY2UubWV0aG9kcy5pbmNsdWRlcyhlLnJlcXVlc3QubWV0aG9kKT8oaCh0aGlzLmNsaWVudCxlKSx0aGlzLmNsaWVudC5yZXF1ZXN0KGUpKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXtpZighdGhpcy5odHRwUHJvdmlkZXJzW2VdKXtjb25zdCBzPXR8fGEoYCR7dGhpcy5uYW1lfToke2V9YCx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBObyBSUEMgdXJsIHByb3ZpZGVkIGZvciBjaGFpbklkOiAke2V9YCk7dGhpcy5zZXRIdHRwUHJvdmlkZXIoZSxzKX10aGlzLmNoYWluSWQ9ZSx0aGlzLmV2ZW50cy5lbWl0KG8uREVGQVVMVF9DSEFJTl9DSEFOR0VELGAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfWdldEFjY291bnRzKCl7Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5hY2NvdW50cztyZXR1cm4gZT9bLi4ubmV3IFNldChlLmZpbHRlcih0PT50LnNwbGl0KFwiOlwiKVsxXT09PXRoaXMuY2hhaW5JZC50b1N0cmluZygpKS5tYXAodD0+dC5zcGxpdChcIjpcIilbMl0pKV06W119Y3JlYXRlSHR0cFByb3ZpZGVycygpe2NvbnN0IGU9e307cmV0dXJuIHRoaXMubmFtZXNwYWNlLmNoYWlucy5mb3JFYWNoKHQ9Pnt2YXIgcztlW3RdPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKHQsKHM9dGhpcy5uYW1lc3BhY2UucnBjTWFwKT09bnVsbD92b2lkIDA6c1t0XSl9KSxlfWdldEh0dHBQcm92aWRlcigpe2NvbnN0IGU9YCR7dGhpcy5uYW1lfToke3RoaXMuY2hhaW5JZH1gLHQ9dGhpcy5odHRwUHJvdmlkZXJzW2VdO2lmKHR5cGVvZiB0PlwidVwiKXRocm93IG5ldyBFcnJvcihgSlNPTi1SUEMgcHJvdmlkZXIgZm9yICR7ZX0gbm90IGZvdW5kYCk7cmV0dXJuIHR9c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3Qgcz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO3MmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09cyl9Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3Qgcz10fHxhKGUsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO3JldHVybiB0eXBlb2Ygcz5cInVcIj92b2lkIDA6bmV3IGMobmV3IGQocykpfX1jbGFzcyB0ZXtjb25zdHJ1Y3RvcihlKXt0aGlzLm5hbWU9XCJjb3Ntb3NcIix0aGlzLm5hbWVzcGFjZT1lLm5hbWVzcGFjZSx0aGlzLmV2ZW50cz1lLmV2ZW50cyx0aGlzLmNsaWVudD1lLmNsaWVudCx0aGlzLmNoYWluSWQ9dGhpcy5nZXREZWZhdWx0Q2hhaW4oKSx0aGlzLmh0dHBQcm92aWRlcnM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXJzKCl9dXBkYXRlTmFtZXNwYWNlKGUpe3RoaXMubmFtZXNwYWNlPU9iamVjdC5hc3NpZ24odGhpcy5uYW1lc3BhY2UsZSl9cmVxdWVzdEFjY291bnRzKCl7cmV0dXJuIHRoaXMuZ2V0QWNjb3VudHMoKX1nZXREZWZhdWx0Q2hhaW4oKXtpZih0aGlzLmNoYWluSWQpcmV0dXJuIHRoaXMuY2hhaW5JZDtpZih0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW4pcmV0dXJuIHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbjtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmNoYWluc1swXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJDaGFpbklkIG5vdCBmb3VuZFwiKTtyZXR1cm4gZS5zcGxpdChcIjpcIilbMV19cmVxdWVzdChlKXtyZXR1cm4gdGhpcy5uYW1lc3BhY2UubWV0aG9kcy5pbmNsdWRlcyhlLnJlcXVlc3QubWV0aG9kKT8oaCh0aGlzLmNsaWVudCxlKSx0aGlzLmNsaWVudC5yZXF1ZXN0KGUpKTp0aGlzLmdldEh0dHBQcm92aWRlcigpLnJlcXVlc3QoZS5yZXF1ZXN0KX1zZXREZWZhdWx0Q2hhaW4oZSx0KXtpZih0aGlzLmNoYWluSWQ9ZSwhdGhpcy5odHRwUHJvdmlkZXJzW2VdKXtjb25zdCBzPXR8fGEoYCR7dGhpcy5uYW1lfToke2V9YCx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBObyBSUEMgdXJsIHByb3ZpZGVkIGZvciBjaGFpbklkOiAke2V9YCk7dGhpcy5zZXRIdHRwUHJvdmlkZXIoZSxzKX10aGlzLmV2ZW50cy5lbWl0KG8uREVGQVVMVF9DSEFJTl9DSEFOR0VELGAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCl9Z2V0QWNjb3VudHMoKXtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmFjY291bnRzO3JldHVybiBlP1suLi5uZXcgU2V0KGUuZmlsdGVyKHQ9PnQuc3BsaXQoXCI6XCIpWzFdPT09dGhpcy5jaGFpbklkLnRvU3RyaW5nKCkpLm1hcCh0PT50LnNwbGl0KFwiOlwiKVsyXSkpXTpbXX1jcmVhdGVIdHRwUHJvdmlkZXJzKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5uYW1lc3BhY2UuY2hhaW5zLmZvckVhY2godD0+e3ZhciBzO2VbdF09dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIodCwocz10aGlzLm5hbWVzcGFjZS5ycGNNYXApPT1udWxsP3ZvaWQgMDpzW3RdKX0pLGV9Z2V0SHR0cFByb3ZpZGVyKCl7Y29uc3QgZT1gJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWAsdD10aGlzLmh0dHBQcm92aWRlcnNbZV07aWYodHlwZW9mIHQ+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKGBKU09OLVJQQyBwcm92aWRlciBmb3IgJHtlfSBub3QgZm91bmRgKTtyZXR1cm4gdH1zZXRIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVyKGUsdCk7cyYmKHRoaXMuaHR0cFByb3ZpZGVyc1tlXT1zKX1jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KXtjb25zdCBzPXR8fGEoZSx0aGlzLm5hbWVzcGFjZSx0aGlzLmNsaWVudC5jb3JlLnByb2plY3RJZCk7cmV0dXJuIHR5cGVvZiBzPlwidVwiP3ZvaWQgMDpuZXcgYyhuZXcgZChzKSl9fWNsYXNzIHNle2NvbnN0cnVjdG9yKGUpe3RoaXMubmFtZT1cImNpcDM0XCIsdGhpcy5uYW1lc3BhY2U9ZS5uYW1lc3BhY2UsdGhpcy5ldmVudHM9ZS5ldmVudHMsdGhpcy5jbGllbnQ9ZS5jbGllbnQsdGhpcy5jaGFpbklkPXRoaXMuZ2V0RGVmYXVsdENoYWluKCksdGhpcy5odHRwUHJvdmlkZXJzPXRoaXMuY3JlYXRlSHR0cFByb3ZpZGVycygpfXVwZGF0ZU5hbWVzcGFjZShlKXt0aGlzLm5hbWVzcGFjZT1PYmplY3QuYXNzaWduKHRoaXMubmFtZXNwYWNlLGUpfXJlcXVlc3RBY2NvdW50cygpe3JldHVybiB0aGlzLmdldEFjY291bnRzKCl9Z2V0RGVmYXVsdENoYWluKCl7aWYodGhpcy5jaGFpbklkKXJldHVybiB0aGlzLmNoYWluSWQ7aWYodGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluKXJldHVybiB0aGlzLm5hbWVzcGFjZS5kZWZhdWx0Q2hhaW47Y29uc3QgZT10aGlzLm5hbWVzcGFjZS5jaGFpbnNbMF07aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQ2hhaW5JZCBub3QgZm91bmRcIik7cmV0dXJuIGUuc3BsaXQoXCI6XCIpWzFdfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/KGgodGhpcy5jbGllbnQsZSksdGhpcy5jbGllbnQucmVxdWVzdChlKSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7aWYodGhpcy5jaGFpbklkPWUsIXRoaXMuaHR0cFByb3ZpZGVyc1tlXSl7Y29uc3Qgcz10fHx0aGlzLmdldENhcmRhbm9SUENVcmwoZSk7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBObyBSUEMgdXJsIHByb3ZpZGVkIGZvciBjaGFpbklkOiAke2V9YCk7dGhpcy5zZXRIdHRwUHJvdmlkZXIoZSxzKX10aGlzLmV2ZW50cy5lbWl0KG8uREVGQVVMVF9DSEFJTl9DSEFOR0VELGAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCl9Z2V0QWNjb3VudHMoKXtjb25zdCBlPXRoaXMubmFtZXNwYWNlLmFjY291bnRzO3JldHVybiBlP1suLi5uZXcgU2V0KGUuZmlsdGVyKHQ9PnQuc3BsaXQoXCI6XCIpWzFdPT09dGhpcy5jaGFpbklkLnRvU3RyaW5nKCkpLm1hcCh0PT50LnNwbGl0KFwiOlwiKVsyXSkpXTpbXX1jcmVhdGVIdHRwUHJvdmlkZXJzKCl7Y29uc3QgZT17fTtyZXR1cm4gdGhpcy5uYW1lc3BhY2UuY2hhaW5zLmZvckVhY2godD0+e2NvbnN0IHM9dGhpcy5nZXRDYXJkYW5vUlBDVXJsKHQpO2VbdF09dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIodCxzKX0pLGV9Z2V0SHR0cFByb3ZpZGVyKCl7Y29uc3QgZT1gJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWAsdD10aGlzLmh0dHBQcm92aWRlcnNbZV07aWYodHlwZW9mIHQ+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKGBKU09OLVJQQyBwcm92aWRlciBmb3IgJHtlfSBub3QgZm91bmRgKTtyZXR1cm4gdH1nZXRDYXJkYW5vUlBDVXJsKGUpe2NvbnN0IHQ9dGhpcy5uYW1lc3BhY2UucnBjTWFwO2lmKHQpcmV0dXJuIHRbZV19c2V0SHR0cFByb3ZpZGVyKGUsdCl7Y29uc3Qgcz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcihlLHQpO3MmJih0aGlzLmh0dHBQcm92aWRlcnNbZV09cyl9Y3JlYXRlSHR0cFByb3ZpZGVyKGUsdCl7Y29uc3Qgcz10fHx0aGlzLmdldENhcmRhbm9SUENVcmwoZSk7cmV0dXJuIHR5cGVvZiBzPlwidVwiP3ZvaWQgMDpuZXcgYyhuZXcgZChzKSl9fWNsYXNzIGlle2NvbnN0cnVjdG9yKGUpe3RoaXMubmFtZT1cImVscm9uZFwiLHRoaXMubmFtZXNwYWNlPWUubmFtZXNwYWNlLHRoaXMuZXZlbnRzPWUuZXZlbnRzLHRoaXMuY2xpZW50PWUuY2xpZW50LHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/KGgodGhpcy5jbGllbnQsZSksdGhpcy5jbGllbnQucmVxdWVzdChlKSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7aWYoIXRoaXMuaHR0cFByb3ZpZGVyc1tlXSl7Y29uc3Qgcz10fHxhKGAke3RoaXMubmFtZX06JHtlfWAsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFzKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3RoaXMuc2V0SHR0cFByb3ZpZGVyKGUscyl9dGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChvLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWApfWdldERlZmF1bHRDaGFpbigpe2lmKHRoaXMuY2hhaW5JZClyZXR1cm4gdGhpcy5jaGFpbklkO2lmKHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbilyZXR1cm4gdGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluO2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuY2hhaW5zWzBdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNoYWluSWQgbm90IGZvdW5kXCIpO3JldHVybiBlLnNwbGl0KFwiOlwiKVsxXX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/Wy4uLm5ldyBTZXQoZS5maWx0ZXIodD0+dC5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHQ9PnQuc3BsaXQoXCI6XCIpWzJdKSldOltdfWNyZWF0ZUh0dHBQcm92aWRlcnMoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLm5hbWVzcGFjZS5jaGFpbnMuZm9yRWFjaCh0PT57dmFyIHM7ZVt0XT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcih0LChzPXRoaXMubmFtZXNwYWNlLnJwY01hcCk9PW51bGw/dm9pZCAwOnNbdF0pfSksZX1nZXRIdHRwUHJvdmlkZXIoKXtjb25zdCBlPWAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCx0PXRoaXMuaHR0cFByb3ZpZGVyc1tlXTtpZih0eXBlb2YgdD5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fXNldEh0dHBQcm92aWRlcihlLHQpe2NvbnN0IHM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KTtzJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPXMpfWNyZWF0ZUh0dHBQcm92aWRlcihlLHQpe2NvbnN0IHM9dHx8YShlLHRoaXMubmFtZXNwYWNlLHRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkKTtyZXR1cm4gdHlwZW9mIHM+XCJ1XCI/dm9pZCAwOm5ldyBjKG5ldyBkKHMpKX19Y2xhc3MgbmV7Y29uc3RydWN0b3IoZSl7dGhpcy5uYW1lPVwibXVsdGl2ZXJzeFwiLHRoaXMubmFtZXNwYWNlPWUubmFtZXNwYWNlLHRoaXMuZXZlbnRzPWUuZXZlbnRzLHRoaXMuY2xpZW50PWUuY2xpZW50LHRoaXMuY2hhaW5JZD10aGlzLmdldERlZmF1bHRDaGFpbigpLHRoaXMuaHR0cFByb3ZpZGVycz10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcnMoKX11cGRhdGVOYW1lc3BhY2UoZSl7dGhpcy5uYW1lc3BhY2U9T2JqZWN0LmFzc2lnbih0aGlzLm5hbWVzcGFjZSxlKX1yZXF1ZXN0QWNjb3VudHMoKXtyZXR1cm4gdGhpcy5nZXRBY2NvdW50cygpfXJlcXVlc3QoZSl7cmV0dXJuIHRoaXMubmFtZXNwYWNlLm1ldGhvZHMuaW5jbHVkZXMoZS5yZXF1ZXN0Lm1ldGhvZCk/KGgodGhpcy5jbGllbnQsZSksdGhpcy5jbGllbnQucmVxdWVzdChlKSk6dGhpcy5nZXRIdHRwUHJvdmlkZXIoKS5yZXF1ZXN0KGUucmVxdWVzdCl9c2V0RGVmYXVsdENoYWluKGUsdCl7aWYoIXRoaXMuaHR0cFByb3ZpZGVyc1tlXSl7Y29uc3Qgcz10fHxhKGAke3RoaXMubmFtZX06JHtlfWAsdGhpcy5uYW1lc3BhY2UsdGhpcy5jbGllbnQuY29yZS5wcm9qZWN0SWQpO2lmKCFzKXRocm93IG5ldyBFcnJvcihgTm8gUlBDIHVybCBwcm92aWRlZCBmb3IgY2hhaW5JZDogJHtlfWApO3RoaXMuc2V0SHR0cFByb3ZpZGVyKGUscyl9dGhpcy5jaGFpbklkPWUsdGhpcy5ldmVudHMuZW1pdChvLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxgJHt0aGlzLm5hbWV9OiR7dGhpcy5jaGFpbklkfWApfWdldERlZmF1bHRDaGFpbigpe2lmKHRoaXMuY2hhaW5JZClyZXR1cm4gdGhpcy5jaGFpbklkO2lmKHRoaXMubmFtZXNwYWNlLmRlZmF1bHRDaGFpbilyZXR1cm4gdGhpcy5uYW1lc3BhY2UuZGVmYXVsdENoYWluO2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuY2hhaW5zWzBdO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkNoYWluSWQgbm90IGZvdW5kXCIpO3JldHVybiBlLnNwbGl0KFwiOlwiKVsxXX1nZXRBY2NvdW50cygpe2NvbnN0IGU9dGhpcy5uYW1lc3BhY2UuYWNjb3VudHM7cmV0dXJuIGU/Wy4uLm5ldyBTZXQoZS5maWx0ZXIodD0+dC5zcGxpdChcIjpcIilbMV09PT10aGlzLmNoYWluSWQudG9TdHJpbmcoKSkubWFwKHQ9PnQuc3BsaXQoXCI6XCIpWzJdKSldOltdfWNyZWF0ZUh0dHBQcm92aWRlcnMoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLm5hbWVzcGFjZS5jaGFpbnMuZm9yRWFjaCh0PT57dmFyIHM7ZVt0XT10aGlzLmNyZWF0ZUh0dHBQcm92aWRlcih0LChzPXRoaXMubmFtZXNwYWNlLnJwY01hcCk9PW51bGw/dm9pZCAwOnNbdF0pfSksZX1nZXRIdHRwUHJvdmlkZXIoKXtjb25zdCBlPWAke3RoaXMubmFtZX06JHt0aGlzLmNoYWluSWR9YCx0PXRoaXMuaHR0cFByb3ZpZGVyc1tlXTtpZih0eXBlb2YgdD5cInVcIil0aHJvdyBuZXcgRXJyb3IoYEpTT04tUlBDIHByb3ZpZGVyIGZvciAke2V9IG5vdCBmb3VuZGApO3JldHVybiB0fXNldEh0dHBQcm92aWRlcihlLHQpe2NvbnN0IHM9dGhpcy5jcmVhdGVIdHRwUHJvdmlkZXIoZSx0KTtzJiYodGhpcy5odHRwUHJvdmlkZXJzW2VdPXMpfWNyZWF0ZUh0dHBQcm92aWRlcihlLHQpe2NvbnN0IHM9dHx8YShlLHRoaXMubmFtZXNwYWNlLHRoaXMuY2xpZW50LmNvcmUucHJvamVjdElkKTtyZXR1cm4gdHlwZW9mIHM+XCJ1XCI/dm9pZCAwOm5ldyBjKG5ldyBkKHMpKX19dmFyIHJlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxhZT1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxvZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxPPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsY2U9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxoZT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLGI9KGksZSx0KT0+ZSBpbiBpP3JlKGksZSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOmlbZV09dCx1PShpLGUpPT57Zm9yKHZhciB0IGluIGV8fChlPXt9KSljZS5jYWxsKGUsdCkmJmIoaSx0LGVbdF0pO2lmKE8pZm9yKHZhciB0IG9mIE8oZSkpaGUuY2FsbChlLHQpJiZiKGksdCxlW3RdKTtyZXR1cm4gaX0sdz0oaSxlKT0+YWUoaSxvZShlKSk7Y2xhc3MgbXtjb25zdHJ1Y3RvcihlKXt0aGlzLmV2ZW50cz1uZXcgRix0aGlzLnJwY1Byb3ZpZGVycz17fSx0aGlzLnNob3VsZEFib3J0UGFpcmluZ0F0dGVtcHQ9ITEsdGhpcy5tYXhQYWlyaW5nQXR0ZW1wdHM9MTAsdGhpcy5wcm92aWRlck9wdHM9ZSx0aGlzLmxvZ2dlcj10eXBlb2YgZT8ubG9nZ2VyPFwidVwiJiZ0eXBlb2YgZT8ubG9nZ2VyIT1cInN0cmluZ1wiP2UubG9nZ2VyOl8oVSh7bGV2ZWw6ZT8ubG9nZ2VyfHxJfSkpfXN0YXRpYyBhc3luYyBpbml0KGUpe2NvbnN0IHQ9bmV3IG0oZSk7cmV0dXJuIGF3YWl0IHQuaW5pdGlhbGl6ZSgpLHR9YXN5bmMgcmVxdWVzdChlLHQpe2NvbnN0W3Msbl09dGhpcy52YWxpZGF0ZUNoYWluKHQpO2lmKCF0aGlzLnNlc3Npb24pdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGNhbGwgY29ubmVjdCgpIGJlZm9yZSByZXF1ZXN0KClcIik7cmV0dXJuIGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIocykucmVxdWVzdCh7cmVxdWVzdDp1KHt9LGUpLGNoYWluSWQ6YCR7c306JHtufWAsdG9waWM6dGhpcy5zZXNzaW9uLnRvcGljfSl9c2VuZEFzeW5jKGUsdCxzKXt0aGlzLnJlcXVlc3QoZSxzKS50aGVuKG49PnQobnVsbCxuKSkuY2F0Y2gobj0+dChuLHZvaWQgMCkpfWFzeW5jIGVuYWJsZSgpe2lmKCF0aGlzLmNsaWVudCl0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBub3QgaW5pdGlhbGl6ZWRcIik7cmV0dXJuIHRoaXMuc2Vzc2lvbnx8YXdhaXQgdGhpcy5jb25uZWN0KHtuYW1lc3BhY2VzOnRoaXMubmFtZXNwYWNlcyxvcHRpb25hbE5hbWVzcGFjZXM6dGhpcy5vcHRpb25hbE5hbWVzcGFjZXMsc2Vzc2lvblByb3BlcnRpZXM6dGhpcy5zZXNzaW9uUHJvcGVydGllc30pLGF3YWl0IHRoaXMucmVxdWVzdEFjY291bnRzKCl9YXN5bmMgZGlzY29ubmVjdCgpe3ZhciBlO2lmKCF0aGlzLnNlc3Npb24pdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGNhbGwgY29ubmVjdCgpIGJlZm9yZSBlbmFibGUoKVwiKTthd2FpdCB0aGlzLmNsaWVudC5kaXNjb25uZWN0KHt0b3BpYzooZT10aGlzLnNlc3Npb24pPT1udWxsP3ZvaWQgMDplLnRvcGljLHJlYXNvbjpDKFwiVVNFUl9ESVNDT05ORUNURURcIil9KSxhd2FpdCB0aGlzLmNsZWFudXAoKX1hc3luYyBjb25uZWN0KGUpe2lmKCF0aGlzLmNsaWVudCl0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBub3QgaW5pdGlhbGl6ZWRcIik7aWYodGhpcy5zZXROYW1lc3BhY2VzKGUpLGF3YWl0IHRoaXMuY2xlYW51cFBlbmRpbmdQYWlyaW5ncygpLCFlLnNraXBQYWlyaW5nKXJldHVybiBhd2FpdCB0aGlzLnBhaXIoZS5wYWlyaW5nVG9waWMpfW9uKGUsdCl7dGhpcy5ldmVudHMub24oZSx0KX1vbmNlKGUsdCl7dGhpcy5ldmVudHMub25jZShlLHQpfXJlbW92ZUxpc3RlbmVyKGUsdCl7dGhpcy5ldmVudHMucmVtb3ZlTGlzdGVuZXIoZSx0KX1vZmYoZSx0KXt0aGlzLmV2ZW50cy5vZmYoZSx0KX1nZXQgaXNXYWxsZXRDb25uZWN0KCl7cmV0dXJuITB9YXN5bmMgcGFpcihlKXt0aGlzLnNob3VsZEFib3J0UGFpcmluZ0F0dGVtcHQ9ITE7bGV0IHQ9MDtkb3tpZih0aGlzLnNob3VsZEFib3J0UGFpcmluZ0F0dGVtcHQpdGhyb3cgbmV3IEVycm9yKFwiUGFpcmluZyBhYm9ydGVkXCIpO2lmKHQ+PXRoaXMubWF4UGFpcmluZ0F0dGVtcHRzKXRocm93IG5ldyBFcnJvcihcIk1heCBhdXRvIHBhaXJpbmcgYXR0ZW1wdHMgcmVhY2hlZFwiKTtjb25zdHt1cmk6cyxhcHByb3ZhbDpufT1hd2FpdCB0aGlzLmNsaWVudC5jb25uZWN0KHtwYWlyaW5nVG9waWM6ZSxyZXF1aXJlZE5hbWVzcGFjZXM6dGhpcy5uYW1lc3BhY2VzLG9wdGlvbmFsTmFtZXNwYWNlczp0aGlzLm9wdGlvbmFsTmFtZXNwYWNlcyxzZXNzaW9uUHJvcGVydGllczp0aGlzLnNlc3Npb25Qcm9wZXJ0aWVzfSk7cyYmKHRoaXMudXJpPXMsdGhpcy5ldmVudHMuZW1pdChcImRpc3BsYXlfdXJpXCIscykpLGF3YWl0IG4oKS50aGVuKHI9Pnt0aGlzLnNlc3Npb249cn0pLmNhdGNoKHI9PntpZihyLm1lc3NhZ2UhPT1SKXRocm93IHI7dCsrfSl9d2hpbGUoIXRoaXMuc2Vzc2lvbik7cmV0dXJuIHRoaXMub25Db25uZWN0KCksdGhpcy5zZXNzaW9ufXNldERlZmF1bHRDaGFpbihlLHQpe3RyeXtjb25zdFtzLG5dPXRoaXMudmFsaWRhdGVDaGFpbihlKTt0aGlzLmdldFByb3ZpZGVyKHMpLnNldERlZmF1bHRDaGFpbihuLHQpfWNhdGNoKHMpe2lmKCEvUGxlYXNlIGNhbGwgY29ubmVjdC8udGVzdChzLm1lc3NhZ2UpKXRocm93IHN9fWFzeW5jIGNsZWFudXBQZW5kaW5nUGFpcmluZ3MoZT17fSl7dGhpcy5sb2dnZXIuaW5mbyhcIkNsZWFuaW5nIHVwIGluYWN0aXZlIHBhaXJpbmdzLi4uXCIpO2NvbnN0IHQ9dGhpcy5jbGllbnQucGFpcmluZy5nZXRBbGwoKTtpZihrKHQpKXtmb3IoY29uc3QgcyBvZiB0KWUuZGVsZXRlUGFpcmluZ3M/dGhpcy5jbGllbnQuY29yZS5leHBpcmVyLnNldChzLnRvcGljLDApOmF3YWl0IHRoaXMuY2xpZW50LmNvcmUucmVsYXllci5zdWJzY3JpYmVyLnVuc3Vic2NyaWJlKHMudG9waWMpO3RoaXMubG9nZ2VyLmluZm8oYEluYWN0aXZlIHBhaXJpbmdzIGNsZWFyZWQ6ICR7dC5sZW5ndGh9YCl9fWFib3J0UGFpcmluZ0F0dGVtcHQoKXt0aGlzLnNob3VsZEFib3J0UGFpcmluZ0F0dGVtcHQ9ITB9YXN5bmMgY2hlY2tTdG9yYWdlKCl7aWYodGhpcy5uYW1lc3BhY2VzPWF3YWl0IHRoaXMuZ2V0RnJvbVN0b3JlKFwibmFtZXNwYWNlc1wiKXx8e30sdGhpcy5vcHRpb25hbE5hbWVzcGFjZXM9YXdhaXQgdGhpcy5nZXRGcm9tU3RvcmUoXCJvcHRpb25hbE5hbWVzcGFjZXNcIil8fHt9LHRoaXMuY2xpZW50LnNlc3Npb24ubGVuZ3RoKXtjb25zdCBlPXRoaXMuY2xpZW50LnNlc3Npb24ua2V5cy5sZW5ndGgtMTt0aGlzLnNlc3Npb249dGhpcy5jbGllbnQuc2Vzc2lvbi5nZXQodGhpcy5jbGllbnQuc2Vzc2lvbi5rZXlzW2VdKSx0aGlzLmNyZWF0ZVByb3ZpZGVycygpfX1hc3luYyBpbml0aWFsaXplKCl7dGhpcy5sb2dnZXIudHJhY2UoXCJJbml0aWFsaXplZFwiKSxhd2FpdCB0aGlzLmNyZWF0ZUNsaWVudCgpLGF3YWl0IHRoaXMuY2hlY2tTdG9yYWdlKCksdGhpcy5yZWdpc3RlckV2ZW50TGlzdGVuZXJzKCl9YXN5bmMgY3JlYXRlQ2xpZW50KCl7dGhpcy5jbGllbnQ9dGhpcy5wcm92aWRlck9wdHMuY2xpZW50fHxhd2FpdCBqLmluaXQoe2xvZ2dlcjp0aGlzLnByb3ZpZGVyT3B0cy5sb2dnZXJ8fEkscmVsYXlVcmw6dGhpcy5wcm92aWRlck9wdHMucmVsYXlVcmx8fE0scHJvamVjdElkOnRoaXMucHJvdmlkZXJPcHRzLnByb2plY3RJZCxtZXRhZGF0YTp0aGlzLnByb3ZpZGVyT3B0cy5tZXRhZGF0YSxzdG9yYWdlT3B0aW9uczp0aGlzLnByb3ZpZGVyT3B0cy5zdG9yYWdlT3B0aW9ucyxuYW1lOnRoaXMucHJvdmlkZXJPcHRzLm5hbWV9KSx0aGlzLmxvZ2dlci50cmFjZShcIlNpZ25DbGllbnQgSW5pdGlhbGl6ZWRcIil9Y3JlYXRlUHJvdmlkZXJzKCl7aWYoIXRoaXMuY2xpZW50KXRocm93IG5ldyBFcnJvcihcIlNpZ24gQ2xpZW50IG5vdCBpbml0aWFsaXplZFwiKTtpZighdGhpcy5zZXNzaW9uKXRocm93IG5ldyBFcnJvcihcIlNlc3Npb24gbm90IGluaXRpYWxpemVkLiBQbGVhc2UgY2FsbCBjb25uZWN0KCkgYmVmb3JlIGVuYWJsZSgpXCIpO1suLi5uZXcgU2V0KE9iamVjdC5rZXlzKHRoaXMuc2Vzc2lvbi5uYW1lc3BhY2VzKS5tYXAoZT0+TihlKSkpXS5mb3JFYWNoKGU9PntpZighdGhpcy5zZXNzaW9uKXJldHVybjtjb25zdCB0PVkoZSx0aGlzLnNlc3Npb24pLHM9WCh0KSxuPUIodGhpcy5uYW1lc3BhY2VzLHRoaXMub3B0aW9uYWxOYW1lc3BhY2VzKSxyPXcodSh7fSxuW2VdKSx7YWNjb3VudHM6dCxjaGFpbnM6c30pO3N3aXRjaChlKXtjYXNlXCJlaXAxNTVcIjp0aGlzLnJwY1Byb3ZpZGVyc1tlXT1uZXcgWih7Y2xpZW50OnRoaXMuY2xpZW50LG5hbWVzcGFjZTpyLGV2ZW50czp0aGlzLmV2ZW50c30pO2JyZWFrO2Nhc2VcInNvbGFuYVwiOnRoaXMucnBjUHJvdmlkZXJzW2VdPW5ldyBlZSh7Y2xpZW50OnRoaXMuY2xpZW50LG5hbWVzcGFjZTpyLGV2ZW50czp0aGlzLmV2ZW50c30pO2JyZWFrO2Nhc2VcImNvc21vc1wiOnRoaXMucnBjUHJvdmlkZXJzW2VdPW5ldyB0ZSh7Y2xpZW50OnRoaXMuY2xpZW50LG5hbWVzcGFjZTpyLGV2ZW50czp0aGlzLmV2ZW50c30pO2JyZWFrO2Nhc2VcInBvbGthZG90XCI6YnJlYWs7Y2FzZVwiY2lwMzRcIjp0aGlzLnJwY1Byb3ZpZGVyc1tlXT1uZXcgc2Uoe2NsaWVudDp0aGlzLmNsaWVudCxuYW1lc3BhY2U6cixldmVudHM6dGhpcy5ldmVudHN9KTticmVhaztjYXNlXCJlbHJvbmRcIjp0aGlzLnJwY1Byb3ZpZGVyc1tlXT1uZXcgaWUoe2NsaWVudDp0aGlzLmNsaWVudCxuYW1lc3BhY2U6cixldmVudHM6dGhpcy5ldmVudHN9KTticmVhaztjYXNlXCJtdWx0aXZlcnN4XCI6dGhpcy5ycGNQcm92aWRlcnNbZV09bmV3IG5lKHtjbGllbnQ6dGhpcy5jbGllbnQsbmFtZXNwYWNlOnIsZXZlbnRzOnRoaXMuZXZlbnRzfSk7YnJlYWt9fSl9cmVnaXN0ZXJFdmVudExpc3RlbmVycygpe2lmKHR5cGVvZiB0aGlzLmNsaWVudD5cInVcIil0aHJvdyBuZXcgRXJyb3IoXCJTaWduIENsaWVudCBpcyBub3QgaW5pdGlhbGl6ZWRcIik7dGhpcy5jbGllbnQub24oXCJzZXNzaW9uX3BpbmdcIixlPT57dGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fcGluZ1wiLGUpfSksdGhpcy5jbGllbnQub24oXCJzZXNzaW9uX2V2ZW50XCIsZT0+e2NvbnN0e3BhcmFtczp0fT1lLHtldmVudDpzfT10O3MubmFtZT09PVwiYWNjb3VudHNDaGFuZ2VkXCI/dGhpcy5ldmVudHMuZW1pdChcImFjY291bnRzQ2hhbmdlZFwiLHMuZGF0YSk6cy5uYW1lPT09XCJjaGFpbkNoYW5nZWRcIj90aGlzLm9uQ2hhaW5DaGFuZ2VkKHQuY2hhaW5JZCk6dGhpcy5ldmVudHMuZW1pdChzLm5hbWUscy5kYXRhKSx0aGlzLmV2ZW50cy5lbWl0KFwic2Vzc2lvbl9ldmVudFwiLGUpfSksdGhpcy5jbGllbnQub24oXCJzZXNzaW9uX3VwZGF0ZVwiLCh7dG9waWM6ZSxwYXJhbXM6dH0pPT57dmFyIHM7Y29uc3R7bmFtZXNwYWNlczpufT10LHI9KHM9dGhpcy5jbGllbnQpPT1udWxsP3ZvaWQgMDpzLnNlc3Npb24uZ2V0KGUpO3RoaXMuc2Vzc2lvbj13KHUoe30scikse25hbWVzcGFjZXM6bn0pLHRoaXMub25TZXNzaW9uVXBkYXRlKCksdGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fdXBkYXRlXCIse3RvcGljOmUscGFyYW1zOnR9KX0pLHRoaXMuY2xpZW50Lm9uKFwic2Vzc2lvbl9kZWxldGVcIixhc3luYyBlPT57YXdhaXQgdGhpcy5jbGVhbnVwKCksdGhpcy5ldmVudHMuZW1pdChcInNlc3Npb25fZGVsZXRlXCIsZSksdGhpcy5ldmVudHMuZW1pdChcImRpc2Nvbm5lY3RcIix3KHUoe30sQyhcIlVTRVJfRElTQ09OTkVDVEVEXCIpKSx7ZGF0YTplLnRvcGljfSkpfSksdGhpcy5vbihvLkRFRkFVTFRfQ0hBSU5fQ0hBTkdFRCxlPT57dGhpcy5vbkNoYWluQ2hhbmdlZChlLCEwKX0pfWdldFByb3ZpZGVyKGUpe2lmKCF0aGlzLnJwY1Byb3ZpZGVyc1tlXSl0aHJvdyBuZXcgRXJyb3IoYFByb3ZpZGVyIG5vdCBmb3VuZDogJHtlfWApO3JldHVybiB0aGlzLnJwY1Byb3ZpZGVyc1tlXX1vblNlc3Npb25VcGRhdGUoKXtPYmplY3Qua2V5cyh0aGlzLnJwY1Byb3ZpZGVycykuZm9yRWFjaChlPT57dmFyIHQ7dGhpcy5nZXRQcm92aWRlcihlKS51cGRhdGVOYW1lc3BhY2UoKHQ9dGhpcy5zZXNzaW9uKT09bnVsbD92b2lkIDA6dC5uYW1lc3BhY2VzW2VdKX0pfXNldE5hbWVzcGFjZXMoZSl7Y29uc3R7bmFtZXNwYWNlczp0LG9wdGlvbmFsTmFtZXNwYWNlczpzLHNlc3Npb25Qcm9wZXJ0aWVzOm59PWU7aWYoIXR8fCFPYmplY3Qua2V5cyh0KS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiTmFtZXNwYWNlcyBtdXN0IGJlIG5vdCBlbXB0eVwiKTt0aGlzLm5hbWVzcGFjZXM9dCx0aGlzLm9wdGlvbmFsTmFtZXNwYWNlcz1zLHRoaXMuc2Vzc2lvblByb3BlcnRpZXM9bix0aGlzLnBlcnNpc3QoXCJuYW1lc3BhY2VzXCIsdCksdGhpcy5wZXJzaXN0KFwib3B0aW9uYWxOYW1lc3BhY2VzXCIscyl9dmFsaWRhdGVDaGFpbihlKXtjb25zdFt0LHNdPWU/LnNwbGl0KFwiOlwiKXx8W1wiXCIsXCJcIl07aWYodCYmIU9iamVjdC5rZXlzKHRoaXMubmFtZXNwYWNlcykuaW5jbHVkZXModCkpdGhyb3cgbmV3IEVycm9yKGBOYW1lc3BhY2UgJyR7dH0nIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2UgY2FsbCBjb25uZWN0KCkgZmlyc3Qgd2l0aCBuYW1lc3BhY2UgY29uZmlnLmApO2lmKHQmJnMpcmV0dXJuW3Qsc107Y29uc3Qgbj1PYmplY3Qua2V5cyh0aGlzLm5hbWVzcGFjZXMpWzBdLHI9dGhpcy5ycGNQcm92aWRlcnNbbl0uZ2V0RGVmYXVsdENoYWluKCk7cmV0dXJuW24scl19YXN5bmMgcmVxdWVzdEFjY291bnRzKCl7Y29uc3RbZV09dGhpcy52YWxpZGF0ZUNoYWluKCk7cmV0dXJuIGF3YWl0IHRoaXMuZ2V0UHJvdmlkZXIoZSkucmVxdWVzdEFjY291bnRzKCl9b25DaGFpbkNoYW5nZWQoZSx0PSExKXtjb25zdFtzLG5dPXRoaXMudmFsaWRhdGVDaGFpbihlKTt0fHx0aGlzLmdldFByb3ZpZGVyKHMpLnNldERlZmF1bHRDaGFpbihuKSx0aGlzLm5hbWVzcGFjZXNbc10uZGVmYXVsdENoYWluPW4sdGhpcy5wZXJzaXN0KFwibmFtZXNwYWNlc1wiLHRoaXMubmFtZXNwYWNlcyksdGhpcy5ldmVudHMuZW1pdChcImNoYWluQ2hhbmdlZFwiLG4pfW9uQ29ubmVjdCgpe3RoaXMuY3JlYXRlUHJvdmlkZXJzKCksdGhpcy5ldmVudHMuZW1pdChcImNvbm5lY3RcIix7c2Vzc2lvbjp0aGlzLnNlc3Npb259KX1hc3luYyBjbGVhbnVwKCl7dGhpcy5zZXNzaW9uPXZvaWQgMCxhd2FpdCB0aGlzLmNsZWFudXBQZW5kaW5nUGFpcmluZ3Moe2RlbGV0ZVBhaXJpbmdzOiEwfSl9cGVyc2lzdChlLHQpe3RoaXMuY2xpZW50LmNvcmUuc3RvcmFnZS5zZXRJdGVtKGAke0V9LyR7ZX1gLHQpfWFzeW5jIGdldEZyb21TdG9yZShlKXtyZXR1cm4gYXdhaXQgdGhpcy5jbGllbnQuY29yZS5zdG9yYWdlLmdldEl0ZW0oYCR7RX0vJHtlfWApfX1jb25zdCBwZT1tO2V4cG9ydHtwZSBhcyBVbml2ZXJzYWxQcm92aWRlcixtIGFzIGRlZmF1bHR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iLCJpbXBvcnR7Q2hhQ2hhMjBQb2x5MTMwNSBhcyBpZX1mcm9tXCJAc3RhYmxlbGliL2NoYWNoYTIwcG9seTEzMDVcIjtpbXBvcnR7SEtERiBhcyBmbn1mcm9tXCJAc3RhYmxlbGliL2hrZGZcIjtpbXBvcnR7cmFuZG9tQnl0ZXMgYXMgY2V9ZnJvbVwiQHN0YWJsZWxpYi9yYW5kb21cIjtpbXBvcnR7U0hBMjU2IGFzIHBuLGhhc2ggYXMgYWV9ZnJvbVwiQHN0YWJsZWxpYi9zaGEyNTZcIjtpbXBvcnQqYXMgdWUgZnJvbVwiQHN0YWJsZWxpYi94MjU1MTlcIjtpbXBvcnR7dG9TdHJpbmcgYXMgRSxmcm9tU3RyaW5nIGFzIGgsY29uY2F0IGFzIGRlfWZyb21cInVpbnQ4YXJyYXlzXCI7aW1wb3J0e2RldGVjdCBhcyBtbn1mcm9tXCJkZXRlY3QtYnJvd3NlclwiO2ltcG9ydHt0b01pbGlzZWNvbmRzIGFzIHEsRklWRV9NSU5VVEVTIGFzIGxlLGZyb21NaWxpc2Vjb25kcyBhcyB5bn1mcm9tXCJAd2FsbGV0Y29ubmVjdC90aW1lXCI7aW1wb3J0e2dldERvY3VtZW50IGFzIEVuLGdldE5hdmlnYXRvciBhcyBmZSxnZXRMb2NhdGlvbiBhcyBwZX1mcm9tXCJAd2FsbGV0Y29ubmVjdC93aW5kb3ctZ2V0dGVyc1wiO2ltcG9ydHtnZXRXaW5kb3dNZXRhZGF0YSBhcyBobn1mcm9tXCJAd2FsbGV0Y29ubmVjdC93aW5kb3ctbWV0YWRhdGFcIjtpbXBvcnQqYXMgJCBmcm9tXCJxdWVyeS1zdHJpbmdcIjtpbXBvcnR7UkVMQVlfSlNPTlJQQyBhcyB2bn1mcm9tXCJAd2FsbGV0Y29ubmVjdC9yZWxheS1hcGlcIjtjb25zdCBEPVwiOlwiO2Z1bmN0aW9uIG1lKGUpe2NvbnN0W24sdF09ZS5zcGxpdChEKTtyZXR1cm57bmFtZXNwYWNlOm4scmVmZXJlbmNlOnR9fWZ1bmN0aW9uIHllKGUpe2NvbnN0e25hbWVzcGFjZTpuLHJlZmVyZW5jZTp0fT1lO3JldHVybltuLHRdLmpvaW4oRCl9ZnVuY3Rpb24geihlKXtjb25zdFtuLHQscl09ZS5zcGxpdChEKTtyZXR1cm57bmFtZXNwYWNlOm4scmVmZXJlbmNlOnQsYWRkcmVzczpyfX1mdW5jdGlvbiBFZShlKXtjb25zdHtuYW1lc3BhY2U6bixyZWZlcmVuY2U6dCxhZGRyZXNzOnJ9PWU7cmV0dXJuW24sdCxyXS5qb2luKEQpfWZ1bmN0aW9uIEIoZSxuKXtjb25zdCB0PVtdO3JldHVybiBlLmZvckVhY2gocj0+e2NvbnN0IG89bihyKTt0LmluY2x1ZGVzKG8pfHx0LnB1c2gobyl9KSx0fWZ1bmN0aW9uIGhlKGUpe2NvbnN0e2FkZHJlc3M6bn09eihlKTtyZXR1cm4gbn1mdW5jdGlvbiB2ZShlKXtjb25zdHtuYW1lc3BhY2U6bixyZWZlcmVuY2U6dH09eihlKTtyZXR1cm4geWUoe25hbWVzcGFjZTpuLHJlZmVyZW5jZTp0fSl9ZnVuY3Rpb24gZ24oZSxuKXtjb25zdHtuYW1lc3BhY2U6dCxyZWZlcmVuY2U6cn09bWUobik7cmV0dXJuIEVlKHtuYW1lc3BhY2U6dCxyZWZlcmVuY2U6cixhZGRyZXNzOmV9KX1mdW5jdGlvbiBObihlKXtyZXR1cm4gQihlLGhlKX1mdW5jdGlvbiBnZShlKXtyZXR1cm4gQihlLHZlKX1mdW5jdGlvbiBibihlLG49W10pe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e2lmKG4ubGVuZ3RoJiYhbi5pbmNsdWRlcyhyKSlyZXR1cm47Y29uc3Qgbz1lW3JdO3QucHVzaCguLi5vLmFjY291bnRzKX0pLHR9ZnVuY3Rpb24gT24oZSxuPVtdKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHI9PntpZihuLmxlbmd0aCYmIW4uaW5jbHVkZXMocikpcmV0dXJuO2NvbnN0IG89ZVtyXTt0LnB1c2goLi4uZ2Uoby5hY2NvdW50cykpfSksdH1mdW5jdGlvbiBTbihlLG49W10pe2NvbnN0IHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e2lmKG4ubGVuZ3RoJiYhbi5pbmNsdWRlcyhyKSlyZXR1cm47Y29uc3Qgbz1lW3JdO3QucHVzaCguLi5WKHIsbykpfSksdH1mdW5jdGlvbiBWKGUsbil7cmV0dXJuIGUuaW5jbHVkZXMoXCI6XCIpP1tlXTpuLmNoYWluc3x8W119Y29uc3QgTT1lPT5lPy5zcGxpdChcIjpcIiksTmU9ZT0+e2NvbnN0IG49ZSYmTShlKTtpZihuKXJldHVybiBuWzNdfSxJbj1lPT57Y29uc3Qgbj1lJiZNKGUpO2lmKG4pcmV0dXJuIG5bMl0rXCI6XCIrblszXX0sYmU9ZT0+e2NvbnN0IG49ZSYmTShlKTtpZihuKXJldHVybiBuLnBvcCgpfSxQbj0oZSxuKT0+e2NvbnN0IHQ9YCR7ZS5kb21haW59IHdhbnRzIHlvdSB0byBzaWduIGluIHdpdGggeW91ciBFdGhlcmV1bSBhY2NvdW50OmAscj1iZShuKSxvPWUuc3RhdGVtZW50LHM9YFVSSTogJHtlLmF1ZH1gLGM9YFZlcnNpb246ICR7ZS52ZXJzaW9ufWAsZD1gQ2hhaW4gSUQ6ICR7TmUobil9YCxsPWBOb25jZTogJHtlLm5vbmNlfWAsaT1gSXNzdWVkIEF0OiAke2UuaWF0fWAsdT1lLnJlc291cmNlcyYmZS5yZXNvdXJjZXMubGVuZ3RoPjA/YFJlc291cmNlczpcbiR7ZS5yZXNvdXJjZXMubWFwKGE9PmAtICR7YX1gKS5qb2luKGBcbmApfWA6dm9pZCAwO3JldHVyblt0LHIsXCJcIixvLFwiXCIscyxjLGQsbCxpLHVdLmZpbHRlcihhPT5hIT1udWxsKS5qb2luKGBcbmApfSxHPVwiYmFzZTEwXCIsZj1cImJhc2UxNlwiLEs9XCJiYXNlNjRwYWRcIixrPVwidXRmOFwiLFk9MCxVPTEsVG49MCxPZT0xLFc9MTIsSj0zMjtmdW5jdGlvbiBSbigpe2NvbnN0IGU9dWUuZ2VuZXJhdGVLZXlQYWlyKCk7cmV0dXJue3ByaXZhdGVLZXk6RShlLnNlY3JldEtleSxmKSxwdWJsaWNLZXk6RShlLnB1YmxpY0tleSxmKX19ZnVuY3Rpb24gQW4oKXtjb25zdCBlPWNlKEopO3JldHVybiBFKGUsZil9ZnVuY3Rpb24gVW4oZSxuKXtjb25zdCB0PXVlLnNoYXJlZEtleShoKGUsZiksaChuLGYpKSxyPW5ldyBmbihwbix0KS5leHBhbmQoSik7cmV0dXJuIEUocixmKX1mdW5jdGlvbiBfbihlKXtjb25zdCBuPWFlKGgoZSxmKSk7cmV0dXJuIEUobixmKX1mdW5jdGlvbiB3bihlKXtjb25zdCBuPWFlKGgoZSxrKSk7cmV0dXJuIEUobixmKX1mdW5jdGlvbiBTZShlKXtyZXR1cm4gaChgJHtlfWAsRyl9ZnVuY3Rpb24gaihlKXtyZXR1cm4gTnVtYmVyKEUoZSxHKSl9ZnVuY3Rpb24gam4oZSl7Y29uc3Qgbj1TZSh0eXBlb2YgZS50eXBlPFwidVwiP2UudHlwZTpZKTtpZihqKG4pPT09VSYmdHlwZW9mIGUuc2VuZGVyUHVibGljS2V5PlwidVwiKXRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgc2VuZGVyIHB1YmxpYyBrZXkgZm9yIHR5cGUgMSBlbnZlbG9wZVwiKTtjb25zdCB0PXR5cGVvZiBlLnNlbmRlclB1YmxpY0tleTxcInVcIj9oKGUuc2VuZGVyUHVibGljS2V5LGYpOnZvaWQgMCxyPXR5cGVvZiBlLml2PFwidVwiP2goZS5pdixmKTpjZShXKSxvPW5ldyBpZShoKGUuc3ltS2V5LGYpKS5zZWFsKHIsaChlLm1lc3NhZ2UsaykpO3JldHVybiBJZSh7dHlwZTpuLHNlYWxlZDpvLGl2OnIsc2VuZGVyUHVibGljS2V5OnR9KX1mdW5jdGlvbiBDbihlKXtjb25zdCBuPW5ldyBpZShoKGUuc3ltS2V5LGYpKSx7c2VhbGVkOnQsaXY6cn09UShlLmVuY29kZWQpLG89bi5vcGVuKHIsdCk7aWYobz09PW51bGwpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGRlY3J5cHRcIik7cmV0dXJuIEUobyxrKX1mdW5jdGlvbiBJZShlKXtpZihqKGUudHlwZSk9PT1VKXtpZih0eXBlb2YgZS5zZW5kZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBzZW5kZXIgcHVibGljIGtleSBmb3IgdHlwZSAxIGVudmVsb3BlXCIpO3JldHVybiBFKGRlKFtlLnR5cGUsZS5zZW5kZXJQdWJsaWNLZXksZS5pdixlLnNlYWxlZF0pLEspfXJldHVybiBFKGRlKFtlLnR5cGUsZS5pdixlLnNlYWxlZF0pLEspfWZ1bmN0aW9uIFEoZSl7Y29uc3Qgbj1oKGUsSyksdD1uLnNsaWNlKFRuLE9lKSxyPU9lO2lmKGoodCk9PT1VKXtjb25zdCBkPXIrSixsPWQrVyxpPW4uc2xpY2UocixkKSx1PW4uc2xpY2UoZCxsKSxhPW4uc2xpY2UobCk7cmV0dXJue3R5cGU6dCxzZWFsZWQ6YSxpdjp1LHNlbmRlclB1YmxpY0tleTppfX1jb25zdCBvPXIrVyxzPW4uc2xpY2UocixvKSxjPW4uc2xpY2Uobyk7cmV0dXJue3R5cGU6dCxzZWFsZWQ6YyxpdjpzfX1mdW5jdGlvbiAkbihlLG4pe2NvbnN0IHQ9UShlKTtyZXR1cm4gUGUoe3R5cGU6aih0LnR5cGUpLHNlbmRlclB1YmxpY0tleTp0eXBlb2YgdC5zZW5kZXJQdWJsaWNLZXk8XCJ1XCI/RSh0LnNlbmRlclB1YmxpY0tleSxmKTp2b2lkIDAscmVjZWl2ZXJQdWJsaWNLZXk6bj8ucmVjZWl2ZXJQdWJsaWNLZXl9KX1mdW5jdGlvbiBQZShlKXtjb25zdCBuPWU/LnR5cGV8fFk7aWYobj09PVUpe2lmKHR5cGVvZiBlPy5zZW5kZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBzZW5kZXIgcHVibGljIGtleVwiKTtpZih0eXBlb2YgZT8ucmVjZWl2ZXJQdWJsaWNLZXk+XCJ1XCIpdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyByZWNlaXZlciBwdWJsaWMga2V5XCIpfXJldHVybnt0eXBlOm4sc2VuZGVyUHVibGljS2V5OmU/LnNlbmRlclB1YmxpY0tleSxyZWNlaXZlclB1YmxpY0tleTplPy5yZWNlaXZlclB1YmxpY0tleX19ZnVuY3Rpb24gRG4oZSl7cmV0dXJuIGUudHlwZT09PVUmJnR5cGVvZiBlLnNlbmRlclB1YmxpY0tleT09XCJzdHJpbmdcIiYmdHlwZW9mIGUucmVjZWl2ZXJQdWJsaWNLZXk9PVwic3RyaW5nXCJ9dmFyIFZuPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxUZT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLE1uPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksS249T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxSZT0oZSxuLHQpPT5uIGluIGU/Vm4oZSxuLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTp0fSk6ZVtuXT10LEFlPShlLG4pPT57Zm9yKHZhciB0IGluIG58fChuPXt9KSlNbi5jYWxsKG4sdCkmJlJlKGUsdCxuW3RdKTtpZihUZSlmb3IodmFyIHQgb2YgVGUobikpS24uY2FsbChuLHQpJiZSZShlLHQsblt0XSk7cmV0dXJuIGV9O2NvbnN0IFVlPVwiUmVhY3ROYXRpdmVcIixfPXtyZWFjdE5hdGl2ZTpcInJlYWN0LW5hdGl2ZVwiLG5vZGU6XCJub2RlXCIsYnJvd3NlcjpcImJyb3dzZXJcIix1bmtub3duOlwidW5rbm93blwifSxMPVwiIFwiLGtuPVwiOlwiLF9lPVwiL1wiLFo9MixMbj0xZTMsd2U9XCJqc1wiO2Z1bmN0aW9uIFgoKXtyZXR1cm4gdHlwZW9mIHByb2Nlc3M8XCJ1XCImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zPFwidVwiJiZ0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlPFwidVwifWZ1bmN0aW9uIGplKCl7cmV0dXJuIUVuKCkmJiEhZmUoKSYmbmF2aWdhdG9yLnByb2R1Y3Q9PT1VZX1mdW5jdGlvbiBDZSgpe3JldHVybiFYKCkmJiEhZmUoKX1mdW5jdGlvbiBlZSgpe3JldHVybiBqZSgpP18ucmVhY3ROYXRpdmU6WCgpP18ubm9kZTpDZSgpP18uYnJvd3NlcjpfLnVua25vd259ZnVuY3Rpb24gJGUoZSxuKXtsZXQgdD0kLnBhcnNlKGUpO3JldHVybiB0PUFlKEFlKHt9LHQpLG4pLGU9JC5zdHJpbmdpZnkodCksZX1mdW5jdGlvbiB4bigpe3JldHVybiBobigpfHx7bmFtZTpcIlwiLGRlc2NyaXB0aW9uOlwiXCIsdXJsOlwiXCIsaWNvbnM6W1wiXCJdfX1mdW5jdGlvbiBGbihlLG4pe3ZhciB0O2NvbnN0IHI9ZWUoKSxvPXtwcm90b2NvbDplLHZlcnNpb246bixlbnY6cn07cmV0dXJuIHI9PT1cImJyb3dzZXJcIiYmKG8uaG9zdD0oKHQ9cGUoKSk9PW51bGw/dm9pZCAwOnQuaG9zdCl8fFwidW5rbm93blwiKSxvfWZ1bmN0aW9uIERlKCl7Y29uc3QgZT1tbigpO2lmKGU9PT1udWxsKXJldHVyblwidW5rbm93blwiO2NvbnN0IG49ZS5vcz9lLm9zLnJlcGxhY2UoXCIgXCIsXCJcIikudG9Mb3dlckNhc2UoKTpcInVua25vd25cIjtyZXR1cm4gZS50eXBlPT09XCJicm93c2VyXCI/W24sZS5uYW1lLGUudmVyc2lvbl0uam9pbihcIi1cIik6W24sZS52ZXJzaW9uXS5qb2luKFwiLVwiKX1mdW5jdGlvbiBWZSgpe3ZhciBlO2NvbnN0IG49ZWUoKTtyZXR1cm4gbj09PV8uYnJvd3Nlcj9bbiwoKGU9cGUoKSk9PW51bGw/dm9pZCAwOmUuaG9zdCl8fFwidW5rbm93blwiXS5qb2luKFwiOlwiKTpufWZ1bmN0aW9uIE1lKGUsbix0KXtjb25zdCByPURlKCksbz1WZSgpO3JldHVybltbZSxuXS5qb2luKFwiLVwiKSxbd2UsdF0uam9pbihcIi1cIikscixvXS5qb2luKFwiL1wiKX1mdW5jdGlvbiBIbih7cHJvdG9jb2w6ZSx2ZXJzaW9uOm4scmVsYXlVcmw6dCxzZGtWZXJzaW9uOnIsYXV0aDpvLHByb2plY3RJZDpzLHVzZU9uQ2xvc2VFdmVudDpjfSl7Y29uc3QgZD10LnNwbGl0KFwiP1wiKSxsPU1lKGUsbixyKSxpPXthdXRoOm8sdWE6bCxwcm9qZWN0SWQ6cyx1c2VPbkNsb3NlRXZlbnQ6Y3x8dm9pZCAwfSx1PSRlKGRbMV18fFwiXCIsaSk7cmV0dXJuIGRbMF0rXCI/XCIrdX1mdW5jdGlvbiBxbihlKXtsZXQgbj0oZS5tYXRjaCgvXlteOl0rKD89OlxcL1xcLykvZ2kpfHxbXSlbMF07Y29uc3QgdD10eXBlb2YgbjxcInVcIj9lLnNwbGl0KFwiOi8vXCIpWzFdOmU7cmV0dXJuIG49bj09PVwid3NzXCI/XCJodHRwc1wiOlwiaHR0cFwiLFtuLHRdLmpvaW4oXCI6Ly9cIil9ZnVuY3Rpb24gem4oZSxuLHQpe2lmKCFlW25dfHx0eXBlb2YgZVtuXSE9PXQpdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIG9yIGludmFsaWQgXCIke259XCIgcGFyYW1gKX1mdW5jdGlvbiBLZShlLG49Wil7cmV0dXJuIGtlKGUuc3BsaXQoX2UpLG4pfWZ1bmN0aW9uIEJuKGUpe3JldHVybiBLZShlKS5qb2luKEwpfWZ1bmN0aW9uIGIoZSxuKXtyZXR1cm4gZS5maWx0ZXIodD0+bi5pbmNsdWRlcyh0KSkubGVuZ3RoPT09ZS5sZW5ndGh9ZnVuY3Rpb24ga2UoZSxuPVope3JldHVybiBlLnNsaWNlKE1hdGgubWF4KGUubGVuZ3RoLW4sMCkpfWZ1bmN0aW9uIEduKGUpe3JldHVybiBPYmplY3QuZnJvbUVudHJpZXMoZS5lbnRyaWVzKCkpfWZ1bmN0aW9uIFluKGUpe3JldHVybiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGUpKX1mdW5jdGlvbiBXbihlLG4pe2NvbnN0IHQ9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2gocj0+e3Rbcl09bihlW3JdKX0pLHR9Y29uc3QgSm49ZT0+ZTtmdW5jdGlvbiBMZShlKXtyZXR1cm4gZS50cmltKCkucmVwbGFjZSgvXlxcdy8sbj0+bi50b1VwcGVyQ2FzZSgpKX1mdW5jdGlvbiBRbihlKXtyZXR1cm4gZS5zcGxpdChMKS5tYXAobj0+TGUobikpLmpvaW4oTCl9ZnVuY3Rpb24gWm4oZT1sZSxuKXtjb25zdCB0PXEoZXx8bGUpO2xldCByLG8scztyZXR1cm57cmVzb2x2ZTpjPT57cyYmciYmKGNsZWFyVGltZW91dChzKSxyKGMpKX0scmVqZWN0OmM9PntzJiZvJiYoY2xlYXJUaW1lb3V0KHMpLG8oYykpfSxkb25lOigpPT5uZXcgUHJvbWlzZSgoYyxkKT0+e3M9c2V0VGltZW91dCgoKT0+e2QobmV3IEVycm9yKG4pKX0sdCkscj1jLG89ZH0pfX1mdW5jdGlvbiBYbihlLG4sdCl7cmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jKHIsbyk9Pntjb25zdCBzPXNldFRpbWVvdXQoKCk9Pm8obmV3IEVycm9yKHQpKSxuKTt0cnl7Y29uc3QgYz1hd2FpdCBlO3IoYyl9Y2F0Y2goYyl7byhjKX1jbGVhclRpbWVvdXQocyl9KX1mdW5jdGlvbiBuZShlLG4pe2lmKHR5cGVvZiBuPT1cInN0cmluZ1wiJiZuLnN0YXJ0c1dpdGgoYCR7ZX06YCkpcmV0dXJuIG47aWYoZS50b0xvd2VyQ2FzZSgpPT09XCJ0b3BpY1wiKXtpZih0eXBlb2YgbiE9XCJzdHJpbmdcIil0aHJvdyBuZXcgRXJyb3IoJ1ZhbHVlIG11c3QgYmUgXCJzdHJpbmdcIiBmb3IgZXhwaXJlciB0YXJnZXQgdHlwZTogdG9waWMnKTtyZXR1cm5gdG9waWM6JHtufWB9ZWxzZSBpZihlLnRvTG93ZXJDYXNlKCk9PT1cImlkXCIpe2lmKHR5cGVvZiBuIT1cIm51bWJlclwiKXRocm93IG5ldyBFcnJvcignVmFsdWUgbXVzdCBiZSBcIm51bWJlclwiIGZvciBleHBpcmVyIHRhcmdldCB0eXBlOiBpZCcpO3JldHVybmBpZDoke259YH10aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZXhwaXJlciB0YXJnZXQgdHlwZTogJHtlfWApfWZ1bmN0aW9uIGV0KGUpe3JldHVybiBuZShcInRvcGljXCIsZSl9ZnVuY3Rpb24gbnQoZSl7cmV0dXJuIG5lKFwiaWRcIixlKX1mdW5jdGlvbiB0dChlKXtjb25zdFtuLHRdPWUuc3BsaXQoXCI6XCIpLHI9e2lkOnZvaWQgMCx0b3BpYzp2b2lkIDB9O2lmKG49PT1cInRvcGljXCImJnR5cGVvZiB0PT1cInN0cmluZ1wiKXIudG9waWM9dDtlbHNlIGlmKG49PT1cImlkXCImJk51bWJlci5pc0ludGVnZXIoTnVtYmVyKHQpKSlyLmlkPU51bWJlcih0KTtlbHNlIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0YXJnZXQsIGV4cGVjdGVkIGlkOm51bWJlciBvciB0b3BpYzpzdHJpbmcsIGdvdCAke259OiR7dH1gKTtyZXR1cm4gcn1mdW5jdGlvbiBydChlLG4pe3JldHVybiB5bigobnx8RGF0ZS5ub3coKSkrcShlKSl9ZnVuY3Rpb24gb3QoZSl7cmV0dXJuIERhdGUubm93KCk+PXEoZSl9ZnVuY3Rpb24gc3QoZSxuKXtyZXR1cm5gJHtlfSR7bj9gOiR7bn1gOlwiXCJ9YH1mdW5jdGlvbiBPKGU9W10sbj1bXSl7cmV0dXJuWy4uLm5ldyBTZXQoWy4uLmUsLi4ubl0pXX1jb25zdCB4ZT1cImlyblwiO2Z1bmN0aW9uIGl0KGUpe3JldHVybiBlPy5yZWxheXx8e3Byb3RvY29sOnhlfX1mdW5jdGlvbiBjdChlKXtjb25zdCBuPXZuW2VdO2lmKHR5cGVvZiBuPlwidVwiKXRocm93IG5ldyBFcnJvcihgUmVsYXkgUHJvdG9jb2wgbm90IHN1cHBvcnRlZDogJHtlfWApO3JldHVybiBufXZhciBhdD1PYmplY3QuZGVmaW5lUHJvcGVydHksRmU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyx1dD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LGR0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsSGU9KGUsbix0KT0+biBpbiBlP2F0KGUsbix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOmVbbl09dCxsdD0oZSxuKT0+e2Zvcih2YXIgdCBpbiBufHwobj17fSkpdXQuY2FsbChuLHQpJiZIZShlLHQsblt0XSk7aWYoRmUpZm9yKHZhciB0IG9mIEZlKG4pKWR0LmNhbGwobix0KSYmSGUoZSx0LG5bdF0pO3JldHVybiBlfTtmdW5jdGlvbiBxZShlLG49XCItXCIpe2NvbnN0IHQ9e30scj1cInJlbGF5XCIrbjtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChvPT57aWYoby5zdGFydHNXaXRoKHIpKXtjb25zdCBzPW8ucmVwbGFjZShyLFwiXCIpLGM9ZVtvXTt0W3NdPWN9fSksdH1mdW5jdGlvbiBmdChlKXtjb25zdCBuPWUuaW5kZXhPZihcIjpcIiksdD1lLmluZGV4T2YoXCI/XCIpIT09LTE/ZS5pbmRleE9mKFwiP1wiKTp2b2lkIDAscj1lLnN1YnN0cmluZygwLG4pLG89ZS5zdWJzdHJpbmcobisxLHQpLnNwbGl0KFwiQFwiKSxzPXR5cGVvZiB0PFwidVwiP2Uuc3Vic3RyaW5nKHQpOlwiXCIsYz0kLnBhcnNlKHMpO3JldHVybntwcm90b2NvbDpyLHRvcGljOm9bMF0sdmVyc2lvbjpwYXJzZUludChvWzFdLDEwKSxzeW1LZXk6Yy5zeW1LZXkscmVsYXk6cWUoYyl9fWZ1bmN0aW9uIHplKGUsbj1cIi1cIil7Y29uc3QgdD1cInJlbGF5XCIscj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChvPT57Y29uc3Qgcz10K24rbztlW29dJiYocltzXT1lW29dKX0pLHJ9ZnVuY3Rpb24gcHQoZSl7cmV0dXJuYCR7ZS5wcm90b2NvbH06JHtlLnRvcGljfUAke2UudmVyc2lvbn0/YCskLnN0cmluZ2lmeShsdCh7c3ltS2V5OmUuc3ltS2V5fSx6ZShlLnJlbGF5KSkpfXZhciBtdD1PYmplY3QuZGVmaW5lUHJvcGVydHkseXQ9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMsRXQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMsQmU9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyxodD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHZ0PU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsR2U9KGUsbix0KT0+biBpbiBlP210KGUsbix7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6dH0pOmVbbl09dCxndD0oZSxuKT0+e2Zvcih2YXIgdCBpbiBufHwobj17fSkpaHQuY2FsbChuLHQpJiZHZShlLHQsblt0XSk7aWYoQmUpZm9yKHZhciB0IG9mIEJlKG4pKXZ0LmNhbGwobix0KSYmR2UoZSx0LG5bdF0pO3JldHVybiBlfSxOdD0oZSxuKT0+eXQoZSxFdChuKSk7ZnVuY3Rpb24gVChlKXtjb25zdCBuPVtdO3JldHVybiBlLmZvckVhY2godD0+e2NvbnN0W3Isb109dC5zcGxpdChcIjpcIik7bi5wdXNoKGAke3J9OiR7b31gKX0pLG59ZnVuY3Rpb24gWWUoZSl7Y29uc3Qgbj1bXTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhlKS5mb3JFYWNoKHQ9PntuLnB1c2goLi4uVCh0LmFjY291bnRzKSl9KSxufWZ1bmN0aW9uIFdlKGUsbil7Y29uc3QgdD1bXTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhlKS5mb3JFYWNoKHI9PntUKHIuYWNjb3VudHMpLmluY2x1ZGVzKG4pJiZ0LnB1c2goLi4uci5tZXRob2RzKX0pLHR9ZnVuY3Rpb24gSmUoZSxuKXtjb25zdCB0PVtdO3JldHVybiBPYmplY3QudmFsdWVzKGUpLmZvckVhY2gocj0+e1Qoci5hY2NvdW50cykuaW5jbHVkZXMobikmJnQucHVzaCguLi5yLmV2ZW50cyl9KSx0fWZ1bmN0aW9uIGJ0KGUsbil7Y29uc3QgdD1vbihlLG4pO2lmKHQpdGhyb3cgbmV3IEVycm9yKHQubWVzc2FnZSk7Y29uc3Qgcj17fTtmb3IoY29uc3RbbyxzXW9mIE9iamVjdC5lbnRyaWVzKGUpKXJbb109e21ldGhvZHM6cy5tZXRob2RzLGV2ZW50czpzLmV2ZW50cyxjaGFpbnM6cy5hY2NvdW50cy5tYXAoYz0+YCR7Yy5zcGxpdChcIjpcIilbMF19OiR7Yy5zcGxpdChcIjpcIilbMV19YCl9O3JldHVybiByfWZ1bmN0aW9uIE90KGUpe2NvbnN0e3JlcXVpcmVkTmFtZXNwYWNlczpuLG9wdGlvbmFsTmFtZXNwYWNlczp0PXt9LHN1cHBvcnRlZE5hbWVzcGFjZXM6cn09ZSxvPXJlKG4pLHM9cmUodCksYz17fTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGk9Pntjb25zdCB1PXJbaV0uY2hhaW5zLGE9cltpXS5tZXRob2RzLGc9cltpXS5ldmVudHMsQT1yW2ldLmFjY291bnRzO2NbaV09e2NoYWluczp1LG1ldGhvZHM6YSxldmVudHM6ZyxhY2NvdW50czpBfX0pO2NvbnN0IGQ9Y24obixjLFwiYXBwcm92ZSgpXCIpO2lmKGQpdGhyb3cgbmV3IEVycm9yKGQubWVzc2FnZSk7Y29uc3QgbD17fTtyZXR1cm4gT2JqZWN0LmtleXMobykuZm9yRWFjaChpPT57Y29uc3QgdT1yW2ldLmNoYWlucy5maWx0ZXIodj0+e3ZhciBwLHk7cmV0dXJuKHk9KHA9b1tpXSk9PW51bGw/dm9pZCAwOnAuY2hhaW5zKT09bnVsbD92b2lkIDA6eS5pbmNsdWRlcyh2KX0pLGE9cltpXS5tZXRob2RzLmZpbHRlcih2PT57dmFyIHAseTtyZXR1cm4oeT0ocD1vW2ldKT09bnVsbD92b2lkIDA6cC5tZXRob2RzKT09bnVsbD92b2lkIDA6eS5pbmNsdWRlcyh2KX0pLGc9cltpXS5ldmVudHMuZmlsdGVyKHY9Pnt2YXIgcCx5O3JldHVybih5PShwPW9baV0pPT1udWxsP3ZvaWQgMDpwLmV2ZW50cyk9PW51bGw/dm9pZCAwOnkuaW5jbHVkZXModil9KSxBPXUubWFwKHY9PnJbaV0uYWNjb3VudHMuZmlsdGVyKHA9PnAuaW5jbHVkZXModikpKS5mbGF0KCk7bFtpXT17Y2hhaW5zOnUsbWV0aG9kczphLGV2ZW50czpnLGFjY291bnRzOkF9fSksT2JqZWN0LmtleXMocykuZm9yRWFjaChpPT57dmFyIHUsYSxnLEEsdixwO2lmKCFyW2ldKXJldHVybjtjb25zdCB5PShhPSh1PXNbaV0pPT1udWxsP3ZvaWQgMDp1LmNoYWlucyk9PW51bGw/dm9pZCAwOmEuZmlsdGVyKEk9PnJbaV0uY2hhaW5zLmluY2x1ZGVzKEkpKSx1bj1yW2ldLm1ldGhvZHMuZmlsdGVyKEk9Pnt2YXIgUCx3O3JldHVybih3PShQPXNbaV0pPT1udWxsP3ZvaWQgMDpQLm1ldGhvZHMpPT1udWxsP3ZvaWQgMDp3LmluY2x1ZGVzKEkpfSksZG49cltpXS5ldmVudHMuZmlsdGVyKEk9Pnt2YXIgUCx3O3JldHVybih3PShQPXNbaV0pPT1udWxsP3ZvaWQgMDpQLmV2ZW50cyk9PW51bGw/dm9pZCAwOncuaW5jbHVkZXMoSSl9KSxsbj15Py5tYXAoST0+cltpXS5hY2NvdW50cy5maWx0ZXIoUD0+UC5pbmNsdWRlcyhJKSkpLmZsYXQoKTtsW2ldPXtjaGFpbnM6TygoZz1sW2ldKT09bnVsbD92b2lkIDA6Zy5jaGFpbnMseSksbWV0aG9kczpPKChBPWxbaV0pPT1udWxsP3ZvaWQgMDpBLm1ldGhvZHMsdW4pLGV2ZW50czpPKCh2PWxbaV0pPT1udWxsP3ZvaWQgMDp2LmV2ZW50cyxkbiksYWNjb3VudHM6TygocD1sW2ldKT09bnVsbD92b2lkIDA6cC5hY2NvdW50cyxsbil9fSksbH1mdW5jdGlvbiB0ZShlKXtyZXR1cm4gZS5pbmNsdWRlcyhcIjpcIil9ZnVuY3Rpb24gUWUoZSl7cmV0dXJuIHRlKGUpP2Uuc3BsaXQoXCI6XCIpWzBdOmV9ZnVuY3Rpb24gcmUoZSl7dmFyIG4sdCxyO2NvbnN0IG89e307aWYoIXgoZSkpcmV0dXJuIG87Zm9yKGNvbnN0W3MsY11vZiBPYmplY3QuZW50cmllcyhlKSl7Y29uc3QgZD10ZShzKT9bc106Yy5jaGFpbnMsbD1jLm1ldGhvZHN8fFtdLGk9Yy5ldmVudHN8fFtdLHU9UWUocyk7b1t1XT1OdChndCh7fSxvW3VdKSx7Y2hhaW5zOk8oZCwobj1vW3VdKT09bnVsbD92b2lkIDA6bi5jaGFpbnMpLG1ldGhvZHM6TyhsLCh0PW9bdV0pPT1udWxsP3ZvaWQgMDp0Lm1ldGhvZHMpLGV2ZW50czpPKGksKHI9b1t1XSk9PW51bGw/dm9pZCAwOnIuZXZlbnRzKX0pfXJldHVybiBvfWNvbnN0IFN0PXtJTlZBTElEX01FVEhPRDp7bWVzc2FnZTpcIkludmFsaWQgbWV0aG9kLlwiLGNvZGU6MTAwMX0sSU5WQUxJRF9FVkVOVDp7bWVzc2FnZTpcIkludmFsaWQgZXZlbnQuXCIsY29kZToxMDAyfSxJTlZBTElEX1VQREFURV9SRVFVRVNUOnttZXNzYWdlOlwiSW52YWxpZCB1cGRhdGUgcmVxdWVzdC5cIixjb2RlOjEwMDN9LElOVkFMSURfRVhURU5EX1JFUVVFU1Q6e21lc3NhZ2U6XCJJbnZhbGlkIGV4dGVuZCByZXF1ZXN0LlwiLGNvZGU6MTAwNH0sSU5WQUxJRF9TRVNTSU9OX1NFVFRMRV9SRVFVRVNUOnttZXNzYWdlOlwiSW52YWxpZCBzZXNzaW9uIHNldHRsZSByZXF1ZXN0LlwiLGNvZGU6MTAwNX0sVU5BVVRIT1JJWkVEX01FVEhPRDp7bWVzc2FnZTpcIlVuYXV0aG9yaXplZCBtZXRob2QuXCIsY29kZTozMDAxfSxVTkFVVEhPUklaRURfRVZFTlQ6e21lc3NhZ2U6XCJVbmF1dGhvcml6ZWQgZXZlbnQuXCIsY29kZTozMDAyfSxVTkFVVEhPUklaRURfVVBEQVRFX1JFUVVFU1Q6e21lc3NhZ2U6XCJVbmF1dGhvcml6ZWQgdXBkYXRlIHJlcXVlc3QuXCIsY29kZTozMDAzfSxVTkFVVEhPUklaRURfRVhURU5EX1JFUVVFU1Q6e21lc3NhZ2U6XCJVbmF1dGhvcml6ZWQgZXh0ZW5kIHJlcXVlc3QuXCIsY29kZTozMDA0fSxVU0VSX1JFSkVDVEVEOnttZXNzYWdlOlwiVXNlciByZWplY3RlZC5cIixjb2RlOjVlM30sVVNFUl9SRUpFQ1RFRF9DSEFJTlM6e21lc3NhZ2U6XCJVc2VyIHJlamVjdGVkIGNoYWlucy5cIixjb2RlOjUwMDF9LFVTRVJfUkVKRUNURURfTUVUSE9EUzp7bWVzc2FnZTpcIlVzZXIgcmVqZWN0ZWQgbWV0aG9kcy5cIixjb2RlOjUwMDJ9LFVTRVJfUkVKRUNURURfRVZFTlRTOnttZXNzYWdlOlwiVXNlciByZWplY3RlZCBldmVudHMuXCIsY29kZTo1MDAzfSxVTlNVUFBPUlRFRF9DSEFJTlM6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCBjaGFpbnMuXCIsY29kZTo1MTAwfSxVTlNVUFBPUlRFRF9NRVRIT0RTOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgbWV0aG9kcy5cIixjb2RlOjUxMDF9LFVOU1VQUE9SVEVEX0VWRU5UUzp7bWVzc2FnZTpcIlVuc3VwcG9ydGVkIGV2ZW50cy5cIixjb2RlOjUxMDJ9LFVOU1VQUE9SVEVEX0FDQ09VTlRTOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgYWNjb3VudHMuXCIsY29kZTo1MTAzfSxVTlNVUFBPUlRFRF9OQU1FU1BBQ0VfS0VZOnttZXNzYWdlOlwiVW5zdXBwb3J0ZWQgbmFtZXNwYWNlIGtleS5cIixjb2RlOjUxMDR9LFVTRVJfRElTQ09OTkVDVEVEOnttZXNzYWdlOlwiVXNlciBkaXNjb25uZWN0ZWQuXCIsY29kZTo2ZTN9LFNFU1NJT05fU0VUVExFTUVOVF9GQUlMRUQ6e21lc3NhZ2U6XCJTZXNzaW9uIHNldHRsZW1lbnQgZmFpbGVkLlwiLGNvZGU6N2UzfSxXQ19NRVRIT0RfVU5TVVBQT1JURUQ6e21lc3NhZ2U6XCJVbnN1cHBvcnRlZCB3Y18gbWV0aG9kLlwiLGNvZGU6MTAwMDF9fSxJdD17Tk9UX0lOSVRJQUxJWkVEOnttZXNzYWdlOlwiTm90IGluaXRpYWxpemVkLlwiLGNvZGU6MX0sTk9fTUFUQ0hJTkdfS0VZOnttZXNzYWdlOlwiTm8gbWF0Y2hpbmcga2V5LlwiLGNvZGU6Mn0sUkVTVE9SRV9XSUxMX09WRVJSSURFOnttZXNzYWdlOlwiUmVzdG9yZSB3aWxsIG92ZXJyaWRlLlwiLGNvZGU6M30sUkVTVUJTQ1JJQkVEOnttZXNzYWdlOlwiUmVzdWJzY3JpYmVkLlwiLGNvZGU6NH0sTUlTU0lOR19PUl9JTlZBTElEOnttZXNzYWdlOlwiTWlzc2luZyBvciBpbnZhbGlkLlwiLGNvZGU6NX0sRVhQSVJFRDp7bWVzc2FnZTpcIkV4cGlyZWQuXCIsY29kZTo2fSxVTktOT1dOX1RZUEU6e21lc3NhZ2U6XCJVbmtub3duIHR5cGUuXCIsY29kZTo3fSxNSVNNQVRDSEVEX1RPUElDOnttZXNzYWdlOlwiTWlzbWF0Y2hlZCB0b3BpYy5cIixjb2RlOjh9LE5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVM6e21lc3NhZ2U6XCJOb24gY29uZm9ybWluZyBuYW1lc3BhY2VzLlwiLGNvZGU6OX19O2Z1bmN0aW9uIE4oZSxuKXtjb25zdHttZXNzYWdlOnQsY29kZTpyfT1JdFtlXTtyZXR1cm57bWVzc2FnZTpuP2Ake3R9ICR7bn1gOnQsY29kZTpyfX1mdW5jdGlvbiBSKGUsbil7Y29uc3R7bWVzc2FnZTp0LGNvZGU6cn09U3RbZV07cmV0dXJue21lc3NhZ2U6bj9gJHt0fSAke259YDp0LGNvZGU6cn19ZnVuY3Rpb24gQyhlLG4pe3JldHVybiBBcnJheS5pc0FycmF5KGUpP3R5cGVvZiBuPFwidVwiJiZlLmxlbmd0aD9lLmV2ZXJ5KG4pOiEwOiExfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlKT09PU9iamVjdC5wcm90b3R5cGUmJk9iamVjdC5rZXlzKGUpLmxlbmd0aH1mdW5jdGlvbiBTKGUpe3JldHVybiB0eXBlb2YgZT5cInVcIn1mdW5jdGlvbiBtKGUsbil7cmV0dXJuIG4mJlMoZSk/ITA6dHlwZW9mIGU9PVwic3RyaW5nXCImJkJvb2xlYW4oZS50cmltKCkubGVuZ3RoKX1mdW5jdGlvbiBGKGUsbil7cmV0dXJuIG4mJlMoZSk/ITA6dHlwZW9mIGU9PVwibnVtYmVyXCImJiFpc05hTihlKX1mdW5jdGlvbiBQdChlLG4pe2NvbnN0e3JlcXVpcmVkTmFtZXNwYWNlczp0fT1uLHI9T2JqZWN0LmtleXMoZS5uYW1lc3BhY2VzKSxvPU9iamVjdC5rZXlzKHQpO2xldCBzPSEwO3JldHVybiBiKG8scik/KHIuZm9yRWFjaChjPT57Y29uc3R7YWNjb3VudHM6ZCxtZXRob2RzOmwsZXZlbnRzOml9PWUubmFtZXNwYWNlc1tjXSx1PVQoZCksYT10W2NdOyghYihWKGMsYSksdSl8fCFiKGEubWV0aG9kcyxsKXx8IWIoYS5ldmVudHMsaSkpJiYocz0hMSl9KSxzKTohMX1mdW5jdGlvbiBIKGUpe3JldHVybiBtKGUsITEpJiZlLmluY2x1ZGVzKFwiOlwiKT9lLnNwbGl0KFwiOlwiKS5sZW5ndGg9PT0yOiExfWZ1bmN0aW9uIFplKGUpe2lmKG0oZSwhMSkmJmUuaW5jbHVkZXMoXCI6XCIpKXtjb25zdCBuPWUuc3BsaXQoXCI6XCIpO2lmKG4ubGVuZ3RoPT09Myl7Y29uc3QgdD1uWzBdK1wiOlwiK25bMV07cmV0dXJuISFuWzJdJiZIKHQpfX1yZXR1cm4hMX1mdW5jdGlvbiBUdChlKXtpZihtKGUsITEpKXRyeXtyZXR1cm4gdHlwZW9mIG5ldyBVUkwoZSk8XCJ1XCJ9Y2F0Y2h7cmV0dXJuITF9cmV0dXJuITF9ZnVuY3Rpb24gUnQoZSl7dmFyIG47cmV0dXJuKG49ZT8ucHJvcG9zZXIpPT1udWxsP3ZvaWQgMDpuLnB1YmxpY0tleX1mdW5jdGlvbiBBdChlKXtyZXR1cm4gZT8udG9waWN9ZnVuY3Rpb24gVXQoZSxuKXtsZXQgdD1udWxsO3JldHVybiBtKGU/LnB1YmxpY0tleSwhMSl8fCh0PU4oXCJNSVNTSU5HX09SX0lOVkFMSURcIixgJHtufSBjb250cm9sbGVyIHB1YmxpYyBrZXkgc2hvdWxkIGJlIGEgc3RyaW5nYCkpLHR9ZnVuY3Rpb24gb2UoZSl7bGV0IG49ITA7cmV0dXJuIEMoZSk/ZS5sZW5ndGgmJihuPWUuZXZlcnkodD0+bSh0LCExKSkpOm49ITEsbn1mdW5jdGlvbiBYZShlLG4sdCl7bGV0IHI9bnVsbDtyZXR1cm4gQyhuKT9uLmZvckVhY2gobz0+e3J8fCghSChvKXx8IW8uaW5jbHVkZXMoZSkpJiYocj1SKFwiVU5TVVBQT1JURURfQ0hBSU5TXCIsYCR7dH0sIGNoYWluICR7b30gc2hvdWxkIGJlIGEgc3RyaW5nIGFuZCBjb25mb3JtIHRvIFwibmFtZXNwYWNlOmNoYWluSWRcIiBmb3JtYXRgKSl9KTpyPVIoXCJVTlNVUFBPUlRFRF9DSEFJTlNcIixgJHt0fSwgY2hhaW5zICR7bn0gc2hvdWxkIGJlIGFuIGFycmF5IG9mIHN0cmluZ3MgY29uZm9ybWluZyB0byBcIm5hbWVzcGFjZTpjaGFpbklkXCIgZm9ybWF0YCkscn1mdW5jdGlvbiBlbihlLG4pe2xldCB0PW51bGw7cmV0dXJuIE9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKFtyLG9dKT0+e2lmKHQpcmV0dXJuO2NvbnN0IHM9WGUocixWKHIsbyksYCR7bn0gcmVxdWlyZWROYW1lc3BhY2VgKTtzJiYodD1zKX0pLHR9ZnVuY3Rpb24gbm4oZSxuKXtsZXQgdD1udWxsO3JldHVybiBDKGUpP2UuZm9yRWFjaChyPT57dHx8WmUocil8fCh0PVIoXCJVTlNVUFBPUlRFRF9BQ0NPVU5UU1wiLGAke259LCBhY2NvdW50ICR7cn0gc2hvdWxkIGJlIGEgc3RyaW5nIGFuZCBjb25mb3JtIHRvIFwibmFtZXNwYWNlOmNoYWluSWQ6YWRkcmVzc1wiIGZvcm1hdGApKX0pOnQ9UihcIlVOU1VQUE9SVEVEX0FDQ09VTlRTXCIsYCR7bn0sIGFjY291bnRzIHNob3VsZCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzIGNvbmZvcm1pbmcgdG8gXCJuYW1lc3BhY2U6Y2hhaW5JZDphZGRyZXNzXCIgZm9ybWF0YCksdH1mdW5jdGlvbiB0bihlLG4pe2xldCB0PW51bGw7cmV0dXJuIE9iamVjdC52YWx1ZXMoZSkuZm9yRWFjaChyPT57aWYodClyZXR1cm47Y29uc3Qgbz1ubihyPy5hY2NvdW50cyxgJHtufSBuYW1lc3BhY2VgKTtvJiYodD1vKX0pLHR9ZnVuY3Rpb24gcm4oZSxuKXtsZXQgdD1udWxsO3JldHVybiBvZShlPy5tZXRob2RzKT9vZShlPy5ldmVudHMpfHwodD1SKFwiVU5TVVBQT1JURURfRVZFTlRTXCIsYCR7bn0sIGV2ZW50cyBzaG91bGQgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBlbXB0eSBhcnJheSBmb3Igbm8gZXZlbnRzYCkpOnQ9UihcIlVOU1VQUE9SVEVEX01FVEhPRFNcIixgJHtufSwgbWV0aG9kcyBzaG91bGQgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyBvciBlbXB0eSBhcnJheSBmb3Igbm8gbWV0aG9kc2ApLHR9ZnVuY3Rpb24gc2UoZSxuKXtsZXQgdD1udWxsO3JldHVybiBPYmplY3QudmFsdWVzKGUpLmZvckVhY2gocj0+e2lmKHQpcmV0dXJuO2NvbnN0IG89cm4ocixgJHtufSwgbmFtZXNwYWNlYCk7byYmKHQ9byl9KSx0fWZ1bmN0aW9uIF90KGUsbix0KXtsZXQgcj1udWxsO2lmKGUmJngoZSkpe2NvbnN0IG89c2UoZSxuKTtvJiYocj1vKTtjb25zdCBzPWVuKGUsbik7cyYmKHI9cyl9ZWxzZSByPU4oXCJNSVNTSU5HX09SX0lOVkFMSURcIixgJHtufSwgJHt0fSBzaG91bGQgYmUgYW4gb2JqZWN0IHdpdGggZGF0YWApO3JldHVybiByfWZ1bmN0aW9uIG9uKGUsbil7bGV0IHQ9bnVsbDtpZihlJiZ4KGUpKXtjb25zdCByPXNlKGUsbik7ciYmKHQ9cik7Y29uc3Qgbz10bihlLG4pO28mJih0PW8pfWVsc2UgdD1OKFwiTUlTU0lOR19PUl9JTlZBTElEXCIsYCR7bn0sIG5hbWVzcGFjZXMgc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIGRhdGFgKTtyZXR1cm4gdH1mdW5jdGlvbiBzbihlKXtyZXR1cm4gbShlLnByb3RvY29sLCEwKX1mdW5jdGlvbiB3dChlLG4pe2xldCB0PSExO3JldHVybiBuJiYhZT90PSEwOmUmJkMoZSkmJmUubGVuZ3RoJiZlLmZvckVhY2gocj0+e3Q9c24ocil9KSx0fWZ1bmN0aW9uIGp0KGUpe3JldHVybiB0eXBlb2YgZT09XCJudW1iZXJcIn1mdW5jdGlvbiBDdChlKXtyZXR1cm4gdHlwZW9mIGU8XCJ1XCImJnR5cGVvZiBlIT09bnVsbH1mdW5jdGlvbiAkdChlKXtyZXR1cm4hKCFlfHx0eXBlb2YgZSE9XCJvYmplY3RcInx8IWUuY29kZXx8IUYoZS5jb2RlLCExKXx8IWUubWVzc2FnZXx8IW0oZS5tZXNzYWdlLCExKSl9ZnVuY3Rpb24gRHQoZSl7cmV0dXJuIShTKGUpfHwhbShlLm1ldGhvZCwhMSkpfWZ1bmN0aW9uIFZ0KGUpe3JldHVybiEoUyhlKXx8UyhlLnJlc3VsdCkmJlMoZS5lcnJvcil8fCFGKGUuaWQsITEpfHwhbShlLmpzb25ycGMsITEpKX1mdW5jdGlvbiBNdChlKXtyZXR1cm4hKFMoZSl8fCFtKGUubmFtZSwhMSkpfWZ1bmN0aW9uIEt0KGUsbil7cmV0dXJuISghSChuKXx8IVllKGUpLmluY2x1ZGVzKG4pKX1mdW5jdGlvbiBrdChlLG4sdCl7cmV0dXJuIG0odCwhMSk/V2UoZSxuKS5pbmNsdWRlcyh0KTohMX1mdW5jdGlvbiBMdChlLG4sdCl7cmV0dXJuIG0odCwhMSk/SmUoZSxuKS5pbmNsdWRlcyh0KTohMX1mdW5jdGlvbiBjbihlLG4sdCl7bGV0IHI9bnVsbDtjb25zdCBvPXh0KGUpLHM9RnQobiksYz1PYmplY3Qua2V5cyhvKSxkPU9iamVjdC5rZXlzKHMpLGw9YW4oT2JqZWN0LmtleXMoZSkpLGk9YW4oT2JqZWN0LmtleXMobikpLHU9bC5maWx0ZXIoYT0+IWkuaW5jbHVkZXMoYSkpO3JldHVybiB1Lmxlbmd0aCYmKHI9TihcIk5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVNcIixgJHt0fSBuYW1lc3BhY2VzIGtleXMgZG9uJ3Qgc2F0aXNmeSByZXF1aXJlZE5hbWVzcGFjZXMuXG4gICAgICBSZXF1aXJlZDogJHt1LnRvU3RyaW5nKCl9XG4gICAgICBSZWNlaXZlZDogJHtPYmplY3Qua2V5cyhuKS50b1N0cmluZygpfWApKSxiKGMsZCl8fChyPU4oXCJOT05fQ09ORk9STUlOR19OQU1FU1BBQ0VTXCIsYCR7dH0gbmFtZXNwYWNlcyBjaGFpbnMgZG9uJ3Qgc2F0aXNmeSByZXF1aXJlZCBuYW1lc3BhY2VzLlxuICAgICAgUmVxdWlyZWQ6ICR7Yy50b1N0cmluZygpfVxuICAgICAgQXBwcm92ZWQ6ICR7ZC50b1N0cmluZygpfWApKSxPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGE9PntpZighYS5pbmNsdWRlcyhcIjpcIil8fHIpcmV0dXJuO2NvbnN0IGc9VChuW2FdLmFjY291bnRzKTtnLmluY2x1ZGVzKGEpfHwocj1OKFwiTk9OX0NPTkZPUk1JTkdfTkFNRVNQQUNFU1wiLGAke3R9IG5hbWVzcGFjZXMgYWNjb3VudHMgZG9uJ3Qgc2F0aXNmeSBuYW1lc3BhY2UgYWNjb3VudHMgZm9yICR7YX1cbiAgICAgICAgUmVxdWlyZWQ6ICR7YX1cbiAgICAgICAgQXBwcm92ZWQ6ICR7Zy50b1N0cmluZygpfWApKX0pLGMuZm9yRWFjaChhPT57cnx8KGIob1thXS5tZXRob2RzLHNbYV0ubWV0aG9kcyk/YihvW2FdLmV2ZW50cyxzW2FdLmV2ZW50cyl8fChyPU4oXCJOT05fQ09ORk9STUlOR19OQU1FU1BBQ0VTXCIsYCR7dH0gbmFtZXNwYWNlcyBldmVudHMgZG9uJ3Qgc2F0aXNmeSBuYW1lc3BhY2UgZXZlbnRzIGZvciAke2F9YCkpOnI9TihcIk5PTl9DT05GT1JNSU5HX05BTUVTUEFDRVNcIixgJHt0fSBuYW1lc3BhY2VzIG1ldGhvZHMgZG9uJ3Qgc2F0aXNmeSBuYW1lc3BhY2UgbWV0aG9kcyBmb3IgJHthfWApKX0pLHJ9ZnVuY3Rpb24geHQoZSl7Y29uc3Qgbj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57dmFyIHI7dC5pbmNsdWRlcyhcIjpcIik/blt0XT1lW3RdOihyPWVbdF0uY2hhaW5zKT09bnVsbHx8ci5mb3JFYWNoKG89PntuW29dPXttZXRob2RzOmVbdF0ubWV0aG9kcyxldmVudHM6ZVt0XS5ldmVudHN9fSl9KSxufWZ1bmN0aW9uIGFuKGUpe3JldHVyblsuLi5uZXcgU2V0KGUubWFwKG49Pm4uaW5jbHVkZXMoXCI6XCIpP24uc3BsaXQoXCI6XCIpWzBdOm4pKV19ZnVuY3Rpb24gRnQoZSl7Y29uc3Qgbj17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57aWYodC5pbmNsdWRlcyhcIjpcIikpblt0XT1lW3RdO2Vsc2V7Y29uc3Qgcj1UKGVbdF0uYWNjb3VudHMpO3I/LmZvckVhY2gobz0+e25bb109e2FjY291bnRzOmVbdF0uYWNjb3VudHMuZmlsdGVyKHM9PnMuaW5jbHVkZXMoYCR7b306YCkpLG1ldGhvZHM6ZVt0XS5tZXRob2RzLGV2ZW50czplW3RdLmV2ZW50c319KX19KSxufWZ1bmN0aW9uIEh0KGUsbil7cmV0dXJuIEYoZSwhMSkmJmU8PW4ubWF4JiZlPj1uLm1pbn1leHBvcnR7RyBhcyBCQVNFMTAsZiBhcyBCQVNFMTYsSyBhcyBCQVNFNjQsa24gYXMgQ09MT04sWiBhcyBERUZBVUxUX0RFUFRILEwgYXMgRU1QVFlfU1BBQ0UsXyBhcyBFTlZfTUFQLExuIGFzIE9ORV9USE9VU0FORCxVZSBhcyBSRUFDVF9OQVRJVkVfUFJPRFVDVCx4ZSBhcyBSRUxBWUVSX0RFRkFVTFRfUFJPVE9DT0wsd2UgYXMgU0RLX1RZUEUsX2UgYXMgU0xBU0gsWSBhcyBUWVBFXzAsVSBhcyBUWVBFXzEsayBhcyBVVEY4LCRlIGFzIGFwcGVuZFRvUXVlcnlTdHJpbmcsem4gYXMgYXNzZXJ0VHlwZSxPdCBhcyBidWlsZEFwcHJvdmVkTmFtZXNwYWNlcyxydCBhcyBjYWxjRXhwaXJ5LFFuIGFzIGNhcGl0YWxpemUsTGUgYXMgY2FwaXRhbGl6ZVdvcmQsWm4gYXMgY3JlYXRlRGVsYXllZFByb21pc2UsWG4gYXMgY3JlYXRlRXhwaXJpbmdQcm9taXNlLGogYXMgZGVjb2RlVHlwZUJ5dGUsQ24gYXMgZGVjcnlwdCxVbiBhcyBkZXJpdmVTeW1LZXksUSBhcyBkZXNlcmlhbGl6ZSxTZSBhcyBlbmNvZGVUeXBlQnl0ZSxqbiBhcyBlbmNyeXB0LHN0IGFzIGVuZ2luZUV2ZW50LEpuIGFzIGVudW1pZnksRWUgYXMgZm9ybWF0QWNjb3VudElkLGduIGFzIGZvcm1hdEFjY291bnRXaXRoQ2hhaW4seWUgYXMgZm9ybWF0Q2hhaW5JZCxuZSBhcyBmb3JtYXRFeHBpcmVyVGFyZ2V0LG50IGFzIGZvcm1hdElkVGFyZ2V0LFBuIGFzIGZvcm1hdE1lc3NhZ2UsQm4gYXMgZm9ybWF0TWVzc2FnZUNvbnRleHQsemUgYXMgZm9ybWF0UmVsYXlQYXJhbXMsSG4gYXMgZm9ybWF0UmVsYXlScGNVcmwsZXQgYXMgZm9ybWF0VG9waWNUYXJnZXQsTWUgYXMgZm9ybWF0VUEscHQgYXMgZm9ybWF0VXJpLFJuIGFzIGdlbmVyYXRlS2V5UGFpcixBbiBhcyBnZW5lcmF0ZVJhbmRvbUJ5dGVzMzIsVCBhcyBnZXRBY2NvdW50c0NoYWlucyxibiBhcyBnZXRBY2NvdW50c0Zyb21OYW1lc3BhY2VzLGhlIGFzIGdldEFkZHJlc3NGcm9tQWNjb3VudCxObiBhcyBnZXRBZGRyZXNzZXNGcm9tQWNjb3VudHMseG4gYXMgZ2V0QXBwTWV0YWRhdGEsdmUgYXMgZ2V0Q2hhaW5Gcm9tQWNjb3VudCxnZSBhcyBnZXRDaGFpbnNGcm9tQWNjb3VudHMsViBhcyBnZXRDaGFpbnNGcm9tTmFtZXNwYWNlLE9uIGFzIGdldENoYWluc0Zyb21OYW1lc3BhY2VzLFNuIGFzIGdldENoYWluc0Zyb21SZXF1aXJlZE5hbWVzcGFjZXMsYmUgYXMgZ2V0RGlkQWRkcmVzcyxNIGFzIGdldERpZEFkZHJlc3NTZWdtZW50cyxOZSBhcyBnZXREaWRDaGFpbklkLGVlIGFzIGdldEVudmlyb25tZW50LHFuIGFzIGdldEh0dHBVcmwsTiBhcyBnZXRJbnRlcm5hbEVycm9yLFZlIGFzIGdldEphdmFzY3JpcHRJRCxEZSBhcyBnZXRKYXZhc2NyaXB0T1Msa2UgYXMgZ2V0TGFzdEl0ZW1zLEluIGFzIGdldE5hbWVzcGFjZWREaWRDaGFpbklkLFllIGFzIGdldE5hbWVzcGFjZXNDaGFpbnMsSmUgYXMgZ2V0TmFtZXNwYWNlc0V2ZW50c0ZvckNoYWluSWQsV2UgYXMgZ2V0TmFtZXNwYWNlc01ldGhvZHNGb3JDaGFpbklkLEZuIGFzIGdldFJlbGF5Q2xpZW50TWV0YWRhdGEsY3QgYXMgZ2V0UmVsYXlQcm90b2NvbEFwaSxpdCBhcyBnZXRSZWxheVByb3RvY29sTmFtZSxidCBhcyBnZXRSZXF1aXJlZE5hbWVzcGFjZXNGcm9tTmFtZXNwYWNlcyxSIGFzIGdldFNka0Vycm9yLEIgYXMgZ2V0VW5pcXVlVmFsdWVzLGIgYXMgaGFzT3ZlcmxhcCxfbiBhcyBoYXNoS2V5LHduIGFzIGhhc2hNZXNzYWdlLENlIGFzIGlzQnJvd3Nlcix0ZSBhcyBpc0NhaXBOYW1lc3BhY2UsY24gYXMgaXNDb25mb3JtaW5nTmFtZXNwYWNlcyxvdCBhcyBpc0V4cGlyZWQsWCBhcyBpc05vZGUsUnQgYXMgaXNQcm9wb3NhbFN0cnVjdCxqZSBhcyBpc1JlYWN0TmF0aXZlLFB0IGFzIGlzU2Vzc2lvbkNvbXBhdGlibGUsQXQgYXMgaXNTZXNzaW9uU3RydWN0LERuIGFzIGlzVHlwZU9uZUVudmVsb3BlLFMgYXMgaXNVbmRlZmluZWQsWmUgYXMgaXNWYWxpZEFjY291bnRJZCxubiBhcyBpc1ZhbGlkQWNjb3VudHMscm4gYXMgaXNWYWxpZEFjdGlvbnMsQyBhcyBpc1ZhbGlkQXJyYXksSCBhcyBpc1ZhbGlkQ2hhaW5JZCxYZSBhcyBpc1ZhbGlkQ2hhaW5zLFV0IGFzIGlzVmFsaWRDb250cm9sbGVyLCR0IGFzIGlzVmFsaWRFcnJvclJlYXNvbixNdCBhcyBpc1ZhbGlkRXZlbnQsanQgYXMgaXNWYWxpZElkLHRuIGFzIGlzVmFsaWROYW1lc3BhY2VBY2NvdW50cyxzZSBhcyBpc1ZhbGlkTmFtZXNwYWNlQWN0aW9ucyxlbiBhcyBpc1ZhbGlkTmFtZXNwYWNlQ2hhaW5zLG9lIGFzIGlzVmFsaWROYW1lc3BhY2VNZXRob2RzT3JFdmVudHMsb24gYXMgaXNWYWxpZE5hbWVzcGFjZXMsS3QgYXMgaXNWYWxpZE5hbWVzcGFjZXNDaGFpbklkLEx0IGFzIGlzVmFsaWROYW1lc3BhY2VzRXZlbnQsa3QgYXMgaXNWYWxpZE5hbWVzcGFjZXNSZXF1ZXN0LEYgYXMgaXNWYWxpZE51bWJlcix4IGFzIGlzVmFsaWRPYmplY3QsQ3QgYXMgaXNWYWxpZFBhcmFtcyxzbiBhcyBpc1ZhbGlkUmVsYXksd3QgYXMgaXNWYWxpZFJlbGF5cyxEdCBhcyBpc1ZhbGlkUmVxdWVzdCxIdCBhcyBpc1ZhbGlkUmVxdWVzdEV4cGlyeSxfdCBhcyBpc1ZhbGlkUmVxdWlyZWROYW1lc3BhY2VzLFZ0IGFzIGlzVmFsaWRSZXNwb25zZSxtIGFzIGlzVmFsaWRTdHJpbmcsVHQgYXMgaXNWYWxpZFVybCxXbiBhcyBtYXBFbnRyaWVzLEduIGFzIG1hcFRvT2JqLE8gYXMgbWVyZ2VBcnJheXMscmUgYXMgbm9ybWFsaXplTmFtZXNwYWNlcyxZbiBhcyBvYmpUb01hcCx6IGFzIHBhcnNlQWNjb3VudElkLG1lIGFzIHBhcnNlQ2hhaW5JZCxLZSBhcyBwYXJzZUNvbnRleHROYW1lcyx0dCBhcyBwYXJzZUV4cGlyZXJUYXJnZXQsUWUgYXMgcGFyc2VOYW1lc3BhY2VLZXkscWUgYXMgcGFyc2VSZWxheVBhcmFtcyxmdCBhcyBwYXJzZVVyaSxJZSBhcyBzZXJpYWxpemUsJG4gYXMgdmFsaWRhdGVEZWNvZGluZyxQZSBhcyB2YWxpZGF0ZUVuY29kaW5nfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzLmpzLm1hcFxuIiwiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqLCBwcmVkaWNhdGUpIHtcblx0dmFyIHJldCA9IHt9O1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdHZhciBpc0FyciA9IEFycmF5LmlzQXJyYXkocHJlZGljYXRlKTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIga2V5ID0ga2V5c1tpXTtcblx0XHR2YXIgdmFsID0gb2JqW2tleV07XG5cblx0XHRpZiAoaXNBcnIgPyBwcmVkaWNhdGUuaW5kZXhPZihrZXkpICE9PSAtMSA6IHByZWRpY2F0ZShrZXksIHZhbCwgb2JqKSkge1xuXHRcdFx0cmV0W2tleV0gPSB2YWw7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5jb25zdCBzdHJpY3RVcmlFbmNvZGUgPSByZXF1aXJlKCdzdHJpY3QtdXJpLWVuY29kZScpO1xuY29uc3QgZGVjb2RlQ29tcG9uZW50ID0gcmVxdWlyZSgnZGVjb2RlLXVyaS1jb21wb25lbnQnKTtcbmNvbnN0IHNwbGl0T25GaXJzdCA9IHJlcXVpcmUoJ3NwbGl0LW9uLWZpcnN0Jyk7XG5jb25zdCBmaWx0ZXJPYmplY3QgPSByZXF1aXJlKCdmaWx0ZXItb2JqJyk7XG5cbmNvbnN0IGlzTnVsbE9yVW5kZWZpbmVkID0gdmFsdWUgPT4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZDtcblxuY29uc3QgZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyID0gU3ltYm9sKCdlbmNvZGVGcmFnbWVudElkZW50aWZpZXInKTtcblxuZnVuY3Rpb24gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0c3dpdGNoIChvcHRpb25zLmFycmF5Rm9ybWF0KSB7XG5cdFx0Y2FzZSAnaW5kZXgnOlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBpbmRleCA9IHJlc3VsdC5sZW5ndGg7XG5cblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1snLCBpbmRleCwgJ10nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdC4uLnJlc3VsdCxcblx0XHRcdFx0XHRbZW5jb2RlKGtleSwgb3B0aW9ucyksICdbJywgZW5jb2RlKGluZGV4LCBvcHRpb25zKSwgJ109JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJylcblx0XHRcdFx0XTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1tdJ10uam9pbignJyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJ1tdPScsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4oJycpXTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdjb2xvbi1saXN0LXNlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4ga2V5ID0+IChyZXN1bHQsIHZhbHVlKSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHR2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdFx0KG9wdGlvbnMuc2tpcE51bGwgJiYgdmFsdWUgPT09IG51bGwpIHx8XG5cdFx0XHRcdFx0KG9wdGlvbnMuc2tpcEVtcHR5U3RyaW5nICYmIHZhbHVlID09PSAnJylcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdHJldHVybiBbLi4ucmVzdWx0LCBbZW5jb2RlKGtleSwgb3B0aW9ucyksICc6bGlzdD0nXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgW2VuY29kZShrZXksIG9wdGlvbnMpLCAnOmxpc3Q9JywgZW5jb2RlKHZhbHVlLCBvcHRpb25zKV0uam9pbignJyldO1xuXHRcdFx0fTtcblxuXHRcdGNhc2UgJ2NvbW1hJzpcblx0XHRjYXNlICdzZXBhcmF0b3InOlxuXHRcdGNhc2UgJ2JyYWNrZXQtc2VwYXJhdG9yJzoge1xuXHRcdFx0Y29uc3Qga2V5VmFsdWVTZXAgPSBvcHRpb25zLmFycmF5Rm9ybWF0ID09PSAnYnJhY2tldC1zZXBhcmF0b3InID9cblx0XHRcdFx0J1tdPScgOlxuXHRcdFx0XHQnPSc7XG5cblx0XHRcdHJldHVybiBrZXkgPT4gKHJlc3VsdCwgdmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHZhbHVlID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwTnVsbCAmJiB2YWx1ZSA9PT0gbnVsbCkgfHxcblx0XHRcdFx0XHQob3B0aW9ucy5za2lwRW1wdHlTdHJpbmcgJiYgdmFsdWUgPT09ICcnKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhbnNsYXRlIG51bGwgdG8gYW4gZW1wdHkgc3RyaW5nIHNvIHRoYXQgaXQgZG9lc24ndCBzZXJpYWxpemUgYXMgJ251bGwnXG5cdFx0XHRcdHZhbHVlID0gdmFsdWUgPT09IG51bGwgPyAnJyA6IHZhbHVlO1xuXG5cdFx0XHRcdGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIFtbZW5jb2RlKGtleSwgb3B0aW9ucyksIGtleVZhbHVlU2VwLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW1tyZXN1bHQsIGVuY29kZSh2YWx1ZSwgb3B0aW9ucyldLmpvaW4ob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcildO1xuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIGtleSA9PiAocmVzdWx0LCB2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0dmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBOdWxsICYmIHZhbHVlID09PSBudWxsKSB8fFxuXHRcdFx0XHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiB2YWx1ZSA9PT0gJycpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gWy4uLnJlc3VsdCwgZW5jb2RlKGtleSwgb3B0aW9ucyldO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFsuLi5yZXN1bHQsIFtlbmNvZGUoa2V5LCBvcHRpb25zKSwgJz0nLCBlbmNvZGUodmFsdWUsIG9wdGlvbnMpXS5qb2luKCcnKV07XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhcnNlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpIHtcblx0bGV0IHJlc3VsdDtcblxuXHRzd2l0Y2ggKG9wdGlvbnMuYXJyYXlGb3JtYXQpIHtcblx0XHRjYXNlICdpbmRleCc6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdHJlc3VsdCA9IC9cXFsoXFxkKilcXF0kLy5leGVjKGtleSk7XG5cblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoL1xcW1xcZCpcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghcmVzdWx0KSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0ge307XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldW3Jlc3VsdFsxXV0gPSB2YWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0Jzpcblx0XHRcdHJldHVybiAoa2V5LCB2YWx1ZSwgYWNjdW11bGF0b3IpID0+IHtcblx0XHRcdFx0cmVzdWx0ID0gLyhcXFtcXF0pJC8uZXhlYyhrZXkpO1xuXHRcdFx0XHRrZXkgPSBrZXkucmVwbGFjZSgvXFxbXFxdJC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29sb24tbGlzdC1zZXBhcmF0b3InOlxuXHRcdFx0cmV0dXJuIChrZXksIHZhbHVlLCBhY2N1bXVsYXRvcikgPT4ge1xuXHRcdFx0XHRyZXN1bHQgPSAvKDpsaXN0KSQvLmV4ZWMoa2V5KTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoLzpsaXN0JC8sICcnKTtcblxuXHRcdFx0XHRpZiAoIXJlc3VsdCkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYWNjdW11bGF0b3Jba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFt2YWx1ZV07XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXG5cdFx0Y2FzZSAnY29tbWEnOlxuXHRcdGNhc2UgJ3NlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLmluY2x1ZGVzKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXHRcdFx0XHRjb25zdCBpc0VuY29kZWRBcnJheSA9ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmICFpc0FycmF5ICYmIGRlY29kZSh2YWx1ZSwgb3B0aW9ucykuaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcikpO1xuXHRcdFx0XHR2YWx1ZSA9IGlzRW5jb2RlZEFycmF5ID8gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSA6IHZhbHVlO1xuXHRcdFx0XHRjb25zdCBuZXdWYWx1ZSA9IGlzQXJyYXkgfHwgaXNFbmNvZGVkQXJyYXkgPyB2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpIDogdmFsdWUgPT09IG51bGwgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSBuZXdWYWx1ZTtcblx0XHRcdH07XG5cblx0XHRjYXNlICdicmFja2V0LXNlcGFyYXRvcic6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGlzQXJyYXkgPSAvKFxcW1xcXSkkLy50ZXN0KGtleSk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9cXFtcXF0kLywgJycpO1xuXG5cdFx0XHRcdGlmICghaXNBcnJheSkge1xuXHRcdFx0XHRcdGFjY3VtdWxhdG9yW2tleV0gPSB2YWx1ZSA/IGRlY29kZSh2YWx1ZSwgb3B0aW9ucykgOiB2YWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBhcnJheVZhbHVlID0gdmFsdWUgPT09IG51bGwgP1xuXHRcdFx0XHRcdFtdIDpcblx0XHRcdFx0XHR2YWx1ZS5zcGxpdChvcHRpb25zLmFycmF5Rm9ybWF0U2VwYXJhdG9yKS5tYXAoaXRlbSA9PiBkZWNvZGUoaXRlbSwgb3B0aW9ucykpO1xuXG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gYXJyYXlWYWx1ZTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gW10uY29uY2F0KGFjY3VtdWxhdG9yW2tleV0sIGFycmF5VmFsdWUpO1xuXHRcdFx0fTtcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gKGtleSwgdmFsdWUsIGFjY3VtdWxhdG9yKSA9PiB7XG5cdFx0XHRcdGlmIChhY2N1bXVsYXRvcltrZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRhY2N1bXVsYXRvcltrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YWNjdW11bGF0b3Jba2V5XSA9IFtdLmNvbmNhdChhY2N1bXVsYXRvcltrZXldLCB2YWx1ZSk7XG5cdFx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3IodmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgfHwgdmFsdWUubGVuZ3RoICE9PSAxKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignYXJyYXlGb3JtYXRTZXBhcmF0b3IgbXVzdCBiZSBzaW5nbGUgY2hhcmFjdGVyIHN0cmluZycpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWx1ZSwgb3B0aW9ucykge1xuXHRpZiAob3B0aW9ucy5lbmNvZGUpIHtcblx0XHRyZXR1cm4gb3B0aW9ucy5zdHJpY3QgPyBzdHJpY3RVcmlFbmNvZGUodmFsdWUpIDogZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlKHZhbHVlLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmRlY29kZSkge1xuXHRcdHJldHVybiBkZWNvZGVDb21wb25lbnQodmFsdWUpO1xuXHR9XG5cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiBrZXlzU29ydGVyKGlucHV0KSB7XG5cdGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuXHRcdHJldHVybiBpbnB1dC5zb3J0KCk7XG5cdH1cblxuXHRpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0Jykge1xuXHRcdHJldHVybiBrZXlzU29ydGVyKE9iamVjdC5rZXlzKGlucHV0KSlcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBOdW1iZXIoYSkgLSBOdW1iZXIoYikpXG5cdFx0XHQubWFwKGtleSA9PiBpbnB1dFtrZXldKTtcblx0fVxuXG5cdHJldHVybiBpbnB1dDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSGFzaChpbnB1dCkge1xuXHRjb25zdCBoYXNoU3RhcnQgPSBpbnB1dC5pbmRleE9mKCcjJyk7XG5cdGlmIChoYXNoU3RhcnQgIT09IC0xKSB7XG5cdFx0aW5wdXQgPSBpbnB1dC5zbGljZSgwLCBoYXNoU3RhcnQpO1xuXHR9XG5cblx0cmV0dXJuIGlucHV0O1xufVxuXG5mdW5jdGlvbiBnZXRIYXNoKHVybCkge1xuXHRsZXQgaGFzaCA9ICcnO1xuXHRjb25zdCBoYXNoU3RhcnQgPSB1cmwuaW5kZXhPZignIycpO1xuXHRpZiAoaGFzaFN0YXJ0ICE9PSAtMSkge1xuXHRcdGhhc2ggPSB1cmwuc2xpY2UoaGFzaFN0YXJ0KTtcblx0fVxuXG5cdHJldHVybiBoYXNoO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0KGlucHV0KSB7XG5cdGlucHV0ID0gcmVtb3ZlSGFzaChpbnB1dCk7XG5cdGNvbnN0IHF1ZXJ5U3RhcnQgPSBpbnB1dC5pbmRleE9mKCc/Jyk7XG5cdGlmIChxdWVyeVN0YXJ0ID09PSAtMSkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdHJldHVybiBpbnB1dC5zbGljZShxdWVyeVN0YXJ0ICsgMSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVmFsdWUodmFsdWUsIG9wdGlvbnMpIHtcblx0aWYgKG9wdGlvbnMucGFyc2VOdW1iZXJzICYmICFOdW1iZXIuaXNOYU4oTnVtYmVyKHZhbHVlKSkgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpICE9PSAnJykpIHtcblx0XHR2YWx1ZSA9IE51bWJlcih2YWx1ZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5wYXJzZUJvb2xlYW5zICYmIHZhbHVlICE9PSBudWxsICYmICh2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJykpIHtcblx0XHR2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcblx0fVxuXG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcGFyc2UocXVlcnksIG9wdGlvbnMpIHtcblx0b3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuXHRcdGRlY29kZTogdHJ1ZSxcblx0XHRzb3J0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZScsXG5cdFx0YXJyYXlGb3JtYXRTZXBhcmF0b3I6ICcsJyxcblx0XHRwYXJzZU51bWJlcnM6IGZhbHNlLFxuXHRcdHBhcnNlQm9vbGVhbnM6IGZhbHNlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdHZhbGlkYXRlQXJyYXlGb3JtYXRTZXBhcmF0b3Iob3B0aW9ucy5hcnJheUZvcm1hdFNlcGFyYXRvcik7XG5cblx0Y29uc3QgZm9ybWF0dGVyID0gcGFyc2VyRm9yQXJyYXlGb3JtYXQob3B0aW9ucyk7XG5cblx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB3aXRoIG5vIHByb3RvdHlwZVxuXHRjb25zdCByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5cdGlmICh0eXBlb2YgcXVlcnkgIT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdHF1ZXJ5ID0gcXVlcnkudHJpbSgpLnJlcGxhY2UoL15bPyMmXS8sICcnKTtcblxuXHRpZiAoIXF1ZXJ5KSB7XG5cdFx0cmV0dXJuIHJldDtcblx0fVxuXG5cdGZvciAoY29uc3QgcGFyYW0gb2YgcXVlcnkuc3BsaXQoJyYnKSkge1xuXHRcdGlmIChwYXJhbSA9PT0gJycpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGxldCBba2V5LCB2YWx1ZV0gPSBzcGxpdE9uRmlyc3Qob3B0aW9ucy5kZWNvZGUgPyBwYXJhbS5yZXBsYWNlKC9cXCsvZywgJyAnKSA6IHBhcmFtLCAnPScpO1xuXG5cdFx0Ly8gTWlzc2luZyBgPWAgc2hvdWxkIGJlIGBudWxsYDpcblx0XHQvLyBodHRwOi8vdzMub3JnL1RSLzIwMTIvV0QtdXJsLTIwMTIwNTI0LyNjb2xsZWN0LXVybC1wYXJhbWV0ZXJzXG5cdFx0dmFsdWUgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IFsnY29tbWEnLCAnc2VwYXJhdG9yJywgJ2JyYWNrZXQtc2VwYXJhdG9yJ10uaW5jbHVkZXMob3B0aW9ucy5hcnJheUZvcm1hdCkgPyB2YWx1ZSA6IGRlY29kZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0Zm9ybWF0dGVyKGRlY29kZShrZXksIG9wdGlvbnMpLCB2YWx1ZSwgcmV0KTtcblx0fVxuXG5cdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHJldCkpIHtcblx0XHRjb25zdCB2YWx1ZSA9IHJldFtrZXldO1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModmFsdWUpKSB7XG5cdFx0XHRcdHZhbHVlW2tdID0gcGFyc2VWYWx1ZSh2YWx1ZVtrXSwgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldFtrZXldID0gcGFyc2VWYWx1ZSh2YWx1ZSwgb3B0aW9ucyk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc29ydCA9PT0gZmFsc2UpIHtcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG5cblx0cmV0dXJuIChvcHRpb25zLnNvcnQgPT09IHRydWUgPyBPYmplY3Qua2V5cyhyZXQpLnNvcnQoKSA6IE9iamVjdC5rZXlzKHJldCkuc29ydChvcHRpb25zLnNvcnQpKS5yZWR1Y2UoKHJlc3VsdCwga2V5KSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSByZXRba2V5XTtcblx0XHRpZiAoQm9vbGVhbih2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdC8vIFNvcnQgb2JqZWN0IGtleXMsIG5vdCB2YWx1ZXNcblx0XHRcdHJlc3VsdFtrZXldID0ga2V5c1NvcnRlcih2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59XG5cbmV4cG9ydHMuZXh0cmFjdCA9IGV4dHJhY3Q7XG5leHBvcnRzLnBhcnNlID0gcGFyc2U7XG5cbmV4cG9ydHMuc3RyaW5naWZ5ID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRpZiAoIW9iamVjdCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRlbmNvZGU6IHRydWUsXG5cdFx0c3RyaWN0OiB0cnVlLFxuXHRcdGFycmF5Rm9ybWF0OiAnbm9uZScsXG5cdFx0YXJyYXlGb3JtYXRTZXBhcmF0b3I6ICcsJ1xuXHR9LCBvcHRpb25zKTtcblxuXHR2YWxpZGF0ZUFycmF5Rm9ybWF0U2VwYXJhdG9yKG9wdGlvbnMuYXJyYXlGb3JtYXRTZXBhcmF0b3IpO1xuXG5cdGNvbnN0IHNob3VsZEZpbHRlciA9IGtleSA9PiAoXG5cdFx0KG9wdGlvbnMuc2tpcE51bGwgJiYgaXNOdWxsT3JVbmRlZmluZWQob2JqZWN0W2tleV0pKSB8fFxuXHRcdChvcHRpb25zLnNraXBFbXB0eVN0cmluZyAmJiBvYmplY3Rba2V5XSA9PT0gJycpXG5cdCk7XG5cblx0Y29uc3QgZm9ybWF0dGVyID0gZW5jb2RlckZvckFycmF5Rm9ybWF0KG9wdGlvbnMpO1xuXG5cdGNvbnN0IG9iamVjdENvcHkgPSB7fTtcblxuXHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG5cdFx0aWYgKCFzaG91bGRGaWx0ZXIoa2V5KSkge1xuXHRcdFx0b2JqZWN0Q29weVtrZXldID0gb2JqZWN0W2tleV07XG5cdFx0fVxuXHR9XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdENvcHkpO1xuXG5cdGlmIChvcHRpb25zLnNvcnQgIT09IGZhbHNlKSB7XG5cdFx0a2V5cy5zb3J0KG9wdGlvbnMuc29ydCk7XG5cdH1cblxuXHRyZXR1cm4ga2V5cy5tYXAoa2V5ID0+IHtcblx0XHRjb25zdCB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG5cdFx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiAnJztcblx0XHR9XG5cblx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdHJldHVybiBlbmNvZGUoa2V5LCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdGlmICh2YWx1ZS5sZW5ndGggPT09IDAgJiYgb3B0aW9ucy5hcnJheUZvcm1hdCA9PT0gJ2JyYWNrZXQtc2VwYXJhdG9yJykge1xuXHRcdFx0XHRyZXR1cm4gZW5jb2RlKGtleSwgb3B0aW9ucykgKyAnW10nO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdFx0LnJlZHVjZShmb3JtYXR0ZXIoa2V5KSwgW10pXG5cdFx0XHRcdC5qb2luKCcmJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVuY29kZShrZXksIG9wdGlvbnMpICsgJz0nICsgZW5jb2RlKHZhbHVlLCBvcHRpb25zKTtcblx0fSkuZmlsdGVyKHggPT4geC5sZW5ndGggPiAwKS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnRzLnBhcnNlVXJsID0gKHVybCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZGVjb2RlOiB0cnVlXG5cdH0sIG9wdGlvbnMpO1xuXG5cdGNvbnN0IFt1cmxfLCBoYXNoXSA9IHNwbGl0T25GaXJzdCh1cmwsICcjJyk7XG5cblx0cmV0dXJuIE9iamVjdC5hc3NpZ24oXG5cdFx0e1xuXHRcdFx0dXJsOiB1cmxfLnNwbGl0KCc/JylbMF0gfHwgJycsXG5cdFx0XHRxdWVyeTogcGFyc2UoZXh0cmFjdCh1cmwpLCBvcHRpb25zKVxuXHRcdH0sXG5cdFx0b3B0aW9ucyAmJiBvcHRpb25zLnBhcnNlRnJhZ21lbnRJZGVudGlmaWVyICYmIGhhc2ggPyB7ZnJhZ21lbnRJZGVudGlmaWVyOiBkZWNvZGUoaGFzaCwgb3B0aW9ucyl9IDoge31cblx0KTtcbn07XG5cbmV4cG9ydHMuc3RyaW5naWZ5VXJsID0gKG9iamVjdCwgb3B0aW9ucykgPT4ge1xuXHRvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG5cdFx0ZW5jb2RlOiB0cnVlLFxuXHRcdHN0cmljdDogdHJ1ZSxcblx0XHRbZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyXTogdHJ1ZVxuXHR9LCBvcHRpb25zKTtcblxuXHRjb25zdCB1cmwgPSByZW1vdmVIYXNoKG9iamVjdC51cmwpLnNwbGl0KCc/JylbMF0gfHwgJyc7XG5cdGNvbnN0IHF1ZXJ5RnJvbVVybCA9IGV4cG9ydHMuZXh0cmFjdChvYmplY3QudXJsKTtcblx0Y29uc3QgcGFyc2VkUXVlcnlGcm9tVXJsID0gZXhwb3J0cy5wYXJzZShxdWVyeUZyb21VcmwsIHtzb3J0OiBmYWxzZX0pO1xuXG5cdGNvbnN0IHF1ZXJ5ID0gT2JqZWN0LmFzc2lnbihwYXJzZWRRdWVyeUZyb21VcmwsIG9iamVjdC5xdWVyeSk7XG5cdGxldCBxdWVyeVN0cmluZyA9IGV4cG9ydHMuc3RyaW5naWZ5KHF1ZXJ5LCBvcHRpb25zKTtcblx0aWYgKHF1ZXJ5U3RyaW5nKSB7XG5cdFx0cXVlcnlTdHJpbmcgPSBgPyR7cXVlcnlTdHJpbmd9YDtcblx0fVxuXG5cdGxldCBoYXNoID0gZ2V0SGFzaChvYmplY3QudXJsKTtcblx0aWYgKG9iamVjdC5mcmFnbWVudElkZW50aWZpZXIpIHtcblx0XHRoYXNoID0gYCMke29wdGlvbnNbZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyXSA/IGVuY29kZShvYmplY3QuZnJhZ21lbnRJZGVudGlmaWVyLCBvcHRpb25zKSA6IG9iamVjdC5mcmFnbWVudElkZW50aWZpZXJ9YDtcblx0fVxuXG5cdHJldHVybiBgJHt1cmx9JHtxdWVyeVN0cmluZ30ke2hhc2h9YDtcbn07XG5cbmV4cG9ydHMucGljayA9IChpbnB1dCwgZmlsdGVyLCBvcHRpb25zKSA9PiB7XG5cdG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcblx0XHRwYXJzZUZyYWdtZW50SWRlbnRpZmllcjogdHJ1ZSxcblx0XHRbZW5jb2RlRnJhZ21lbnRJZGVudGlmaWVyXTogZmFsc2Vcblx0fSwgb3B0aW9ucyk7XG5cblx0Y29uc3Qge3VybCwgcXVlcnksIGZyYWdtZW50SWRlbnRpZmllcn0gPSBleHBvcnRzLnBhcnNlVXJsKGlucHV0LCBvcHRpb25zKTtcblx0cmV0dXJuIGV4cG9ydHMuc3RyaW5naWZ5VXJsKHtcblx0XHR1cmwsXG5cdFx0cXVlcnk6IGZpbHRlck9iamVjdChxdWVyeSwgZmlsdGVyKSxcblx0XHRmcmFnbWVudElkZW50aWZpZXJcblx0fSwgb3B0aW9ucyk7XG59O1xuXG5leHBvcnRzLmV4Y2x1ZGUgPSAoaW5wdXQsIGZpbHRlciwgb3B0aW9ucykgPT4ge1xuXHRjb25zdCBleGNsdXNpb25GaWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBrZXkgPT4gIWZpbHRlci5pbmNsdWRlcyhrZXkpIDogKGtleSwgdmFsdWUpID0+ICFmaWx0ZXIoa2V5LCB2YWx1ZSk7XG5cblx0cmV0dXJuIGV4cG9ydHMucGljayhpbnB1dCwgZXhjbHVzaW9uRmlsdGVyLCBvcHRpb25zKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=